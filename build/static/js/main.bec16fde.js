/*! For license information please see main.bec16fde.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),i=n(43),s=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(a(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var f=Object.assign,g=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),T=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope");var w=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var R=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var I=Symbol.iterator;function x(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var C=Symbol.for("react.client.reference");function D(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===C?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case v:return"Fragment";case E:return"Profiler";case y:return"StrictMode";case _:return"Suspense";case k:return"SuspenseList";case w:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case T:return e.displayName||"Context";case b:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:D(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return D(e(t))}catch(n){}}return null}var P=Array.isArray,O=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},N=[],B=-1;function U(e){return{current:e}}function G(e){0>B||(e.current=N[B],N[B]=null,B--)}function H(e,t){B++,N[B]=e.current,e.current=t}var j,z,V=U(null),K=U(null),Y=U(null),W=U(null);function q(e,t){switch(H(Y,t),H(K,e),H(V,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?vd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=yd(t=vd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}G(V),H(V,e)}function X(){G(V),G(K),G(Y)}function Q(e){null!==e.memoizedState&&H(W,e);var t=V.current,n=yd(t,e.type);t!==n&&(H(K,e),H(V,n))}function $(e){K.current===e&&(G(V),G(K)),W.current===e&&(G(W),uh._currentValue=F)}function Z(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||"",z=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+j+e+z}var J=!1;function ee(e,t){if(!e||J)return"";J=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{J=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Z(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return Z(e.type);case 16:return Z("Lazy");case 13:return e.child!==t&&null!==t?Z("Suspense Fallback"):Z("Suspense");case 19:return Z("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return Z("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}var re=Object.prototype.hasOwnProperty,ie=r.unstable_scheduleCallback,se=r.unstable_cancelCallback,ae=r.unstable_shouldYield,oe=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,de=r.unstable_UserBlockingPriority,he=r.unstable_NormalPriority,fe=r.unstable_LowPriority,ge=r.unstable_IdlePriority,pe=r.log,me=r.unstable_setDisableYieldValue,ve=null,ye=null;function Ee(e){if("function"===typeof pe&&me(e),ye&&"function"===typeof ye.setStrictMode)try{ye.setStrictMode(ve,e)}catch(t){}}var be=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(Te(e)/Se|0)|0},Te=Math.log,Se=Math.LN2;var _e=256,ke=262144,Ae=4194304;function Le(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function we(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~s)?i=Le(r):0!==(a&=o)?i=Le(a):n||0!==(n=o&~e)&&(i=Le(n)):0!==(o=r&~s)?i=Le(o):0!==a?i=Le(a):n||0!==(n=r&~e)&&(i=Le(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:i}function Re(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ie(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function xe(){var e=Ae;return 0===(62914560&(Ae<<=1))&&(Ae=4194304),e}function Ce(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function De(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Pe(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-be(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Oe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-be(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Me(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Fe(n))&(e.suspendedLanes|t))?0:n}function Fe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ne(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Be(){var e=M.p;return 0!==e?e:void 0===(e=window.event)?32:Lh(e.type)}function Ue(e,t){var n=M.p;try{return M.p=e,t()}finally{M.p=n}}var Ge=Math.random().toString(36).slice(2),He="__reactFiber$"+Ge,je="__reactProps$"+Ge,ze="__reactContainer$"+Ge,Ve="__reactEvents$"+Ge,Ke="__reactListeners$"+Ge,Ye="__reactHandles$"+Ge,We="__reactResources$"+Ge,qe="__reactMarker$"+Ge;function Xe(e){delete e[He],delete e[je],delete e[Ve],delete e[Ke],delete e[Ye]}function Qe(e){var t=e[He];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ze]||n[He]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Fd(e);null!==e;){if(n=e[He])return n;e=Fd(e)}return t}n=(e=n).parentNode}return null}function $e(e){if(e=e[He]||e[ze]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Ze(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function Je(e){var t=e[We];return t||(t=e[We]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[qe]=!0}var tt=new Set,nt={};function rt(e,t){it(e,t),it(e+"Capture",t)}function it(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var st=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),at={},ot={};function lt(e,t,n){if(i=t,re.call(ot,i)||!re.call(at,i)&&(st.test(i)?ot[i]=!0:(at[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function gt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ht(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var mt=/[\n"\\]/g;function vt(e){return e.replace(mt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function yt(e,t,n,r,i,s,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?bt(e,a,dt(t)):null!=n?bt(e,a,dt(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+dt(o):e.removeAttribute("name")}function Et(e,t,n,r,i,s,a,o){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return void ft(e);n=null!=n?""+dt(n):"",t=null!=t?""+dt(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a),ft(e)}function bt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Tt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function St(e,t,n){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+dt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function _t(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(P(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=dt(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),ft(e)}function kt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var At=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||At.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function wt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&Lt(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&Lt(e,s,t[s])}function Rt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var It=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ct(e){return xt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Dt(){}var Pt=null;function Ot(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Mt=null,Ft=null;function Nt(e){var t=$e(e);if(t&&(e=t.stateNode)){var n=e[je]||null;e:switch(e=t.stateNode,t.type){case"input":if(yt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+vt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[je]||null;if(!i)throw Error(a(90));yt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&gt(r)}break e;case"textarea":St(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&Tt(e,!!n.multiple,t,!1)}}}var Bt=!1;function Ut(e,t,n){if(Bt)return e(t,n);Bt=!0;try{return e(t)}finally{if(Bt=!1,(null!==Mt||null!==Ft)&&(Jc(),Mt&&(t=Mt,e=Ft,Ft=Mt=null,Nt(t),e)))for(t=0;t<e.length;t++)Nt(e[t])}}function Gt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[je]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ht=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),jt=!1;if(Ht)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){jt=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch($h){jt=!1}var Vt=null,Kt=null,Yt=null;function Wt(){if(Yt)return Yt;var e,t,n=Kt,r=n.length,i="value"in Vt?Vt.value:Vt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Yt=i.slice(e,1<t?1-t:void 0)}function qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Xt(){return!0}function Qt(){return!1}function $t(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Xt:Qt,this.isPropagationStopped=Qt,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Xt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Xt)},persist:function(){},isPersistent:Xt}),t}var Zt,Jt,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=$t(tn),rn=f({},tn,{view:0,detail:0}),sn=$t(rn),an=f({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Zt=e.screenX-en.screenX,Jt=e.screenY-en.screenY):Jt=Zt=0,en=e),Zt)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),on=$t(an),ln=$t(f({},an,{dataTransfer:0})),cn=$t(f({},rn,{relatedTarget:0})),un=$t(f({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),dn=$t(f({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),hn=$t(f({},tn,{data:0})),fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=pn[e])&&!!t[e]}function vn(){return mn}var yn=$t(f({},rn,{key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?gn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vn,charCode:function(e){return"keypress"===e.type?qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),En=$t(f({},an,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),bn=$t(f({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vn})),Tn=$t(f({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Sn=$t(f({},an,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),_n=$t(f({},tn,{newState:0,oldState:0})),kn=[9,13,27,32],An=Ht&&"CompositionEvent"in window,Ln=null;Ht&&"documentMode"in document&&(Ln=document.documentMode);var wn=Ht&&"TextEvent"in window&&!Ln,Rn=Ht&&(!An||Ln&&8<Ln&&11>=Ln),In=String.fromCharCode(32),xn=!1;function Cn(e,t){switch(e){case"keyup":return-1!==kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Pn=!1;var On={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!On[e.type]:"textarea"===t}function Fn(e,t,n,r){Mt?Ft?Ft.push(r):Ft=[r]:Mt=r,0<(t=rd(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Nn=null,Bn=null;function Un(e){Xu(e,0)}function Gn(e){if(gt(Ze(e)))return e}function Hn(e,t){if("change"===e)return t}var jn=!1;if(Ht){var zn;if(Ht){var Vn="oninput"in document;if(!Vn){var Kn=document.createElement("div");Kn.setAttribute("oninput","return;"),Vn="function"===typeof Kn.oninput}zn=Vn}else zn=!1;jn=zn&&(!document.documentMode||9<document.documentMode)}function Yn(){Nn&&(Nn.detachEvent("onpropertychange",Wn),Bn=Nn=null)}function Wn(e){if("value"===e.propertyName&&Gn(Bn)){var t=[];Fn(t,Bn,e,Ot(e)),Ut(Un,t)}}function qn(e,t,n){"focusin"===e?(Yn(),Bn=n,(Nn=t).attachEvent("onpropertychange",Wn)):"focusout"===e&&Yn()}function Xn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn(Bn)}function Qn(e,t){if("click"===e)return Gn(t)}function $n(e,t){if("input"===e||"change"===e)return Gn(t)}var Zn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Jn(e,t){if(Zn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!re.call(t,i)||!Zn(e[i],t[i]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function ir(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var sr=Ht&&"documentMode"in document&&11>=document.documentMode,ar=null,or=null,lr=null,cr=!1;function ur(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;cr||null==ar||ar!==pt(r)||("selectionStart"in(r=ar)&&ir(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},lr&&Jn(lr,r)||(lr=r,0<(r=rd(or,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ar)))}function dr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hr={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},fr={},gr={};function pr(e){if(fr[e])return fr[e];if(!hr[e])return e;var t,n=hr[e];for(t in n)if(n.hasOwnProperty(t)&&t in gr)return fr[e]=n[t];return e}Ht&&(gr=document.createElement("div").style,"AnimationEvent"in window||(delete hr.animationend.animation,delete hr.animationiteration.animation,delete hr.animationstart.animation),"TransitionEvent"in window||delete hr.transitionend.transition);var mr=pr("animationend"),vr=pr("animationiteration"),yr=pr("animationstart"),Er=pr("transitionrun"),br=pr("transitionstart"),Tr=pr("transitioncancel"),Sr=pr("transitionend"),_r=new Map,kr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){_r.set(e,t),rt(t,[e])}kr.push("scrollEnd");var Lr="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},wr=[],Rr=0,Ir=0;function xr(){for(var e=Rr,t=Ir=Rr=0;t<e;){var n=wr[t];wr[t++]=null;var r=wr[t];wr[t++]=null;var i=wr[t];wr[t++]=null;var s=wr[t];if(wr[t++]=null,null!==r&&null!==i){var a=r.pending;null===a?i.next=i:(i.next=a.next,a.next=i),r.pending=i}0!==s&&Or(n,i,s)}}function Cr(e,t,n,r){wr[Rr++]=e,wr[Rr++]=t,wr[Rr++]=n,wr[Rr++]=r,Ir|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Dr(e,t,n,r){return Cr(e,t,n,r),Mr(e)}function Pr(e,t){return Cr(e,null,null,t),Mr(e)}function Or(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-be(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function Mr(e){if(50<Vc)throw Vc=0,Kc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Fr={};function Nr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Br(e,t,n,r){return new Nr(e,t,n,r)}function Ur(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Gr(e,t){var n=e.alternate;return null===n?((n=Br(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Hr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function jr(e,t,n,r,i,s){var o=0;if(r=e,"function"===typeof e)Ur(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,V.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case w:return(e=Br(31,n,t,i)).elementType=w,e.lanes=s,e;case v:return zr(n.children,i,s,t);case y:o=8,i|=24;break;case E:return(e=Br(12,n,t,2|i)).elementType=E,e.lanes=s,e;case _:return(e=Br(13,n,t,i)).elementType=_,e.lanes=s,e;case k:return(e=Br(19,n,t,i)).elementType=k,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:o=10;break e;case b:o=9;break e;case S:o=11;break e;case A:o=14;break e;case L:o=16,r=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Br(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function zr(e,t,n,r){return(e=Br(7,e,r,t)).lanes=n,e}function Vr(e,t,n){return(e=Br(6,e,null,t)).lanes=n,e}function Kr(e){var t=Br(18,null,null,0);return t.stateNode=e,t}function Yr(e,t,n){return(t=Br(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Wr=new WeakMap;function qr(e,t){if("object"===typeof e&&null!==e){var n=Wr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Wr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Xr=[],Qr=0,$r=null,Zr=0,Jr=[],ei=0,ti=null,ni=1,ri="";function ii(e,t){Xr[Qr++]=Zr,Xr[Qr++]=$r,$r=e,Zr=t}function si(e,t,n){Jr[ei++]=ni,Jr[ei++]=ri,Jr[ei++]=ti,ti=e;var r=ni;e=ri;var i=32-be(r)-1;r&=~(1<<i),n+=1;var s=32-be(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,ni=1<<32-be(t)+i|n<<i|r,ri=s+e}else ni=1<<s|n<<i|r,ri=e}function ai(e){null!==e.return&&(ii(e,1),si(e,1,0))}function oi(e){for(;e===$r;)$r=Xr[--Qr],Xr[Qr]=null,Zr=Xr[--Qr],Xr[Qr]=null;for(;e===ti;)ti=Jr[--ei],Jr[ei]=null,ri=Jr[--ei],Jr[ei]=null,ni=Jr[--ei],Jr[ei]=null}function li(e,t){Jr[ei++]=ni,Jr[ei++]=ri,Jr[ei++]=ti,ni=t.id,ri=t.overflow,ti=e}var ci=null,ui=null,di=!1,hi=null,fi=!1,gi=Error(a(519));function pi(e){throw Ti(qr(Error(a(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),gi}function mi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[He]=e,t[je]=r,n){case"dialog":Qu("cancel",t),Qu("close",t);break;case"iframe":case"object":case"embed":Qu("load",t);break;case"video":case"audio":for(n=0;n<Wu.length;n++)Qu(Wu[n],t);break;case"source":Qu("error",t);break;case"img":case"image":case"link":Qu("error",t),Qu("load",t);break;case"details":Qu("toggle",t);break;case"input":Qu("invalid",t),Et(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Qu("invalid",t);break;case"textarea":Qu("invalid",t),_t(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||cd(t.textContent,n)?(null!=r.popover&&(Qu("beforetoggle",t),Qu("toggle",t)),null!=r.onScroll&&Qu("scroll",t),null!=r.onScrollEnd&&Qu("scrollend",t),null!=r.onClick&&(t.onclick=Dt),t=!0):t=!1,t||pi(e,!0)}function vi(e){for(ci=e.return;ci;)switch(ci.tag){case 5:case 31:case 13:return void(fi=!1);case 27:case 3:return void(fi=!0);default:ci=ci.return}}function yi(e){if(e!==ci)return!1;if(!di)return vi(e),di=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||Ed(e.type,e.memoizedProps)),t=!t),t&&ui&&pi(e),vi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));ui=Md(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));ui=Md(e)}else 27===n?(n=ui,Ld(e.type)?(e=Od,Od=null,ui=e):ui=n):ui=ci?Pd(e.stateNode.nextSibling):null;return!0}function Ei(){ui=ci=null,di=!1}function bi(){var e=hi;return null!==e&&(null===xc?xc=e:xc.push.apply(xc,e),hi=null),e}function Ti(e){null===hi?hi=[e]:hi.push(e)}var Si=U(null),_i=null,ki=null;function Ai(e,t,n){H(Si,t._currentValue),t._currentValue=n}function Li(e){e._currentValue=Si.current,G(Si)}function wi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ri(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var o=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),wi(s.return,n,e),r||(o=null);break e}s=l.next}}else if(18===i.tag){if(null===(o=i.return))throw Error(a(341));o.lanes|=n,null!==(s=o.alternate)&&(s.lanes|=n),wi(o,n,e),o=null}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}}function Ii(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var o=i.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=i.type;Zn(i.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(i===W.current){if(null===(o=i.alternate))throw Error(a(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(uh):e=[uh])}i=i.return}null!==e&&Ri(t,e,n,r),t.flags|=262144}function xi(e){for(e=e.firstContext;null!==e;){if(!Zn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ci(e){_i=e,ki=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Di(e){return Oi(_i,e)}function Pi(e,t){return null===_i&&Ci(e),Oi(e,t)}function Oi(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===ki){if(null===e)throw Error(a(308));ki=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ki=ki.next=t;return n}var Mi="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Fi=r.unstable_scheduleCallback,Ni=r.unstable_NormalPriority,Bi={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ui(){return{controller:new Mi,data:new Map,refCount:0}}function Gi(e){e.refCount--,0===e.refCount&&Fi(Ni,function(){e.controller.abort()})}var Hi=null,ji=0,zi=0,Vi=null;function Ki(){if(0===--ji&&null!==Hi){null!==Vi&&(Vi.status="fulfilled");var e=Hi;Hi=null,zi=0,Vi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Yi=O.S;O.S=function(e,t){Pc=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Hi){var n=Hi=[];ji=0,zi=ju(),Vi={status:"pending",value:void 0,then:function(e){n.push(e)}}}ji++,t.then(Ki,Ki)}(0,t),null!==Yi&&Yi(e,t)};var Wi=U(null);function qi(){var e=Wi.current;return null!==e?e:gc.pooledCache}function Xi(e,t){H(Wi,null===t?Wi.current:t.pool)}function Qi(){var e=qi();return null===e?null:{parent:Bi._currentValue,pool:e}}var $i=Error(a(460)),Zi=Error(a(474)),Ji=Error(a(542)),es={then:function(){}};function ts(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ns(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Dt,Dt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw as(e=t.reason),e;default:if("string"===typeof t.status)t.then(Dt,Dt);else{if(null!==(e=gc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw as(e=t.reason),e}throw is=t,$i}}function rs(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw is=t,$i;throw t}}var is=null;function ss(){if(null===is)throw Error(a(459));var e=is;return is=null,e}function as(e){if(e===$i||e===Ji)throw Error(a(483))}var os=null,ls=0;function cs(e){var t=ls;return ls+=1,null===os&&(os=[]),ns(os,e,t)}function us(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ds(e,t){if(t.$$typeof===g)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function hs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Gr(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Vr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===v?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===L&&rs(s)===t.type)?(us(t=i(t,n.props),n),t.return=e,t):(us(t=jr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Yr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=zr(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Vr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return us(n=jr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=Yr(t,e.mode,n)).return=e,t;case L:return h(e,t=rs(t),n)}if(P(t)||x(t))return(t=zr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,cs(t),n);if(t.$$typeof===T)return h(e,Pi(e,t),n);ds(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?c(e,t,n,r):null;case m:return n.key===i?u(e,t,n,r):null;case L:return f(e,t,n=rs(n),r)}if(P(n)||x(n))return null!==i?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,cs(n),r);if(n.$$typeof===T)return f(e,t,Pi(e,n),r);ds(e,n)}return null}function g(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case m:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case L:return g(e,t,n,r=rs(r),i)}if(P(r)||x(r))return d(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return g(e,t,n,cs(r),i);if(r.$$typeof===T)return g(e,t,n,Pi(t,r),i);ds(t,r)}return null}function y(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===v&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var E=u.key;null!==c;){if(c.key===E){if((E=u.type)===v){if(7===c.tag){n(l,c.sibling),(d=i(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===E||"object"===typeof E&&null!==E&&E.$$typeof===L&&rs(E)===c.type){n(l,c.sibling),us(d=i(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===v?((d=zr(u.props.children,l.mode,d,u.key)).return=l,l=d):(us(d=jr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case m:e:{for(E=u.key;null!==c;){if(c.key===E){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=i(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Yr(u,l.mode,d)).return=l,l=d}return o(l);case L:return y(l,c,u=rs(u),d)}if(P(u))return function(i,a,o,l){for(var c=null,u=null,d=a,p=a=0,m=null;null!==d&&p<o.length;p++){d.index>p?(m=d,d=null):m=d.sibling;var v=f(i,d,o[p],l);if(null===v){null===d&&(d=m);break}e&&d&&null===v.alternate&&t(i,d),a=s(v,a,p),null===u?c=v:u.sibling=v,u=v,d=m}if(p===o.length)return n(i,d),di&&ii(i,p),c;if(null===d){for(;p<o.length;p++)null!==(d=h(i,o[p],l))&&(a=s(d,a,p),null===u?c=d:u.sibling=d,u=d);return di&&ii(i,p),c}for(d=r(d);p<o.length;p++)null!==(m=g(d,i,p,o[p],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?p:m.key),a=s(m,a,p),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(i,e)}),di&&ii(i,p),c}(l,c,u,d);if(x(u)){if("function"!==typeof(E=x(u)))throw Error(a(150));return function(i,o,l,c){if(null==l)throw Error(a(151));for(var u=null,d=null,p=o,m=o=0,v=null,y=l.next();null!==p&&!y.done;m++,y=l.next()){p.index>m?(v=p,p=null):v=p.sibling;var E=f(i,p,y.value,c);if(null===E){null===p&&(p=v);break}e&&p&&null===E.alternate&&t(i,p),o=s(E,o,m),null===d?u=E:d.sibling=E,d=E,p=v}if(y.done)return n(i,p),di&&ii(i,m),u;if(null===p){for(;!y.done;m++,y=l.next())null!==(y=h(i,y.value,c))&&(o=s(y,o,m),null===d?u=y:d.sibling=y,d=y);return di&&ii(i,m),u}for(p=r(p);!y.done;m++,y=l.next())null!==(y=g(p,i,m,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),o=s(y,o,m),null===d?u=y:d.sibling=y,d=y);return e&&p.forEach(function(e){return t(i,e)}),di&&ii(i,m),u}(l,c,u=E.call(u),d)}if("function"===typeof u.then)return y(l,c,cs(u),d);if(u.$$typeof===T)return y(l,c,Pi(l,u),d);ds(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=i(c,u)).return=l,l=d):(n(l,c),(d=Vr(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{ls=0;var i=y(e,t,n,r);return os=null,i}catch(a){if(a===$i||a===Ji)throw a;var s=Br(29,a,null,e.mode);return s.lanes=r,s.return=e,s}}}var fs=hs(!0),gs=hs(!1),ps=!1;function ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ys(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Es(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&fc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Mr(e),Or(e,null,n),t}return Cr(e,r,t,n),Mr(e)}function bs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}function Ts(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ss=!1;function _s(){if(Ss){if(null!==Vi)throw Vi}}function ks(e,t,n,r){Ss=!1;var i=e.updateQueue;ps=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var h=-536870913&o.lane,g=h!==o.lane;if(g?(mc&h)===h:(r&h)===h){0!==h&&h===zi&&(Ss=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var p=e,m=o;h=t;var v=n;switch(m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(v,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(v,d,h):p)||void 0===h)break e;d=f({},d,h);break e;case 2:ps=!0}}null!==(h=o.callback)&&(e.flags|=64,g&&(e.flags|=8192),null===(g=i.callbacks)?i.callbacks=[h]:g.push(h))}else g={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=g,l=d):u=u.next=g,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(g=o).next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===s&&(i.shared.lanes=0),kc|=a,e.lanes=a,e.memoizedState=d}}function As(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function Ls(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)As(n[e],t)}var ws=U(null),Rs=U(0);function Is(e,t){H(Rs,e=Sc),H(ws,t),Sc=e|t.baseLanes}function xs(){H(Rs,Sc),H(ws,ws.current)}function Cs(){Sc=Rs.current,G(ws),G(Rs)}var Ds=U(null),Ps=null;function Os(e){var t=e.alternate;H(Us,1&Us.current),H(Ds,e),null===Ps&&(null===t||null!==ws.current||null!==t.memoizedState)&&(Ps=e)}function Ms(e){H(Us,Us.current),H(Ds,e),null===Ps&&(Ps=e)}function Fs(e){22===e.tag?(H(Us,Us.current),H(Ds,e),null===Ps&&(Ps=e)):Ns()}function Ns(){H(Us,Us.current),H(Ds,Ds.current)}function Bs(e){G(Ds),Ps===e&&(Ps=null),G(Us)}var Us=U(0);function Gs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Cd(n)||Dd(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hs=0,js=null,zs=null,Vs=null,Ks=!1,Ys=!1,Ws=!1,qs=0,Xs=0,Qs=null,$s=0;function Zs(){throw Error(a(321))}function Js(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zn(e[n],t[n]))return!1;return!0}function ea(e,t,n,r,i,s){return Hs=s,js=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?mo:vo,Ws=!1,s=n(r,i),Ws=!1,Ys&&(s=na(t,n,r,i)),ta(e),s}function ta(e){O.H=po;var t=null!==zs&&null!==zs.next;if(Hs=0,Vs=zs=js=null,Ks=!1,Xs=0,Qs=null,t)throw Error(a(300));null===e||Po||null!==(e=e.dependencies)&&xi(e)&&(Po=!0)}function na(e,t,n,r){js=e;var i=0;do{if(Ys&&(Qs=null),Xs=0,Ys=!1,25<=i)throw Error(a(301));if(i+=1,Vs=zs=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}O.H=yo,s=t(n,r)}while(Ys);return s}function ra(){var e=O.H,t=e.useState()[0];return t="function"===typeof t.then?ca(t):t,e=e.useState()[0],(null!==zs?zs.memoizedState:null)!==e&&(js.flags|=1024),t}function ia(){var e=0!==qs;return qs=0,e}function sa(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function aa(e){if(Ks){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ks=!1}Hs=0,Vs=zs=js=null,Ys=!1,Xs=qs=0,Qs=null}function oa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Vs?js.memoizedState=Vs=e:Vs=Vs.next=e,Vs}function la(){if(null===zs){var e=js.alternate;e=null!==e?e.memoizedState:null}else e=zs.next;var t=null===Vs?js.memoizedState:Vs.next;if(null!==t)Vs=t,zs=e;else{if(null===e){if(null===js.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(zs=e).memoizedState,baseState:zs.baseState,baseQueue:zs.baseQueue,queue:zs.queue,next:null},null===Vs?js.memoizedState=Vs=e:Vs=Vs.next=e}return Vs}function ca(e){var t=Xs;return Xs+=1,null===Qs&&(Qs=[]),e=ns(Qs,e,t),t=js,null===(null===Vs?t.memoizedState:Vs.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?mo:vo),e}function ua(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return ca(e);if(e.$$typeof===T)return Di(e)}throw Error(a(438,String(e)))}function da(e){var t=null,n=js.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=js.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},js.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=R;return t.index++,n}function ha(e,t){return"function"===typeof t?t(e):t}function fa(e){return ga(la(),zs,e)}function ga(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=o=null,c=null,u=t=i.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(mc&h)===h:(Hs&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===zi&&(d=!0);else{if((Hs&f)===f){u=u.next,f===zi&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=s):c=c.next=h,js.lanes|=f,kc|=f}h=u.action,Ws&&n(s,h),s=u.hasEagerState?u.eagerState:n(s,h)}else f={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=s):c=c.next=f,js.lanes|=h,kc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=s:c.next=l,!Zn(s,e.memoizedState)&&(Po=!0,d&&null!==(n=Vi)))throw n;e.memoizedState=s,e.baseState=o,e.baseQueue=c,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function pa(e){var t=la(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);Zn(s,t.memoizedState)||(Po=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function ma(e,t,n){var r=js,i=la(),s=di;if(s){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!Zn((zs||i).memoizedState,n);if(o&&(i.memoizedState=n,Po=!0),i=i.queue,Ha(Ea.bind(null,r,i,e),[e]),i.getSnapshot!==t||o||null!==Vs&&1&Vs.memoizedState.tag){if(r.flags|=2048,Fa(9,{destroy:void 0},ya.bind(null,r,i,n,t),null),null===gc)throw Error(a(349));s||0!==(127&Hs)||va(r,t,n)}return n}function va(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=js.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},js.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ya(e,t,n,r){t.value=n,t.getSnapshot=r,ba(t)&&Ta(e)}function Ea(e,t,n){return n(function(){ba(t)&&Ta(e)})}function ba(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zn(e,n)}catch(r){return!0}}function Ta(e){var t=Pr(e,2);null!==t&&qc(t,e,2)}function Sa(e){var t=oa();if("function"===typeof e){var n=e;if(e=n(),Ws){Ee(!0);try{n()}finally{Ee(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:e},t}function _a(e,t,n,r){return e.baseState=n,ga(e,zs,"function"===typeof r?r:ha)}function ka(e,t,n,r,i){if(ho(e))throw Error(a(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==O.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,Aa(t,s)):(s.next=n.next,t.pending=n.next=s)}}function Aa(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=O.T,a={};O.T=a;try{var o=n(i,r),l=O.S;null!==l&&l(a,o),La(e,t,o)}catch(c){Ra(e,t,c)}finally{null!==s&&null!==a.types&&(s.types=a.types),O.T=s}}else try{La(e,t,s=n(i,r))}catch(u){Ra(e,t,u)}}function La(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){wa(e,t,n)},function(n){return Ra(e,t,n)}):wa(e,t,n)}function wa(e,t,n){t.status="fulfilled",t.value=n,Ia(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Aa(e,n)))}function Ra(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Ia(t),t=t.next}while(t!==r)}e.action=null}function Ia(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function xa(e,t){return t}function Ca(e,t){if(di){var n=gc.formState;if(null!==n){e:{var r=js;if(di){if(ui){t:{for(var i=ui,s=fi;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=Pd(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){ui=Pd(i.nextSibling),r="F!"===i.data;break e}}pi(r)}r=!1}r&&(t=n[0])}}return(n=oa()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:t},n.queue=r,n=lo.bind(null,js,r),r.dispatch=n,r=Sa(!1),s=uo.bind(null,js,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=oa()).queue=i,n=ka.bind(null,js,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function Da(e){return Pa(la(),zs,e)}function Pa(e,t,n){if(t=ga(e,t,xa)[0],e=fa(ha)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=ca(t)}catch(a){if(a===$i)throw Ji;throw a}else r=t;var i=(t=la()).queue,s=i.dispatch;return n!==t.memoizedState&&(js.flags|=2048,Fa(9,{destroy:void 0},Oa.bind(null,i,n),null)),[r,s,e]}function Oa(e,t){e.action=t}function Ma(e){var t=la(),n=zs;if(null!==n)return Pa(t,n,e);la(),t=t.memoizedState;var r=(n=la()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Fa(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=js.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},js.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Na(){return la().memoizedState}function Ba(e,t,n,r){var i=oa();js.flags|=e,i.memoizedState=Fa(1|t,{destroy:void 0},n,void 0===r?null:r)}function Ua(e,t,n,r){var i=la();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==zs&&null!==r&&Js(r,zs.memoizedState.deps)?i.memoizedState=Fa(t,s,n,r):(js.flags|=e,i.memoizedState=Fa(1|t,s,n,r))}function Ga(e,t){Ba(8390656,8,e,t)}function Ha(e,t){Ua(2048,8,e,t)}function ja(e){var t=la().memoizedState;return function(e){js.flags|=4;var t=js.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},js.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&fc))throw Error(a(440));return t.impl.apply(void 0,arguments)}}function za(e,t){return Ua(4,2,e,t)}function Va(e,t){return Ua(4,4,e,t)}function Ka(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Ya(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ua(4,4,Ka.bind(null,t,e),n)}function Wa(){}function qa(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Js(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xa(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Js(t,r[1]))return r[0];if(r=e(),Ws){Ee(!0);try{e()}finally{Ee(!1)}}return n.memoizedState=[r,t],r}function Qa(e,t,n){return void 0===n||0!==(1073741824&Hs)&&0===(261930&mc)?e.memoizedState=t:(e.memoizedState=n,e=Wc(),js.lanes|=e,kc|=e,n)}function $a(e,t,n,r){return Zn(n,t)?n:null!==ws.current?(e=Qa(e,n,r),Zn(e,t)||(Po=!0),e):0===(42&Hs)||0!==(1073741824&Hs)&&0===(261930&mc)?(Po=!0,e.memoizedState=n):(e=Wc(),js.lanes|=e,kc|=e,t)}function Za(e,t,n,r,i){var s=M.p;M.p=0!==s&&8>s?s:8;var a=O.T,o={};O.T=o,uo(e,!1,t,n);try{var l=i(),c=O.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)co(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Yc());else co(e,t,r,Yc())}catch(u){co(e,t,{then:function(){},status:"rejected",reason:u},Yc())}finally{M.p=s,null!==a&&null!==o.types&&(a.types=o.types),O.T=a}}function Ja(){}function eo(e,t,n,r){if(5!==e.tag)throw Error(a(476));var i=to(e).queue;Za(e,i,t,F,null===n?Ja:function(){return no(e),n(r)})}function to(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:F},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function no(e){var t=to(e);null===t.next&&(t=e.alternate.memoizedState),co(e,t.next.queue,{},Yc())}function ro(){return Di(uh)}function io(){return la().memoizedState}function so(){return la().memoizedState}function ao(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Yc(),r=Es(t,e=ys(n),n);return null!==r&&(qc(r,t,n),bs(r,t,n)),t={cache:Ui()},void(e.payload=t)}t=t.return}}function oo(e,t,n){var r=Yc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ho(e)?fo(t,n):null!==(n=Dr(e,t,n,r))&&(qc(n,e,r),go(n,t,r))}function lo(e,t,n){co(e,t,n,Yc())}function co(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ho(e))fo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,Zn(o,a))return Cr(e,t,i,0),null===gc&&xr(),!1}catch(l){}if(null!==(n=Dr(e,t,i,r)))return qc(n,e,r),go(n,t,r),!0}return!1}function uo(e,t,n,r){if(r={lane:2,revertLane:ju(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ho(e)){if(t)throw Error(a(479))}else null!==(t=Dr(e,n,r,2))&&qc(t,e,2)}function ho(e){var t=e.alternate;return e===js||null!==t&&t===js}function fo(e,t){Ys=Ks=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function go(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}var po={readContext:Di,use:ua,useCallback:Zs,useContext:Zs,useEffect:Zs,useImperativeHandle:Zs,useLayoutEffect:Zs,useInsertionEffect:Zs,useMemo:Zs,useReducer:Zs,useRef:Zs,useState:Zs,useDebugValue:Zs,useDeferredValue:Zs,useTransition:Zs,useSyncExternalStore:Zs,useId:Zs,useHostTransitionStatus:Zs,useFormState:Zs,useActionState:Zs,useOptimistic:Zs,useMemoCache:Zs,useCacheRefresh:Zs};po.useEffectEvent=Zs;var mo={readContext:Di,use:ua,useCallback:function(e,t){return oa().memoizedState=[e,void 0===t?null:t],e},useContext:Di,useEffect:Ga,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ba(4194308,4,Ka.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ba(4194308,4,e,t)},useInsertionEffect:function(e,t){Ba(4,2,e,t)},useMemo:function(e,t){var n=oa();t=void 0===t?null:t;var r=e();if(Ws){Ee(!0);try{e()}finally{Ee(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=oa();if(void 0!==n){var i=n(t);if(Ws){Ee(!0);try{n(t)}finally{Ee(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=oo.bind(null,js,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},oa().memoizedState=e},useState:function(e){var t=(e=Sa(e)).queue,n=lo.bind(null,js,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Wa,useDeferredValue:function(e,t){return Qa(oa(),e,t)},useTransition:function(){var e=Sa(!1);return e=Za.bind(null,js,e.queue,!0,!1),oa().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=js,i=oa();if(di){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===gc)throw Error(a(349));0!==(127&mc)||va(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Ga(Ea.bind(null,r,s,e),[e]),r.flags|=2048,Fa(9,{destroy:void 0},ya.bind(null,r,s,n,t),null),n},useId:function(){var e=oa(),t=gc.identifierPrefix;if(di){var n=ri;t="_"+t+"R_"+(n=(ni&~(1<<32-be(ni)-1)).toString(32)+n),0<(n=qs++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=$s++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ro,useFormState:Ca,useActionState:Ca,useOptimistic:function(e){var t=oa();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=uo.bind(null,js,!0,n),n.dispatch=t,[e,t]},useMemoCache:da,useCacheRefresh:function(){return oa().memoizedState=ao.bind(null,js)},useEffectEvent:function(e){var t=oa(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&fc))throw Error(a(440));return n.impl.apply(void 0,arguments)}}},vo={readContext:Di,use:ua,useCallback:qa,useContext:Di,useEffect:Ha,useImperativeHandle:Ya,useInsertionEffect:za,useLayoutEffect:Va,useMemo:Xa,useReducer:fa,useRef:Na,useState:function(){return fa(ha)},useDebugValue:Wa,useDeferredValue:function(e,t){return $a(la(),zs.memoizedState,e,t)},useTransition:function(){var e=fa(ha)[0],t=la().memoizedState;return["boolean"===typeof e?e:ca(e),t]},useSyncExternalStore:ma,useId:io,useHostTransitionStatus:ro,useFormState:Da,useActionState:Da,useOptimistic:function(e,t){return _a(la(),0,e,t)},useMemoCache:da,useCacheRefresh:so};vo.useEffectEvent=ja;var yo={readContext:Di,use:ua,useCallback:qa,useContext:Di,useEffect:Ha,useImperativeHandle:Ya,useInsertionEffect:za,useLayoutEffect:Va,useMemo:Xa,useReducer:pa,useRef:Na,useState:function(){return pa(ha)},useDebugValue:Wa,useDeferredValue:function(e,t){var n=la();return null===zs?Qa(n,e,t):$a(n,zs.memoizedState,e,t)},useTransition:function(){var e=pa(ha)[0],t=la().memoizedState;return["boolean"===typeof e?e:ca(e),t]},useSyncExternalStore:ma,useId:io,useHostTransitionStatus:ro,useFormState:Ma,useActionState:Ma,useOptimistic:function(e,t){var n=la();return null!==zs?_a(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:da,useCacheRefresh:so};function Eo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:f({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}yo.useEffectEvent=ja;var bo={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Yc(),i=ys(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Es(e,i,r))&&(qc(t,e,r),bs(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Yc(),i=ys(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Es(e,i,r))&&(qc(t,e,r),bs(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Yc(),r=ys(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Es(e,r,n))&&(qc(t,e,n),bs(t,e,n))}};function To(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!Jn(n,r)||!Jn(i,s))}function So(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&bo.enqueueReplaceState(t,t.state,null)}function _o(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=f({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}function ko(e){Lr(e)}function Ao(e){console.error(e)}function Lo(e){Lr(e)}function wo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Ro(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Io(e,t,n){return(n=ys(n)).tag=3,n.payload={element:null},n.callback=function(){wo(e,t)},n}function xo(e){return(e=ys(e)).tag=3,e}function Co(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){Ro(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){Ro(t,n,r),"function"!==typeof i&&(null===Fc?Fc=new Set([this]):Fc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Do=Error(a(461)),Po=!1;function Oo(e,t,n,r){t.child=null===e?gs(t,null,n,r):fs(t,e.child,n,r)}function Mo(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return Ci(t),r=ea(e,t,n,a,s,i),o=ia(),null===e||Po?(di&&o&&ai(t),t.flags|=1,Oo(e,t,r,i),t.child):(sa(e,t,i),il(e,t,i))}function Fo(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Ur(s)||void 0!==s.defaultProps||null!==n.compare?((e=jr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,No(e,t,s,r,i))}if(s=e.child,!sl(e,i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:Jn)(a,r)&&e.ref===t.ref)return il(e,t,i)}return t.flags|=1,(e=Gr(s,r)).ref=t.ref,e.return=t,t.child=e}function No(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(Jn(s,r)&&e.ref===t.ref){if(Po=!1,t.pendingProps=r=s,!sl(e,i))return t.lanes=e.lanes,il(e,t,i);0!==(131072&e.flags)&&(Po=!0)}}return Vo(e,t,n,r,i)}function Bo(e,t,n,r){var i=r.children,s=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(s=null!==s?s.baseLanes|n:n,null!==e){for(r=t.child=e.child,i=0;null!==r;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~s}else r=0,t.child=null;return Go(e,t,s,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,Go(e,t,null!==s?s.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Xi(0,null!==s?s.cachePool:null),null!==s?Is(t,s):xs(),Fs(t)}else null!==s?(Xi(0,s.cachePool),Is(t,s),Ns(),t.memoizedState=null):(null!==e&&Xi(0,null),xs(),Ns());return Oo(e,t,i,n),t.child}function Uo(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Go(e,t,n,r,i){var s=qi();return s=null===s?null:{parent:Bi._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&Xi(0,null),xs(),Fs(t),null!==e&&Ii(e,t,r,!0),t.childLanes=i,null}function Ho(e,t){return(t=Jo({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function jo(e,t,n){return fs(t,e.child,null,n),(e=Ho(t,t.pendingProps)).flags|=2,Bs(t),t.memoizedState=null,e}function zo(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Vo(e,t,n,r,i){return Ci(t),n=ea(e,t,n,r,void 0,i),r=ia(),null===e||Po?(di&&r&&ai(t),t.flags|=1,Oo(e,t,n,i),t.child):(sa(e,t,i),il(e,t,i))}function Ko(e,t,n,r,i,s){return Ci(t),t.updateQueue=null,n=na(t,r,n,i),ta(e),r=ia(),null===e||Po?(di&&r&&ai(t),t.flags|=1,Oo(e,t,n,s),t.child):(sa(e,t,s),il(e,t,s))}function Yo(e,t,n,r,i){if(Ci(t),null===t.stateNode){var s=Fr,a=n.contextType;"object"===typeof a&&null!==a&&(s=Di(a)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=bo,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},ms(t),a=n.contextType,s.context="object"===typeof a&&null!==a?Di(a):Fr,s.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(Eo(t,n,a,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(a=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),a!==s.state&&bo.enqueueReplaceState(s,s.state,null),ks(t,r,s,i),_s(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var o=t.memoizedProps,l=_o(n,o);s.props=l;var c=s.context,u=n.contextType;a=Fr,"object"===typeof u&&null!==u&&(a=Di(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o||c!==a)&&So(t,s,r,a),ps=!1;var h=t.memoizedState;s.state=h,ks(t,r,s,i),_s(),c=t.memoizedState,o||h!==c||ps?("function"===typeof d&&(Eo(t,n,d,r),c=t.memoizedState),(l=ps||To(t,n,l,r,h,c,a))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=a,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,vs(e,t),u=_o(n,a=t.memoizedProps),s.props=u,d=t.pendingProps,h=s.context,c=n.contextType,l=Fr,"object"===typeof c&&null!==c&&(l=Di(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&So(t,s,r,l),ps=!1,h=t.memoizedState,s.state=h,ks(t,r,s,i),_s();var f=t.memoizedState;a!==d||h!==f||ps||null!==e&&null!==e.dependencies&&xi(e.dependencies)?("function"===typeof o&&(Eo(t,n,o,r),f=t.memoizedState),(u=ps||To(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&xi(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,zo(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=fs(t,e.child,null,i),t.child=fs(t,null,n,i)):Oo(e,t,n,i),t.memoizedState=s.state,e=t.child):e=il(e,t,i),e}function Wo(e,t,n,r){return Ei(),t.flags|=256,Oo(e,t,n,r),t.child}var qo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xo(e){return{baseLanes:e,cachePool:Qi()}}function Qo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=wc),e}function $o(e,t,n){var r,i=t.pendingProps,s=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Us.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(di){if(s?Os(t):Ns(),(e=ui)?null!==(e=null!==(e=xd(e,fi))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ti?{id:ni,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},(n=Kr(e)).return=t,t.child=n,ci=t,ui=null):e=null,null===e)throw pi(t);return Dd(e)?t.lanes=32:t.lanes=536870912,null}var l=i.children;return i=i.fallback,s?(Ns(),l=Jo({mode:"hidden",children:l},s=t.mode),i=zr(i,s,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,(i=t.child).memoizedState=Xo(n),i.childLanes=Qo(e,r,n),t.memoizedState=qo,Uo(null,i)):(Os(t),Zo(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(o)256&t.flags?(Os(t),t.flags&=-257,t=el(e,t,n)):null!==t.memoizedState?(Ns(),t.child=e.child,t.flags|=128,t=null):(Ns(),l=i.fallback,s=t.mode,i=Jo({mode:"visible",children:i.children},s),(l=zr(l,s,n,null)).flags|=2,i.return=t,l.return=t,i.sibling=l,t.child=i,fs(t,e.child,null,n),(i=t.child).memoizedState=Xo(n),i.childLanes=Qo(e,r,n),t.memoizedState=qo,t=Uo(null,i));else if(Os(t),Dd(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(a(419))).stack="",i.digest=r,Ti({value:i,source:null,stack:null}),t=el(e,t,n)}else if(Po||Ii(e,t,n,!1),r=0!==(n&e.childLanes),Po||r){if(null!==(r=gc)&&(0!==(i=Me(r,n))&&i!==c.retryLane))throw c.retryLane=i,Pr(e,i),qc(r,e,i),Do;Cd(l)||au(),t=el(e,t,n)}else Cd(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ui=Pd(l.nextSibling),ci=t,di=!0,hi=null,fi=!1,null!==e&&li(t,e),(t=Zo(t,i.children)).flags|=4096);return t}return s?(Ns(),l=i.fallback,s=t.mode,u=(c=e.child).sibling,(i=Gr(c,{mode:"hidden",children:i.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Gr(u,l):(l=zr(l,s,n,null)).flags|=2,l.return=t,i.return=t,i.sibling=l,t.child=i,Uo(null,i),i=t.child,null===(l=e.child.memoizedState)?l=Xo(n):(null!==(s=l.cachePool)?(c=Bi._currentValue,s=s.parent!==c?{parent:c,pool:c}:s):s=Qi(),l={baseLanes:l.baseLanes|n,cachePool:s}),i.memoizedState=l,i.childLanes=Qo(e,r,n),t.memoizedState=qo,Uo(e.child,i)):(Os(t),e=(n=e.child).sibling,(n=Gr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Zo(e,t){return(t=Jo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Jo(e,t){return(e=Br(22,e,null,t)).lanes=0,e}function el(e,t,n){return fs(t,e.child,null,n),(e=Zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),wi(e.return,t,n)}function nl(e,t,n,r,i,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.treeForkCount=s)}function rl(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;r=r.children;var a=Us.current,o=0!==(2&a);if(o?(a=1&a|2,t.flags|=128):a&=1,H(Us,a),Oo(e,t,r,n),r=di?Zr:0,!o&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tl(e,n,t);else if(19===e.tag)tl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Gs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),nl(t,!1,i,n,s,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Gs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}nl(t,!0,n,null,s,r);break;case"together":nl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function il(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),kc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ii(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Gr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Gr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function sl(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!xi(e))}function al(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Po=!0;else{if(!sl(e,n)&&0===(128&t.flags))return Po=!1,function(e,t,n){switch(t.tag){case 3:q(t,t.stateNode.containerInfo),Ai(0,Bi,e.memoizedState.cache),Ei();break;case 27:case 5:Q(t);break;case 4:q(t,t.stateNode.containerInfo);break;case 10:Ai(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Ms(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Os(t),t.flags|=128,null):0!==(n&t.child.childLanes)?$o(e,t,n):(Os(t),null!==(e=il(e,t,n))?e.sibling:null);Os(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ii(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return rl(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),H(Us,Us.current),r)break;return null;case 22:return t.lanes=0,Bo(e,t,n,t.pendingProps);case 24:Ai(0,Bi,e.memoizedState.cache)}return il(e,t,n)}(e,t,n);Po=0!==(131072&e.flags)}else Po=!1,di&&0!==(1048576&t.flags)&&si(t,Zr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=rs(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var i=e.$$typeof;if(i===S){t.tag=11,t=Mo(null,t,e,r,n);break e}if(i===A){t.tag=14,t=Fo(null,t,e,r,n);break e}}throw t=D(e)||e,Error(a(306,t,""))}Ur(e)?(r=_o(e,r),t.tag=1,t=Yo(null,t,e,r,n)):(t.tag=0,t=Vo(null,t,e,r,n))}return t;case 0:return Vo(e,t,t.type,t.pendingProps,n);case 1:return Yo(e,t,r=t.type,i=_o(r,t.pendingProps),n);case 3:e:{if(q(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var s=t.memoizedState;i=s.element,vs(e,t),ks(t,r,null,n);var o=t.memoizedState;if(r=o.cache,Ai(0,Bi,r),r!==s.cache&&Ri(t,[Bi],n,!0),_s(),r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Wo(e,t,r,n);break e}if(r!==i){Ti(i=qr(Error(a(424)),t)),t=Wo(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ui=Pd(e.firstChild),ci=t,di=!0,hi=null,fi=!0,n=gs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Ei(),r===i){t=il(e,t,n);break e}Oo(e,t,r,n)}t=t.child}return t;case 26:return zo(e,t),null===e?(n=Kd(t.type,null,t.pendingProps,null))?t.memoizedState=n:di||(n=t.type,e=t.pendingProps,(r=md(Y.current).createElement(n))[He]=t,r[je]=e,hd(r,n,e),et(r),t.stateNode=r):t.memoizedState=Kd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),null===e&&di&&(r=t.stateNode=Nd(t.type,t.pendingProps,Y.current),ci=t,fi=!0,i=ui,Ld(t.type)?(Od=i,ui=Pd(r.firstChild)):ui=i),Oo(e,t,t.pendingProps.children,n),zo(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&di&&((i=r=ui)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[qe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=Pd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,fi))?(t.stateNode=r,ci=t,ui=Pd(r.firstChild),fi=!1,i=!0):i=!1),i||pi(t)),Q(t),i=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,r=s.children,Ed(i,s)?r=null:null!==o&&Ed(i,o)&&(t.flags|=32),null!==t.memoizedState&&(i=ea(e,t,ra,null,null,n),uh._currentValue=i),zo(e,t),Oo(e,t,r,n),t.child;case 6:return null===e&&di&&((e=n=ui)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Pd(e.nextSibling)))return null}return e}(n,t.pendingProps,fi))?(t.stateNode=n,ci=t,ui=null,e=!0):e=!1),e||pi(t)),null;case 13:return $o(e,t,n);case 4:return q(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=fs(t,null,r,n):Oo(e,t,r,n),t.child;case 11:return Mo(e,t,t.type,t.pendingProps,n);case 7:return Oo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Oo(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Ai(0,t.type,r.value),Oo(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Ci(t),r=r(i=Di(i)),t.flags|=1,Oo(e,t,r,n),t.child;case 14:return Fo(e,t,t.type,t.pendingProps,n);case 15:return No(e,t,t.type,t.pendingProps,n);case 19:return rl(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,i=0!==(128&t.flags);if(t.flags&=-129,null===e){if(di){if("hidden"===r.mode)return e=Ho(t,r),t.lanes=536870912,Uo(null,e);if(Ms(t),(e=ui)?null!==(e=null!==(e=xd(e,fi))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ti?{id:ni,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},(n=Kr(e)).return=t,t.child=n,ci=t,ui=null):e=null,null===e)throw pi(t);return t.lanes=536870912,null}return Ho(t,r)}var s=e.memoizedState;if(null!==s){var o=s.dehydrated;if(Ms(t),i)if(256&t.flags)t.flags&=-257,t=jo(e,t,n);else{if(null===t.memoizedState)throw Error(a(558));t.child=e.child,t.flags|=128,t=null}else if(Po||Ii(e,t,n,!1),i=0!==(n&e.childLanes),Po||i){if(null!==(r=gc)&&0!==(o=Me(r,n))&&o!==s.retryLane)throw s.retryLane=o,Pr(e,o),qc(r,e,o),Do;au(),t=jo(e,t,n)}else e=s.treeContext,ui=Pd(o.nextSibling),ci=t,di=!0,hi=null,fi=!1,null!==e&&li(t,e),(t=Ho(t,r)).flags|=4096;return t}return(e=Gr(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Bo(e,t,n,t.pendingProps);case 24:return Ci(t),r=Di(Bi),null===e?(null===(i=qi())&&(i=gc,s=Ui(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},ms(t),Ai(0,Bi,i)):(0!==(e.lanes&n)&&(vs(e,t),ks(t,null,null,n),_s()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),Ai(0,Bi,r)):(r=s.cache,Ai(0,Bi,r),r!==i.cache&&Ri(t,[Bi],n,!0))),Oo(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function ol(e){e.flags|=4}function ll(e,t,n,r,i){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&i)===i)if(e.stateNode.complete)e.flags|=8192;else{if(!ru())throw is=es,Zi;e.flags|=8192}}else e.flags&=-16777217}function cl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!ih(t)){if(!ru())throw is=es,Zi;e.flags|=8192}}function ul(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?xe():536870912,e.lanes|=t,Rc|=t)}function dl(e,t){if(!di)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function hl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function fl(e,t,n){var r=t.pendingProps;switch(oi(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return hl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Li(Bi),X(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(yi(t)?ol(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,bi())),hl(t),null;case 26:var i=t.type,s=t.memoizedState;return null===e?(ol(t),null!==s?(hl(t),cl(t,s)):(hl(t),ll(t,i,0,0,n))):s?s!==e.memoizedState?(ol(t),hl(t),cl(t,s)):(hl(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&ol(t),hl(t),ll(t,i,0,0,n)),null;case 27:if($(t),n=Y.current,i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return hl(t),null}e=V.current,yi(t)?mi(t):(e=Nd(i,r,n),t.stateNode=e,ol(t))}return hl(t),null;case 5:if($(t),i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return hl(t),null}if(s=V.current,yi(t))mi(t);else{var o=md(Y.current);switch(s){case 1:s=o.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:s=o.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":s=o.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":s=o.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":(s=o.createElement("div")).innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s="string"===typeof r.is?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?s.multiple=!0:r.size&&(s.size=r.size);break;default:s="string"===typeof r.is?o.createElement(i,{is:r.is}):o.createElement(i)}}s[He]=t,s[je]=r;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)s.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=s;e:switch(hd(s,i,r),i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ol(t)}}return hl(t),ll(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=Y.current,yi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ci))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[He]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||cd(e.nodeValue,n)))||pi(t,!0)}else(e=md(e).createTextNode(r))[He]=t,t.stateNode=e}return hl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=yi(t),null!==n){if(null===e){if(!r)throw Error(a(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(a(557));e[He]=t}else Ei(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),e=!1}else n=bi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Bs(t),t):(Bs(t),null);if(0!==(128&t.flags))throw Error(a(558))}return hl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=yi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[He]=t}else Ei(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),i=!1}else i=bi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(Bs(t),t):(Bs(t),null)}return Bs(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool),s=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ul(t,t.updateQueue),hl(t),null);case 4:return X(),null===e&&Ju(t.stateNode.containerInfo),hl(t),null;case 10:return Li(t.type),hl(t),null;case 19:if(G(Us),null===(r=t.memoizedState))return hl(t),null;if(i=0!==(128&t.flags),null===(s=r.rendering))if(i)dl(r,!1);else{if(0!==_c||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=Gs(e))){for(t.flags|=128,dl(r,!1),e=s.updateQueue,t.updateQueue=e,ul(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Hr(n,e),n=n.sibling;return H(Us,1&Us.current|2),di&&ii(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&le()>Oc&&(t.flags|=128,i=!0,dl(r,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=Gs(s))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,ul(t,e),dl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate&&!di)return hl(t),null}else 2*le()-r.renderingStartTime>Oc&&536870912!==n&&(t.flags|=128,i=!0,dl(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=r.last)?e.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=le(),e.sibling=null,n=Us.current,H(Us,i?1&n|2:1&n),di&&ii(t,r.treeForkCount),e):(hl(t),null);case 22:case 23:return Bs(t),Cs(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(hl(t),6&t.subtreeFlags&&(t.flags|=8192)):hl(t),null!==(n=t.updateQueue)&&ul(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&G(Wi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Li(Bi),hl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function gl(e,t){switch(oi(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Li(Bi),X(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return $(t),null;case 31:if(null!==t.memoizedState){if(Bs(t),null===t.alternate)throw Error(a(340));Ei()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Bs(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));Ei()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return G(Us),null;case 4:return X(),null;case 10:return Li(t.type),null;case 22:case 23:return Bs(t),Cs(),null!==e&&G(Wi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Li(Bi),null;default:return null}}function pl(e,t){switch(oi(t),t.tag){case 3:Li(Bi),X();break;case 26:case 27:case 5:$(t);break;case 4:X();break;case 31:null!==t.memoizedState&&Bs(t);break;case 13:Bs(t);break;case 19:G(Us);break;case 10:Li(t.type);break;case 22:case 23:Bs(t),Cs(),null!==e&&G(Wi);break;case 24:Li(Bi)}}function ml(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,a=n.inst;r=s(),a.destroy=r}n=n.next}while(n!==i)}}catch(o){_u(t,t.return,o)}}function vl(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,i=t;var l=n,c=o;try{c()}catch(u){_u(i,l,u)}}}r=r.next}while(r!==s)}}catch(u){_u(t,t.return,u)}}function yl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Ls(t,n)}catch(r){_u(e,e.return,r)}}}function El(e,t,n){n.props=_o(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){_u(e,t,r)}}function bl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){_u(e,t,i)}}function Tl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){_u(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){_u(e,t,s)}else n.current=null}function Sl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){_u(e,e.return,i)}}function _l(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,o=null,l=null,c=null,u=null,d=null;for(g in n){var h=n[g];if(n.hasOwnProperty(g)&&null!=h)switch(g){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(g)||ud(e,t,g,null,r,h)}}for(var f in r){var g=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=g||null!=h))switch(f){case"type":s=g;break;case"name":i=g;break;case"checked":u=g;break;case"defaultChecked":d=g;break;case"value":o=g;break;case"defaultValue":l=g;break;case"children":case"dangerouslySetInnerHTML":if(null!=g)throw Error(a(137,t));break;default:g!==h&&ud(e,t,f,g,r,h)}}return void yt(e,o,l,c,u,d,s,i);case"select":for(s in g=o=l=f=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":g=c;default:r.hasOwnProperty(s)||ud(e,t,s,null,r,c)}for(i in r)if(s=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=s||null!=c))switch(i){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":o=s;default:s!==c&&ud(e,t,i,s,r,c)}return t=l,n=o,r=g,void(null!=f?Tt(e,!!n,f,!1):!!r!==!!n&&(null!=t?Tt(e,!!n,t,!0):Tt(e,!!n,n?[]:"",!1)));case"textarea":for(l in g=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:ud(e,t,l,null,r,i)}for(o in r)if(i=r[o],s=n[o],r.hasOwnProperty(o)&&(null!=i||null!=s))switch(o){case"value":f=i;break;case"defaultValue":g=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(a(91));break;default:i!==s&&ud(e,t,o,i,r,s)}return void St(e,f,g);case"option":for(var p in n)if(f=n[p],n.hasOwnProperty(p)&&null!=f&&!r.hasOwnProperty(p))if("selected"===p)e.selected=!1;else ud(e,t,p,null,r,f);for(c in r)if(f=r[c],g=n[c],r.hasOwnProperty(c)&&f!==g&&(null!=f||null!=g))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else ud(e,t,c,f,r,g);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m)&&ud(e,t,m,null,r,f);for(u in r)if(f=r[u],g=n[u],r.hasOwnProperty(u)&&f!==g&&(null!=f||null!=g))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:ud(e,t,u,f,r,g)}return;default:if(Rt(t)){for(var v in n)f=n[v],n.hasOwnProperty(v)&&void 0!==f&&!r.hasOwnProperty(v)&&dd(e,t,v,void 0,r,f);for(d in r)f=r[d],g=n[d],!r.hasOwnProperty(d)||f===g||void 0===f&&void 0===g||dd(e,t,d,f,r,g);return}}for(var y in n)f=n[y],n.hasOwnProperty(y)&&null!=f&&!r.hasOwnProperty(y)&&ud(e,t,y,null,r,f);for(h in r)f=r[h],g=n[h],!r.hasOwnProperty(h)||f===g||null==f&&null==g||ud(e,t,h,f,r,g)}(r,e.type,n,t),r[je]=t}catch(i){_u(e,e.return,i)}}function kl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Ld(e.type)||4===e.tag}function Al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||kl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Ld(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Dt));else if(4!==r&&(27===r&&Ld(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Ll(e,t,n),e=e.sibling;null!==e;)Ll(e,t,n),e=e.sibling}function wl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Ld(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(wl(e,t,n),e=e.sibling;null!==e;)wl(e,t,n),e=e.sibling}function Rl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);hd(t,r,n),t[He]=e,t[je]=n}catch(s){_u(e,e.return,s)}}var Il=!1,xl=!1,Cl=!1,Dl="function"===typeof WeakSet?WeakSet:Set,Pl=null;function Ol(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:ql(e,n),4&r&&ml(5,n);break;case 1:if(ql(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){_u(n,n.return,a)}else{var i=_o(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){_u(n,n.return,o)}}64&r&&yl(n),512&r&&bl(n,n.return);break;case 3:if(ql(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Ls(e,t)}catch(a){_u(n,n.return,a)}}break;case 27:null===t&&4&r&&Rl(n);case 26:case 5:ql(e,n),null===t&&4&r&&Sl(n),512&r&&bl(n,n.return);break;case 12:ql(e,n);break;case 31:ql(e,n),4&r&&Gl(e,n);break;case 13:ql(e,n),4&r&&Hl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=wu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||Il)){t=null!==t&&null!==t.memoizedState||xl,i=Il;var s=xl;Il=r,(xl=t)&&!s?Ql(e,n,0!==(8772&n.subtreeFlags)):ql(e,n),Il=i,xl=s}break;case 30:break;default:ql(e,n)}}function Ml(e){var t=e.alternate;null!==t&&(e.alternate=null,Ml(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Xe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Fl=null,Nl=!1;function Bl(e,t,n){for(n=n.child;null!==n;)Ul(e,t,n),n=n.sibling}function Ul(e,t,n){if(ye&&"function"===typeof ye.onCommitFiberUnmount)try{ye.onCommitFiberUnmount(ve,n)}catch(s){}switch(n.tag){case 26:xl||Tl(n,t),Bl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:xl||Tl(n,t);var r=Fl,i=Nl;Ld(n.type)&&(Fl=n.stateNode,Nl=!1),Bl(e,t,n),Bd(n.stateNode),Fl=r,Nl=i;break;case 5:xl||Tl(n,t);case 6:if(r=Fl,i=Nl,Fl=null,Bl(e,t,n),Nl=i,null!==(Fl=r))if(Nl)try{(9===Fl.nodeType?Fl.body:"HTML"===Fl.nodeName?Fl.ownerDocument.body:Fl).removeChild(n.stateNode)}catch(a){_u(n,t,a)}else try{Fl.removeChild(n.stateNode)}catch(a){_u(n,t,a)}break;case 18:null!==Fl&&(Nl?(wd(9===(e=Fl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Vh(e)):wd(Fl,n.stateNode));break;case 4:r=Fl,i=Nl,Fl=n.stateNode.containerInfo,Nl=!0,Bl(e,t,n),Fl=r,Nl=i;break;case 0:case 11:case 14:case 15:vl(2,n,t),xl||vl(4,n,t),Bl(e,t,n);break;case 1:xl||(Tl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&El(n,t,r)),Bl(e,t,n);break;case 21:Bl(e,t,n);break;case 22:xl=(r=xl)||null!==n.memoizedState,Bl(e,t,n),xl=r;break;default:Bl(e,t,n)}}function Gl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Vh(e)}catch(n){_u(t,t.return,n)}}}function Hl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Vh(e)}catch(n){_u(t,t.return,n)}}function jl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Dl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Dl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Ru.bind(null,e,t);t.then(r,r)}})}function zl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(Ld(l.type)){Fl=l.stateNode,Nl=!1;break e}break;case 5:Fl=l.stateNode,Nl=!1;break e;case 3:case 4:Fl=l.stateNode.containerInfo,Nl=!0;break e}l=l.return}if(null===Fl)throw Error(a(160));Ul(s,o,i),Fl=null,Nl=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Kl(t,e),t=t.sibling}var Vl=null;function Kl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:zl(t,e),Yl(e),4&r&&(vl(3,e,e.return),ml(3,e),vl(5,e,e.return));break;case 1:zl(t,e),Yl(e),512&r&&(xl||null===n||Tl(n,n.return)),64&r&&Il&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Vl;if(zl(t,e),Yl(e),512&r&&(xl||null===n||Tl(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[qe]||s[He]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),hd(s,r,n),s[He]=e,et(s),r=s;break e;case"link":var o=nh("link","href",i).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((s=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}hd(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(o=nh("meta","content",i).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((s=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}hd(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(a(468,r))}s[He]=e,et(s),r=s}e.stateNode=r}else rh(i,e.type,e.stateNode);else e.stateNode=$d(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?rh(i,e.type,e.stateNode):$d(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&_l(e,e.memoizedProps,n.memoizedProps)}break;case 27:zl(t,e),Yl(e),512&r&&(xl||null===n||Tl(n,n.return)),null!==n&&4&r&&_l(e,e.memoizedProps,n.memoizedProps);break;case 5:if(zl(t,e),Yl(e),512&r&&(xl||null===n||Tl(n,n.return)),32&e.flags){i=e.stateNode;try{kt(i,"")}catch(p){_u(e,e.return,p)}}4&r&&null!=e.stateNode&&_l(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(Cl=!0);break;case 6:if(zl(t,e),Yl(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){_u(e,e.return,p)}}break;case 3:if(th=null,i=Vl,Vl=Hd(t.containerInfo),zl(t,e),Vl=i,Yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vh(t.containerInfo)}catch(p){_u(e,e.return,p)}Cl&&(Cl=!1,Wl(e));break;case 4:r=Vl,Vl=Hd(e.stateNode.containerInfo),zl(t,e),Yl(e),Vl=r;break;case 12:default:zl(t,e),Yl(e);break;case 31:case 19:zl(t,e),Yl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,jl(e,r)));break;case 13:zl(t,e),Yl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Dc=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,jl(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=Il,d=xl;if(Il=u||i,xl=d||c,zl(t,e),xl=d,Il=u,Yl(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||Il||xl||Xl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(s=c.stateNode,i)"function"===typeof(o=s.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){_u(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(p){_u(c,c.return,p)}}}else if(18===t.tag){if(null===n){c=t;try{var g=c.stateNode;i?Rd(g,!0):Rd(c.stateNode,!1)}catch(p){_u(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,jl(e,n))));case 30:case 21:}}function Yl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(kl(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var i=n.stateNode;wl(e,Al(e),i);break;case 5:var s=n.stateNode;32&n.flags&&(kt(s,""),n.flags&=-33),wl(e,Al(e),s);break;case 3:case 4:var o=n.stateNode.containerInfo;Ll(e,Al(e),o);break;default:throw Error(a(161))}}catch(l){_u(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Wl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Wl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function ql(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ol(e,t.alternate,t),t=t.sibling}function Xl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:vl(4,t,t.return),Xl(t);break;case 1:Tl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&El(t,t.return,n),Xl(t);break;case 27:Bd(t.stateNode);case 26:case 5:Tl(t,t.return),Xl(t);break;case 22:null===t.memoizedState&&Xl(t);break;default:Xl(t)}e=e.sibling}}function Ql(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:Ql(i,s,n),ml(4,s);break;case 1:if(Ql(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){_u(r,r.return,c)}if(null!==(i=(r=s).updateQueue)){var o=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)As(l[i],o)}catch(c){_u(r,r.return,c)}}n&&64&a&&yl(s),bl(s,s.return);break;case 27:Rl(s);case 26:case 5:Ql(i,s,n),n&&null===r&&4&a&&Sl(s),bl(s,s.return);break;case 12:Ql(i,s,n);break;case 31:Ql(i,s,n),n&&4&a&&Gl(i,s);break;case 13:Ql(i,s,n),n&&4&a&&Hl(i,s);break;case 22:null===s.memoizedState&&Ql(i,s,n),bl(s,s.return);break;case 30:break;default:Ql(i,s,n)}t=t.sibling}}function $l(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Gi(n))}function Zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Gi(e))}function Jl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ec(e,t,n,r),t=t.sibling}function ec(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Jl(e,t,n,r),2048&i&&ml(9,t);break;case 1:case 31:case 13:default:Jl(e,t,n,r);break;case 3:Jl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Gi(e)));break;case 12:if(2048&i){Jl(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,o=s.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){_u(t,t.return,l)}}else Jl(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,null!==t.memoizedState?2&s._visibility?Jl(e,t,n,r):nc(e,t):2&s._visibility?Jl(e,t,n,r):(s._visibility|=2,tc(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&i&&$l(a,t);break;case 24:Jl(e,t,n,r),2048&i&&Zl(t.alternate,t)}}function tc(e,t,n,r,i){for(i=i&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var s=e,a=t,o=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:tc(s,a,o,l,i),ml(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?tc(s,a,o,l,i):nc(s,a):(u._visibility|=2,tc(s,a,o,l,i)),i&&2048&c&&$l(a.alternate,a);break;case 24:tc(s,a,o,l,i),i&&2048&c&&Zl(a.alternate,a);break;default:tc(s,a,o,l,i)}t=t.sibling}}function nc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:nc(n,r),2048&i&&$l(r.alternate,r);break;case 24:nc(n,r),2048&i&&Zl(r.alternate,r);break;default:nc(n,r)}t=t.sibling}}var rc=8192;function ic(e,t,n){if(e.subtreeFlags&rc)for(e=e.child;null!==e;)sc(e,t,n),e=e.sibling}function sc(e,t,n){switch(e.tag){case 26:ic(e,t,n),e.flags&rc&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var i=Yd(r.href),s=t.querySelector(Wd(i));if(s)return null!==(t=s._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=ah.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,void et(s);s=t.ownerDocument||t,r=qd(r),(i=Ud.get(i))&&Jd(r,i),et(s=s.createElement("link"));var a=s;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),hd(s,"link",r),n.instance=s}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=ah.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Vl,e.memoizedState,e.memoizedProps);break;case 5:default:ic(e,t,n);break;case 3:case 4:var r=Vl;Vl=Hd(e.stateNode.containerInfo),ic(e,t,n),Vl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=rc,rc=16777216,ic(e,t,n),rc=r):ic(e,t,n))}}function ac(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function oc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Pl=r,uc(r,e)}ac(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)lc(e),e=e.sibling}function lc(e){switch(e.tag){case 0:case 11:case 15:oc(e),2048&e.flags&&vl(9,e,e.return);break;case 3:case 12:default:oc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,cc(e)):oc(e)}}function cc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Pl=r,uc(r,e)}ac(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:vl(8,t,t.return),cc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,cc(t));break;default:cc(t)}e=e.sibling}}function uc(e,t){for(;null!==Pl;){var n=Pl;switch(n.tag){case 0:case 11:case 15:vl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Gi(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Pl=r;else e:for(n=e;null!==Pl;){var i=(r=Pl).sibling,s=r.return;if(Ml(r),r===n){Pl=null;break e}if(null!==i){i.return=s,Pl=i;break e}Pl=s}}}var dc={getCacheForType:function(e){var t=Di(Bi),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Di(Bi).controller.signal}},hc="function"===typeof WeakMap?WeakMap:Map,fc=0,gc=null,pc=null,mc=0,vc=0,yc=null,Ec=!1,bc=!1,Tc=!1,Sc=0,_c=0,kc=0,Ac=0,Lc=0,wc=0,Rc=0,Ic=null,xc=null,Cc=!1,Dc=0,Pc=0,Oc=1/0,Mc=null,Fc=null,Nc=0,Bc=null,Uc=null,Gc=0,Hc=0,jc=null,zc=null,Vc=0,Kc=null;function Yc(){return 0!==(2&fc)&&0!==mc?mc&-mc:null!==O.T?ju():Be()}function Wc(){if(0===wc)if(0===(536870912&mc)||di){var e=ke;0===(3932160&(ke<<=1))&&(ke=262144),wc=e}else wc=536870912;return null!==(e=Ds.current)&&(e.flags|=32),wc}function qc(e,t,n){(e!==gc||2!==vc&&9!==vc)&&null===e.cancelPendingCommit||(tu(e,0),Zc(e,mc,wc,!1)),De(e,n),0!==(2&fc)&&e===gc||(e===gc&&(0===(2&fc)&&(Ac|=n),4===_c&&Zc(e,mc,wc,!1)),Mu(e))}function Xc(e,t,n){if(0!==(6&fc))throw Error(a(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Re(e,t),i=r?function(e,t){var n=fc;fc|=2;var r=iu(),i=su();gc!==e||mc!==t?(Mc=null,Oc=le()+500,tu(e,t)):bc=Re(e,t);e:for(;;)try{if(0!==vc&&null!==pc){t=pc;var s=yc;t:switch(vc){case 1:vc=0,yc=null,hu(e,t,s,1);break;case 2:case 9:if(ts(s)){vc=0,yc=null,du(t);break}t=function(){2!==vc&&9!==vc||gc!==e||(vc=7),Mu(e)},s.then(t,t);break e;case 3:vc=7;break e;case 4:vc=5;break e;case 7:ts(s)?(vc=0,yc=null,du(t)):(vc=0,yc=null,hu(e,t,s,7));break;case 5:var o=null;switch(pc.tag){case 26:o=pc.memoizedState;case 5:case 27:var l=pc;if(o?ih(o):l.stateNode.complete){vc=0,yc=null;var c=l.sibling;if(null!==c)pc=c;else{var u=l.return;null!==u?(pc=u,fu(u)):pc=null}break t}}vc=0,yc=null,hu(e,t,s,5);break;case 6:vc=0,yc=null,hu(e,t,s,6);break;case 8:eu(),_c=6;break e;default:throw Error(a(462))}}cu();break}catch(d){nu(e,d)}return ki=_i=null,O.H=r,O.A=i,fc=n,null!==pc?0:(gc=null,mc=0,xr(),_c)}(e,t):ou(e,t,!0),s=r;;){if(0===i){bc&&!r&&Zc(e,t,0,!1);break}if(n=e.current.alternate,!s||$c(n)){if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;i=Ic;var c=l.current.memoizedState.isDehydrated;if(c&&(tu(l,o).flags|=256),2!==(o=ou(l,o,!1))){if(Tc&&!c){l.errorRecoveryDisabledLanes|=s,Ac|=s,i=4;break e}s=xc,xc=i,null!==s&&(null===xc?xc=s:xc.push.apply(xc,s))}i=o}if(s=!1,2!==i)continue}}if(1===i){tu(e,0),Zc(e,t,0,!0);break}e:{switch(r=e,s=i){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Zc(r,t,wc,!Ec);break e;case 2:xc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(i=Dc+300-le())){if(Zc(r,t,wc,!Ec),0!==we(r,0,!0))break e;Gc=t,r.timeoutHandle=Td(Qc.bind(null,r,n,xc,Mc,Cc,t,wc,Ac,Rc,Ec,s,"Throttled",-0,0),i)}else Qc(r,n,xc,Mc,Cc,t,wc,Ac,Rc,Ec,s,null,-0,0)}break}i=ou(e,t,!1),s=!1}Mu(e)}function Qc(e,t,n,r,i,s,a,o,l,c,u,d,h,f){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||16785408===(16785408&d)){sc(t,s,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Dt});var g=(62914560&s)===s?Dc-le():(4194048&s)===s?Pc-le():0;if(null!==(g=function(e,t){return e.stylesheets&&0===e.count&&lh(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===sh&&(sh=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var i=n[r],s=i.transferSize,a=i.initiatorType,o=i.duration;if(s&&o&&fd(a)){for(a=0,o=i.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>o)break;var u=l.transferSize,d=l.initiatorType;u&&fd(d)&&(a+=u*((l=l.responseEnd)<o?1:(o-c)/(l-c)))}if(--r,t+=8*(s+a)/(i.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var i=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>sh?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}(d,g)))return Gc=s,e.cancelPendingCommit=g(pu.bind(null,e,t,s,n,r,i,a,o,l,u,d,null,h,f)),void Zc(e,s,a,!c)}pu(e,t,s,n,r,i,a,o,l)}function $c(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Zn(s(),i))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zc(e,t,n,r){t&=~Lc,t&=~Ac,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-be(i),a=1<<s;r[s]=-1,i&=~a}0!==n&&Pe(e,n,t)}function Jc(){return 0!==(6&fc)||(Fu(0,!1),!1)}function eu(){if(null!==pc){if(0===vc)var e=pc.return;else ki=_i=null,aa(e=pc),os=null,ls=0,e=pc;for(;null!==e;)pl(e.alternate,e),e=e.return;pc=null}}function tu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Sd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Gc=0,eu(),gc=e,pc=n=Gr(e.current,null),mc=t,vc=0,yc=null,Ec=!1,bc=Re(e,t),Tc=!1,Rc=wc=Lc=Ac=kc=_c=0,xc=Ic=null,Cc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-be(r),s=1<<i;t|=e[i],r&=~s}return Sc=t,xr(),n}function nu(e,t){js=null,O.H=po,t===$i||t===Ji?(t=ss(),vc=3):t===Zi?(t=ss(),vc=4):vc=t===Do?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,yc=t,null===pc&&(_c=1,wo(e,qr(t,e.current)))}function ru(){var e=Ds.current;return null===e||((4194048&mc)===mc?null===Ps:((62914560&mc)===mc||0!==(536870912&mc))&&e===Ps)}function iu(){var e=O.H;return O.H=po,null===e?po:e}function su(){var e=O.A;return O.A=dc,e}function au(){_c=4,Ec||(4194048&mc)!==mc&&null!==Ds.current||(bc=!0),0===(134217727&kc)&&0===(134217727&Ac)||null===gc||Zc(gc,mc,wc,!1)}function ou(e,t,n){var r=fc;fc|=2;var i=iu(),s=su();gc===e&&mc===t||(Mc=null,tu(e,t)),t=!1;var a=_c;e:for(;;)try{if(0!==vc&&null!==pc){var o=pc,l=yc;switch(vc){case 8:eu(),a=6;break e;case 3:case 2:case 9:case 6:null===Ds.current&&(t=!0);var c=vc;if(vc=0,yc=null,hu(e,o,l,c),n&&bc){a=0;break e}break;default:c=vc,vc=0,yc=null,hu(e,o,l,c)}}lu(),a=_c;break}catch(u){nu(e,u)}return t&&e.shellSuspendCounter++,ki=_i=null,fc=r,O.H=i,O.A=s,null===pc&&(gc=null,mc=0,xr()),a}function lu(){for(;null!==pc;)uu(pc)}function cu(){for(;null!==pc&&!ae();)uu(pc)}function uu(e){var t=al(e.alternate,e,Sc);e.memoizedProps=e.pendingProps,null===t?fu(e):pc=t}function du(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ko(n,t,t.pendingProps,t.type,void 0,mc);break;case 11:t=Ko(n,t,t.pendingProps,t.type.render,t.ref,mc);break;case 5:aa(t);default:pl(n,t),t=al(n,t=pc=Hr(t,Sc),Sc)}e.memoizedProps=e.pendingProps,null===t?fu(e):pc=t}function hu(e,t,n,r){ki=_i=null,aa(t),os=null,ls=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ii(t,n,i,!0),null!==(n=Ds.current)){switch(n.tag){case 31:case 13:return null===Ps?au():null===n.alternate&&0===_c&&(_c=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===es?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),ku(e,r,i)),!1;case 22:return n.flags|=65536,r===es?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),ku(e,r,i)),!1}throw Error(a(435,n.tag))}return ku(e,r,i),au(),!1}if(di)return null!==(t=Ds.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==gi&&Ti(qr(e=Error(a(422),{cause:r}),n))):(r!==gi&&Ti(qr(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=qr(r,n),Ts(e,i=Io(e.stateNode,r,i)),4!==_c&&(_c=2)),!1;var s=Error(a(520),{cause:r});if(s=qr(s,n),null===Ic?Ic=[s]:Ic.push(s),4!==_c&&(_c=2),null===t)return!0;r=qr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,Ts(n,e=Io(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===Fc||!Fc.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,Co(i=xo(i),e,n,r),Ts(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,mc))return _c=1,wo(e,qr(n,e.current)),void(pc=null)}catch(s){if(null!==i)throw pc=i,s;return _c=1,wo(e,qr(n,e.current)),void(pc=null)}32768&t.flags?(di||1===r?e=!0:bc||0!==(536870912&mc)?e=!1:(Ec=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Ds.current)&&13===r.tag&&(r.flags|=16384))),gu(t,e)):fu(t)}function fu(e){var t=e;do{if(0!==(32768&t.flags))return void gu(t,Ec);e=t.return;var n=fl(t.alternate,t,Sc);if(null!==n)return void(pc=n);if(null!==(t=t.sibling))return void(pc=t);pc=t=e}while(null!==t);0===_c&&(_c=5)}function gu(e,t){do{var n=gl(e.alternate,e);if(null!==n)return n.flags&=32767,void(pc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(pc=e);pc=e=n}while(null!==e);_c=6,pc=null}function pu(e,t,n,r,i,s,o,l,c){e.cancelPendingCommit=null;do{bu()}while(0!==Nc);if(0!==(6&fc))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(s=t.lanes|t.childLanes,function(e,t,n,r,i,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-be(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Pe(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(a&~t))}(e,n,s|=Ir,o,l,c),e===gc&&(pc=gc=null,mc=0),Uc=t,Bc=e,Gc=n,Hc=s,jc=i,zc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,ie(he,function(){return Tu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=O.T,O.T=null,i=M.p,M.p=2,o=fc,fc|=4;try{!function(e,t){if(e=e.containerInfo,gd=Eh,ir(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(m){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var g;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==s||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(g=h.firstChild);)f=h,h=g;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=o),f===s&&++d===r&&(c=o),null!==(g=h.nextSibling))break;f=(h=f).parentNode}h=g}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(pd={focusedElem:e,selectionRange:n},Eh=!1,Pl=t;null!==Pl;)if(e=(t=Pl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Pl=e;else for(;null!==Pl;){switch(s=(t=Pl).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(i=e[n]).ref.impl=i.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var p=_o(n.type,i);e=r.getSnapshotBeforeUpdate(p,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(v){_u(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Id(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Id(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,Pl=e;break}Pl=t.return}}(e,t)}finally{fc=o,M.p=i,O.T=r}}Nc=1,mu(),vu(),yu()}}function mu(){if(1===Nc){Nc=0;var e=Bc,t=Uc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=O.T,O.T=null;var r=M.p;M.p=2;var i=fc;fc|=4;try{Kl(t,e);var s=pd,a=rr(e.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&nr(o.ownerDocument.documentElement,o)){if(null!==l&&ir(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),g=o.textContent.length,p=Math.min(l.start,g),m=void 0===l.end?p:Math.min(l.end,g);!f.extend&&p>m&&(a=m,m=p,p=a);var v=tr(o,p),y=tr(o,m);if(v&&y&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==y.node||f.focusOffset!==y.offset)){var E=d.createRange();E.setStart(v.node,v.offset),f.removeAllRanges(),p>m?(f.addRange(E),f.extend(y.node,y.offset)):(E.setEnd(y.node,y.offset),f.addRange(E))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var b=d[o];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}Eh=!!gd,pd=gd=null}finally{fc=i,M.p=r,O.T=n}}e.current=t,Nc=2}}function vu(){if(2===Nc){Nc=0;var e=Bc,t=Uc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=O.T,O.T=null;var r=M.p;M.p=2;var i=fc;fc|=4;try{Ol(e,t.alternate,t)}finally{fc=i,M.p=r,O.T=n}}Nc=3}}function yu(){if(4===Nc||3===Nc){Nc=0,oe();var e=Bc,t=Uc,n=Gc,r=zc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Nc=5:(Nc=0,Uc=Bc=null,Eu(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Fc=null),Ne(n),t=t.stateNode,ye&&"function"===typeof ye.onCommitFiberRoot)try{ye.onCommitFiberRoot(ve,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=O.T,i=M.p,M.p=2,O.T=null;try{for(var s=e.onRecoverableError,a=0;a<r.length;a++){var o=r[a];s(o.value,{componentStack:o.stack})}}finally{O.T=t,M.p=i}}0!==(3&Gc)&&bu(),Mu(e),i=e.pendingLanes,0!==(261930&n)&&0!==(42&i)?e===Kc?Vc++:(Vc=0,Kc=e):Vc=0,Fu(0,!1)}}function Eu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Gi(t)))}function bu(){return mu(),vu(),yu(),Tu()}function Tu(){if(5!==Nc)return!1;var e=Bc,t=Hc;Hc=0;var n=Ne(Gc),r=O.T,i=M.p;try{M.p=32>n?32:n,O.T=null,n=jc,jc=null;var s=Bc,o=Gc;if(Nc=0,Uc=Bc=null,Gc=0,0!==(6&fc))throw Error(a(331));var l=fc;if(fc|=4,lc(s.current),ec(s,s.current,o,n),fc=l,Fu(0,!1),ye&&"function"===typeof ye.onPostCommitFiberRoot)try{ye.onPostCommitFiberRoot(ve,s)}catch(c){}return!0}finally{M.p=i,O.T=r,Eu(e,t)}}function Su(e,t,n){t=qr(n,t),null!==(e=Es(e,t=Io(e.stateNode,t,2),2))&&(De(e,2),Mu(e))}function _u(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Fc||!Fc.has(r))){e=qr(n,e),null!==(r=Es(t,n=xo(2),2))&&(Co(n,r,t,e),De(r,2),Mu(r));break}}t=t.return}}function ku(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(Tc=!0,i.add(n),e=Au.bind(null,e,t,n),t.then(e,e))}function Au(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,gc===e&&(mc&n)===n&&(4===_c||3===_c&&(62914560&mc)===mc&&300>le()-Dc?0===(2&fc)&&tu(e,0):Lc|=n,Rc===mc&&(Rc=0)),Mu(e)}function Lu(e,t){0===t&&(t=xe()),null!==(e=Pr(e,t))&&(De(e,t),Mu(e))}function wu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Lu(e,n)}function Ru(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),Lu(e,n)}var Iu=null,xu=null,Cu=!1,Du=!1,Pu=!1,Ou=0;function Mu(e){e!==xu&&null===e.next&&(null===xu?Iu=xu=e:xu=xu.next=e),Du=!0,Cu||(Cu=!0,kd(function(){0!==(6&fc)?ie(ue,Nu):Bu()}))}function Fu(e,t){if(!Pu&&Du){Pu=!0;do{for(var n=!1,r=Iu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var a=r.suspendedLanes,o=r.pingedLanes;s=(1<<31-be(42|e)+1)-1,s=201326741&(s&=i&~(a&~o))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,Hu(r,s))}else s=mc,0===(3&(s=we(r,r===gc?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Re(r,s)||(n=!0,Hu(r,s));r=r.next}}while(n);Pu=!1}}function Nu(){Bu()}function Bu(){Du=Cu=!1;var e=0;0!==Ou&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==bd&&(bd=e,!0);return bd=null,!1}()&&(e=Ou);for(var t=le(),n=null,r=Iu;null!==r;){var i=r.next,s=Uu(r,t);0===s?(r.next=null,null===n?Iu=i:n.next=i,null===i&&(xu=n)):(n=r,(0!==e||0!==(3&s))&&(Du=!0)),r=i}0!==Nc&&5!==Nc||Fu(e,!1),0!==Ou&&(Ou=0)}function Uu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var a=31-be(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=Ie(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}if(n=mc,n=we(e,e===(t=gc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===vc||9===vc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&se(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Re(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&se(r),Ne(n)){case 2:case 8:n=de;break;case 32:default:n=he;break;case 268435456:n=ge}return r=Gu.bind(null,e),n=ie(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&se(r),e.callbackPriority=2,e.callbackNode=null,2}function Gu(e,t){if(0!==Nc&&5!==Nc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(bu()&&e.callbackNode!==n)return null;var r=mc;return 0===(r=we(e,e===gc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Xc(e,r,t),Uu(e,le()),null!=e.callbackNode&&e.callbackNode===n?Gu.bind(null,e):null)}function Hu(e,t){if(bu())return null;Xc(e,t,!0)}function ju(){if(0===Ou){var e=zi;0===e&&(e=_e,0===(261888&(_e<<=1))&&(_e=256)),Ou=e}return Ou}function zu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Ct(""+e)}function Vu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ku=0;Ku<kr.length;Ku++){var Yu=kr[Ku];Ar(Yu.toLowerCase(),"on"+(Yu[0].toUpperCase()+Yu.slice(1)))}Ar(mr,"onAnimationEnd"),Ar(vr,"onAnimationIteration"),Ar(yr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Er,"onTransitionRun"),Ar(br,"onTransitionStart"),Ar(Tr,"onTransitionCancel"),Ar(Sr,"onTransitionEnd"),it("onMouseEnter",["mouseout","mouseover"]),it("onMouseLeave",["mouseout","mouseover"]),it("onPointerEnter",["pointerout","pointerover"]),it("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wu));function Xu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=c;try{s(i)}catch(u){Lr(u)}i.currentTarget=null,s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=c;try{s(i)}catch(u){Lr(u)}i.currentTarget=null,s=l}}}}function Qu(e,t){var n=t[Ve];void 0===n&&(n=t[Ve]=new Set);var r=e+"__bubble";n.has(r)||(ed(t,e,2,!1),n.add(r))}function $u(e,t,n){var r=0;t&&(r|=4),ed(n,e,r,t)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function Ju(e){if(!e[Zu]){e[Zu]=!0,tt.forEach(function(t){"selectionchange"!==t&&(qu.has(t)||$u(t,!1,e),$u(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Zu]||(t[Zu]=!0,$u("selectionchange",!1,t))}}function ed(e,t,n,r){switch(Lh(t)){case 2:var i=bh;break;case 8:i=Th;break;default:i=Sh}n=i.bind(null,t,n,e),i=void 0,!jt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function td(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===i)return;a=a.return}for(;null!==o;){if(null===(a=Qe(o)))return;if(5===(c=a.tag)||6===c||26===c||27===c){r=s=a;continue e}o=o.parentNode}}r=r.return}Ut(function(){var r=s,i=Ot(n),a=[];e:{var o=_r.get(e);if(void 0!==o){var c=nn,u=e;switch(e){case"keypress":if(0===qt(n))break e;case"keydown":case"keyup":c=yn;break;case"focusin":u="focus",c=cn;break;case"focusout":u="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=on;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=bn;break;case mr:case vr:case yr:c=un;break;case Sr:c=Tn;break;case"scroll":case"scrollend":c=sn;break;case"wheel":c=Sn;break;case"copy":case"cut":case"paste":c=dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=En;break;case"toggle":case"beforetoggle":c=_n}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==o?o+"Capture":null:o;d=[];for(var g,p=r;null!==p;){var m=p;if(g=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===g||null===f||null!=(m=Gt(p,f))&&d.push(nd(p,m,g)),h)break;p=p.return}0<d.length&&(o=new c(o,u,null,n,i),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Pt||!(u=n.relatedTarget||n.fromElement)||!Qe(u)&&!u[ze])&&(c||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Qe(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=on,m="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=En,m="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==c?o:Ze(c),g=null==u?o:Ze(u),(o=new d(m,p+"leave",c,n,i)).target=h,o.relatedTarget=g,m=null,Qe(i)===r&&((d=new d(f,p+"enter",u,n,i)).target=g,d.relatedTarget=h,m=d),h=m,c&&u)e:{for(d=id,p=u,g=0,m=f=c;m;m=d(m))g++;m=0;for(var v=p;v;v=d(v))m++;for(;0<g-m;)f=d(f),g--;for(;0<m-g;)p=d(p),m--;for(;g--;){if(f===p||null!==p&&f===p.alternate){d=f;break e}f=d(f),p=d(p)}d=null}else d=null;null!==c&&sd(a,o,c,d,!1),null!==u&&null!==h&&sd(a,h,u,d,!0)}if("select"===(c=(o=r?Ze(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var y=Hn;else if(Mn(o))if(jn)y=$n;else{y=Xn;var E=qn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&Rt(r.elementType)&&(y=Hn):y=Qn;switch(y&&(y=y(e,r))?Fn(a,y,n,i):(E&&E(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&bt(o,"number",o.value)),E=r?Ze(r):window,e){case"focusin":(Mn(E)||"true"===E.contentEditable)&&(ar=E,or=r,lr=null);break;case"focusout":lr=or=ar=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,ur(a,n,i);break;case"selectionchange":if(sr)break;case"keydown":case"keyup":ur(a,n,i)}var b;if(An)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Pn?Cn(e,n)&&(T="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(T="onCompositionStart");T&&(Rn&&"ko"!==n.locale&&(Pn||"onCompositionStart"!==T?"onCompositionEnd"===T&&Pn&&(b=Wt()):(Kt="value"in(Vt=i)?Vt.value:Vt.textContent,Pn=!0)),0<(E=rd(r,T)).length&&(T=new hn(T,e,null,n,i),a.push({event:T,listeners:E}),b?T.data=b:null!==(b=Dn(n))&&(T.data=b))),(b=wn?function(e,t){switch(e){case"compositionend":return Dn(t);case"keypress":return 32!==t.which?null:(xn=!0,In);case"textInput":return(e=t.data)===In&&xn?null:e;default:return null}}(e,n):function(e,t){if(Pn)return"compositionend"===e||!An&&Cn(e,t)?(e=Wt(),Yt=Kt=Vt=null,Pn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(T=rd(r,"onBeforeInput")).length&&(E=new hn("onBeforeInput","beforeinput",null,n,i),a.push({event:E,listeners:T}),E.data=b)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=zu((i[je]||null).action),a=r.submitter;a&&null!==(t=(t=a[je]||null)?zu(t.formAction):a.getAttribute("formAction"))&&(s=t,a=null);var o=new nn("action","action",null,r,i);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Ou){var e=a?Vu(i,a):new FormData(i);eo(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(o.preventDefault(),e=a?Vu(i,a):new FormData(i),eo(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(a,e,r,n,i)}Xu(a,t)})}function nd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rd(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Gt(e,n))&&r.unshift(nd(e,i,s)),null!=(i=Gt(e,t))&&r.push(nd(e,i,s))),3===e.tag)return r;e=e.return}return[]}function id(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function sd(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,i?null!=(c=Gt(n,s))&&a.unshift(nd(n,c,l)):i||null!=(c=Gt(n,s))&&a.push(nd(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var ad=/\r\n?/g,od=/\u0000|\uFFFD/g;function ld(e){return("string"===typeof e?e:""+e).replace(ad,"\n").replace(od,"")}function cd(e,t){return t=ld(t),ld(e)===t}function ud(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||kt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&kt(e,""+r);break;case"className":ct(e,"class",r);break;case"tabIndex":ct(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,r);break;case"style":wt(e,r,s);break;case"data":if("object"!==t){ct(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Ct(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&ud(e,t,"name",i.name,i,null),ud(e,t,"formEncType",i.formEncType,i,null),ud(e,t,"formMethod",i.formMethod,i,null),ud(e,t,"formTarget",i.formTarget,i,null)):(ud(e,t,"encType",i.encType,i,null),ud(e,t,"method",i.method,i,null),ud(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Ct(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Dt);break;case"onScroll":null!=r&&Qu("scroll",e);break;case"onScrollEnd":null!=r&&Qu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Ct(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Qu("beforetoggle",e),Qu("toggle",e),lt(e,"popover",r);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":lt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=It.get(n)||n,r)}}function dd(e,t,n,r,i,s){switch(n){case"style":wt(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?kt(e,r):("number"===typeof r||"bigint"===typeof r)&&kt(e,""+r);break;case"onScroll":null!=r&&Qu("scroll",e);break;case"onScrollEnd":null!=r&&Qu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Dt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[je]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):lt(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function hd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qu("error",e),Qu("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:ud(e,t,r,o,n,null)}}return s&&ud(e,t,"srcSet",n.srcSet,n,null),void(i&&ud(e,t,"src",n.src,n,null));case"input":Qu("invalid",e);var l=r=o=s=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":s=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:ud(e,t,i,d,n,null)}}return void Et(e,r,l,c,u,o,s,!1);case"select":for(s in Qu("invalid",e),i=o=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":i=l;default:ud(e,t,s,l,n,null)}return t=r,n=o,e.multiple=!!i,void(null!=t?Tt(e,!!i,t,!1):null!=n&&Tt(e,!!i,n,!0));case"textarea":for(o in Qu("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:ud(e,t,o,l,n,null)}return void _t(e,i,s,r);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else ud(e,t,c,i,n,null);return;case"dialog":Qu("beforetoggle",e),Qu("toggle",e),Qu("cancel",e),Qu("close",e);break;case"iframe":case"object":Qu("load",e);break;case"video":case"audio":for(i=0;i<Wu.length;i++)Qu(Wu[i],e);break;case"image":Qu("error",e),Qu("load",e);break;case"details":Qu("toggle",e);break;case"embed":case"source":case"link":Qu("error",e),Qu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:ud(e,t,u,i,n,null)}return;default:if(Rt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&dd(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&ud(e,t,l,i,n,null))}function fd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var gd=null,pd=null;function md(e){return 9===e.nodeType?e:e.ownerDocument}function vd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function Ed(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var bd=null;var Td="function"===typeof setTimeout?setTimeout:void 0,Sd="function"===typeof clearTimeout?clearTimeout:void 0,_d="function"===typeof Promise?Promise:void 0,kd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof _d?function(e){return _d.resolve(null).then(e).catch(Ad)}:Td;function Ad(e){setTimeout(function(){throw e})}function Ld(e){return"head"===e}function wd(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)||"/&"===n){if(0===r)return e.removeChild(i),void Vh(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Bd(e.ownerDocument.documentElement);else if("head"===n){Bd(n=e.ownerDocument.head);for(var s=n.firstChild;s;){var a=s.nextSibling,o=s.nodeName;s[qe]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===s.rel.toLowerCase()||n.removeChild(s),s=a}}else"body"===n&&Bd(e.ownerDocument.body);n=i}while(n);Vh(t)}function Rd(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Id(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Id(n),Xe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function xd(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Pd(e.nextSibling)))return null}return e}function Cd(e){return"$?"===e.data||"$~"===e.data}function Dd(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Pd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Od=null;function Md(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Pd(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Fd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Nd(e,t,n){switch(t=md(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function Bd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Xe(e)}var Ud=new Map,Gd=new Set;function Hd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var jd=M.d;M.d={f:function(){var e=jd.f(),t=Jc();return e||t},r:function(e){var t=$e(e);null!==t&&5===t.tag&&"form"===t.type?no(t):jd.r(e)},D:function(e){jd.D(e),Vd("dns-prefetch",e,null)},C:function(e,t){jd.C(e,t),Vd("preconnect",e,t)},L:function(e,t,n){jd.L(e,t,n);var r=zd;if(r&&e&&t){var i='link[rel="preload"][as="'+vt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+vt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+vt(n.imageSizes)+'"]')):i+='[href="'+vt(e)+'"]';var s=i;switch(t){case"style":s=Yd(e);break;case"script":s=Xd(e)}Ud.has(s)||(e=f({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Ud.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Wd(s))||"script"===t&&r.querySelector(Qd(s))||(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){jd.m(e,t);var n=zd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+vt(r)+'"][href="'+vt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Xd(e)}if(!Ud.has(s)&&(e=f({rel:"modulepreload",href:e},t),Ud.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Qd(s)))return}hd(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){jd.X(e,t);var n=zd;if(n&&e){var r=Je(n).hoistableScripts,i=Xd(e),s=r.get(i);s||((s=n.querySelector(Qd(i)))||(e=f({src:e,async:!0},t),(t=Ud.get(i))&&eh(e,t),et(s=n.createElement("script")),hd(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){jd.S(e,t,n);var r=zd;if(r&&e){var i=Je(r).hoistableStyles,s=Yd(e);t=t||"default";var a=i.get(s);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(Wd(s)))o.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ud.get(s))&&Jd(e,n);var l=a=r.createElement("link");et(l),hd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Zd(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:o},i.set(s,a)}}},M:function(e,t){jd.M(e,t);var n=zd;if(n&&e){var r=Je(n).hoistableScripts,i=Xd(e),s=r.get(i);s||((s=n.querySelector(Qd(i)))||(e=f({src:e,async:!0,type:"module"},t),(t=Ud.get(i))&&eh(e,t),et(s=n.createElement("script")),hd(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var zd="undefined"===typeof document?null:document;function Vd(e,t,n){var r=zd;if(r&&"string"===typeof t&&t){var i=vt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),Gd.has(i)||(Gd.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function Kd(e,t,n,r){var i,s,o,l,c=(c=Y.current)?Hd(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Yd(n.href),(r=(n=Je(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Yd(n.href);var u=Je(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Wd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Ud.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ud.set(e,n),u||(i=c,s=e,o=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),hd(s,"link",o),et(s),i.head.appendChild(s))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Xd(n),(r=(n=Je(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Yd(e){return'href="'+vt(e)+'"'}function Wd(e){return'link[rel="stylesheet"]['+e+"]"}function qd(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Xd(e){return'[src="'+vt(e)+'"]'}function Qd(e){return"script[async]"+e}function $d(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+vt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var i=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),hd(r,"style",i),Zd(r,n.precedence,e),t.instance=r;case"stylesheet":i=Yd(n.href);var s=e.querySelector(Wd(i));if(s)return t.state.loading|=4,t.instance=s,et(s),s;r=qd(n),(i=Ud.get(i))&&Jd(r,i),et(s=(e.ownerDocument||e).createElement("link"));var o=s;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),hd(s,"link",r),t.state.loading|=4,Zd(s,n.precedence,e),t.instance=s;case"script":return s=Xd(n.src),(i=e.querySelector(Qd(s)))?(t.instance=i,et(i),i):(r=n,(i=Ud.get(s))&&eh(r=f({},n),i),et(i=(e=e.ownerDocument||e).createElement("script")),hd(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Zd(r,n.precedence,e));return t.instance}function Zd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)s=o;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Jd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var th=null;function nh(e,t,n){if(null===th){var r=new Map,i=th=new Map;i.set(n,r)}else(r=(i=th).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[qe]||s[He]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var a=s.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(s):r.set(a,[s])}}return r}function rh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function ih(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var sh=0;function ah(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)lh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var oh=null;function lh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,oh=new Map,t.forEach(ch,e),oh=null,ah.call(e))}function ch(e,t){if(!(4&t.state.loading)){var n=oh.get(e);if(n)var r=n.get(null);else{n=new Map,oh.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var a=i[s];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(i=t.instance).getAttribute("data-precedence"),(s=n.get(a)||r)===r&&n.set(null,i),n.set(a,i),this.count++,r=ah.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var uh={$$typeof:T,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function dh(e,t,n,r,i,s,a,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ce(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ce(0),this.hiddenUpdates=Ce(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function hh(e,t,n,r,i,s,a,o,l,c,u,d){return e=new dh(e,t,n,a,l,c,u,d,o),t=1,!0===s&&(t|=24),s=Br(3,null,null,t),e.current=s,s.stateNode=e,(t=Ui()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},ms(s),e}function fh(e){return e?e=Fr:Fr}function gh(e,t,n,r,i,s){i=fh(i),null===r.context?r.context=i:r.pendingContext=i,(r=ys(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=Es(e,r,t))&&(qc(n,0,t),bs(n,e,t))}function ph(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function mh(e,t){ph(e,t),(e=e.alternate)&&ph(e,t)}function vh(e){if(13===e.tag||31===e.tag){var t=Pr(e,67108864);null!==t&&qc(t,0,67108864),mh(e,67108864)}}function yh(e){if(13===e.tag||31===e.tag){var t=Yc(),n=Pr(e,t=Fe(t));null!==n&&qc(n,0,t),mh(e,t)}}var Eh=!0;function bh(e,t,n,r){var i=O.T;O.T=null;var s=M.p;try{M.p=2,Sh(e,t,n,r)}finally{M.p=s,O.T=i}}function Th(e,t,n,r){var i=O.T;O.T=null;var s=M.p;try{M.p=8,Sh(e,t,n,r)}finally{M.p=s,O.T=i}}function Sh(e,t,n,r){if(Eh){var i=_h(r);if(null===i)td(e,t,r,kh,n),Mh(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Rh=Fh(Rh,e,t,n,r,i),!0;case"dragenter":return Ih=Fh(Ih,e,t,n,r,i),!0;case"mouseover":return xh=Fh(xh,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ch.set(s,Fh(Ch.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dh.set(s,Fh(Dh.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mh(e,r),4&t&&-1<Oh.indexOf(e)){for(;null!==i;){var s=$e(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var a=Le(s.pendingLanes);if(0!==a){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-be(a);o.entanglements[1]|=l,a&=~l}Mu(s),0===(6&fc)&&(Oc=le()+500,Fu(0,!1))}}break;case 31:case 13:null!==(o=Pr(s,2))&&qc(o,0,2),Jc(),mh(s,2)}if(null===(s=_h(r))&&td(e,t,r,kh,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else td(e,t,r,null,n)}}function _h(e){return Ah(e=Ot(e))}var kh=null;function Ah(e){if(kh=null,null!==(e=Qe(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return kh=e,null}function Lh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case de:return 8;case he:case fe:return 32;case ge:return 268435456;default:return 32}default:return 32}}var wh=!1,Rh=null,Ih=null,xh=null,Ch=new Map,Dh=new Map,Ph=[],Oh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Mh(e,t){switch(e){case"focusin":case"focusout":Rh=null;break;case"dragenter":case"dragleave":Ih=null;break;case"mouseover":case"mouseout":xh=null;break;case"pointerover":case"pointerout":Ch.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dh.delete(t.pointerId)}}function Fh(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=$e(t))&&vh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Nh(e){var t=Qe(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void Ue(e.priority,function(){yh(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void Ue(e.priority,function(){yh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=_h(e.nativeEvent);if(null!==n)return null!==(t=$e(n))&&vh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Pt=r,n.target.dispatchEvent(r),Pt=null,t.shift()}return!0}function Uh(e,t,n){Bh(e)&&n.delete(t)}function Gh(){wh=!1,null!==Rh&&Bh(Rh)&&(Rh=null),null!==Ih&&Bh(Ih)&&(Ih=null),null!==xh&&Bh(xh)&&(xh=null),Ch.forEach(Uh),Dh.forEach(Uh)}function Hh(e,t){e.blockedOn===t&&(e.blockedOn=null,wh||(wh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Gh)))}var jh=null;function zh(e){jh!==e&&(jh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){jh===e&&(jh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===Ah(r||n))continue;break}var s=$e(n);null!==s&&(e.splice(t,3),t-=3,eo(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Vh(e){function t(t){return Hh(t,e)}null!==Rh&&Hh(Rh,e),null!==Ih&&Hh(Ih,e),null!==xh&&Hh(xh,e),Ch.forEach(t),Dh.forEach(t);for(var n=0;n<Ph.length;n++){var r=Ph[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Ph.length&&null===(n=Ph[0]).blockedOn;)Nh(n),null===n.blockedOn&&Ph.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],a=i[je]||null;if("function"===typeof s)a||zh(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(i=s,a=s[je]||null)o=a.formAction;else if(null!==Ah(i))continue}else o=a.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),zh(n)}}}function Kh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==i&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==i&&(i(),i=null)}}}function Yh(e){this._internalRoot=e}function Wh(e){this._internalRoot=e}Wh.prototype.render=Yh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));gh(t.current,Yc(),e,t,null,null)},Wh.prototype.unmount=Yh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;gh(e.current,2,null,e,null,null),Jc(),t[ze]=null}},Wh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Be();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ph.length&&0!==t&&t<Ph[n].priority;n++);Ph.splice(n,0,e),0===n&&Nh(e)}};var qh=i.version;if("19.2.0"!==qh)throw Error(a(527,qh,"19.2.0"));M.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return d(i),e;if(s===r)return d(i),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Xh={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qh.isDisabled&&Qh.supportsFiber)try{ve=Qh.inject(Xh),ye=Qh}catch(Zh){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,r="",i=ko,s=Ao,l=Lo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=hh(e,1,!1,null,0,n,r,null,i,s,l,Kh),e[ze]=t.current,Ju(e),new Yh(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(a(299));var r=!1,i="",s=ko,l=Ao,c=Lo,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=hh(e,1,!0,t,0,r,i,u,s,l,c,Kh)).context=fh(null),n=t.current,(i=ys(r=Fe(r=Yc()))).callback=null,Es(n,i,r),n=r,t.current.lanes=n,De(t,n),Mu(t),e[ze]=t.current,Ju(e),new Wh(t)},t.version="19.2.0"},43:(e,t,n)=>{e.exports=n(288)},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),g=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function E(){}function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},E.prototype=y.prototype;var T=b.prototype=new E;T.constructor=b,m(T,y.prototype),T.isPureReactComponent=!0;var S=Array.isArray;function _(){}var k={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function L(e,t,r){var i=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==i?i:null,props:r}}function w(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var R=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function x(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return x((u=e._init)(e._payload),t,i,s,a)}}if(u)return a=a(e),u=""===s?"."+I(e,0):s,S(a)?(i="",null!=u&&(i=u.replace(R,"$&/")+"/"),x(a,t,i,"",function(e){return e})):null!=a&&(w(a)&&(l=a,c=i+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(R,"$&/")+"/")+u,a=L(l.type,c,l.props)),t.push(a)),1;u=0;var d,f=""===s?".":s+":";if(S(e))for(var p=0;p<e.length;p++)u+=x(s=e[p],t,i,o=f+I(s,p),a);else if("function"===typeof(p=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=g&&d[g]||d["@@iterator"])?d:null))for(e=p.call(e),p=0;!(s=e.next()).done;)u+=x(s=s.value,t,i,o=f+I(s,p++),a);else if("object"===o){if("function"===typeof e.then)return x(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(_,_):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,s,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function C(e,t,n){if(null==e)return e;var r=[],i=0;return x(e,r,"","",function(e){return t.call(n,e,i++)}),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},O={map:C,forEach:function(e,t,n){C(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return C(e,function(){t++}),t},toArray:function(e){return C(e,function(e){return e})||[]},only:function(e){if(!w(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=f,t.Children=O,t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return k.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.key&&(i=""+t.key),t)!A.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];r.children=a}return L(e.type,i,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)A.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];i.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return L(e,s,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=w,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.T,n={};k.T=n;try{var r=e(),i=k.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(_,P)}catch(s){P(s)}finally{null!==t&&null!==n.types&&(t.types=n.types),k.T=t}},t.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},t.use=function(e){return k.H.use(e)},t.useActionState=function(e,t,n){return k.H.useActionState(e,t,n)},t.useCallback=function(e,t){return k.H.useCallback(e,t)},t.useContext=function(e){return k.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return k.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return k.H.useEffect(e,t)},t.useEffectEvent=function(e){return k.H.useEffectEvent(e)},t.useId=function(){return k.H.useId()},t.useImperativeHandle=function(e,t,n){return k.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.H.useMemo(e,t)},t.useOptimistic=function(e,t){return k.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return k.H.useReducer(e,t,n)},t.useRef=function(e){return k.H.useRef(e)},t.useState=function(e){return k.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.H.useTransition()},t.version="19.2.0"},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var a={d:{f:s,r:function(){throw Error(i(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.0"},799:(e,t)=>{var n=Symbol.for("react.transitional.element");function r(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}Symbol.for("react.fragment"),t.jsx=r,t.jsxs=r},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,g=!1,p=!1,m=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,E="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function T(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function S(e){if(m=!1,T(e),!p)if(null!==r(c))p=!0,k||(k=!0,_());else{var t=r(u);null!==t&&D(S,t.startTime-e)}}var _,k=!1,A=-1,L=5,w=-1;function R(){return!!v||!(t.unstable_now()-w<L)}function I(){if(v=!1,k){var e=t.unstable_now();w=e;var n=!0;try{e:{p=!1,m&&(m=!1,E(A),A=-1),g=!0;var s=f;try{t:{for(T(e),h=r(c);null!==h&&!(h.expirationTime>e&&R());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,T(e),n=!0;break t}h===r(c)&&i(c),T(e)}else i(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&D(S,l.startTime-e),n=!1}}break e}finally{h=null,f=s,g=!1}n=void 0}}finally{n?_():k=!1}}}if("function"===typeof b)_=function(){b(I)};else if("undefined"!==typeof MessageChannel){var x=new MessageChannel,C=x.port2;x.port1.onmessage=I,_=function(){C.postMessage(null)}}else _=function(){y(I,0)};function D(e,n){A=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(m?(E(A),A=-1):m=!0,D(S,s-a))):(e.sortIndex=o,n(c,e),p||g||(p=!0,k||(k=!0,_()))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".e5c17d29.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="neimark-hostel:";n.l=(r,i,s,a)=>{if(e[r])e[r].push(i);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+s){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=r),e[r]=[i];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=s);var a=n.p+n.u(t),o=new Error;n.l(a,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,i[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,s,[a,o,l]=r,c=0;if(a.some(t=>0!==e[t])){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(l)l(n)}for(t&&t(r);c<a.length;c++)s=a[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkneimark_hostel=self.webpackChunkneimark_hostel||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n(43),i=n(391);const s="AppHeader_header__nHHDe",a="AppHeader_logo__gSfYP",o="AppHeader_header_left__BYgit",l="AppHeader_header_right__aJ3xu",c="AppHeader_header_button__QY66c",u="AppHeader_navigation__-DuP-";function d(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const h="Tab_tab__FudpZ",f="Tab_tab_active__jQzHr";var g=n(579);const p=["active","title","onClick"],m=e=>{let{active:t,title:n,onClick:r}=e;d(e,p);return(0,g.jsx)("div",{className:"".concat(h," ").concat(t&&f),onClick:r,children:n})},v="Button_button__wiIYs",y="Button_button_element__highlight__O7et+",E=["active","className","type","title","onClick","defaultClassName"],b=(0,r.forwardRef)((e,t)=>{let{active:n,className:r,type:i,title:s,onClick:a,defaultClassName:o=!0}=e;d(e,E);return(0,g.jsx)("button",{ref:t,className:"".concat(o&&v," ").concat(r),type:null!==i&&void 0!==i?i:"button",onClick:e=>a(e),children:(0,g.jsx)("span",{className:"".concat(n&&y),children:s})})}),T=(0,r.createContext)(["hidden",()=>{}]),S=(0,r.createContext)(["home",()=>{}]),_=(0,r.createContext)(["home",()=>{}]);var k,A,L,w,R,I,x,C,D;const P=["title","titleId"];function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O.apply(null,arguments)}function M(e,t){let{title:n,titleId:i}=e,s=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,P);return r.createElement("svg",O({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 238 36",fill:"none",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,k||(k=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M225.38925 20.277975H220.018V32.4H216.47225V6H220.018V17.066H225.474L233.05325 6H237.19325L228.51 18.473975L238 32.4H233.64775L225.38925 20.277975Z",fill:"#FEFEFE"})),A||(A=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M197.2205 9.234V19.640025H203.6885C205.7345 19.640025 207.22225 19.200025 208.11075 18.320025C208.9995 17.440025 209.454 16.14205 209.454 14.42605C209.454 12.71005 209.02 11.39005 208.1315 10.532075C207.243 9.67405 205.755 9.234 203.6885 9.234H197.2205ZM193.74875 6H205.321C210.136 6 212.8845 9.41005 212.8845 14.44805C212.8845 19.48605 210.012 22.89605 205.321 22.89605H197.2205V32.4H193.74875V6Z",fill:"#FEFEFE"})),L||(L=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M174.401 21.818H184.4145L180.089 7.407975H178.705L174.401 21.818ZM175.35275 6L167.43725 32.4H171.222L173.42775 25.052H185.4525L187.572 32.4H191.35675L183.44125 6H175.331H175.35275Z",fill:"#FEFEFE"})),w||(w=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M136.34175 6V32.4H139.98125V7.429975H140.566L147.43325 32.4H153.99725L160.821 7.429975H161.40575V32.4H165.04525V6H157.8315L151.00775 30.97H150.48775L143.64225 6H136.34175Z",fill:"#FEFEFE"})),R||(R=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M110.03025 6V32.4H116.99375L127.4815 7.429975H127.991V32.4H131.55775V6H124.55175L114.08525 30.97H113.597V6H110.03025Z",fill:"#FEFEFE"})),I||(I=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M105.24625 6H87.3065V32.4H105.24625V29.166H90.762V20.32195H102.8875V17.08795H90.762V9.211975H105.24625V6Z",fill:"#FEFEFE"})),x||(x=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M63.341 6H59.799V32.4H63.341V20.277975H77.78475V32.4H81.32675V6H77.78475V17.066H63.341V6Z",fill:"#FEFEFE"})),C||(C=r.createElement("path",{d:"M125.578 0H114.814V3.6H125.578V0Z",fill:"#FEFEFE"})),D||(D=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.150425 26.8305V11.569525H13.6692V26.8305H12.150425ZM25.8195 26.8305V11.569525H27.33825V26.8305H25.8195ZM14.69595 18.435875H24.792725V19.964125H14.69595V18.435875ZM36.42975 5.456525V8.513H39.46725V32.9435H36.42975V36H15.187975V32.9435H6.075175C2.7381 32.9435 0 30.18825 0 26.8305V8.513C0 5.15515 2.7381 2.4 6.075175 2.4H27.317V5.456525H6.075175C5.2409 5.456525 4.4922 5.800875 3.936025 6.360525C3.37985 6.920175 3.037625 7.673525 3.037625 8.513V26.8305C3.037625 27.67 3.37985 28.42325 3.936025 28.983C4.4922 29.5425 5.2409 29.887 6.075175 29.887H15.187975V32.9435H36.42975V8.513H27.317V5.456525H36.42975Z",fill:"#FD9968"})))}const F=r.forwardRef(M);n.p;function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var U,G,H,j,z,V,K,Y,W,q,X,Q={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},$={duration:.5,overwrite:!1,delay:0},Z=1e8,J=1e-8,ee=2*Math.PI,te=ee/4,ne=0,re=Math.sqrt,ie=Math.cos,se=Math.sin,ae=function(e){return"string"===typeof e},oe=function(e){return"function"===typeof e},le=function(e){return"number"===typeof e},ce=function(e){return"undefined"===typeof e},ue=function(e){return"object"===typeof e},de=function(e){return!1!==e},he=function(){return"undefined"!==typeof window},fe=function(e){return oe(e)||ae(e)},ge="function"===typeof ArrayBuffer&&ArrayBuffer.isView||function(){},pe=Array.isArray,me=/(?:-?\.?\d|\.)+/gi,ve=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,ye=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Ee=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,be=/[+-]=-?[.\d]+/,Te=/[^,'"\[\]\s]+/gi,Se=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,_e={},ke={},Ae=function(e){return(ke=tt(e,_e))&&rr},Le=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},we=function(e,t){return!t&&console.warn(e)},Re=function(e,t){return e&&(_e[e]=t)&&ke&&(ke[e]=t)||_e},Ie=function(){return 0},xe={suppressEvents:!0,isStart:!0,kill:!1},Ce={suppressEvents:!0,kill:!1},De={suppressEvents:!0},Pe={},Oe=[],Me={},Fe={},Ne={},Be=30,Ue=[],Ge="",He=function(e){var t,n,r=e[0];if(ue(r)||oe(r)||(e=[e]),!(t=(r._gsap||{}).harness)){for(n=Ue.length;n--&&!Ue[n].targetTest(r););t=Ue[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new vn(e[n],t)))||e.splice(n,1);return e},je=function(e){return e._gsap||He(Pt(e))[0]._gsap},ze=function(e,t,n){return(n=e[t])&&oe(n)?e[t]():ce(n)&&e.getAttribute&&e.getAttribute(t)||n},Ve=function(e,t){return(e=e.split(",")).forEach(t)||e},Ke=function(e){return Math.round(1e5*e)/1e5||0},Ye=function(e){return Math.round(1e7*e)/1e7||0},We=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),"+"===n?e+r:"-"===n?e-r:"*"===n?e*r:e/r},qe=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},Xe=function(){var e,t,n=Oe.length,r=Oe.slice(0);for(Me={},Oe.length=0,e=0;e<n;e++)(t=r[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},Qe=function(e){return!!(e._initted||e._startAt||e.add)},$e=function(e,t,n,r){Oe.length&&!G&&Xe(),e.render(t,n,r||!!(G&&t<0&&Qe(e))),Oe.length&&!G&&Xe()},Ze=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(Te).length<2?t:ae(e)?e.trim():e},Je=function(e){return e},et=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},tt=function(e,t){for(var n in t)e[n]=t[n];return e},nt=function e(t,n){for(var r in n)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(t[r]=ue(n[r])?e(t[r]||(t[r]={}),n[r]):n[r]);return t},rt=function(e,t){var n,r={};for(n in e)n in t||(r[n]=e[n]);return r},it=function(e){var t,n=e.parent||j,r=e.keyframes?(t=pe(e.keyframes),function(e,n){for(var r in n)r in e||"duration"===r&&t||"ease"===r||(e[r]=n[r])}):et;if(de(e.inherit))for(;n;)r(e,n.vars.defaults),n=n.parent||n._dp;return e},st=function(e,t,n,r,i){void 0===n&&(n="_first"),void 0===r&&(r="_last");var s,a=e[r];if(i)for(s=t[i];a&&a[i]>s;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=a,t.parent=t._dp=e,t},at=function(e,t,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var i=t._prev,s=t._next;i?i._next=s:e[n]===t&&(e[n]=s),s?s._prev=i:e[r]===t&&(e[r]=i),t._next=t._prev=t.parent=null},ot=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},lt=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},ct=function(e,t,n,r){return e._startAt&&(G?e._startAt.revert(Ce):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},ut=function e(t){return!t||t._ts&&e(t.parent)},dt=function(e){return e._repeat?ht(e._tTime,e=e.duration()+e._rDelay)*e:0},ht=function(e,t){var n=Math.floor(e=Ye(e/t));return e&&n===e?n-1:n},ft=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},gt=function(e){return e._end=Ye(e._start+(e._tDur/Math.abs(e._ts||e._rts||J)||0))},pt=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=Ye(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),gt(e),n._dirty||lt(n,e)),e},mt=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=ft(e.rawTime(),t),(!t._dur||Rt(0,t.totalDuration(),n)-t._tTime>J)&&t.render(n,!0)),lt(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-1e-8}},vt=function(e,t,n,r){return t.parent&&ot(t),t._start=Ye((le(n)?n:n||e!==j?At(e,n,t):e._time)+t._delay),t._end=Ye(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),st(e,t,"_first","_last",e._sort?"_start":0),Tt(t)||(e._recent=t),r||mt(e,t),e._ts<0&&pt(e,e._tTime),e},yt=function(e,t){return(_e.ScrollTrigger||Le("scrollTrigger",t))&&_e.ScrollTrigger.create(t,e)},Et=function(e,t,n,r,i){return An(e,t,i),e._initted?!n&&e._pt&&!G&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&W!==rn.frame?(Oe.push(e),e._lazy=[i,r],1):void 0:1},bt=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},Tt=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},St=function(e,t,n,r){var i=e._repeat,s=Ye(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=s/e._dur),e._dur=s,e._tDur=i?i<0?1e10:Ye(s*(i+1)+e._rDelay*i):s,a>0&&!r&&pt(e,e._tTime=e._tDur*a),e.parent&&gt(e),n||lt(e.parent,e),e},_t=function(e){return e instanceof En?lt(e):St(e,e._dur)},kt={_start:0,endTime:Ie,totalDuration:Ie},At=function e(t,n,r){var i,s,a,o=t.labels,l=t._recent||kt,c=t.duration()>=Z?l.endTime(!1):t._dur;return ae(n)&&(isNaN(n)||n in o)?(s=n.charAt(0),a="%"===n.substr(-1),i=n.indexOf("="),"<"===s||">"===s?(i>=0&&(n=n.replace(/=/,"")),("<"===s?l._start:l.endTime(l._repeat>=0))+(parseFloat(n.substr(1))||0)*(a?(i<0?l:r).totalDuration()/100:1)):i<0?(n in o||(o[n]=c),o[n]):(s=parseFloat(n.charAt(i-1)+n.substr(i+1)),a&&r&&(s=s/100*(pe(r)?r[0]:r).totalDuration()),i>1?e(t,n.substr(0,i-1),r)+s:c+s)):null==n?c:+n},Lt=function(e,t,n){var r,i,s=le(t[1]),a=(s?2:1)+(e<2?0:1),o=t[a];if(s&&(o.duration=t[1]),o.parent=n,e){for(r=o,i=n;i&&!("immediateRender"in r);)r=i.vars.defaults||{},i=de(i.vars.inherit)&&i.parent;o.immediateRender=de(r.immediateRender),e<2?o.runBackwards=1:o.startAt=t[a-1]}return new xn(t[0],o,t[a+1])},wt=function(e,t){return e||0===e?t(e):t},Rt=function(e,t,n){return n<e?e:n>t?t:n},It=function(e,t){return ae(e)&&(t=Se.exec(e))?t[1]:""},xt=[].slice,Ct=function(e,t){return e&&ue(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&ue(e[0]))&&!e.nodeType&&e!==z},Dt=function(e,t,n){return void 0===n&&(n=[]),e.forEach(function(e){var r;return ae(e)&&!t||Ct(e,1)?(r=n).push.apply(r,Pt(e)):n.push(e)})||n},Pt=function(e,t,n){return H&&!t&&H.selector?H.selector(e):!ae(e)||n||!V&&sn()?pe(e)?Dt(e,n):Ct(e)?xt.call(e,0):e?[e]:[]:xt.call((t||K).querySelectorAll(e),0)},Ot=function(e){return e=Pt(e)[0]||we("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return Pt(t,n.querySelectorAll?n:n===e?we("Invalid scope")||K.createElement("div"):e)}},Mt=function(e){return e.sort(function(){return.5-Math.random()})},Ft=function(e){if(oe(e))return e;var t=ue(e)?e:{each:e},n=hn(t.ease),r=t.from||0,i=parseFloat(t.base)||0,s={},a=r>0&&r<1,o=isNaN(r)||a,l=t.axis,c=r,u=r;return ae(r)?c=u={center:.5,edges:.5,end:1}[r]||0:!a&&o&&(c=r[0],u=r[1]),function(e,a,d){var h,f,g,p,m,v,y,E,b,T=(d||t).length,S=s[T];if(!S){if(!(b="auto"===t.grid?0:(t.grid||[1,Z])[1])){for(y=-Z;y<(y=d[b++].getBoundingClientRect().left)&&b<T;);b<T&&b--}for(S=s[T]=[],h=o?Math.min(b,T)*c-.5:r%b,f=b===Z?0:o?T*u/b-.5:r/b|0,y=0,E=Z,v=0;v<T;v++)g=v%b-h,p=f-(v/b|0),S[v]=m=l?Math.abs("y"===l?p:g):re(g*g+p*p),m>y&&(y=m),m<E&&(E=m);"random"===r&&Mt(S),S.max=y-E,S.min=E,S.v=T=(parseFloat(t.amount)||parseFloat(t.each)*(b>T?T-1:l?"y"===l?T/b:b:Math.max(b,T/b))||0)*("edges"===r?-1:1),S.b=T<0?i-T:i,S.u=It(t.amount||t.each)||0,n=n&&T<0?un(n):n}return T=(S[e]-S.min)/S.max||0,Ye(S.b+(n?n(T):T)*S.v)+S.u}},Nt=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=Ye(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(le(n)?0:It(n))}},Bt=function(e,t){var n,r,i=pe(e);return!i&&ue(e)&&(n=i=e.radius||Z,e.values?(e=Pt(e.values),(r=!le(e[0]))&&(n*=n)):e=Nt(e.increment)),wt(t,i?oe(e)?function(t){return r=e(t),Math.abs(r-t)<=n?r:t}:function(t){for(var i,s,a=parseFloat(r?t.x:t),o=parseFloat(r?t.y:0),l=Z,c=0,u=e.length;u--;)(i=r?(i=e[u].x-a)*i+(s=e[u].y-o)*s:Math.abs(e[u]-a))<l&&(l=i,c=u);return c=!n||l<=n?e[c]:t,r||c===t||le(t)?c:c+It(t)}:Nt(e))},Ut=function(e,t,n,r){return wt(pe(e)?!t:!0===n?!!(n=0):!r,function(){return pe(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+.99*n))/n)*n*r)/r})},Gt=function(e,t,n){return wt(n,function(n){return e[~~t(n)]})},Ht=function(e){for(var t,n,r,i,s=0,a="";~(t=e.indexOf("random(",s));)r=e.indexOf(")",t),i="["===e.charAt(t+7),n=e.substr(t+7,r-t-7).match(i?Te:me),a+=e.substr(s,t-s)+Ut(i?n:+n[0],i?0:+n[1],+n[2]||1e-5),s=r+1;return a+e.substr(s,e.length-s)},jt=function(e,t,n,r,i){var s=t-e,a=r-n;return wt(i,function(t){return n+((t-e)/s*a||0)})},zt=function(e,t,n){var r,i,s,a=e.labels,o=Z;for(r in a)(i=a[r]-t)<0===!!n&&i&&o>(i=Math.abs(i))&&(s=r,o=i);return s},Vt=function(e,t,n){var r,i,s,a=e.vars,o=a[t],l=H,c=e._ctx;if(o)return r=a[t+"Params"],i=a.callbackScope||e,n&&Oe.length&&Xe(),c&&(H=c),s=r?o.apply(i,r):o.call(i),H=l,s},Kt=function(e){return ot(e),e.scrollTrigger&&e.scrollTrigger.kill(!!G),e.progress()<1&&Vt(e,"onInterrupt"),e},Yt=[],Wt=function(e){if(e)if(e=!e.name&&e.default||e,he()||e.headless){var t=e.name,n=oe(e),r=t&&!n&&e.init?function(){this._props=[]}:e,i={init:Ie,render:Un,add:_n,kill:Hn,modifier:Gn,rawVars:0},s={targetTest:0,get:0,getSetter:Mn,aliases:{},register:0};if(sn(),e!==r){if(Fe[t])return;et(r,et(rt(e,i),s)),tt(r.prototype,tt(i,rt(e,s))),Fe[r.prop=t]=r,e.targetTest&&(Ue.push(r),Pe[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}Re(t,r),e.register&&e.register(rr,r,Vn)}else Yt.push(e)},qt=255,Xt={aqua:[0,qt,qt],lime:[0,qt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,qt],navy:[0,0,128],white:[qt,qt,qt],olive:[128,128,0],yellow:[qt,qt,0],orange:[qt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[qt,0,0],pink:[qt,192,203],cyan:[0,qt,qt],transparent:[qt,qt,qt,0]},Qt=function(e,t,n){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)*qt+.5|0},$t=function(e,t,n){var r,i,s,a,o,l,c,u,d,h,f=e?le(e)?[e>>16,e>>8&qt,e&qt]:0:Xt.black;if(!f){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),Xt[e])f=Xt[e];else if("#"===e.charAt(0)){if(e.length<6&&(r=e.charAt(1),i=e.charAt(2),s=e.charAt(3),e="#"+r+r+i+i+s+s+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(f=parseInt(e.substr(1,6),16))>>16,f>>8&qt,f&qt,parseInt(e.substr(7),16)/255];f=[(e=parseInt(e.substr(1),16))>>16,e>>8&qt,e&qt]}else if("hsl"===e.substr(0,3))if(f=h=e.match(me),t){if(~e.indexOf("="))return f=e.match(ve),n&&f.length<4&&(f[3]=1),f}else a=+f[0]%360/360,o=+f[1]/100,r=2*(l=+f[2]/100)-(i=l<=.5?l*(o+1):l+o-l*o),f.length>3&&(f[3]*=1),f[0]=Qt(a+1/3,r,i),f[1]=Qt(a,r,i),f[2]=Qt(a-1/3,r,i);else f=e.match(me)||Xt.transparent;f=f.map(Number)}return t&&!h&&(r=f[0]/qt,i=f[1]/qt,s=f[2]/qt,l=((c=Math.max(r,i,s))+(u=Math.min(r,i,s)))/2,c===u?a=o=0:(d=c-u,o=l>.5?d/(2-c-u):d/(c+u),a=c===r?(i-s)/d+(i<s?6:0):c===i?(s-r)/d+2:(r-i)/d+4,a*=60),f[0]=~~(a+.5),f[1]=~~(100*o+.5),f[2]=~~(100*l+.5)),n&&f.length<4&&(f[3]=1),f},Zt=function(e){var t=[],n=[],r=-1;return e.split(en).forEach(function(e){var i=e.match(ye)||[];t.push.apply(t,i),n.push(r+=i.length+1)}),t.c=n,t},Jt=function(e,t,n){var r,i,s,a,o="",l=(e+o).match(en),c=t?"hsla(":"rgba(",u=0;if(!l)return e;if(l=l.map(function(e){return(e=$t(e,t,1))&&c+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"}),n&&(s=Zt(e),(r=n.c).join(o)!==s.c.join(o)))for(a=(i=e.replace(en,"1").split(ye)).length-1;u<a;u++)o+=i[u]+(~r.indexOf(u)?l.shift()||c+"0,0,0,0)":(s.length?s:l.length?l:n).shift());if(!i)for(a=(i=e.split(en)).length-1;u<a;u++)o+=i[u]+l[u];return o+i[a]},en=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in Xt)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),tn=/hsl[a]?\(/,nn=function(e){var t,n=e.join(" ");if(en.lastIndex=0,en.test(n))return t=tn.test(n),e[1]=Jt(e[1],t),e[0]=Jt(e[0],t,Zt(e[1])),!0},rn=function(){var e,t,n,r,i,s,a=Date.now,o=500,l=33,c=a(),u=c,d=1e3/240,h=d,f=[],g=function n(g){var p,m,v,y,E=a()-u,b=!0===g;if((E>o||E<0)&&(c+=E-l),((p=(v=(u+=E)-c)-h)>0||b)&&(y=++r.frame,i=v-1e3*r.time,r.time=v/=1e3,h+=p+(p>=d?4:d-p),m=1),b||(e=t(n)),m)for(s=0;s<f.length;s++)f[s](v,i,y,g)};return r={time:0,frame:0,tick:function(){g(!0)},deltaRatio:function(e){return i/(1e3/(e||60))},wake:function(){Y&&(!V&&he()&&(z=V=window,K=z.document||{},_e.gsap=rr,(z.gsapVersions||(z.gsapVersions=[])).push(rr.version),Ae(ke||z.GreenSockGlobals||!z.gsap&&z||{}),Yt.forEach(Wt)),n="undefined"!==typeof requestAnimationFrame&&requestAnimationFrame,e&&r.sleep(),t=n||function(e){return setTimeout(e,h-1e3*r.time+1|0)},X=1,g(2))},sleep:function(){(n?cancelAnimationFrame:clearTimeout)(e),X=0,t=Ie},lagSmoothing:function(e,t){o=e||1/0,l=Math.min(t||33,o)},fps:function(e){d=1e3/(e||240),h=1e3*r.time+d},add:function(e,t,n){var i=t?function(t,n,s,a){e(t,n,s,a),r.remove(i)}:e;return r.remove(e),f[n?"unshift":"push"](i),sn(),i},remove:function(e,t){~(t=f.indexOf(e))&&f.splice(t,1)&&s>=t&&s--},_listeners:f}}(),sn=function(){return!X&&rn.wake()},an={},on=/^[\d.\-M][\d.\-,\s]/,ln=/["']/g,cn=function(e){for(var t,n,r,i={},s=e.substr(1,e.length-3).split(":"),a=s[0],o=1,l=s.length;o<l;o++)n=s[o],t=o!==l-1?n.lastIndexOf(","):n.length,r=n.substr(0,t),i[a]=isNaN(r)?r.replace(ln,"").trim():+r,a=n.substr(t+1).trim();return i},un=function(e){return function(t){return 1-e(1-t)}},dn=function e(t,n){for(var r,i=t._first;i;)i instanceof En?e(i,n):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===n||(i.timeline?e(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},hn=function(e,t){return e&&(oe(e)?e:an[e]||function(e){var t=(e+"").split("("),n=an[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[cn(t[1])]:function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<n?e.indexOf(")",n+1):n)}(e).split(",").map(Ze)):an._CE&&on.test(e)?an._CE("",e):n}(e))||t},fn=function(e,t,n,r){void 0===n&&(n=function(e){return 1-t(1-e)}),void 0===r&&(r=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var i,s={easeIn:t,easeOut:n,easeInOut:r};return Ve(e,function(e){for(var t in an[e]=_e[e]=s,an[i=e.toLowerCase()]=n,s)an[i+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=an[e+"."+t]=s[t]}),s},gn=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},pn=function e(t,n,r){var i=n>=1?n:1,s=(r||(t?.3:.45))/(n<1?n:1),a=s/ee*(Math.asin(1/i)||0),o=function(e){return 1===e?1:i*Math.pow(2,-10*e)*se((e-a)*s)+1},l="out"===t?o:"in"===t?function(e){return 1-o(1-e)}:gn(o);return s=ee/s,l.config=function(n,r){return e(t,n,r)},l},mn=function e(t,n){void 0===n&&(n=1.70158);var r=function(e){return e?--e*e*((n+1)*e+n)+1:0},i="out"===t?r:"in"===t?function(e){return 1-r(1-e)}:gn(r);return i.config=function(n){return e(t,n)},i};Ve("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var n=t<5?t+1:t;fn(e+",Power"+(n-1),t?function(e){return Math.pow(e,n)}:function(e){return e},function(e){return 1-Math.pow(1-e,n)},function(e){return e<.5?Math.pow(2*e,n)/2:1-Math.pow(2*(1-e),n)/2})}),an.Linear.easeNone=an.none=an.Linear.easeIn,fn("Elastic",pn("in"),pn("out"),pn()),function(e,t){var n=1/t,r=2*n,i=2.5*n,s=function(s){return s<n?e*s*s:s<r?e*Math.pow(s-1.5/t,2)+.75:s<i?e*(s-=2.25/t)*s+.9375:e*Math.pow(s-2.625/t,2)+.984375};fn("Bounce",function(e){return 1-s(1-e)},s)}(7.5625,2.75),fn("Expo",function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)}),fn("Circ",function(e){return-(re(1-e*e)-1)}),fn("Sine",function(e){return 1===e?1:1-ie(e*te)}),fn("Back",mn("in"),mn("out"),mn()),an.SteppedEase=an.steps=_e.SteppedEase={config:function(e,t){void 0===e&&(e=1);var n=1/e,r=e+(t?0:1),i=t?1:0;return function(e){return((r*Rt(0,.99999999,e)|0)+i)*n}}},$.ease=an["quad.out"],Ve("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return Ge+=e+","+e+"Params,"});var vn=function(e,t){this.id=ne++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:ze,this.set=t?t.getSetter:Mn},yn=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,St(this,+e.duration,1,1),this.data=e.data,H&&(this._ctx=H,H.data.push(this)),X||rn.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,St(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(sn(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(pt(this,e),!n._dp||n.parent||mt(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&vt(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&Math.abs(this._zTime)===J||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),$e(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+dt(this))%(this._dur+this._rDelay)||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+dt(this),t):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(e,t){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,t):this._repeat?ht(this._tTime,n)+1:1},t.timeScale=function(e,t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var n=this.parent&&this._ts?ft(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,this.totalTime(Rt(-Math.abs(this._delay),this.totalDuration(),n),!1!==t),gt(this),function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e}(this)},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(sn(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==J&&(this._tTime-=J)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&vt(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(de(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?ft(t.rawTime(e),this):this._tTime:this._tTime},t.revert=function(e){void 0===e&&(e=De);var t=G;return G=e,Qe(this)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),"nested"!==this.data&&!1!==e.kill&&this.kill(),G=t,this},t.globalTime=function(e){for(var t=this,n=arguments.length?e:t.rawTime();t;)n=t._start+n/(Math.abs(t._ts)||1),t=t._dp;return!this.parent&&this._sat?this._sat.globalTime(e):n},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,_t(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var t=this._time;return this._rDelay=e,_t(this),t?this.time(t):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(At(this,e),de(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,de(t)),this._dur||(this._zTime=-1e-8),this},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,n=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<this.endTime(!0)-J))},t.eventCallback=function(e,t,n){var r=this.vars;return arguments.length>1?(t?(r[e]=t,n&&(r[e+"Params"]=n),"onUpdate"===e&&(this._onUpdate=t)):delete r[e],this):r[e]},t.then=function(e){var t=this;return new Promise(function(n){var r=oe(e)?e:Je,i=function(){var e=t.then;t.then=null,oe(r)&&(r=r(t))&&(r.then||r===t)&&(t.then=e),n(r),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?i():t._prom=i})},t.kill=function(){Kt(this)},e}();et(yn.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var En=function(e){function t(t,n){var r;return void 0===t&&(t={}),(r=e.call(this,t)||this).labels={},r.smoothChildTiming=!!t.smoothChildTiming,r.autoRemoveChildren=!!t.autoRemoveChildren,r._sort=de(t.sortChildren),j&&vt(t.parent||j,N(r),n),t.reversed&&r.reverse(),t.paused&&r.paused(!0),t.scrollTrigger&&yt(N(r),t.scrollTrigger),r}B(t,e);var n=t.prototype;return n.to=function(e,t,n){return Lt(0,arguments,this),this},n.from=function(e,t,n){return Lt(1,arguments,this),this},n.fromTo=function(e,t,n,r){return Lt(2,arguments,this),this},n.set=function(e,t,n){return t.duration=0,t.parent=this,it(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new xn(e,t,At(this,n),1),this},n.call=function(e,t,n){return vt(this,xn.delayedCall(0,e,t),n)},n.staggerTo=function(e,t,n,r,i,s,a){return n.duration=t,n.stagger=n.stagger||r,n.onComplete=s,n.onCompleteParams=a,n.parent=this,new xn(e,n,At(this,i)),this},n.staggerFrom=function(e,t,n,r,i,s,a){return n.runBackwards=1,it(n).immediateRender=de(n.immediateRender),this.staggerTo(e,t,n,r,i,s,a)},n.staggerFromTo=function(e,t,n,r,i,s,a,o){return r.startAt=n,it(r).immediateRender=de(r.immediateRender),this.staggerTo(e,t,r,i,s,a,o)},n.render=function(e,t,n){var r,i,s,a,o,l,c,u,d,h,f,g,p=this._time,m=this._dirty?this.totalDuration():this._tDur,v=this._dur,y=e<=0?0:Ye(e),E=this._zTime<0!==e<0&&(this._initted||!v);if(this!==j&&y>m&&e>=0&&(y=m),y!==this._tTime||n||E){if(p!==this._time&&v&&(y+=this._time-p,e+=this._time-p),r=y,d=this._start,l=!(u=this._ts),E&&(v||(p=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(f=this._yoyo,o=v+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*o+e,t,n);if(r=Ye(y%o),y===m?(a=this._repeat,r=v):((a=~~(h=Ye(y/o)))&&a===h&&(r=v,a--),r>v&&(r=v)),h=ht(this._tTime,o),!p&&this._tTime&&h!==a&&this._tTime-h*o-this._dur<=0&&(h=a),f&&1&a&&(r=v-r,g=1),a!==h&&!this._lock){var b=f&&1&h,T=b===(f&&1&a);if(a<h&&(b=!b),p=b?0:y%v?v:y,this._lock=1,this.render(p||(g?0:Ye(a*o)),t,!v)._lock=0,this._tTime=y,!t&&this.parent&&Vt(this,"onRepeat"),this.vars.repeatRefresh&&!g&&(this.invalidate()._lock=1),p&&p!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(v=this._dur,m=this._tDur,T&&(this._lock=2,p=b?v:-1e-4,this.render(p,!0),this.vars.repeatRefresh&&!g&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;dn(this,g)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if("isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if("isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,Ye(p),Ye(r)),c&&(y-=r-(r=c._start))),this._tTime=y,this._time=r,this._act=!u,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,p=0),!p&&y&&!t&&!h&&(Vt(this,"onStart"),this._tTime!==y))return this;if(r>=p&&e>=0)for(i=this._first;i;){if(s=i._next,(i._act||r>=i._start)&&i._ts&&c!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(r-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(r-i._start)*i._ts,t,n),r!==this._time||!this._ts&&!l){c=0,s&&(y+=this._zTime=-1e-8);break}}i=s}else{i=this._last;for(var S=e<0?e:r;i;){if(s=i._prev,(i._act||S<=i._end)&&i._ts&&c!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(S-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(S-i._start)*i._ts,t,n||G&&Qe(i)),r!==this._time||!this._ts&&!l){c=0,s&&(y+=this._zTime=S?-1e-8:J);break}}i=s}}if(c&&!t&&(this.pause(),c.render(r>=p?0:-1e-8)._zTime=r>=p?1:-1,this._ts))return this._start=d,gt(this),this.render(e,t,n);this._onUpdate&&!t&&Vt(this,"onUpdate",!0),(y===m&&this._tTime>=this.totalDuration()||!y&&p)&&(d!==this._start&&Math.abs(u)===Math.abs(this._ts)||this._lock||((e||!v)&&(y===m&&this._ts>0||!y&&this._ts<0)&&ot(this,1),t||e<0&&!p||!y&&!p&&m||(Vt(this,y===m&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(y<m&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(e,t){var n=this;if(le(t)||(t=At(this,t,e)),!(e instanceof yn)){if(pe(e))return e.forEach(function(e){return n.add(e,t)}),this;if(ae(e))return this.addLabel(e,t);if(!oe(e))return this;e=xn.delayedCall(0,e)}return this!==e?vt(this,e,t):this},n.getChildren=function(e,t,n,r){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===r&&(r=-Z);for(var i=[],s=this._first;s;)s._start>=r&&(s instanceof xn?t&&i.push(s):(n&&i.push(s),e&&i.push.apply(i,s.getChildren(!0,t,n)))),s=s._next;return i},n.getById=function(e){for(var t=this.getChildren(1,1,1),n=t.length;n--;)if(t[n].vars.id===e)return t[n]},n.remove=function(e){return ae(e)?this.removeLabel(e):oe(e)?this.killTweensOf(e):(e.parent===this&&at(this,e),e===this._recent&&(this._recent=this._last),lt(this))},n.totalTime=function(t,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ye(rn.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,n),this._forcing=0,this):this._tTime},n.addLabel=function(e,t){return this.labels[e]=At(this,t),this},n.removeLabel=function(e){return delete this.labels[e],this},n.addPause=function(e,t,n){var r=xn.delayedCall(0,t||Ie,n);return r.data="isPause",this._hasPause=1,vt(this,r,At(this,e))},n.removePause=function(e){var t=this._first;for(e=At(this,e);t;)t._start===e&&"isPause"===t.data&&ot(t),t=t._next},n.killTweensOf=function(e,t,n){for(var r=this.getTweensOf(e,n),i=r.length;i--;)bn!==r[i]&&r[i].kill(e,t);return this},n.getTweensOf=function(e,t){for(var n,r=[],i=Pt(e),s=this._first,a=le(t);s;)s instanceof xn?qe(s._targets,i)&&(a?(!bn||s._initted&&s._ts)&&s.globalTime(0)<=t&&s.globalTime(s.totalDuration())>t:!t||s.isActive())&&r.push(s):(n=s.getTweensOf(i,t)).length&&r.push.apply(r,n),s=s._next;return r},n.tweenTo=function(e,t){t=t||{};var n,r=this,i=At(r,e),s=t,a=s.startAt,o=s.onStart,l=s.onStartParams,c=s.immediateRender,u=xn.to(r,et({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:i,overwrite:"auto",duration:t.duration||Math.abs((i-(a&&"time"in a?a.time:r._time))/r.timeScale())||J,onStart:function(){if(r.pause(),!n){var e=t.duration||Math.abs((i-(a&&"time"in a?a.time:r._time))/r.timeScale());u._dur!==e&&St(u,e,0,1).render(u._time,!0,!0),n=1}o&&o.apply(u,l||[])}},t));return c?u.render(0):u},n.tweenFromTo=function(e,t,n){return this.tweenTo(t,et({startAt:{time:At(this,e)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(e){return void 0===e&&(e=this._time),zt(this,At(this,e))},n.previousLabel=function(e){return void 0===e&&(e=this._time),zt(this,At(this,e),1)},n.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+J)},n.shiftChildren=function(e,t,n){void 0===n&&(n=0);for(var r,i=this._first,s=this.labels;i;)i._start>=n&&(i._start+=e,i._end+=e),i=i._next;if(t)for(r in s)s[r]>=n&&(s[r]+=e);return lt(this)},n.invalidate=function(t){var n=this._first;for(this._lock=0;n;)n.invalidate(t),n=n._next;return e.prototype.invalidate.call(this,t)},n.clear=function(e){void 0===e&&(e=!0);for(var t,n=this._first;n;)t=n._next,this.remove(n),n=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),lt(this)},n.totalDuration=function(e){var t,n,r,i=0,s=this,a=s._last,o=Z;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-e:e));if(s._dirty){for(r=s.parent;a;)t=a._prev,a._dirty&&a.totalDuration(),(n=a._start)>o&&s._sort&&a._ts&&!s._lock?(s._lock=1,vt(s,a,n-a._delay,1)._lock=0):o=n,n<0&&a._ts&&(i-=n,(!r&&!s._dp||r&&r.smoothChildTiming)&&(s._start+=n/s._ts,s._time-=n,s._tTime-=n),s.shiftChildren(-n,!1,-Infinity),o=0),a._end>i&&a._ts&&(i=a._end),a=t;St(s,s===j&&s._time>i?s._time:i,1,1),s._dirty=0}return s._tDur},t.updateRoot=function(e){if(j._ts&&($e(j,ft(e,j)),W=rn.frame),rn.frame>=Be){Be+=Q.autoSleep||120;var t=j._first;if((!t||!t._ts)&&Q.autoSleep&&rn._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||rn.sleep()}}},t}(yn);et(En.prototype,{_lock:0,_hasPause:0,_forcing:0});var bn,Tn,Sn=function(e,t,n,r,i,s,a){var o,l,c,u,d,h,f,g,p=new Vn(this._pt,e,t,0,1,Bn,null,i),m=0,v=0;for(p.b=n,p.e=r,n+="",(f=~(r+="").indexOf("random("))&&(r=Ht(r)),s&&(s(g=[n,r],e,t),n=g[0],r=g[1]),l=n.match(Ee)||[];o=Ee.exec(r);)u=o[0],d=r.substring(m,o.index),c?c=(c+1)%5:"rgba("===d.substr(-5)&&(c=1),u!==l[v++]&&(h=parseFloat(l[v-1])||0,p._pt={_next:p._pt,p:d||1===v?d:",",s:h,c:"="===u.charAt(1)?We(h,u)-h:parseFloat(u)-h,m:c&&c<4?Math.round:0},m=Ee.lastIndex);return p.c=m<r.length?r.substring(m,r.length):"",p.fp=a,(be.test(r)||f)&&(p.e=0),this._pt=p,p},_n=function(e,t,n,r,i,s,a,o,l,c){oe(r)&&(r=r(i||0,e,s));var u,d=e[t],h="get"!==n?n:oe(d)?l?e[t.indexOf("set")||!oe(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():d,f=oe(d)?l?Pn:Dn:Cn;if(ae(r)&&(~r.indexOf("random(")&&(r=Ht(r)),"="===r.charAt(1)&&((u=We(h,r)+(It(h)||0))||0===u)&&(r=u)),!c||h!==r||Tn)return isNaN(h*r)||""===r?(!d&&!(t in e)&&Le(t,r),Sn.call(this,e,t,h,r,f,o||Q.stringFilter,l)):(u=new Vn(this._pt,e,t,+h||0,r-(h||0),"boolean"===typeof d?Nn:Fn,0,f),l&&(u.fp=l),a&&u.modifier(a,this,e),this._pt=u)},kn=function(e,t,n,r,i,s){var a,o,l,c;if(Fe[e]&&!1!==(a=new Fe[e]).init(i,a.rawVars?t[e]:function(e,t,n,r,i){if(oe(e)&&(e=wn(e,i,t,n,r)),!ue(e)||e.style&&e.nodeType||pe(e)||ge(e))return ae(e)?wn(e,i,t,n,r):e;var s,a={};for(s in e)a[s]=wn(e[s],i,t,n,r);return a}(t[e],r,i,s,n),n,r,s)&&(n._pt=o=new Vn(n._pt,i,e,0,1,a.render,a,0,a.priority),n!==q))for(l=n._ptLookup[n._targets.indexOf(i)],c=a._props.length;c--;)l[a._props[c]]=o;return a},An=function e(t,n,r){var i,s,a,o,l,c,u,d,h,f,g,p,m,v=t.vars,y=v.ease,E=v.startAt,b=v.immediateRender,T=v.lazy,S=v.onUpdate,_=v.runBackwards,k=v.yoyoEase,A=v.keyframes,L=v.autoRevert,w=t._dur,R=t._startAt,I=t._targets,x=t.parent,C=x&&"nested"===x.data?x.vars.targets:I,D="auto"===t._overwrite&&!U,P=t.timeline;if(P&&(!A||!y)&&(y="none"),t._ease=hn(y,$.ease),t._yEase=k?un(hn(!0===k?y:k,$.ease)):0,k&&t._yoyo&&!t._repeat&&(k=t._yEase,t._yEase=t._ease,t._ease=k),t._from=!P&&!!v.runBackwards,!P||A&&!v.stagger){if(p=(d=I[0]?je(I[0]).harness:0)&&v[d.prop],i=rt(v,Pe),R&&(R._zTime<0&&R.progress(1),n<0&&_&&b&&!L?R.render(-1,!0):R.revert(_&&w?Ce:xe),R._lazy=0),E){if(ot(t._startAt=xn.set(I,et({data:"isStart",overwrite:!1,parent:x,immediateRender:!0,lazy:!R&&de(T),startAt:null,delay:0,onUpdate:S&&function(){return Vt(t,"onUpdate")},stagger:0},E))),t._startAt._dp=0,t._startAt._sat=t,n<0&&(G||!b&&!L)&&t._startAt.revert(Ce),b&&w&&n<=0&&r<=0)return void(n&&(t._zTime=n))}else if(_&&w&&!R)if(n&&(b=!1),a=et({overwrite:!1,data:"isFromStart",lazy:b&&!R&&de(T),immediateRender:b,stagger:0,parent:x},i),p&&(a[d.prop]=p),ot(t._startAt=xn.set(I,a)),t._startAt._dp=0,t._startAt._sat=t,n<0&&(G?t._startAt.revert(Ce):t._startAt.render(-1,!0)),t._zTime=n,b){if(!n)return}else e(t._startAt,J,J);for(t._pt=t._ptCache=0,T=w&&de(T)||T&&!w,s=0;s<I.length;s++){if(u=(l=I[s])._gsap||He(I)[s]._gsap,t._ptLookup[s]=f={},Me[u.id]&&Oe.length&&Xe(),g=C===I?s:C.indexOf(l),d&&!1!==(h=new d).init(l,p||i,t,g,C)&&(t._pt=o=new Vn(t._pt,l,h.name,0,1,h.render,h,0,h.priority),h._props.forEach(function(e){f[e]=o}),h.priority&&(c=1)),!d||p)for(a in i)Fe[a]&&(h=kn(a,i,t,g,l,C))?h.priority&&(c=1):f[a]=o=_n.call(t,l,a,"get",i[a],g,C,0,v.stringFilter);t._op&&t._op[s]&&t.kill(l,t._op[s]),D&&t._pt&&(bn=t,j.killTweensOf(l,f,t.globalTime(n)),m=!t.parent,bn=0),t._pt&&T&&(Me[u.id]=1)}c&&zn(t),t._onInit&&t._onInit(t)}t._onUpdate=S,t._initted=(!t._op||t._pt)&&!m,A&&n<=0&&P.render(Z,!0,!0)},Ln=function(e,t,n,r){var i,s,a=t.ease||r||"power1.inOut";if(pe(t))s=n[e]||(n[e]=[]),t.forEach(function(e,n){return s.push({t:n/(t.length-1)*100,v:e,e:a})});else for(i in t)s=n[i]||(n[i]=[]),"ease"===i||s.push({t:parseFloat(e),v:t[i],e:a})},wn=function(e,t,n,r,i){return oe(e)?e.call(t,n,r,i):ae(e)&&~e.indexOf("random(")?Ht(e):e},Rn=Ge+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",In={};Ve(Rn+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return In[e]=1});var xn=function(e){function t(t,n,r,i){var s;"number"===typeof n&&(r.duration=n,n=r,r=null);var a,o,l,c,u,d,h,f,g=(s=e.call(this,i?n:it(n))||this).vars,p=g.duration,m=g.delay,v=g.immediateRender,y=g.stagger,E=g.overwrite,b=g.keyframes,T=g.defaults,S=g.scrollTrigger,_=g.yoyoEase,k=n.parent||j,A=(pe(t)||ge(t)?le(t[0]):"length"in n)?[t]:Pt(t);if(s._targets=A.length?He(A):we("GSAP target "+t+" not found. https://gsap.com",!Q.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=E,b||y||fe(p)||fe(m)){if(n=s.vars,(a=s.timeline=new En({data:"nested",defaults:T||{},targets:k&&"nested"===k.data?k.vars.targets:A})).kill(),a.parent=a._dp=N(s),a._start=0,y||fe(p)||fe(m)){if(c=A.length,h=y&&Ft(y),ue(y))for(u in y)~Rn.indexOf(u)&&(f||(f={}),f[u]=y[u]);for(o=0;o<c;o++)(l=rt(n,In)).stagger=0,_&&(l.yoyoEase=_),f&&tt(l,f),d=A[o],l.duration=+wn(p,N(s),o,d,A),l.delay=(+wn(m,N(s),o,d,A)||0)-s._delay,!y&&1===c&&l.delay&&(s._delay=m=l.delay,s._start+=m,l.delay=0),a.to(d,l,h?h(o,d,A):0),a._ease=an.none;a.duration()?p=m=0:s.timeline=0}else if(b){it(et(a.vars.defaults,{ease:"none"})),a._ease=hn(b.ease||n.ease||"none");var L,w,R,I=0;if(pe(b))b.forEach(function(e){return a.to(A,e,">")}),a.duration();else{for(u in l={},b)"ease"===u||"easeEach"===u||Ln(u,b[u],l,b.easeEach);for(u in l)for(L=l[u].sort(function(e,t){return e.t-t.t}),I=0,o=0;o<L.length;o++)(R={ease:(w=L[o]).e,duration:(w.t-(o?L[o-1].t:0))/100*p})[u]=w.v,a.to(A,R,I),I+=R.duration;a.duration()<p&&a.to({},{duration:p-a.duration()})}}p||s.duration(p=a.duration())}else s.timeline=0;return!0!==E||U||(bn=N(s),j.killTweensOf(A),bn=0),vt(k,N(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),(v||!p&&!b&&s._start===Ye(k._time)&&de(v)&&ut(N(s))&&"nested"!==k.data)&&(s._tTime=-1e-8,s.render(Math.max(0,-m)||0)),S&&yt(N(s),S),s}B(t,e);var n=t.prototype;return n.render=function(e,t,n){var r,i,s,a,o,l,c,u,d,h=this._time,f=this._tDur,g=this._dur,p=e<0,m=e>f-J&&!p?f:e<J?0:e;if(g){if(m!==this._tTime||!e||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==p||this._lazy){if(r=m,u=this.timeline,this._repeat){if(a=g+this._rDelay,this._repeat<-1&&p)return this.totalTime(100*a+e,t,n);if(r=Ye(m%a),m===f?(s=this._repeat,r=g):(s=~~(o=Ye(m/a)))&&s===o?(r=g,s--):r>g&&(r=g),(l=this._yoyo&&1&s)&&(d=this._yEase,r=g-r),o=ht(this._tTime,a),r===h&&!n&&this._initted&&s===o)return this._tTime=m,this;s!==o&&(u&&this._yEase&&dn(u,l),this.vars.repeatRefresh&&!l&&!this._lock&&r!==a&&this._initted&&(this._lock=n=1,this.render(Ye(a*s),!0).invalidate()._lock=0))}if(!this._initted){if(Et(this,p?e:r,n,t,m))return this._tTime=0,this;if(h!==this._time&&(!n||!this.vars.repeatRefresh||s===o))return this;if(g!==this._dur)return this.render(e,t,n)}if(this._tTime=m,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(d||this._ease)(r/g),this._from&&(this.ratio=c=1-c),!h&&m&&!t&&!o&&(Vt(this,"onStart"),this._tTime!==m))return this;for(i=this._pt;i;)i.r(c,i.d),i=i._next;u&&u.render(e<0?e:u._dur*u._ease(r/this._dur),t,n)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(p&&ct(this,e,0,n),Vt(this,"onUpdate")),this._repeat&&s!==o&&this.vars.onRepeat&&!t&&this.parent&&Vt(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(p&&!this._onUpdate&&ct(this,e,0,!0),(e||!g)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&ot(this,1),t||p&&!h||!(m||h||l)||(Vt(this,m===f?"onComplete":"onReverseComplete",!0),this._prom&&!(m<f&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,n,r){var i,s,a,o=e.ratio,l=t<0||!t&&(!e._start&&bt(e)&&(e._initted||!Tt(e))||(e._ts<0||e._dp._ts<0)&&!Tt(e))?0:1,c=e._rDelay,u=0;if(c&&e._repeat&&(u=Rt(0,e._tDur,t),s=ht(u,c),e._yoyo&&1&s&&(l=1-l),s!==ht(e._tTime,c)&&(o=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==o||G||r||e._zTime===J||!t&&e._zTime){if(!e._initted&&Et(e,t,r,n,u))return;for(a=e._zTime,e._zTime=t||(n?J:0),n||(n=t&&!a),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=u,i=e._pt;i;)i.r(l,i.d),i=i._next;t<0&&ct(e,t,0,!0),e._onUpdate&&!n&&Vt(e,"onUpdate"),u&&e._repeat&&!n&&e.parent&&Vt(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===l&&(l&&ot(e,1),n||G||(Vt(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,n);return this},n.targets=function(){return this._targets},n.invalidate=function(t){return(!t||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(t),e.prototype.invalidate.call(this,t)},n.resetTo=function(e,t,n,r,i){X||rn.wake(),this._ts||this.play();var s=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||An(this,s),function(e,t,n,r,i,s,a,o){var l,c,u,d,h=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!h)for(h=e._ptCache[t]=[],u=e._ptLookup,d=e._targets.length;d--;){if((l=u[d][t])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==t&&l.fp!==t;)l=l._next;if(!l)return Tn=1,e.vars[t]="+=0",An(e,a),Tn=0,o?we(t+" not eligible for reset"):1;h.push(l)}for(d=h.length;d--;)(l=(c=h[d])._pt||c).s=!r&&0!==r||i?l.s+(r||0)+s*l.c:r,l.c=n-l.s,c.e&&(c.e=Ke(n)+It(c.e)),c.b&&(c.b=l.s+It(c.b))}(this,e,t,n,r,this._ease(s/this._dur),s,i)?this.resetTo(e,t,n,r,1):(pt(this,0),this.parent||st(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(e,t){if(void 0===t&&(t="all"),!e&&(!t||"all"===t))return this._lazy=this._pt=0,this.parent?Kt(this):this.scrollTrigger&&this.scrollTrigger.kill(!!G),this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,bn&&!0!==bn.vars.overwrite)._first||Kt(this),this.parent&&n!==this.timeline.totalDuration()&&St(this,this._dur*this.timeline._tDur/n,0,1),this}var r,i,s,a,o,l,c,u=this._targets,d=e?Pt(e):u,h=this._ptLookup,f=this._pt;if((!t||"all"===t)&&function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0}(u,d))return"all"===t&&(this._pt=0),Kt(this);for(r=this._op=this._op||[],"all"!==t&&(ae(t)&&(o={},Ve(t,function(e){return o[e]=1}),t=o),t=function(e,t){var n,r,i,s,a=e[0]?je(e[0]).harness:0,o=a&&a.aliases;if(!o)return t;for(r in n=tt({},t),o)if(r in n)for(i=(s=o[r].split(",")).length;i--;)n[s[i]]=n[r];return n}(u,t)),c=u.length;c--;)if(~d.indexOf(u[c]))for(o in i=h[c],"all"===t?(r[c]=t,a=i,s={}):(s=r[c]=r[c]||{},a=t),a)(l=i&&i[o])&&("kill"in l.d&&!0!==l.d.kill(o)||at(this,l,"_pt"),delete i[o]),"all"!==s&&(s[o]=1);return this._initted&&!this._pt&&f&&Kt(this),this},t.to=function(e,n){return new t(e,n,arguments[2])},t.from=function(e,t){return Lt(1,arguments)},t.delayedCall=function(e,n,r,i){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:n,onReverseComplete:n,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:i})},t.fromTo=function(e,t,n){return Lt(2,arguments)},t.set=function(e,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(e,n)},t.killTweensOf=function(e,t,n){return j.killTweensOf(e,t,n)},t}(yn);et(xn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Ve("staggerTo,staggerFrom,staggerFromTo",function(e){xn[e]=function(){var t=new En,n=xt.call(arguments,0);return n.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,n)}});var Cn=function(e,t,n){return e[t]=n},Dn=function(e,t,n){return e[t](n)},Pn=function(e,t,n,r){return e[t](r.fp,n)},On=function(e,t,n){return e.setAttribute(t,n)},Mn=function(e,t){return oe(e[t])?Dn:ce(e[t])&&e.setAttribute?On:Cn},Fn=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},Nn=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Bn=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},Un=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},Gn=function(e,t,n,r){for(var i,s=this._pt;s;)i=s._next,s.p===r&&s.modifier(e,t,n),s=i},Hn=function(e){for(var t,n,r=this._pt;r;)n=r._next,r.p===e&&!r.op||r.op===e?at(this,r,"_pt"):r.dep||(t=1),r=n;return!t},jn=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},zn=function(e){for(var t,n,r,i,s=e._pt;s;){for(t=s._next,n=r;n&&n.pr>s.pr;)n=n._next;(s._prev=n?n._prev:i)?s._prev._next=s:r=s,(s._next=n)?n._prev=s:i=s,s=t}e._pt=r},Vn=function(){function e(e,t,n,r,i,s,a,o,l){this.t=t,this.s=r,this.c=i,this.p=n,this.r=s||Fn,this.d=a||this,this.set=o||Cn,this.pr=l||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,n){this.mSet=this.mSet||this.set,this.set=jn,this.m=e,this.mt=n,this.tween=t},e}();Ve(Ge+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return Pe[e]=1}),_e.TweenMax=_e.TweenLite=xn,_e.TimelineLite=_e.TimelineMax=En,j=new En({sortChildren:!1,defaults:$,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Q.stringFilter=nn;var Kn=[],Yn={},Wn=[],qn=0,Xn=0,Qn=function(e){return(Yn[e]||Wn).map(function(e){return e()})},$n=function(){var e=Date.now(),t=[];e-qn>2&&(Qn("matchMediaInit"),Kn.forEach(function(e){var n,r,i,s,a=e.queries,o=e.conditions;for(r in a)(n=z.matchMedia(a[r]).matches)&&(i=1),n!==o[r]&&(o[r]=n,s=1);s&&(e.revert(),i&&t.push(e))}),Qn("matchMediaRevert"),t.forEach(function(e){return e.onMatch(e,function(t){return e.add(null,t)})}),qn=e,Qn("matchMedia"))},Zn=function(){function e(e,t){this.selector=t&&Ot(t),this.data=[],this._r=[],this.isReverted=!1,this.id=Xn++,e&&this.add(e)}var t=e.prototype;return t.add=function(e,t,n){oe(e)&&(n=t,t=e,e=oe);var r=this,i=function(){var e,i=H,s=r.selector;return i&&i!==r&&i.data.push(r),n&&(r.selector=Ot(n)),H=r,e=t.apply(r,arguments),oe(e)&&r._r.push(e),H=i,r.selector=s,r.isReverted=!1,e};return r.last=i,e===oe?i(r,function(e){return r.add(null,e)}):e?r[e]=i:i},t.ignore=function(e){var t=H;H=null,e(this),H=t},t.getTweens=function(){var t=[];return this.data.forEach(function(n){return n instanceof e?t.push.apply(t,n.getTweens()):n instanceof xn&&!(n.parent&&"nested"===n.parent.data)&&t.push(n)}),t},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(e,t){var n=this;if(e?function(){for(var t,r=n.getTweens(),i=n.data.length;i--;)"isFlip"===(t=n.data[i]).data&&(t.revert(),t.getChildren(!0,!0,!1).forEach(function(e){return r.splice(r.indexOf(e),1)}));for(r.map(function(e){return{g:e._dur||e._delay||e._sat&&!e._sat.vars.immediateRender?e.globalTime(0):-1/0,t:e}}).sort(function(e,t){return t.g-e.g||-1/0}).forEach(function(t){return t.t.revert(e)}),i=n.data.length;i--;)(t=n.data[i])instanceof En?"nested"!==t.data&&(t.scrollTrigger&&t.scrollTrigger.revert(),t.kill()):!(t instanceof xn)&&t.revert&&t.revert(e);n._r.forEach(function(t){return t(e,n)}),n.isReverted=!0}():this.data.forEach(function(e){return e.kill&&e.kill()}),this.clear(),t)for(var r=Kn.length;r--;)Kn[r].id===this.id&&Kn.splice(r,1)},t.revert=function(e){this.kill(e||{})},e}(),Jn=function(){function e(e){this.contexts=[],this.scope=e,H&&H.data.push(this)}var t=e.prototype;return t.add=function(e,t,n){ue(e)||(e={matches:e});var r,i,s,a=new Zn(0,n||this.scope),o=a.conditions={};for(i in H&&!a.selector&&(a.selector=H.selector),this.contexts.push(a),t=a.add("onMatch",t),a.queries=e,e)"all"===i?s=1:(r=z.matchMedia(e[i]))&&(Kn.indexOf(a)<0&&Kn.push(a),(o[i]=r.matches)&&(s=1),r.addListener?r.addListener($n):r.addEventListener("change",$n));return s&&t(a,function(e){return a.add(null,e)}),this},t.revert=function(e){this.kill(e||{})},t.kill=function(e){this.contexts.forEach(function(t){return t.kill(e,!0)})},e}(),er={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(e){return Wt(e)})},timeline:function(e){return new En(e)},getTweensOf:function(e,t){return j.getTweensOf(e,t)},getProperty:function(e,t,n,r){ae(e)&&(e=Pt(e)[0]);var i=je(e||{}).get,s=n?Je:Ze;return"native"===n&&(n=""),e?t?s((Fe[t]&&Fe[t].get||i)(e,t,n,r)):function(t,n,r){return s((Fe[t]&&Fe[t].get||i)(e,t,n,r))}:e},quickSetter:function(e,t,n){if((e=Pt(e)).length>1){var r=e.map(function(e){return rr.quickSetter(e,t,n)}),i=r.length;return function(e){for(var t=i;t--;)r[t](e)}}e=e[0]||{};var s=Fe[t],a=je(e),o=a.harness&&(a.harness.aliases||{})[t]||t,l=s?function(t){var r=new s;q._pt=0,r.init(e,n?t+n:t,q,0,[e]),r.render(1,r),q._pt&&Un(1,q)}:a.set(e,o);return s?l:function(t){return l(e,o,n?t+n:t,a,1)}},quickTo:function(e,t,n){var r,i=rr.to(e,et(((r={})[t]="+=0.1",r.paused=!0,r.stagger=0,r),n||{})),s=function(e,n,r){return i.resetTo(t,e,n,r)};return s.tween=i,s},isTweening:function(e){return j.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=hn(e.ease,$.ease)),nt($,e||{})},config:function(e){return nt(Q,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,i=e.defaults,s=e.extendTimeline;(r||"").split(",").forEach(function(e){return e&&!Fe[e]&&!_e[e]&&we(t+" effect requires "+e+" plugin.")}),Ne[t]=function(e,t,r){return n(Pt(e),et(t||{},i),r)},s&&(En.prototype[t]=function(e,n,r){return this.add(Ne[t](e,ue(n)?n:(r=n)&&{},this),r)})},registerEase:function(e,t){an[e]=hn(t)},parseEase:function(e,t){return arguments.length?hn(e,t):an},getById:function(e){return j.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var n,r,i=new En(e);for(i.smoothChildTiming=de(e.smoothChildTiming),j.remove(i),i._dp=0,i._time=i._tTime=j._time,n=j._first;n;)r=n._next,!t&&!n._dur&&n instanceof xn&&n.vars.onComplete===n._targets[0]||vt(i,n,n._start-n._delay),n=r;return vt(j,i,0),i},context:function(e,t){return e?new Zn(e,t):H},matchMedia:function(e){return new Jn(e)},matchMediaRefresh:function(){return Kn.forEach(function(e){var t,n,r=e.conditions;for(n in r)r[n]&&(r[n]=!1,t=1);t&&e.revert()})||$n()},addEventListener:function(e,t){var n=Yn[e]||(Yn[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=Yn[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:function e(t,n,r){var i=n-t;return pe(t)?Gt(t,e(0,t.length),n):wt(r,function(e){return(i+(e-t)%i)%i+t})},wrapYoyo:function e(t,n,r){var i=n-t,s=2*i;return pe(t)?Gt(t,e(0,t.length-1),n):wt(r,function(e){return t+((e=(s+(e-t)%s)%s||0)>i?s-e:e)})},distribute:Ft,random:Ut,snap:Bt,normalize:function(e,t,n){return jt(e,t,0,1,n)},getUnit:It,clamp:function(e,t,n){return wt(n,function(n){return Rt(e,t,n)})},splitColor:$t,toArray:Pt,selector:Ot,mapRange:jt,pipe:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce(function(e,t){return t(e)},e)}},unitize:function(e,t){return function(n){return e(parseFloat(n))+(t||It(n))}},interpolate:function e(t,n,r,i){var s=isNaN(t+n)?0:function(e){return(1-e)*t+e*n};if(!s){var a,o,l,c,u,d=ae(t),h={};if(!0===r&&(i=1)&&(r=null),d)t={p:t},n={p:n};else if(pe(t)&&!pe(n)){for(l=[],c=t.length,u=c-2,o=1;o<c;o++)l.push(e(t[o-1],t[o]));c--,s=function(e){e*=c;var t=Math.min(u,~~e);return l[t](e-t)},r=n}else i||(t=tt(pe(t)?[]:{},t));if(!l){for(a in n)_n.call(h,t,a,"get",n[a]);s=function(e){return Un(e,h)||(d?t.p:t)}}}return wt(r,s)},shuffle:Mt},install:Ae,effects:Ne,ticker:rn,updateRoot:En.updateRoot,plugins:Fe,globalTimeline:j,core:{PropTween:Vn,globals:Re,Tween:xn,Timeline:En,Animation:yn,getCache:je,_removeLinkedListItem:at,reverting:function(){return G},context:function(e){return e&&H&&(H.data.push(e),e._ctx=H),H},suppressOverwrites:function(e){return U=e}}};Ve("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return er[e]=xn[e]}),rn.add(En.updateRoot),q=er.to({},{duration:0});var tr=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},nr=function(e,t){return{name:e,headless:1,rawVars:1,init:function(e,n,r){r._onInit=function(e){var r,i;if(ae(n)&&(r={},Ve(n,function(e){return r[e]=1}),n=r),t){for(i in r={},n)r[i]=t(n[i]);n=r}!function(e,t){var n,r,i,s=e._targets;for(n in t)for(r=s.length;r--;)(i=e._ptLookup[r][n])&&(i=i.d)&&(i._pt&&(i=tr(i,n)),i&&i.modifier&&i.modifier(t[n],e,s[r],n))}(e,n)}}}},rr=er.registerPlugin({name:"attr",init:function(e,t,n,r,i){var s,a,o;for(s in this.tween=n,t)o=e.getAttribute(s)||"",(a=this.add(e,"setAttribute",(o||0)+"",t[s],r,i,0,0,s)).op=s,a.b=o,this._props.push(s)},render:function(e,t){for(var n=t._pt;n;)G?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",headless:1,init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},nr("roundProps",Nt),nr("modifiers"),nr("snap",Bt))||er;xn.version=En.version=rr.version="3.13.0",Y=1,he()&&sn();an.Power0,an.Power1,an.Power2,an.Power3,an.Power4,an.Linear,an.Quad,an.Cubic,an.Quart,an.Quint,an.Strong,an.Elastic,an.Back,an.SteppedEase,an.Bounce,an.Sine,an.Expo,an.Circ;var ir,sr,ar,or,lr,cr,ur,dr,hr={},fr=180/Math.PI,gr=Math.PI/180,pr=Math.atan2,mr=/([A-Z])/g,vr=/(left|right|width|margin|padding|x)/i,yr=/[\s,\(]\S/,Er={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},br=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},Tr=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},Sr=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},_r=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},kr=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Ar=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},Lr=function(e,t,n){return e.style[t]=n},wr=function(e,t,n){return e.style.setProperty(t,n)},Rr=function(e,t,n){return e._gsap[t]=n},Ir=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},xr=function(e,t,n,r,i){var s=e._gsap;s.scaleX=s.scaleY=n,s.renderTransform(i,s)},Cr=function(e,t,n,r,i){var s=e._gsap;s[t]=n,s.renderTransform(i,s)},Dr="transform",Pr=Dr+"Origin",Or=function e(t,n){var r=this,i=this.target,s=i.style,a=i._gsap;if(t in hr&&s){if(this.tfm=this.tfm||{},"transform"===t)return Er.transform.split(",").forEach(function(t){return e.call(r,t,n)});if(~(t=Er[t]||t).indexOf(",")?t.split(",").forEach(function(e){return r.tfm[e]=Zr(i,e)}):this.tfm[t]=a.x?a[t]:Zr(i,t),t===Pr&&(this.tfm.zOrigin=a.zOrigin),this.props.indexOf(Dr)>=0)return;a.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Pr,n,"")),t=Dr}(s||n)&&this.props.push(t,n,s[t])},Mr=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Fr=function(){var e,t,n=this.props,r=this.target,i=r.style,s=r._gsap;for(e=0;e<n.length;e+=3)n[e+1]?2===n[e+1]?r[n[e]](n[e+2]):r[n[e]]=n[e+2]:n[e+2]?i[n[e]]=n[e+2]:i.removeProperty("--"===n[e].substr(0,2)?n[e]:n[e].replace(mr,"-$1").toLowerCase());if(this.tfm){for(t in this.tfm)s[t]=this.tfm[t];s.svg&&(s.renderTransform(),r.setAttribute("data-svg-origin",this.svgo||"")),(e=ur())&&e.isStart||i[Dr]||(Mr(i),s.zOrigin&&i[Pr]&&(i[Pr]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},Nr=function(e,t){var n={target:e,props:[],revert:Fr,save:Or};return e._gsap||rr.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(e){return n.save(e)}),n},Br=function(e,t){var n=sr.createElementNS?sr.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):sr.createElement(e);return n&&n.style?n:sr.createElement(e)},Ur=function e(t,n,r){var i=getComputedStyle(t);return i[n]||i.getPropertyValue(n.replace(mr,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&e(t,Hr(n)||n,1)||""},Gr="O,Moz,ms,Ms,Webkit".split(","),Hr=function(e,t,n){var r=(t||lr).style,i=5;if(e in r&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);i--&&!(Gr[i]+e in r););return i<0?null:(3===i?"ms":i>=0?Gr[i]:"")+e},jr=function(){"undefined"!==typeof window&&window.document&&(ir=window,sr=ir.document,ar=sr.documentElement,lr=Br("div")||{style:{}},Br("div"),Dr=Hr(Dr),Pr=Dr+"Origin",lr.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",dr=!!Hr("perspective"),ur=rr.core.reverting,or=1)},zr=function(e){var t,n=e.ownerSVGElement,r=Br("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0);i.style.display="block",r.appendChild(i),ar.appendChild(r);try{t=i.getBBox()}catch(s){}return r.removeChild(i),ar.removeChild(r),t},Vr=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},Kr=function(e){var t,n;try{t=e.getBBox()}catch(r){t=zr(e),n=1}return t&&(t.width||t.height)||n||(t=zr(e)),!t||t.width||t.x||t.y?t:{x:+Vr(e,["x","cx","x1"])||0,y:+Vr(e,["y","cy","y1"])||0,width:0,height:0}},Yr=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!Kr(e))},Wr=function(e,t){if(t){var n,r=e.style;t in hr&&t!==Pr&&(t=Dr),r.removeProperty?("ms"!==(n=t.substr(0,2))&&"webkit"!==t.substr(0,6)||(t="-"+t),r.removeProperty("--"===n?t:t.replace(mr,"-$1").toLowerCase())):r.removeAttribute(t)}},qr=function(e,t,n,r,i,s){var a=new Vn(e._pt,t,n,0,1,s?Ar:kr);return e._pt=a,a.b=r,a.e=i,e._props.push(n),a},Xr={deg:1,rad:1,turn:1},Qr={grid:1,flex:1},$r=function e(t,n,r,i){var s,a,o,l,c=parseFloat(r)||0,u=(r+"").trim().substr((c+"").length)||"px",d=lr.style,h=vr.test(n),f="svg"===t.tagName.toLowerCase(),g=(f?"client":"offset")+(h?"Width":"Height"),p=100,m="px"===i,v="%"===i;if(i===u||!c||Xr[i]||Xr[u])return c;if("px"!==u&&!m&&(c=e(t,n,r,"px")),l=t.getCTM&&Yr(t),(v||"%"===u)&&(hr[n]||~n.indexOf("adius")))return s=l?t.getBBox()[h?"width":"height"]:t[g],Ke(v?c/s*p:c/100*s);if(d[h?"width":"height"]=p+(m?u:i),a="rem"!==i&&~n.indexOf("adius")||"em"===i&&t.appendChild&&!f?t:t.parentNode,l&&(a=(t.ownerSVGElement||{}).parentNode),a&&a!==sr&&a.appendChild||(a=sr.body),(o=a._gsap)&&v&&o.width&&h&&o.time===rn.time&&!o.uncache)return Ke(c/o.width*p);if(!v||"height"!==n&&"width"!==n)(v||"%"===u)&&!Qr[Ur(a,"display")]&&(d.position=Ur(t,"position")),a===t&&(d.position="static"),a.appendChild(lr),s=lr[g],a.removeChild(lr),d.position="absolute";else{var y=t.style[n];t.style[n]=p+i,s=t[g],y?t.style[n]=y:Wr(t,n)}return h&&v&&((o=je(a)).time=rn.time,o.width=a[g]),Ke(m?s*c/p:s&&c?p/s*c:0)},Zr=function(e,t,n,r){var i;return or||jr(),t in Er&&"transform"!==t&&~(t=Er[t]).indexOf(",")&&(t=t.split(",")[0]),hr[t]&&"transform"!==t?(i=ui(e,r),i="transformOrigin"!==t?i[t]:i.svg?i.origin:di(Ur(e,Pr))+" "+i.zOrigin+"px"):(!(i=e.style[t])||"auto"===i||r||~(i+"").indexOf("calc("))&&(i=ri[t]&&ri[t](e,t,n)||Ur(e,t)||ze(e,t)||("opacity"===t?1:0)),n&&!~(i+"").trim().indexOf(" ")?$r(e,t,i,n)+n:i},Jr=function(e,t,n,r){if(!n||"none"===n){var i=Hr(t,e,1),s=i&&Ur(e,i,1);s&&s!==n?(t=i,n=s):"borderColor"===t&&(n=Ur(e,"borderTopColor"))}var a,o,l,c,u,d,h,f,g,p,m,v=new Vn(this._pt,e.style,t,0,1,Bn),y=0,E=0;if(v.b=n,v.e=r,n+="","var(--"===(r+="").substring(0,6)&&(r=Ur(e,r.substring(4,r.indexOf(")")))),"auto"===r&&(d=e.style[t],e.style[t]=r,r=Ur(e,t)||r,d?e.style[t]=d:Wr(e,t)),nn(a=[n,r]),r=a[1],l=(n=a[0]).match(ye)||[],(r.match(ye)||[]).length){for(;o=ye.exec(r);)h=o[0],g=r.substring(y,o.index),u?u=(u+1)%5:"rgba("!==g.substr(-5)&&"hsla("!==g.substr(-5)||(u=1),h!==(d=l[E++]||"")&&(c=parseFloat(d)||0,m=d.substr((c+"").length),"="===h.charAt(1)&&(h=We(c,h)+m),f=parseFloat(h),p=h.substr((f+"").length),y=ye.lastIndex-p.length,p||(p=p||Q.units[t]||m,y===r.length&&(r+=p,v.e+=p)),m!==p&&(c=$r(e,t,d,p)||0),v._pt={_next:v._pt,p:g||1===E?g:",",s:c,c:f-c,m:u&&u<4||"zIndex"===t?Math.round:0});v.c=y<r.length?r.substring(y,r.length):""}else v.r="display"===t&&"none"===r?Ar:kr;return be.test(r)&&(v.e=0),this._pt=v,v},ei={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},ti=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return"top"!==n&&"bottom"!==n&&"left"!==r&&"right"!==r||(e=n,n=r,r=e),t[0]=ei[n]||n,t[1]=ei[r]||r,t.join(" ")},ni=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n,r,i,s=t.t,a=s.style,o=t.u,l=s._gsap;if("all"===o||!0===o)a.cssText="",r=1;else for(i=(o=o.split(",")).length;--i>-1;)n=o[i],hr[n]&&(r=1,n="transformOrigin"===n?Pr:Dr),Wr(s,n);r&&(Wr(s,Dr),l&&(l.svg&&s.removeAttribute("transform"),a.scale=a.rotate=a.translate="none",ui(s,1),l.uncache=1,Mr(a)))}},ri={clearProps:function(e,t,n,r,i){if("isFromStart"!==i.data){var s=e._pt=new Vn(e._pt,t,n,0,0,ni);return s.u=r,s.pr=-10,s.tween=i,e._props.push(n),1}}},ii=[1,0,0,1,0,0],si={},ai=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},oi=function(e){var t=Ur(e,Dr);return ai(t)?ii:t.substr(7).match(ve).map(Ke)},li=function(e,t){var n,r,i,s,a=e._gsap||je(e),o=e.style,l=oi(e);return a.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(i=e.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?ii:l:(l!==ii||e.offsetParent||e===ar||a.svg||(i=o.display,o.display="block",(n=e.parentNode)&&(e.offsetParent||e.getBoundingClientRect().width)||(s=1,r=e.nextElementSibling,ar.appendChild(e)),l=oi(e),i?o.display=i:Wr(e,"display"),s&&(r?n.insertBefore(e,r):n?n.appendChild(e):ar.removeChild(e))),t&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},ci=function(e,t,n,r,i,s){var a,o,l,c=e._gsap,u=i||li(e,!0),d=c.xOrigin||0,h=c.yOrigin||0,f=c.xOffset||0,g=c.yOffset||0,p=u[0],m=u[1],v=u[2],y=u[3],E=u[4],b=u[5],T=t.split(" "),S=parseFloat(T[0])||0,_=parseFloat(T[1])||0;n?u!==ii&&(o=p*y-m*v)&&(l=S*(-m/o)+_*(p/o)-(p*b-m*E)/o,S=S*(y/o)+_*(-v/o)+(v*b-y*E)/o,_=l):(S=(a=Kr(e)).x+(~T[0].indexOf("%")?S/100*a.width:S),_=a.y+(~(T[1]||T[0]).indexOf("%")?_/100*a.height:_)),r||!1!==r&&c.smooth?(E=S-d,b=_-h,c.xOffset=f+(E*p+b*v)-E,c.yOffset=g+(E*m+b*y)-b):c.xOffset=c.yOffset=0,c.xOrigin=S,c.yOrigin=_,c.smooth=!!r,c.origin=t,c.originIsAbsolute=!!n,e.style[Pr]="0px 0px",s&&(qr(s,c,"xOrigin",d,S),qr(s,c,"yOrigin",h,_),qr(s,c,"xOffset",f,c.xOffset),qr(s,c,"yOffset",g,c.yOffset)),e.setAttribute("data-svg-origin",S+" "+_)},ui=function(e,t){var n=e._gsap||new vn(e);if("x"in n&&!t&&!n.uncache)return n;var r,i,s,a,o,l,c,u,d,h,f,g,p,m,v,y,E,b,T,S,_,k,A,L,w,R,I,x,C,D,P,O,M=e.style,F=n.scaleX<0,N="px",B="deg",U=getComputedStyle(e),G=Ur(e,Pr)||"0";return r=i=s=l=c=u=d=h=f=0,a=o=1,n.svg=!(!e.getCTM||!Yr(e)),U.translate&&("none"===U.translate&&"none"===U.scale&&"none"===U.rotate||(M[Dr]=("none"!==U.translate?"translate3d("+(U.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==U.rotate?"rotate("+U.rotate+") ":"")+("none"!==U.scale?"scale("+U.scale.split(" ").join(",")+") ":"")+("none"!==U[Dr]?U[Dr]:"")),M.scale=M.rotate=M.translate="none"),m=li(e,n.svg),n.svg&&(n.uncache?(w=e.getBBox(),G=n.xOrigin-w.x+"px "+(n.yOrigin-w.y)+"px",L=""):L=!t&&e.getAttribute("data-svg-origin"),ci(e,L||G,!!L||n.originIsAbsolute,!1!==n.smooth,m)),g=n.xOrigin||0,p=n.yOrigin||0,m!==ii&&(b=m[0],T=m[1],S=m[2],_=m[3],r=k=m[4],i=A=m[5],6===m.length?(a=Math.sqrt(b*b+T*T),o=Math.sqrt(_*_+S*S),l=b||T?pr(T,b)*fr:0,(d=S||_?pr(S,_)*fr+l:0)&&(o*=Math.abs(Math.cos(d*gr))),n.svg&&(r-=g-(g*b+p*S),i-=p-(g*T+p*_))):(O=m[6],D=m[7],I=m[8],x=m[9],C=m[10],P=m[11],r=m[12],i=m[13],s=m[14],c=(v=pr(O,C))*fr,v&&(L=k*(y=Math.cos(-v))+I*(E=Math.sin(-v)),w=A*y+x*E,R=O*y+C*E,I=k*-E+I*y,x=A*-E+x*y,C=O*-E+C*y,P=D*-E+P*y,k=L,A=w,O=R),u=(v=pr(-S,C))*fr,v&&(y=Math.cos(-v),P=_*(E=Math.sin(-v))+P*y,b=L=b*y-I*E,T=w=T*y-x*E,S=R=S*y-C*E),l=(v=pr(T,b))*fr,v&&(L=b*(y=Math.cos(v))+T*(E=Math.sin(v)),w=k*y+A*E,T=T*y-b*E,A=A*y-k*E,b=L,k=w),c&&Math.abs(c)+Math.abs(l)>359.9&&(c=l=0,u=180-u),a=Ke(Math.sqrt(b*b+T*T+S*S)),o=Ke(Math.sqrt(A*A+O*O)),v=pr(k,A),d=Math.abs(v)>2e-4?v*fr:0,f=P?1/(P<0?-P:P):0),n.svg&&(L=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!ai(Ur(e,Dr)),L&&e.setAttribute("transform",L))),Math.abs(d)>90&&Math.abs(d)<270&&(F?(a*=-1,d+=l<=0?180:-180,l+=l<=0?180:-180):(o*=-1,d+=d<=0?180:-180)),t=t||n.uncache,n.x=r-((n.xPercent=r&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-r)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+N,n.y=i-((n.yPercent=i&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-i)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+N,n.z=s+N,n.scaleX=Ke(a),n.scaleY=Ke(o),n.rotation=Ke(l)+B,n.rotationX=Ke(c)+B,n.rotationY=Ke(u)+B,n.skewX=d+B,n.skewY=h+B,n.transformPerspective=f+N,(n.zOrigin=parseFloat(G.split(" ")[2])||!t&&n.zOrigin||0)&&(M[Pr]=di(G)),n.xOffset=n.yOffset=0,n.force3D=Q.force3D,n.renderTransform=n.svg?yi:dr?vi:fi,n.uncache=0,n},di=function(e){return(e=e.split(" "))[0]+" "+e[1]},hi=function(e,t,n){var r=It(t);return Ke(parseFloat(t)+parseFloat($r(e,"x",n+"px",r)))+r},fi=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,vi(e,t)},gi="0deg",pi="0px",mi=") ",vi=function(e,t){var n=t||this,r=n.xPercent,i=n.yPercent,s=n.x,a=n.y,o=n.z,l=n.rotation,c=n.rotationY,u=n.rotationX,d=n.skewX,h=n.skewY,f=n.scaleX,g=n.scaleY,p=n.transformPerspective,m=n.force3D,v=n.target,y=n.zOrigin,E="",b="auto"===m&&e&&1!==e||!0===m;if(y&&(u!==gi||c!==gi)){var T,S=parseFloat(c)*gr,_=Math.sin(S),k=Math.cos(S);S=parseFloat(u)*gr,T=Math.cos(S),s=hi(v,s,_*T*-y),a=hi(v,a,-Math.sin(S)*-y),o=hi(v,o,k*T*-y+y)}p!==pi&&(E+="perspective("+p+mi),(r||i)&&(E+="translate("+r+"%, "+i+"%) "),(b||s!==pi||a!==pi||o!==pi)&&(E+=o!==pi||b?"translate3d("+s+", "+a+", "+o+") ":"translate("+s+", "+a+mi),l!==gi&&(E+="rotate("+l+mi),c!==gi&&(E+="rotateY("+c+mi),u!==gi&&(E+="rotateX("+u+mi),d===gi&&h===gi||(E+="skew("+d+", "+h+mi),1===f&&1===g||(E+="scale("+f+", "+g+mi),v.style[Dr]=E||"translate(0, 0)"},yi=function(e,t){var n,r,i,s,a,o=t||this,l=o.xPercent,c=o.yPercent,u=o.x,d=o.y,h=o.rotation,f=o.skewX,g=o.skewY,p=o.scaleX,m=o.scaleY,v=o.target,y=o.xOrigin,E=o.yOrigin,b=o.xOffset,T=o.yOffset,S=o.forceCSS,_=parseFloat(u),k=parseFloat(d);h=parseFloat(h),f=parseFloat(f),(g=parseFloat(g))&&(f+=g=parseFloat(g),h+=g),h||f?(h*=gr,f*=gr,n=Math.cos(h)*p,r=Math.sin(h)*p,i=Math.sin(h-f)*-m,s=Math.cos(h-f)*m,f&&(g*=gr,a=Math.tan(f-g),i*=a=Math.sqrt(1+a*a),s*=a,g&&(a=Math.tan(g),n*=a=Math.sqrt(1+a*a),r*=a)),n=Ke(n),r=Ke(r),i=Ke(i),s=Ke(s)):(n=p,s=m,r=i=0),(_&&!~(u+"").indexOf("px")||k&&!~(d+"").indexOf("px"))&&(_=$r(v,"x",u,"px"),k=$r(v,"y",d,"px")),(y||E||b||T)&&(_=Ke(_+y-(y*n+E*i)+b),k=Ke(k+E-(y*r+E*s)+T)),(l||c)&&(a=v.getBBox(),_=Ke(_+l/100*a.width),k=Ke(k+c/100*a.height)),a="matrix("+n+","+r+","+i+","+s+","+_+","+k+")",v.setAttribute("transform",a),S&&(v.style[Dr]=a)},Ei=function(e,t,n,r,i){var s,a,o=360,l=ae(i),c=parseFloat(i)*(l&&~i.indexOf("rad")?fr:1)-r,u=r+c+"deg";return l&&("short"===(s=i.split("_")[1])&&(c%=o)!==c%180&&(c+=c<0?o:-360),"cw"===s&&c<0?c=(c+36e9)%o-~~(c/o)*o:"ccw"===s&&c>0&&(c=(c-36e9)%o-~~(c/o)*o)),e._pt=a=new Vn(e._pt,t,n,r,c,Tr),a.e=u,a.u="deg",e._props.push(n),a},bi=function(e,t){for(var n in t)e[n]=t[n];return e},Ti=function(e,t,n){var r,i,s,a,o,l,c,u=bi({},n._gsap),d=n.style;for(i in u.svg?(s=n.getAttribute("transform"),n.setAttribute("transform",""),d[Dr]=t,r=ui(n,1),Wr(n,Dr),n.setAttribute("transform",s)):(s=getComputedStyle(n)[Dr],d[Dr]=t,r=ui(n,1),d[Dr]=s),hr)(s=u[i])!==(a=r[i])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)<0&&(o=It(s)!==(c=It(a))?$r(n,i,s,c):parseFloat(s),l=parseFloat(a),e._pt=new Vn(e._pt,r,i,o,l-o,br),e._pt.u=c||0,e._props.push(i));bi(r,u)};Ve("padding,margin,Width,Radius",function(e,t){var n="Top",r="Right",i="Bottom",s="Left",a=(t<3?[n,r,i,s]:[n+s,n+r,i+r,i+s]).map(function(n){return t<2?e+n:"border"+n+e});ri[t>1?"border"+e:e]=function(e,t,n,r,i){var s,o;if(arguments.length<4)return s=a.map(function(t){return Zr(e,t,n)}),5===(o=s.join(" ")).split(s[0]).length?s[0]:o;s=(r+"").split(" "),o={},a.forEach(function(e,t){return o[e]=s[t]=s[t]||s[(t-1)/2|0]}),e.init(t,o,i)}});var Si={name:"css",register:jr,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,i){var s,a,o,l,c,u,d,h,f,g,p,m,v,y,E,b,T=this._props,S=e.style,_=n.vars.startAt;for(d in or||jr(),this.styles=this.styles||Nr(e),b=this.styles.props,this.tween=n,t)if("autoRound"!==d&&(a=t[d],!Fe[d]||!kn(d,t,n,r,e,i)))if(c=typeof a,u=ri[d],"function"===c&&(c=typeof(a=a.call(n,r,e,i))),"string"===c&&~a.indexOf("random(")&&(a=Ht(a)),u)u(this,e,d,a,n)&&(E=1);else if("--"===d.substr(0,2))s=(getComputedStyle(e).getPropertyValue(d)+"").trim(),a+="",en.lastIndex=0,en.test(s)||(h=It(s),f=It(a)),f?h!==f&&(s=$r(e,d,s,f)+f):h&&(a+=h),this.add(S,"setProperty",s,a,r,i,0,0,d),T.push(d),b.push(d,0,S[d]);else if("undefined"!==c){if(_&&d in _?(s="function"===typeof _[d]?_[d].call(n,r,e,i):_[d],ae(s)&&~s.indexOf("random(")&&(s=Ht(s)),It(s+"")||"auto"===s||(s+=Q.units[d]||It(Zr(e,d))||""),"="===(s+"").charAt(1)&&(s=Zr(e,d))):s=Zr(e,d),l=parseFloat(s),(g="string"===c&&"="===a.charAt(1)&&a.substr(0,2))&&(a=a.substr(2)),o=parseFloat(a),d in Er&&("autoAlpha"===d&&(1===l&&"hidden"===Zr(e,"visibility")&&o&&(l=0),b.push("visibility",0,S.visibility),qr(this,S,"visibility",l?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==d&&"transform"!==d&&~(d=Er[d]).indexOf(",")&&(d=d.split(",")[0])),p=d in hr)if(this.styles.save(d),"string"===c&&"var(--"===a.substring(0,6)&&(a=Ur(e,a.substring(4,a.indexOf(")"))),o=parseFloat(a)),m||((v=e._gsap).renderTransform&&!t.parseTransform||ui(e,t.parseTransform),y=!1!==t.smoothOrigin&&v.smooth,(m=this._pt=new Vn(this._pt,S,Dr,0,1,v.renderTransform,v,0,-1)).dep=1),"scale"===d)this._pt=new Vn(this._pt,v,"scaleY",v.scaleY,(g?We(v.scaleY,g+o):o)-v.scaleY||0,br),this._pt.u=0,T.push("scaleY",d),d+="X";else{if("transformOrigin"===d){b.push(Pr,0,S[Pr]),a=ti(a),v.svg?ci(e,a,0,y,0,this):((f=parseFloat(a.split(" ")[2])||0)!==v.zOrigin&&qr(this,v,"zOrigin",v.zOrigin,f),qr(this,S,d,di(s),di(a)));continue}if("svgOrigin"===d){ci(e,a,1,y,0,this);continue}if(d in si){Ei(this,v,d,l,g?We(l,g+a):a);continue}if("smoothOrigin"===d){qr(this,v,"smooth",v.smooth,a);continue}if("force3D"===d){v[d]=a;continue}if("transform"===d){Ti(this,a,e);continue}}else d in S||(d=Hr(d)||d);if(p||(o||0===o)&&(l||0===l)&&!yr.test(a)&&d in S)o||(o=0),(h=(s+"").substr((l+"").length))!==(f=It(a)||(d in Q.units?Q.units[d]:h))&&(l=$r(e,d,s,f)),this._pt=new Vn(this._pt,p?v:S,d,l,(g?We(l,g+o):o)-l,p||"px"!==f&&"zIndex"!==d||!1===t.autoRound?br:_r),this._pt.u=f||0,h!==f&&"%"!==f&&(this._pt.b=s,this._pt.r=Sr);else if(d in S)Jr.call(this,e,d,s,g?g+a:a);else if(d in e)this.add(e,d,s||e[d],g?g+a:a,r,i);else if("parseTransform"!==d){Le(d,a);continue}p||(d in S?b.push(d,0,S[d]):"function"===typeof e[d]?b.push(d,2,e[d]()):b.push(d,1,s||e[d])),T.push(d)}E&&zn(this)},render:function(e,t){if(t.tween._time||!ur())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:Zr,aliases:Er,getSetter:function(e,t,n){var r=Er[t];return r&&r.indexOf(",")<0&&(t=r),t in hr&&t!==Pr&&(e._gsap.x||Zr(e,"x"))?n&&cr===n?"scale"===t?Ir:Rr:(cr=n||{})&&("scale"===t?xr:Cr):e.style&&!ce(e.style[t])?Lr:~t.indexOf("-")?wr:Mn(e,t)},core:{_removeProperty:Wr,_getMatrix:li}};rr.utils.checkPrefix=Hr,rr.core.getStyleSaver=Nr,function(e,t){var n=Ve(e+","+t+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(e){hr[e]=1});Ve(t,function(e){Q.units[e]="deg",si[e]=1}),Er[n[13]]=e+","+t,Ve("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(e){var t=e.split(":");Er[t[1]]=n[t[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),Ve("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){Q.units[e]="px"}),rr.registerPlugin(Si);var _i=rr.registerPlugin(Si)||rr;_i.core.Tween;const ki=()=>{const e=(0,r.useContext)(T),t=(0,r.useContext)(S),n=(0,r.useContext)(_),i=(0,r.useRef)(null);return(0,r.useEffect)(()=>{"hidden"===e[0]?_i.to(i.current,{y:"-100%",duration:.5,ease:"power1.inOut"}):_i.to(i.current,{y:0,duration:.5,ease:"power1.inOut"})},[e[0],i]),(0,r.useEffect)(()=>{n[1]("")},[n[0]]),(0,g.jsxs)("header",{ref:i,className:"".concat(s),children:[(0,g.jsxs)("div",{className:o,children:[(0,g.jsx)(F,{className:a}),(0,g.jsxs)("nav",{className:u,children:[(0,g.jsx)(m,{active:"home"===t[0],title:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",onClick:()=>n[1]("home")}),(0,g.jsx)(m,{active:"about"===t[0],title:"\u041e \u043d\u0430\u0441",onClick:()=>n[1]("about")}),(0,g.jsx)(m,{active:"acco"===t[0],title:"\u041f\u0440\u043e\u0436\u0438\u0432\u0430\u043d\u0438\u0435",onClick:()=>n[1]("acco")}),(0,g.jsx)(m,{active:"price"===t[0],title:"\u0426\u0435\u043d\u044b",onClick:()=>n[1]("price")}),(0,g.jsx)(m,{active:"news"===t[0],title:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438",onClick:()=>n[1]("news")})]})]}),(0,g.jsx)("div",{className:l,children:(0,g.jsx)(b,{className:c,defaultClassName:!1,title:"\u041f\u043e\u0434\u0430\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443",onClick:()=>{}})})]})};const Ai="BuilderSections_main_section__WFjwE",Li="BuilderSections_container__84DXN",wi="BuilderSections_ref_navigation__93Gzc",Ri="HomeComponent_main__au3F7",Ii="HomeComponent_navigation__aZIt4",xi="HomeComponent_logo__uIiHq",Ci="HomeComponent_header__32Yj+",Di="HomeComponent_header_left__SDO3Q",Pi="HomeComponent_header_right__xlLyl",Oi="HomeComponent_gradient_overlay__DVz7T",Mi="HomeComponent_description_section__XaNqu",Fi="HomeComponent_video_background__BY2iN",Ni="HomeComponent_content__yC2+Q",Bi="HomeComponent_description_container__Wy3DL",Ui="HomeComponent_paragraph_text__AK9Nw",Gi="HomeComponent_description_text__yQdod";function Hi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ji,zi,Vi,Ki,Yi,Wi,qi,Xi,Qi,$i,Zi,Ji,es,ts=function(){return ji||"undefined"!==typeof window&&(ji=window.gsap)&&ji.registerPlugin&&ji},ns=1,rs=[],is=[],ss=[],as=Date.now,os=function(e,t){return t},ls=function(e,t){return~ss.indexOf(e)&&ss[ss.indexOf(e)+1][t]},cs=function(e){return!!~$i.indexOf(e)},us=function(e,t,n,r,i){return e.addEventListener(t,n,{passive:!1!==r,capture:!!i})},ds=function(e,t,n,r){return e.removeEventListener(t,n,!!r)},hs="scrollLeft",fs="scrollTop",gs=function(){return Zi&&Zi.isPressed||is.cache++},ps=function(e,t){var n=function n(r){if(r||0===r){ns&&(Vi.history.scrollRestoration="manual");var i=Zi&&Zi.isPressed;r=n.v=Math.round(r)||(Zi&&Zi.iOS?1:0),e(r),n.cacheID=is.cache,i&&os("ss",r)}else(t||is.cache!==n.cacheID||os("ref"))&&(n.cacheID=is.cache,n.v=e());return n.v+n.offset};return n.offset=0,e&&n},ms={s:hs,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:ps(function(e){return arguments.length?Vi.scrollTo(e,vs.sc()):Vi.pageXOffset||Ki[hs]||Yi[hs]||Wi[hs]||0})},vs={s:fs,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:ms,sc:ps(function(e){return arguments.length?Vi.scrollTo(ms.sc(),e):Vi.pageYOffset||Ki[fs]||Yi[fs]||Wi[fs]||0})},ys=function(e,t){return(t&&t._ctx&&t._ctx.selector||ji.utils.toArray)(e)[0]||("string"===typeof e&&!1!==ji.config().nullTargetWarn?console.warn("Element not found:",e):null)},Es=function(e,t){var n=t.s,r=t.sc;cs(e)&&(e=Ki.scrollingElement||Yi);var i=is.indexOf(e),s=r===vs.sc?1:2;!~i&&(i=is.push(e)-1),is[i+s]||us(e,"scroll",gs);var a=is[i+s],o=a||(is[i+s]=ps(ls(e,n),!0)||(cs(e)?r:ps(function(t){return arguments.length?e[n]=t:e[n]})));return o.target=e,a||(o.smooth="smooth"===ji.getProperty(e,"scrollBehavior")),o},bs=function(e,t,n){var r=e,i=e,s=as(),a=s,o=t||50,l=Math.max(500,3*o),c=function(e,t){var l=as();t||l-s>o?(i=r,r=e,a=s,s=l):n?r+=e:r=i+(e-i)/(l-a)*(s-a)};return{update:c,reset:function(){i=r=n?0:r,a=s=0},getVelocity:function(e){var t=a,o=i,u=as();return(e||0===e)&&e!==r&&c(e),s===a||u-a>l?0:(r+(n?o:-o))/((n?u:s)-t)*1e3}}},Ts=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},Ss=function(e){var t=Math.max.apply(Math,e),n=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(n)?t:n},_s=function(){(Qi=ji.core.globals().ScrollTrigger)&&Qi.core&&function(){var e=Qi.core,t=e.bridge||{},n=e._scrollers,r=e._proxies;n.push.apply(n,is),r.push.apply(r,ss),is=n,ss=r,os=function(e,n){return t[e](n)}}()},ks=function(e){return ji=e||ts(),!zi&&ji&&"undefined"!==typeof document&&document.body&&(Vi=window,Ki=document,Yi=Ki.documentElement,Wi=Ki.body,$i=[Vi,Ki,Yi,Wi],ji.utils.clamp,es=ji.core.context||function(){},Xi="onpointerenter"in Wi?"pointer":"mouse",qi=As.isTouch=Vi.matchMedia&&Vi.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Vi||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,Ji=As.eventTypes=("ontouchstart"in Yi?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in Yi?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return ns=0},500),_s(),zi=1),zi};ms.op=vs,is.cache=0;var As=function(){function e(e){this.init(e)}var t,n,r;return e.prototype.init=function(e){zi||ks(ji)||console.warn("Please gsap.registerPlugin(Observer)"),Qi||_s();var t=e.tolerance,n=e.dragMinimum,r=e.type,i=e.target,s=e.lineHeight,a=e.debounce,o=e.preventDefault,l=e.onStop,c=e.onStopDelay,u=e.ignore,d=e.wheelSpeed,h=e.event,f=e.onDragStart,g=e.onDragEnd,p=e.onDrag,m=e.onPress,v=e.onRelease,y=e.onRight,E=e.onLeft,b=e.onUp,T=e.onDown,S=e.onChangeX,_=e.onChangeY,k=e.onChange,A=e.onToggleX,L=e.onToggleY,w=e.onHover,R=e.onHoverEnd,I=e.onMove,x=e.ignoreCheck,C=e.isNormalizer,D=e.onGestureStart,P=e.onGestureEnd,O=e.onWheel,M=e.onEnable,F=e.onDisable,N=e.onClick,B=e.scrollSpeed,U=e.capture,G=e.allowClicks,H=e.lockAxis,j=e.onLockAxis;this.target=i=ys(i)||Yi,this.vars=e,u&&(u=ji.utils.toArray(u)),t=t||1e-9,n=n||0,d=d||1,B=B||1,r=r||"wheel,touch,pointer",a=!1!==a,s||(s=parseFloat(Vi.getComputedStyle(Wi).lineHeight)||22);var z,V,K,Y,W,q,X,Q=this,$=0,Z=0,J=e.passive||!o&&!1!==e.passive,ee=Es(i,ms),te=Es(i,vs),ne=ee(),re=te(),ie=~r.indexOf("touch")&&!~r.indexOf("pointer")&&"pointerdown"===Ji[0],se=cs(i),ae=i.ownerDocument||Ki,oe=[0,0,0],le=[0,0,0],ce=0,ue=function(){return ce=as()},de=function(e,t){return(Q.event=e)&&u&&function(e,t){for(var n=t.length;n--;)if(t[n]===e||t[n].contains(e))return!0;return!1}(e.target,u)||t&&ie&&"touch"!==e.pointerType||x&&x(e,t)},he=function(){var e=Q.deltaX=Ss(oe),n=Q.deltaY=Ss(le),r=Math.abs(e)>=t,i=Math.abs(n)>=t;k&&(r||i)&&k(Q,e,n,oe,le),r&&(y&&Q.deltaX>0&&y(Q),E&&Q.deltaX<0&&E(Q),S&&S(Q),A&&Q.deltaX<0!==$<0&&A(Q),$=Q.deltaX,oe[0]=oe[1]=oe[2]=0),i&&(T&&Q.deltaY>0&&T(Q),b&&Q.deltaY<0&&b(Q),_&&_(Q),L&&Q.deltaY<0!==Z<0&&L(Q),Z=Q.deltaY,le[0]=le[1]=le[2]=0),(Y||K)&&(I&&I(Q),K&&(f&&1===K&&f(Q),p&&p(Q),K=0),Y=!1),q&&!(q=!1)&&j&&j(Q),W&&(O(Q),W=!1),z=0},fe=function(e,t,n){oe[n]+=e,le[n]+=t,Q._vx.update(e),Q._vy.update(t),a?z||(z=requestAnimationFrame(he)):he()},ge=function(e,t){H&&!X&&(Q.axis=X=Math.abs(e)>Math.abs(t)?"x":"y",q=!0),"y"!==X&&(oe[2]+=e,Q._vx.update(e,!0)),"x"!==X&&(le[2]+=t,Q._vy.update(t,!0)),a?z||(z=requestAnimationFrame(he)):he()},pe=function(e){if(!de(e,1)){var t=(e=Ts(e,o)).clientX,r=e.clientY,i=t-Q.x,s=r-Q.y,a=Q.isDragging;Q.x=t,Q.y=r,(a||(i||s)&&(Math.abs(Q.startX-t)>=n||Math.abs(Q.startY-r)>=n))&&(K=a?2:1,a||(Q.isDragging=!0),ge(i,s))}},me=Q.onPress=function(e){de(e,1)||e&&e.button||(Q.axis=X=null,V.pause(),Q.isPressed=!0,e=Ts(e),$=Z=0,Q.startX=Q.x=e.clientX,Q.startY=Q.y=e.clientY,Q._vx.reset(),Q._vy.reset(),us(C?i:ae,Ji[1],pe,J,!0),Q.deltaX=Q.deltaY=0,m&&m(Q))},ve=Q.onRelease=function(e){if(!de(e,1)){ds(C?i:ae,Ji[1],pe,!0);var t=!isNaN(Q.y-Q.startY),n=Q.isDragging,r=n&&(Math.abs(Q.x-Q.startX)>3||Math.abs(Q.y-Q.startY)>3),s=Ts(e);!r&&t&&(Q._vx.reset(),Q._vy.reset(),o&&G&&ji.delayedCall(.08,function(){if(as()-ce>300&&!e.defaultPrevented)if(e.target.click)e.target.click();else if(ae.createEvent){var t=ae.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,Vi,1,s.screenX,s.screenY,s.clientX,s.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(t)}})),Q.isDragging=Q.isGesturing=Q.isPressed=!1,l&&n&&!C&&V.restart(!0),K&&he(),g&&n&&g(Q),v&&v(Q,r)}},ye=function(e){return e.touches&&e.touches.length>1&&(Q.isGesturing=!0)&&D(e,Q.isDragging)},Ee=function(){return(Q.isGesturing=!1)||P(Q)},be=function(e){if(!de(e)){var t=ee(),n=te();fe((t-ne)*B,(n-re)*B,1),ne=t,re=n,l&&V.restart(!0)}},Te=function(e){if(!de(e)){e=Ts(e,o),O&&(W=!0);var t=(1===e.deltaMode?s:2===e.deltaMode?Vi.innerHeight:1)*d;fe(e.deltaX*t,e.deltaY*t,0),l&&!C&&V.restart(!0)}},Se=function(e){if(!de(e)){var t=e.clientX,n=e.clientY,r=t-Q.x,i=n-Q.y;Q.x=t,Q.y=n,Y=!0,l&&V.restart(!0),(r||i)&&ge(r,i)}},_e=function(e){Q.event=e,w(Q)},ke=function(e){Q.event=e,R(Q)},Ae=function(e){return de(e)||Ts(e,o)&&N(Q)};V=Q._dc=ji.delayedCall(c||.25,function(){Q._vx.reset(),Q._vy.reset(),V.pause(),l&&l(Q)}).pause(),Q.deltaX=Q.deltaY=0,Q._vx=bs(0,50,!0),Q._vy=bs(0,50,!0),Q.scrollX=ee,Q.scrollY=te,Q.isDragging=Q.isGesturing=Q.isPressed=!1,es(this),Q.enable=function(e){return Q.isEnabled||(us(se?ae:i,"scroll",gs),r.indexOf("scroll")>=0&&us(se?ae:i,"scroll",be,J,U),r.indexOf("wheel")>=0&&us(i,"wheel",Te,J,U),(r.indexOf("touch")>=0&&qi||r.indexOf("pointer")>=0)&&(us(i,Ji[0],me,J,U),us(ae,Ji[2],ve),us(ae,Ji[3],ve),G&&us(i,"click",ue,!0,!0),N&&us(i,"click",Ae),D&&us(ae,"gesturestart",ye),P&&us(ae,"gestureend",Ee),w&&us(i,Xi+"enter",_e),R&&us(i,Xi+"leave",ke),I&&us(i,Xi+"move",Se)),Q.isEnabled=!0,Q.isDragging=Q.isGesturing=Q.isPressed=Y=K=!1,Q._vx.reset(),Q._vy.reset(),ne=ee(),re=te(),e&&e.type&&me(e),M&&M(Q)),Q},Q.disable=function(){Q.isEnabled&&(rs.filter(function(e){return e!==Q&&cs(e.target)}).length||ds(se?ae:i,"scroll",gs),Q.isPressed&&(Q._vx.reset(),Q._vy.reset(),ds(C?i:ae,Ji[1],pe,!0)),ds(se?ae:i,"scroll",be,U),ds(i,"wheel",Te,U),ds(i,Ji[0],me,U),ds(ae,Ji[2],ve),ds(ae,Ji[3],ve),ds(i,"click",ue,!0),ds(i,"click",Ae),ds(ae,"gesturestart",ye),ds(ae,"gestureend",Ee),ds(i,Xi+"enter",_e),ds(i,Xi+"leave",ke),ds(i,Xi+"move",Se),Q.isEnabled=Q.isPressed=Q.isDragging=!1,F&&F(Q))},Q.kill=Q.revert=function(){Q.disable();var e=rs.indexOf(Q);e>=0&&rs.splice(e,1),Zi===Q&&(Zi=0)},rs.push(Q),C&&cs(i)&&(Zi=Q),Q.enable(h)},t=e,(n=[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}])&&Hi(t.prototype,n),r&&Hi(t,r),e}();As.version="3.13.0",As.create=function(e){return new As(e)},As.register=ks,As.getAll=function(){return rs.slice()},As.getById=function(e){return rs.filter(function(t){return t.vars.id===e})[0]},ts()&&ji.registerPlugin(As);var Ls,ws,Rs,Is,xs,Cs,Ds,Ps,Os,Ms,Fs,Ns,Bs,Us,Gs,Hs,js,zs,Vs,Ks,Ys,Ws,qs,Xs,Qs,$s,Zs,Js,ea,ta,na,ra,ia,sa,aa,oa,la,ca,ua=1,da=Date.now,ha=da(),fa=0,ga=0,pa=function(e,t,n){var r=Ia(e)&&("clamp("===e.substr(0,6)||e.indexOf("max")>-1);return n["_"+t+"Clamp"]=r,r?e.substr(6,e.length-7):e},ma=function(e,t){return!t||Ia(e)&&"clamp("===e.substr(0,6)?e:"clamp("+e+")"},va=function e(){return ga&&requestAnimationFrame(e)},ya=function(){return Us=1},Ea=function(){return Us=0},ba=function(e){return e},Ta=function(e){return Math.round(1e5*e)/1e5||0},Sa=function(){return"undefined"!==typeof window},_a=function(){return Ls||Sa()&&(Ls=window.gsap)&&Ls.registerPlugin&&Ls},ka=function(e){return!!~Ds.indexOf(e)},Aa=function(e){return("Height"===e?na:Rs["inner"+e])||xs["client"+e]||Cs["client"+e]},La=function(e){return ls(e,"getBoundingClientRect")||(ka(e)?function(){return Go.width=Rs.innerWidth,Go.height=na,Go}:function(){return Za(e)})},wa=function(e,t){var n=t.s,r=t.d2,i=t.d,s=t.a;return Math.max(0,(n="scroll"+r)&&(s=ls(e,n))?s()-La(e)()[i]:ka(e)?(xs[n]||Cs[n])-Aa(r):e[n]-e["offset"+r])},Ra=function(e,t){for(var n=0;n<Vs.length;n+=3)(!t||~t.indexOf(Vs[n+1]))&&e(Vs[n],Vs[n+1],Vs[n+2])},Ia=function(e){return"string"===typeof e},xa=function(e){return"function"===typeof e},Ca=function(e){return"number"===typeof e},Da=function(e){return"object"===typeof e},Pa=function(e,t,n){return e&&e.progress(t?0:1)&&n&&e.pause()},Oa=function(e,t){if(e.enabled){var n=e._ctx?e._ctx.add(function(){return t(e)}):t(e);n&&n.totalTime&&(e.callbackAnimation=n)}},Ma=Math.abs,Fa="left",Na="right",Ba="bottom",Ua="width",Ga="height",Ha="Right",ja="Left",za="Top",Va="Bottom",Ka="padding",Ya="margin",Wa="Width",qa="Height",Xa="px",Qa=function(e){return Rs.getComputedStyle(e)},$a=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},Za=function(e,t){var n=t&&"matrix(1, 0, 0, 1, 0, 0)"!==Qa(e)[Gs]&&Ls.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=e.getBoundingClientRect();return n&&n.progress(0).kill(),r},Ja=function(e,t){var n=t.d2;return e["offset"+n]||e["client"+n]||0},eo=function(e){var t,n=[],r=e.labels,i=e.duration();for(t in r)n.push(r[t]/i);return n},to=function(e){var t=Ls.utils.snap(e),n=Array.isArray(e)&&e.slice(0).sort(function(e,t){return e-t});return n?function(e,r,i){var s;if(void 0===i&&(i=.001),!r)return t(e);if(r>0){for(e-=i,s=0;s<n.length;s++)if(n[s]>=e)return n[s];return n[s-1]}for(s=n.length,e+=i;s--;)if(n[s]<=e)return n[s];return n[0]}:function(n,r,i){void 0===i&&(i=.001);var s=t(n);return!r||Math.abs(s-n)<i||s-n<0===r<0?s:t(r<0?n-e:n+e)}},no=function(e,t,n,r){return n.split(",").forEach(function(n){return e(t,n,r)})},ro=function(e,t,n,r,i){return e.addEventListener(t,n,{passive:!r,capture:!!i})},io=function(e,t,n,r){return e.removeEventListener(t,n,!!r)},so=function(e,t,n){(n=n&&n.wheelHandler)&&(e(t,"wheel",n),e(t,"touchmove",n))},ao={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},oo={toggleActions:"play",anticipatePin:0},lo={top:0,left:0,center:.5,bottom:1,right:1},co=function(e,t){if(Ia(e)){var n=e.indexOf("="),r=~n?+(e.charAt(n-1)+1)*parseFloat(e.substr(n+1)):0;~n&&(e.indexOf("%")>n&&(r*=t/100),e=e.substr(0,n-1)),e=r+(e in lo?lo[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},uo=function(e,t,n,r,i,s,a,o){var l=i.startColor,c=i.endColor,u=i.fontSize,d=i.indent,h=i.fontWeight,f=Is.createElement("div"),g=ka(n)||"fixed"===ls(n,"pinType"),p=-1!==e.indexOf("scroller"),m=g?Cs:n,v=-1!==e.indexOf("start"),y=v?l:c,E="border-color:"+y+";font-size:"+u+";color:"+y+";font-weight:"+h+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return E+="position:"+((p||o)&&g?"fixed;":"absolute;"),(p||o||!g)&&(E+=(r===vs?Na:Ba)+":"+(s+parseFloat(d))+"px;"),a&&(E+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),f._isStart=v,f.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),f.style.cssText=E,f.innerText=t||0===t?e+"-"+t:e,m.children[0]?m.insertBefore(f,m.children[0]):m.appendChild(f),f._offset=f["offset"+r.op.d2],ho(f,0,r,v),f},ho=function(e,t,n,r){var i={display:"block"},s=n[r?"os2":"p2"],a=n[r?"p2":"os2"];e._isFlipped=r,i[n.a+"Percent"]=r?-100:0,i[n.a]=r?"1px":0,i["border"+s+Wa]=1,i["border"+a+Wa]=0,i[n.p]=t+"px",Ls.set(e,i)},fo=[],go={},po=function(){return da()-fa>34&&(aa||(aa=requestAnimationFrame(Po)))},mo=function(){(!qs||!qs.isPressed||qs.startX>Cs.clientWidth)&&(is.cache++,qs?aa||(aa=requestAnimationFrame(Po)):Po(),fa||So("scrollStart"),fa=da())},vo=function(){$s=Rs.innerWidth,Qs=Rs.innerHeight},yo=function(e){is.cache++,(!0===e||!Bs&&!Ws&&!Is.fullscreenElement&&!Is.webkitFullscreenElement&&(!Xs||$s!==Rs.innerWidth||Math.abs(Rs.innerHeight-Qs)>.25*Rs.innerHeight))&&Ps.restart(!0)},Eo={},bo=[],To=function e(){return io(Wo,"scrollEnd",e)||xo(!0)},So=function(e){return Eo[e]&&Eo[e].map(function(e){return e()})||bo},_o=[],ko=function(e){for(var t=0;t<_o.length;t+=5)(!e||_o[t+4]&&_o[t+4].query===e)&&(_o[t].style.cssText=_o[t+1],_o[t].getBBox&&_o[t].setAttribute("transform",_o[t+2]||""),_o[t+3].uncache=1)},Ao=function(e,t){var n;for(Hs=0;Hs<fo.length;Hs++)!(n=fo[Hs])||t&&n._ctx!==t||(e?n.kill(1):n.revert(!0,!0));ra=!0,t&&ko(t),t||So("revert")},Lo=function(e,t){is.cache++,(t||!oa)&&is.forEach(function(e){return xa(e)&&e.cacheID++&&(e.rec=0)}),Ia(e)&&(Rs.history.scrollRestoration=ea=e)},wo=0,Ro=function(){Cs.appendChild(ta),na=!qs&&ta.offsetHeight||Rs.innerHeight,Cs.removeChild(ta)},Io=function(e){return Os(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},xo=function(e,t){if(xs=Is.documentElement,Cs=Is.body,Ds=[Rs,Is,xs,Cs],!fa||e||ra){Ro(),oa=Wo.isRefreshing=!0,is.forEach(function(e){return xa(e)&&++e.cacheID&&(e.rec=e())});var n=So("refreshInit");Ks&&Wo.sort(),t||Ao(),is.forEach(function(e){xa(e)&&(e.smooth&&(e.target.style.scrollBehavior="auto"),e(0))}),fo.slice(0).forEach(function(e){return e.refresh()}),ra=!1,fo.forEach(function(e){if(e._subPinOffset&&e.pin){var t=e.vars.horizontal?"offsetWidth":"offsetHeight",n=e.pin[t];e.revert(!0,1),e.adjustPinSpacing(e.pin[t]-n),e.refresh()}}),ia=1,Io(!0),fo.forEach(function(e){var t=wa(e.scroller,e._dir),n="max"===e.vars.end||e._endClamp&&e.end>t,r=e._startClamp&&e.start>=t;(n||r)&&e.setPositions(r?t-1:e.start,n?Math.max(r?t:e.start+1,t):e.end,!0)}),Io(!1),ia=0,n.forEach(function(e){return e&&e.render&&e.render(-1)}),is.forEach(function(e){xa(e)&&(e.smooth&&requestAnimationFrame(function(){return e.target.style.scrollBehavior="smooth"}),e.rec&&e(e.rec))}),Lo(ea,1),Ps.pause(),wo++,oa=2,Po(2),fo.forEach(function(e){return xa(e.vars.onRefresh)&&e.vars.onRefresh(e)}),oa=Wo.isRefreshing=!1,So("refresh")}else ro(Wo,"scrollEnd",To)},Co=0,Do=1,Po=function(e){if(2===e||!oa&&!ra){Wo.isUpdating=!0,ca&&ca.update(0);var t=fo.length,n=da(),r=n-ha>=50,i=t&&fo[0].scroll();if(Do=Co>i?-1:1,oa||(Co=i),r&&(fa&&!Us&&n-fa>200&&(fa=0,So("scrollEnd")),Fs=ha,ha=n),Do<0){for(Hs=t;Hs-- >0;)fo[Hs]&&fo[Hs].update(0,r);Do=1}else for(Hs=0;Hs<t;Hs++)fo[Hs]&&fo[Hs].update(0,r);Wo.isUpdating=!1}aa=0},Oo=[Fa,"top",Ba,Na,Ya+Va,Ya+Ha,Ya+za,Ya+ja,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],Mo=Oo.concat([Ua,Ga,"boxSizing","max"+Wa,"max"+qa,"position",Ya,Ka,Ka+za,Ka+Ha,Ka+Va,Ka+ja]),Fo=function(e,t,n,r){if(!e._gsap.swappedIn){for(var i,s=Oo.length,a=t.style,o=e.style;s--;)a[i=Oo[s]]=n[i];a.position="absolute"===n.position?"absolute":"relative","inline"===n.display&&(a.display="inline-block"),o[Ba]=o[Na]="auto",a.flexBasis=n.flexBasis||"auto",a.overflow="visible",a.boxSizing="border-box",a[Ua]=Ja(e,ms)+Xa,a[Ga]=Ja(e,vs)+Xa,a[Ka]=o[Ya]=o.top=o[Fa]="0",Bo(r),o[Ua]=o["max"+Wa]=n[Ua],o[Ga]=o["max"+qa]=n[Ga],o[Ka]=n[Ka],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},No=/([A-Z])/g,Bo=function(e){if(e){var t,n,r=e.t.style,i=e.length,s=0;for((e.t._gsap||Ls.core.getCache(e.t)).uncache=1;s<i;s+=2)n=e[s+1],t=e[s],n?r[t]=n:r[t]&&r.removeProperty(t.replace(No,"-$1").toLowerCase())}},Uo=function(e){for(var t=Mo.length,n=e.style,r=[],i=0;i<t;i++)r.push(Mo[i],n[Mo[i]]);return r.t=e,r},Go={left:0,top:0},Ho=function(e,t,n,r,i,s,a,o,l,c,u,d,h,f){xa(e)&&(e=e(o)),Ia(e)&&"max"===e.substr(0,3)&&(e=d+("="===e.charAt(4)?co("0"+e.substr(3),n):0));var g,p,m,v=h?h.time():0;if(h&&h.seek(0),isNaN(e)||(e=+e),Ca(e))h&&(e=Ls.utils.mapRange(h.scrollTrigger.start,h.scrollTrigger.end,0,d,e)),a&&ho(a,n,r,!0);else{xa(t)&&(t=t(o));var y,E,b,T,S=(e||"0").split(" ");m=ys(t,o)||Cs,(y=Za(m)||{})&&(y.left||y.top)||"none"!==Qa(m).display||(T=m.style.display,m.style.display="block",y=Za(m),T?m.style.display=T:m.style.removeProperty("display")),E=co(S[0],y[r.d]),b=co(S[1]||"0",n),e=y[r.p]-l[r.p]-c+E+i-b,a&&ho(a,b,r,n-b<20||a._isStart&&b>20),n-=n-b}if(f&&(o[f]=e||-.001,e<0&&(e=0)),s){var _=e+n,k=s._isStart;g="scroll"+r.d2,ho(s,_,r,k&&_>20||!k&&(u?Math.max(Cs[g],xs[g]):s.parentNode[g])<=_+1),u&&(l=Za(a),u&&(s.style[r.op.p]=l[r.op.p]-r.op.m-s._offset+Xa))}return h&&m&&(g=Za(m),h.seek(d),p=Za(m),h._caScrollDist=g[r.p]-p[r.p],e=e/h._caScrollDist*d),h&&h.seek(v),h?e:Math.round(e)},jo=/(webkit|moz|length|cssText|inset)/i,zo=function(e,t,n,r){if(e.parentNode!==t){var i,s,a=e.style;if(t===Cs){for(i in e._stOrig=a.cssText,s=Qa(e))+i||jo.test(i)||!s[i]||"string"!==typeof a[i]||"0"===i||(a[i]=s[i]);a.top=n,a.left=r}else a.cssText=e._stOrig;Ls.core.getCache(e).uncache=1,t.appendChild(e)}},Vo=function(e,t,n){var r=t,i=r;return function(t){var s=Math.round(e());return s!==r&&s!==i&&Math.abs(s-r)>3&&Math.abs(s-i)>3&&(t=s,n&&n()),i=r,r=Math.round(t)}},Ko=function(e,t,n){var r={};r[t.p]="+="+n,Ls.set(e,r)},Yo=function(e,t){var n=Es(e,t),r="_scroll"+t.p2,i=function t(i,s,a,o,l){var c=t.tween,u=s.onComplete,d={};a=a||n();var h=Vo(n,a,function(){c.kill(),t.tween=0});return l=o&&l||0,o=o||i-a,c&&c.kill(),s[r]=i,s.inherit=!1,s.modifiers=d,d[r]=function(){return h(a+o*c.ratio+l*c.ratio*c.ratio)},s.onUpdate=function(){is.cache++,t.tween&&Po()},s.onComplete=function(){t.tween=0,u&&u.call(c)},c=t.tween=Ls.to(e,s)};return e[r]=n,n.wheelHandler=function(){return i.tween&&i.tween.kill()&&(i.tween=0)},ro(e,"wheel",n.wheelHandler),Wo.isTouch&&ro(e,"touchmove",n.wheelHandler),i},Wo=function(){function e(t,n){ws||e.register(Ls)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),Js(this),this.init(t,n)}return e.prototype.init=function(t,n){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),ga){var r,i,s,a,o,l,c,u,d,h,f,g,p,m,v,y,E,b,T,S,_,k,A,L,w,R,I,x,C,D,P,O,M,F,N,B,U,G,H,j,z=t=$a(Ia(t)||Ca(t)||t.nodeType?{trigger:t}:t,oo),V=z.onUpdate,K=z.toggleClass,Y=z.id,W=z.onToggle,q=z.onRefresh,X=z.scrub,Q=z.trigger,$=z.pin,Z=z.pinSpacing,J=z.invalidateOnRefresh,ee=z.anticipatePin,te=z.onScrubComplete,ne=z.onSnapComplete,re=z.once,ie=z.snap,se=z.pinReparent,ae=z.pinSpacer,oe=z.containerAnimation,le=z.fastScrollEnd,ce=z.preventOverlaps,ue=t.horizontal||t.containerAnimation&&!1!==t.horizontal?ms:vs,de=!X&&0!==X,he=ys(t.scroller||Rs),fe=Ls.core.getCache(he),ge=ka(he),pe="fixed"===("pinType"in t?t.pinType:ls(he,"pinType")||ge&&"fixed"),me=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],ve=de&&t.toggleActions.split(" "),ye="markers"in t?t.markers:oo.markers,Ee=ge?0:parseFloat(Qa(he)["border"+ue.p2+Wa])||0,be=this,Te=t.onRefreshInit&&function(){return t.onRefreshInit(be)},Se=function(e,t,n){var r=n.d,i=n.d2,s=n.a;return(s=ls(e,"getBoundingClientRect"))?function(){return s()[r]}:function(){return(t?Aa(i):e["client"+i])||0}}(he,ge,ue),_e=function(e,t){return!t||~ss.indexOf(e)?La(e):function(){return Go}}(he,ge),ke=0,Ae=0,Le=0,we=Es(he,ue);if(be._startClamp=be._endClamp=!1,be._dir=ue,ee*=45,be.scroller=he,be.scroll=oe?oe.time.bind(oe):we,a=we(),be.vars=t,n=n||t.animation,"refreshPriority"in t&&(Ks=1,-9999===t.refreshPriority&&(ca=be)),fe.tweenScroll=fe.tweenScroll||{top:Yo(he,vs),left:Yo(he,ms)},be.tweenTo=r=fe.tweenScroll[ue.p],be.scrubDuration=function(e){(M=Ca(e)&&e)?O?O.duration(e):O=Ls.to(n,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:M,paused:!0,onComplete:function(){return te&&te(be)}}):(O&&O.progress(1).kill(),O=0)},n&&(n.vars.lazy=!1,n._initted&&!be.isReverted||!1!==n.vars.immediateRender&&!1!==t.immediateRender&&n.duration()&&n.render(0,!0,!0),be.animation=n.pause(),n.scrollTrigger=be,be.scrubDuration(X),D=0,Y||(Y=n.vars.id)),ie&&(Da(ie)&&!ie.push||(ie={snapTo:ie}),"scrollBehavior"in Cs.style&&Ls.set(ge?[Cs,xs]:he,{scrollBehavior:"auto"}),is.forEach(function(e){return xa(e)&&e.target===(ge?Is.scrollingElement||xs:he)&&(e.smooth=!1)}),s=xa(ie.snapTo)?ie.snapTo:"labels"===ie.snapTo?function(e){return function(t){return Ls.utils.snap(eo(e),t)}}(n):"labelsDirectional"===ie.snapTo?(j=n,function(e,t){return to(eo(j))(e,t.direction)}):!1!==ie.directional?function(e,t){return to(ie.snapTo)(e,da()-Ae<500?0:t.direction)}:Ls.utils.snap(ie.snapTo),F=ie.duration||{min:.1,max:2},F=Da(F)?Ms(F.min,F.max):Ms(F,F),N=Ls.delayedCall(ie.delay||M/2||.1,function(){var e=we(),t=da()-Ae<500,i=r.tween;if(!(t||Math.abs(be.getVelocity())<10)||i||Us||ke===e)be.isActive&&ke!==e&&N.restart(!0);else{var a,o,u=(e-l)/m,d=n&&!de?n.totalProgress():u,h=t?0:(d-P)/(da()-Fs)*1e3||0,f=Ls.utils.clamp(-u,1-u,Ma(h/2)*h/.185),g=u+(!1===ie.inertia?0:f),p=ie,v=p.onStart,y=p.onInterrupt,E=p.onComplete;if(a=s(g,be),Ca(a)||(a=g),o=Math.max(0,Math.round(l+a*m)),e<=c&&e>=l&&o!==e){if(i&&!i._initted&&i.data<=Ma(o-e))return;!1===ie.inertia&&(f=a-u),r(o,{duration:F(Ma(.185*Math.max(Ma(g-d),Ma(a-d))/h/.05||0)),ease:ie.ease||"power3",data:Ma(o-e),onInterrupt:function(){return N.restart(!0)&&y&&y(be)},onComplete:function(){be.update(),ke=we(),n&&!de&&(O?O.resetTo("totalProgress",a,n._tTime/n._tDur):n.progress(a)),D=P=n&&!de?n.totalProgress():be.progress,ne&&ne(be),E&&E(be)}},e,f*m,o-e-f*m),v&&v(be,r.tween)}}}).pause()),Y&&(go[Y]=be),(H=(Q=be.trigger=ys(Q||!0!==$&&$))&&Q._gsap&&Q._gsap.stRevert)&&(H=H(be)),$=!0===$?Q:ys($),Ia(K)&&(K={targets:Q,className:K}),$&&(!1===Z||Z===Ya||(Z=!(!Z&&$.parentNode&&$.parentNode.style&&"flex"===Qa($.parentNode).display)&&Ka),be.pin=$,(i=Ls.core.getCache($)).spacer?v=i.pinState:(ae&&((ae=ys(ae))&&!ae.nodeType&&(ae=ae.current||ae.nativeElement),i.spacerIsNative=!!ae,ae&&(i.spacerState=Uo(ae))),i.spacer=b=ae||Is.createElement("div"),b.classList.add("pin-spacer"),Y&&b.classList.add("pin-spacer-"+Y),i.pinState=v=Uo($)),!1!==t.force3D&&Ls.set($,{force3D:!0}),be.spacer=b=i.spacer,C=Qa($),L=C[Z+ue.os2],S=Ls.getProperty($),_=Ls.quickSetter($,ue.a,Xa),Fo($,b,C),E=Uo($)),ye){g=Da(ye)?$a(ye,ao):ao,h=uo("scroller-start",Y,he,ue,g,0),f=uo("scroller-end",Y,he,ue,g,0,h),T=h["offset"+ue.op.d2];var Re=ys(ls(he,"content")||he);u=this.markerStart=uo("start",Y,Re,ue,g,T,0,oe),d=this.markerEnd=uo("end",Y,Re,ue,g,T,0,oe),oe&&(G=Ls.quickSetter([u,d],ue.a,Xa)),pe||ss.length&&!0===ls(he,"fixedMarkers")||(!function(e){var t=Qa(e).position;e.style.position="absolute"===t||"fixed"===t?t:"relative"}(ge?Cs:he),Ls.set([h,f],{force3D:!0}),R=Ls.quickSetter(h,ue.a,Xa),x=Ls.quickSetter(f,ue.a,Xa))}if(oe){var Ie=oe.vars.onUpdate,xe=oe.vars.onUpdateParams;oe.eventCallback("onUpdate",function(){be.update(0,0,1),Ie&&Ie.apply(oe,xe||[])})}if(be.previous=function(){return fo[fo.indexOf(be)-1]},be.next=function(){return fo[fo.indexOf(be)+1]},be.revert=function(e,t){if(!t)return be.kill(!0);var r=!1!==e||!be.enabled,i=Bs;r!==be.isReverted&&(r&&(B=Math.max(we(),be.scroll.rec||0),Le=be.progress,U=n&&n.progress()),u&&[u,d,h,f].forEach(function(e){return e.style.display=r?"none":"block"}),r&&(Bs=be,be.update(r)),!$||se&&be.isActive||(r?function(e,t,n){Bo(n);var r=e._gsap;if(r.spacerIsNative)Bo(r.spacerState);else if(e._gsap.swappedIn){var i=t.parentNode;i&&(i.insertBefore(e,t),i.removeChild(t))}e._gsap.swappedIn=!1}($,b,v):Fo($,b,Qa($),w)),r||be.update(r),Bs=i,be.isReverted=r)},be.refresh=function(i,s,g,T){if(!Bs&&be.enabled||s)if($&&i&&fa)ro(e,"scrollEnd",To);else{!oa&&Te&&Te(be),Bs=be,r.tween&&!g&&(r.tween.kill(),r.tween=0),O&&O.pause(),J&&n&&(n.revert({kill:!1}).invalidate(),n.getChildren&&n.getChildren(!0,!0,!1).forEach(function(e){return e.vars.immediateRender&&e.render(0,!0,!0)})),be.isReverted||be.revert(!0,!0),be._subPinOffset=!1;var _,L,R,x,C,D,P,M,F,G,H,j,z,V=Se(),K=_e(),Y=oe?oe.duration():wa(he,ue),W=m<=.01||!m,X=0,ee=T||0,te=Da(g)?g.end:t.end,ne=t.endTrigger||Q,re=Da(g)?g.start:t.start||(0!==t.start&&Q?$?"0 0":"0 100%":0),ie=be.pinnedContainer=t.pinnedContainer&&ys(t.pinnedContainer,be),ae=Q&&Math.max(0,fo.indexOf(be))||0,le=ae;for(ye&&Da(g)&&(j=Ls.getProperty(h,ue.p),z=Ls.getProperty(f,ue.p));le-- >0;)(D=fo[le]).end||D.refresh(0,1)||(Bs=be),!(P=D.pin)||P!==Q&&P!==$&&P!==ie||D.isReverted||(G||(G=[]),G.unshift(D),D.revert(!0,!0)),D!==fo[le]&&(ae--,le--);for(xa(re)&&(re=re(be)),re=pa(re,"start",be),l=Ho(re,Q,V,ue,we(),u,h,be,K,Ee,pe,Y,oe,be._startClamp&&"_startClamp")||($?-.001:0),xa(te)&&(te=te(be)),Ia(te)&&!te.indexOf("+=")&&(~te.indexOf(" ")?te=(Ia(re)?re.split(" ")[0]:"")+te:(X=co(te.substr(2),V),te=Ia(re)?re:(oe?Ls.utils.mapRange(0,oe.duration(),oe.scrollTrigger.start,oe.scrollTrigger.end,l):l)+X,ne=Q)),te=pa(te,"end",be),c=Math.max(l,Ho(te||(ne?"100% 0":Y),ne,V,ue,we()+X,d,f,be,K,Ee,pe,Y,oe,be._endClamp&&"_endClamp"))||-.001,X=0,le=ae;le--;)(P=(D=fo[le]).pin)&&D.start-D._pinPush<=l&&!oe&&D.end>0&&(_=D.end-(be._startClamp?Math.max(0,D.start):D.start),(P===Q&&D.start-D._pinPush<l||P===ie)&&isNaN(re)&&(X+=_*(1-D.progress)),P===$&&(ee+=_));if(l+=X,c+=X,be._startClamp&&(be._startClamp+=X),be._endClamp&&!oa&&(be._endClamp=c||-.001,c=Math.min(c,wa(he,ue))),m=c-l||(l-=.01)&&.001,W&&(Le=Ls.utils.clamp(0,1,Ls.utils.normalize(l,c,B))),be._pinPush=ee,u&&X&&((_={})[ue.a]="+="+X,ie&&(_[ue.p]="-="+we()),Ls.set([u,d],_)),!$||ia&&be.end>=wa(he,ue)){if(Q&&we()&&!oe)for(L=Q.parentNode;L&&L!==Cs;)L._pinOffset&&(l-=L._pinOffset,c-=L._pinOffset),L=L.parentNode}else _=Qa($),x=ue===vs,R=we(),k=parseFloat(S(ue.a))+ee,!Y&&c>1&&(H={style:H=(ge?Is.scrollingElement||xs:he).style,value:H["overflow"+ue.a.toUpperCase()]},ge&&"scroll"!==Qa(Cs)["overflow"+ue.a.toUpperCase()]&&(H.style["overflow"+ue.a.toUpperCase()]="scroll")),Fo($,b,_),E=Uo($),L=Za($,!0),M=pe&&Es(he,x?ms:vs)(),Z?((w=[Z+ue.os2,m+ee+Xa]).t=b,(le=Z===Ka?Ja($,ue)+m+ee:0)&&(w.push(ue.d,le+Xa),"auto"!==b.style.flexBasis&&(b.style.flexBasis=le+Xa)),Bo(w),ie&&fo.forEach(function(e){e.pin===ie&&!1!==e.vars.pinSpacing&&(e._subPinOffset=!0)}),pe&&we(B)):(le=Ja($,ue))&&"auto"!==b.style.flexBasis&&(b.style.flexBasis=le+Xa),pe&&((C={top:L.top+(x?R-l:M)+Xa,left:L.left+(x?M:R-l)+Xa,boxSizing:"border-box",position:"fixed"})[Ua]=C["max"+Wa]=Math.ceil(L.width)+Xa,C[Ga]=C["max"+qa]=Math.ceil(L.height)+Xa,C[Ya]=C[Ya+za]=C[Ya+Ha]=C[Ya+Va]=C[Ya+ja]="0",C[Ka]=_[Ka],C[Ka+za]=_[Ka+za],C[Ka+Ha]=_[Ka+Ha],C[Ka+Va]=_[Ka+Va],C[Ka+ja]=_[Ka+ja],y=function(e,t,n){for(var r,i=[],s=e.length,a=n?8:0;a<s;a+=2)r=e[a],i.push(r,r in t?t[r]:e[a+1]);return i.t=e.t,i}(v,C,se),oa&&we(0)),n?(F=n._initted,Ys(1),n.render(n.duration(),!0,!0),A=S(ue.a)-k+m+ee,I=Math.abs(m-A)>1,pe&&I&&y.splice(y.length-2,2),n.render(0,!0,!0),F||n.invalidate(!0),n.parent||n.totalTime(n.totalTime()),Ys(0)):A=m,H&&(H.value?H.style["overflow"+ue.a.toUpperCase()]=H.value:H.style.removeProperty("overflow-"+ue.a));G&&G.forEach(function(e){return e.revert(!1,!0)}),be.start=l,be.end=c,a=o=oa?B:we(),oe||oa||(a<B&&we(B),be.scroll.rec=0),be.revert(!1,!0),Ae=da(),N&&(ke=-1,N.restart(!0)),Bs=0,n&&de&&(n._initted||U)&&n.progress()!==U&&n.progress(U||0,!0).render(n.time(),!0,!0),(W||Le!==be.progress||oe||J||n&&!n._initted)&&(n&&!de&&(n._initted||Le||!1!==n.vars.immediateRender)&&n.totalProgress(oe&&l<-.001&&!Le?Ls.utils.normalize(l,c,0):Le,!0),be.progress=W||(a-l)/m===Le?0:Le),$&&Z&&(b._pinOffset=Math.round(be.progress*A)),O&&O.invalidate(),isNaN(j)||(j-=Ls.getProperty(h,ue.p),z-=Ls.getProperty(f,ue.p),Ko(h,ue,j),Ko(u,ue,j-(T||0)),Ko(f,ue,z),Ko(d,ue,z-(T||0))),W&&!oa&&be.update(),!q||oa||p||(p=!0,q(be),p=!1)}},be.getVelocity=function(){return(we()-o)/(da()-Fs)*1e3||0},be.endAnimation=function(){Pa(be.callbackAnimation),n&&(O?O.progress(1):n.paused()?de||Pa(n,be.direction<0,1):Pa(n,n.reversed()))},be.labelToScroll=function(e){return n&&n.labels&&(l||be.refresh()||l)+n.labels[e]/n.duration()*m||0},be.getTrailing=function(e){var t=fo.indexOf(be),n=be.direction>0?fo.slice(0,t).reverse():fo.slice(t+1);return(Ia(e)?n.filter(function(t){return t.vars.preventOverlaps===e}):n).filter(function(e){return be.direction>0?e.end<=l:e.start>=c})},be.update=function(e,t,i){if(!oe||i||e){var s,u,d,f,g,p,v,T=!0===oa?B:be.scroll(),S=e?0:(T-l)/m,w=S<0?0:S>1?1:S||0,C=be.progress;if(t&&(o=a,a=oe?we():T,ie&&(P=D,D=n&&!de?n.totalProgress():w)),ee&&$&&!Bs&&!ua&&fa&&(!w&&l<T+(T-o)/(da()-Fs)*ee?w=1e-4:1===w&&c>T+(T-o)/(da()-Fs)*ee&&(w=.9999)),w!==C&&be.enabled){if(f=(g=(s=be.isActive=!!w&&w<1)!==(!!C&&C<1))||!!w!==!!C,be.direction=w>C?1:-1,be.progress=w,f&&!Bs&&(u=w&&!C?0:1===w?1:1===C?2:3,de&&(d=!g&&"none"!==ve[u+1]&&ve[u+1]||ve[u],v=n&&("complete"===d||"reset"===d||d in n))),ce&&(g||v)&&(v||X||!n)&&(xa(ce)?ce(be):be.getTrailing(ce).forEach(function(e){return e.endAnimation()})),de||(!O||Bs||ua?n&&n.totalProgress(w,!(!Bs||!Ae&&!e)):(O._dp._time-O._start!==O._time&&O.render(O._dp._time-O._start),O.resetTo?O.resetTo("totalProgress",w,n._tTime/n._tDur):(O.vars.totalProgress=w,O.invalidate().restart()))),$)if(e&&Z&&(b.style[Z+ue.os2]=L),pe){if(f){if(p=!e&&w>C&&c+1>T&&T+1>=wa(he,ue),se)if(e||!s&&!p)zo($,b);else{var M=Za($,!0),F=T-l;zo($,Cs,M.top+(ue===vs?F:0)+Xa,M.left+(ue===vs?0:F)+Xa)}Bo(s||p?y:E),I&&w<1&&s||_(k+(1!==w||p?0:A))}}else _(Ta(k+A*w));ie&&!r.tween&&!Bs&&!ua&&N.restart(!0),K&&(g||re&&w&&(w<1||!sa))&&Os(K.targets).forEach(function(e){return e.classList[s||re?"add":"remove"](K.className)}),V&&!de&&!e&&V(be),f&&!Bs?(de&&(v&&("complete"===d?n.pause().totalProgress(1):"reset"===d?n.restart(!0).pause():"restart"===d?n.restart(!0):n[d]()),V&&V(be)),!g&&sa||(W&&g&&Oa(be,W),me[u]&&Oa(be,me[u]),re&&(1===w?be.kill(!1,1):me[u]=0),g||me[u=1===w?1:3]&&Oa(be,me[u])),le&&!s&&Math.abs(be.getVelocity())>(Ca(le)?le:2500)&&(Pa(be.callbackAnimation),O?O.progress(1):Pa(n,"reverse"===d?1:!w,1))):de&&V&&!Bs&&V(be)}if(x){var U=oe?T/oe.duration()*(oe._caScrollDist||0):T;R(U+(h._isFlipped?1:0)),x(U)}G&&G(-T/oe.duration()*(oe._caScrollDist||0))}},be.enable=function(t,n){be.enabled||(be.enabled=!0,ro(he,"resize",yo),ge||ro(he,"scroll",mo),Te&&ro(e,"refreshInit",Te),!1!==t&&(be.progress=Le=0,a=o=ke=we()),!1!==n&&be.refresh())},be.getTween=function(e){return e&&r?r.tween:O},be.setPositions=function(e,t,n,r){if(oe){var i=oe.scrollTrigger,s=oe.duration(),a=i.end-i.start;e=i.start+a*e/s,t=i.start+a*t/s}be.refresh(!1,!1,{start:ma(e,n&&!!be._startClamp),end:ma(t,n&&!!be._endClamp)},r),be.update()},be.adjustPinSpacing=function(e){if(w&&e){var t=w.indexOf(ue.d)+1;w[t]=parseFloat(w[t])+e+Xa,w[1]=parseFloat(w[1])+e+Xa,Bo(w)}},be.disable=function(t,n){if(be.enabled&&(!1!==t&&be.revert(!0,!0),be.enabled=be.isActive=!1,n||O&&O.pause(),B=0,i&&(i.uncache=1),Te&&io(e,"refreshInit",Te),N&&(N.pause(),r.tween&&r.tween.kill()&&(r.tween=0)),!ge)){for(var s=fo.length;s--;)if(fo[s].scroller===he&&fo[s]!==be)return;io(he,"resize",yo),ge||io(he,"scroll",mo)}},be.kill=function(e,r){be.disable(e,r),O&&!r&&O.kill(),Y&&delete go[Y];var s=fo.indexOf(be);s>=0&&fo.splice(s,1),s===Hs&&Do>0&&Hs--,s=0,fo.forEach(function(e){return e.scroller===be.scroller&&(s=1)}),s||oa||(be.scroll.rec=0),n&&(n.scrollTrigger=null,e&&n.revert({kill:!1}),r||n.kill()),u&&[u,d,h,f].forEach(function(e){return e.parentNode&&e.parentNode.removeChild(e)}),ca===be&&(ca=0),$&&(i&&(i.uncache=1),s=0,fo.forEach(function(e){return e.pin===$&&s++}),s||(i.spacer=0)),t.onKill&&t.onKill(be)},fo.push(be),be.enable(!1,!1),H&&H(be),n&&n.add&&!m){var Ce=be.update;be.update=function(){be.update=Ce,is.cache++,l||c||be.refresh()},Ls.delayedCall(.01,be.update),m=.01,l=c=0}else be.refresh();$&&function(){if(la!==wo){var e=la=wo;requestAnimationFrame(function(){return e===wo&&xo(!0)})}}()}else this.update=this.refresh=this.kill=ba},e.register=function(t){return ws||(Ls=t||_a(),Sa()&&window.document&&e.enable(),ws=ga),ws},e.defaults=function(e){if(e)for(var t in e)oo[t]=e[t];return oo},e.disable=function(e,t){ga=0,fo.forEach(function(n){return n[t?"kill":"disable"](e)}),io(Rs,"wheel",mo),io(Is,"scroll",mo),clearInterval(Ns),io(Is,"touchcancel",ba),io(Cs,"touchstart",ba),no(io,Is,"pointerdown,touchstart,mousedown",ya),no(io,Is,"pointerup,touchend,mouseup",Ea),Ps.kill(),Ra(io);for(var n=0;n<is.length;n+=3)so(io,is[n],is[n+1]),so(io,is[n],is[n+2])},e.enable=function(){if(Rs=window,Is=document,xs=Is.documentElement,Cs=Is.body,Ls&&(Os=Ls.utils.toArray,Ms=Ls.utils.clamp,Js=Ls.core.context||ba,Ys=Ls.core.suppressOverwrites||ba,ea=Rs.history.scrollRestoration||"auto",Co=Rs.pageYOffset||0,Ls.core.globals("ScrollTrigger",e),Cs)){ga=1,(ta=document.createElement("div")).style.height="100vh",ta.style.position="absolute",Ro(),va(),As.register(Ls),e.isTouch=As.isTouch,Zs=As.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),Xs=1===As.isTouch,ro(Rs,"wheel",mo),Ds=[Rs,Is,xs,Cs],Ls.matchMedia?(e.matchMedia=function(e){var t,n=Ls.matchMedia();for(t in e)n.add(t,e[t]);return n},Ls.addEventListener("matchMediaInit",function(){return Ao()}),Ls.addEventListener("matchMediaRevert",function(){return ko()}),Ls.addEventListener("matchMedia",function(){xo(0,1),So("matchMedia")}),Ls.matchMedia().add("(orientation: portrait)",function(){return vo(),vo})):console.warn("Requires GSAP 3.11.0 or later"),vo(),ro(Is,"scroll",mo);var t,n,r=Cs.hasAttribute("style"),i=Cs.style,s=i.borderTopStyle,a=Ls.core.Animation.prototype;for(a.revert||Object.defineProperty(a,"revert",{value:function(){return this.time(-.01,!0)}}),i.borderTopStyle="solid",t=Za(Cs),vs.m=Math.round(t.top+vs.sc())||0,ms.m=Math.round(t.left+ms.sc())||0,s?i.borderTopStyle=s:i.removeProperty("border-top-style"),r||(Cs.setAttribute("style",""),Cs.removeAttribute("style")),Ns=setInterval(po,250),Ls.delayedCall(.5,function(){return ua=0}),ro(Is,"touchcancel",ba),ro(Cs,"touchstart",ba),no(ro,Is,"pointerdown,touchstart,mousedown",ya),no(ro,Is,"pointerup,touchend,mouseup",Ea),Gs=Ls.utils.checkPrefix("transform"),Mo.push(Gs),ws=da(),Ps=Ls.delayedCall(.2,xo).pause(),Vs=[Is,"visibilitychange",function(){var e=Rs.innerWidth,t=Rs.innerHeight;Is.hidden?(js=e,zs=t):js===e&&zs===t||yo()},Is,"DOMContentLoaded",xo,Rs,"load",xo,Rs,"resize",yo],Ra(ro),fo.forEach(function(e){return e.enable(0,1)}),n=0;n<is.length;n+=3)so(io,is[n],is[n+1]),so(io,is[n],is[n+2])}},e.config=function(t){"limitCallbacks"in t&&(sa=!!t.limitCallbacks);var n=t.syncInterval;n&&clearInterval(Ns)||(Ns=n)&&setInterval(po,n),"ignoreMobileResize"in t&&(Xs=1===e.isTouch&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(Ra(io)||Ra(ro,t.autoRefreshEvents||"none"),Ws=-1===(t.autoRefreshEvents+"").indexOf("resize"))},e.scrollerProxy=function(e,t){var n=ys(e),r=is.indexOf(n),i=ka(n);~r&&is.splice(r,i?6:2),t&&(i?ss.unshift(Rs,t,Cs,t,xs,t):ss.unshift(n,t))},e.clearMatchMedia=function(e){fo.forEach(function(t){return t._ctx&&t._ctx.query===e&&t._ctx.kill(!0,!0)})},e.isInViewport=function(e,t,n){var r=(Ia(e)?ys(e):e).getBoundingClientRect(),i=r[n?Ua:Ga]*t||0;return n?r.right-i>0&&r.left+i<Rs.innerWidth:r.bottom-i>0&&r.top+i<Rs.innerHeight},e.positionInViewport=function(e,t,n){Ia(e)&&(e=ys(e));var r=e.getBoundingClientRect(),i=r[n?Ua:Ga],s=null==t?i/2:t in lo?lo[t]*i:~t.indexOf("%")?parseFloat(t)*i/100:parseFloat(t)||0;return n?(r.left+s)/Rs.innerWidth:(r.top+s)/Rs.innerHeight},e.killAll=function(e){if(fo.slice(0).forEach(function(e){return"ScrollSmoother"!==e.vars.id&&e.kill()}),!0!==e){var t=Eo.killAll||[];Eo={},t.forEach(function(e){return e()})}},e}();Wo.version="3.13.0",Wo.saveStyles=function(e){return e?Os(e).forEach(function(e){if(e&&e.style){var t=_o.indexOf(e);t>=0&&_o.splice(t,5),_o.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),Ls.core.getCache(e),Js())}}):_o},Wo.revert=function(e,t){return Ao(!e,t)},Wo.create=function(e,t){return new Wo(e,t)},Wo.refresh=function(e){return e?yo(!0):(ws||Wo.register())&&xo(!0)},Wo.update=function(e){return++is.cache&&Po(!0===e?2:0)},Wo.clearScrollMemory=Lo,Wo.maxScroll=function(e,t){return wa(e,t?ms:vs)},Wo.getScrollFunc=function(e,t){return Es(ys(e),t?ms:vs)},Wo.getById=function(e){return go[e]},Wo.getAll=function(){return fo.filter(function(e){return"ScrollSmoother"!==e.vars.id})},Wo.isScrolling=function(){return!!fa},Wo.snapDirectional=to,Wo.addEventListener=function(e,t){var n=Eo[e]||(Eo[e]=[]);~n.indexOf(t)||n.push(t)},Wo.removeEventListener=function(e,t){var n=Eo[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},Wo.batch=function(e,t){var n,r=[],i={},s=t.interval||.016,a=t.batchMax||1e9,o=function(e,t){var n=[],r=[],i=Ls.delayedCall(s,function(){t(n,r),n=[],r=[]}).pause();return function(e){n.length||i.restart(!0),n.push(e.trigger),r.push(e),a<=n.length&&i.progress(1)}};for(n in t)i[n]="on"===n.substr(0,2)&&xa(t[n])&&"onRefreshInit"!==n?o(0,t[n]):t[n];return xa(a)&&(a=a(),ro(Wo,"refresh",function(){return a=t.batchMax()})),Os(e).forEach(function(e){var t={};for(n in i)t[n]=i[n];t.trigger=e,r.push(Wo.create(t))}),r};var qo,Xo=function(e,t,n,r){return t>r?e(r):t<0&&e(0),n>r?(r-t)/(n-t):n<0?t/(t-n):1},Qo=function e(t,n){!0===n?t.style.removeProperty("touch-action"):t.style.touchAction=!0===n?"auto":n?"pan-"+n+(As.isTouch?" pinch-zoom":""):"none",t===xs&&e(Cs,n)},$o={auto:1,scroll:1},Zo=function(e){var t,n=e.event,r=e.target,i=e.axis,s=(n.changedTouches?n.changedTouches[0]:n).target,a=s._gsap||Ls.core.getCache(s),o=da();if(!a._isScrollT||o-a._isScrollT>2e3){for(;s&&s!==Cs&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!$o[(t=Qa(s)).overflowY]&&!$o[t.overflowX]);)s=s.parentNode;a._isScroll=s&&s!==r&&!ka(s)&&($o[(t=Qa(s)).overflowY]||$o[t.overflowX]),a._isScrollT=o}(a._isScroll||"x"===i)&&(n.stopPropagation(),n._gsapAllow=!0)},Jo=function(e,t,n,r){return As.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:r=r&&Zo,onPress:r,onDrag:r,onScroll:r,onEnable:function(){return n&&ro(Is,As.eventTypes[0],tl,!1,!0)},onDisable:function(){return io(Is,As.eventTypes[0],tl,!0)}})},el=/(input|label|select|textarea)/i,tl=function(e){var t=el.test(e.target.tagName);(t||qo)&&(e._gsapAllow=!0,qo=t)},nl=function(e){Da(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t,n,r,i,s,a,o,l,c=e,u=c.normalizeScrollX,d=c.momentum,h=c.allowNestedScroll,f=c.onRelease,g=ys(e.target)||xs,p=Ls.core.globals().ScrollSmoother,m=p&&p.get(),v=Zs&&(e.content&&ys(e.content)||m&&!1!==e.content&&!m.smooth()&&m.content()),y=Es(g,vs),E=Es(g,ms),b=1,T=(As.isTouch&&Rs.visualViewport?Rs.visualViewport.scale*Rs.visualViewport.width:Rs.outerWidth)/Rs.innerWidth,S=0,_=xa(d)?function(){return d(t)}:function(){return d||2.8},k=Jo(g,e.type,!0,h),A=function(){return i=!1},L=ba,w=ba,R=function(){n=wa(g,vs),w=Ms(Zs?1:0,n),u&&(L=Ms(0,wa(g,ms))),r=wo},I=function(){v._gsap.y=Ta(parseFloat(v._gsap.y)+y.offset)+"px",v.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(v._gsap.y)+", 0, 1)",y.offset=y.cacheID=0},x=function(){R(),s.isActive()&&s.vars.scrollY>n&&(y()>n?s.progress(1)&&y(n):s.resetTo("scrollY",n))};return v&&Ls.set(v,{y:"+=0"}),e.ignoreCheck=function(e){return Zs&&"touchmove"===e.type&&function(){if(i){requestAnimationFrame(A);var e=Ta(t.deltaY/2),n=w(y.v-e);if(v&&n!==y.v+y.offset){y.offset=n-y.v;var r=Ta((parseFloat(v&&v._gsap.y)||0)-y.offset);v.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+r+", 0, 1)",v._gsap.y=r+"px",y.cacheID=is.cache,Po()}return!0}y.offset&&I(),i=!0}()||b>1.05&&"touchstart"!==e.type||t.isGesturing||e.touches&&e.touches.length>1},e.onPress=function(){i=!1;var e=b;b=Ta((Rs.visualViewport&&Rs.visualViewport.scale||1)/T),s.pause(),e!==b&&Qo(g,b>1.01||!u&&"x"),a=E(),o=y(),R(),r=wo},e.onRelease=e.onGestureStart=function(e,t){if(y.offset&&I(),t){is.cache++;var r,i,a=_();u&&(i=(r=E())+.05*a*-e.velocityX/.227,a*=Xo(E,r,i,wa(g,ms)),s.vars.scrollX=L(i)),i=(r=y())+.05*a*-e.velocityY/.227,a*=Xo(y,r,i,wa(g,vs)),s.vars.scrollY=w(i),s.invalidate().duration(a).play(.01),(Zs&&s.vars.scrollY>=n||r>=n-1)&&Ls.to({},{onUpdate:x,duration:a})}else l.restart(!0);f&&f(e)},e.onWheel=function(){s._ts&&s.pause(),da()-S>1e3&&(r=0,S=da())},e.onChange=function(e,t,n,i,s){if(wo!==r&&R(),t&&u&&E(L(i[2]===t?a+(e.startX-e.x):E()+t-i[1])),n){y.offset&&I();var l=s[2]===n,c=l?o+e.startY-e.y:y()+n-s[1],d=w(c);l&&c!==d&&(o+=d-c),y(d)}(n||t)&&Po()},e.onEnable=function(){Qo(g,!u&&"x"),Wo.addEventListener("refresh",x),ro(Rs,"resize",x),y.smooth&&(y.target.style.scrollBehavior="auto",y.smooth=E.smooth=!1),k.enable()},e.onDisable=function(){Qo(g,!0),io(Rs,"resize",x),Wo.removeEventListener("refresh",x),k.kill()},e.lockAxis=!1!==e.lockAxis,(t=new As(e)).iOS=Zs,Zs&&!y()&&y(1),Zs&&Ls.ticker.add(ba),l=t._dc,s=Ls.to(t,{ease:"power4",paused:!0,inherit:!1,scrollX:u?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:Vo(y,y(),function(){return s.pause()})},onUpdate:Po,onComplete:l.vars.onComplete}),t};Wo.sort=function(e){if(xa(e))return fo.sort(e);var t=Rs.pageYOffset||0;return Wo.getAll().forEach(function(e){return e._sortY=e.trigger?t+e.trigger.getBoundingClientRect().top:e.start+Rs.innerHeight}),fo.sort(e||function(e,t){return-1e6*(e.vars.refreshPriority||0)+(e.vars.containerAnimation?1e6:e._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+-1e6*(t.vars.refreshPriority||0))})},Wo.observe=function(e){return new As(e)},Wo.normalizeScroll=function(e){if("undefined"===typeof e)return qs;if(!0===e&&qs)return qs.enable();if(!1===e)return qs&&qs.kill(),void(qs=e);var t=e instanceof As?e:nl(e);return qs&&qs.target===t.target&&qs.kill(),ka(t.target)&&(qs=t),t},Wo.core={_getVelocityProp:bs,_inputObserver:Jo,_scrollers:is,_proxies:ss,bridge:{ss:function(){fa||So("scrollStart"),fa=da()},ref:function(){return Bs}}},_a()&&Ls.registerPlugin(Wo);const rl=Number.isFinite||function(e){return"number"===typeof e&&isFinite(e)},il=Number.isSafeInteger||function(e){return"number"===typeof e&&Math.abs(e)<=sl},sl=Number.MAX_SAFE_INTEGER||9007199254740991;let al=function(e){return e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError",e}({}),ol=function(e){return e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",e.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",e.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",e.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",e.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",e.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",e.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_PARSING_ERROR="levelParsingError",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.FRAG_GAP="fragGap",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.ASSET_LIST_LOAD_ERROR="assetListLoadError",e.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",e.ASSET_LIST_PARSING_ERROR="assetListParsingError",e.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.ATTACH_MEDIA_ERROR="attachMediaError",e.UNKNOWN="unknown",e}({}),ll=function(e){return e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.MEDIA_ENDED="hlsMediaEnded",e.STALL_RESOLVED="hlsStallResolved",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFERED_TO_END="hlsBufferedToEnd",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached",e.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",e.ASSET_LIST_LOADING="hlsAssetListLoading",e.ASSET_LIST_LOADED="hlsAssetListLoaded",e.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",e.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",e.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",e.INTERSTITIAL_STARTED="hlsInterstitialStarted",e.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",e.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",e.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",e.INTERSTITIAL_ENDED="hlsInterstitialEnded",e.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",e.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",e.EVENT_CUE_ENTER="hlsEventCueEnter",e}({});var cl="manifest",ul="level",dl="audioTrack",hl="subtitleTrack",fl="main",gl="audio",pl="subtitle";class ml{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}sample(e,t){const n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class vl{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new ml(e),this.fast_=new ml(t),this.defaultTTFB_=r,this.ttfb_=new ml(e)}update(e,t){const{slow_:n,fast_:r,ttfb_:i}=this;n.halfLife!==e&&(this.slow_=new ml(e,n.getEstimate(),n.getTotalWeight())),r.halfLife!==t&&(this.fast_=new ml(t,r.getEstimate(),r.getTotalWeight())),i.halfLife!==e&&(this.ttfb_=new ml(e,i.getEstimate(),i.getTotalWeight()))}sample(e,t){const n=(e=Math.max(e,this.minDelayMs_))/1e3,r=8*t/n;this.fast_.sample(n,r),this.slow_.sample(n,r)}sampleTTFB(e){const t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function yl(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function El(){return El=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},El.apply(null,arguments)}function bl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Tl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bl(Object(n),!0).forEach(function(t){yl(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bl(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}class Sl{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const n="[".concat(e,"]:");this.trace=_l,this.debug=t.debug.bind(null,n),this.log=t.log.bind(null,n),this.warn=t.warn.bind(null,n),this.info=t.info.bind(null,n),this.error=t.error.bind(null,n)}}const _l=function(){},kl={trace:_l,debug:_l,log:_l,warn:_l,info:_l,error:_l};function Al(){return El({},kl)}function Ll(e,t,n){return t[e]?t[e].bind(t):function(e,t){const n=self.console[e];return n?n.bind(self.console,"".concat(t?"["+t+"] ":"","[").concat(e,"] >")):_l}(e,n)}const wl=Al();const Rl=wl;function Il(){if("undefined"===typeof self)return;return(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function xl(e,t){const n=Object.keys(e),r=Object.keys(t),i=n.length,s=r.length;return!i||!s||i===s&&!n.some(e=>-1===r.indexOf(e))}function Cl(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("undefined"!==typeof TextDecoder){const n=new TextDecoder("utf-8").decode(e);if(t){const e=n.indexOf("\0");return-1!==e?n.substring(0,e):n}return n.replace(/\0/g,"")}const n=e.length;let r,i,s,a="",o=0;for(;o<n;){if(r=e[o++],0===r&&t)return a;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(r);break;case 12:case 13:i=e[o++],a+=String.fromCharCode((31&r)<<6|63&i);break;case 14:i=e[o++],s=e[o++],a+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&s)}}return a}function Dl(e){let t="";for(let n=0;n<e.length;n++){let r=e[n].toString(16);r.length<2&&(r="0"+r),t+=r}return t}function Pl(e){return Uint8Array.from(e.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function Ol(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ml,Fl={exports:{}};var Nl=function(){return Ml||(Ml=1,e=Fl,function(){var t=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,n=/^(?=([^\/?#]*))\1([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,i=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var i=s.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=s.normalizePath(i.path),s.buildURLFromParts(i)}var a=s.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return r.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;var o=s.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=n.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var c={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(c.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var u=o.path,d=u.substring(0,u.lastIndexOf("/")+1)+a.path;c.path=s.normalizePath(d)}else c.path=o.path,a.params||(c.params=o.params,a.query||(c.query=o.query));return null===c.path&&(c.path=r.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(c)},parseURL:function(e){var n=t.exec(e);return n?{scheme:n[1]||"",netLoc:n[2]||"",path:n[3]||"",params:n[4]||"",query:n[5]||"",fragment:n[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(r,"");e.length!==(e=e.replace(i,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=s}()),Fl.exports;var e}();class Bl{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Ul="audio",Gl="video",Hl="audiovideo";class jl{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,"string"===typeof e&&(e={url:e}),this.base=e,function(e,t){const n=Yl(e,t);n&&(n.enumerable=!0,Object.defineProperty(e,t,n))}(this,"stats")}setByteRange(e,t){const n=e.split("@",2);let r;r=1===n.length?(null==t?void 0:t.byteRangeEndOffset)||0:parseInt(n[1]),this._byteRange=[r,parseInt(n[0])+r]}get baseurl(){return this.base.url}get byteRange(){return null===this._byteRange?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return null===this._streams&&(this._streams={[Ul]:null,[Gl]:null,[Hl]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return null!==this._stats}get hasStreams(){return null!==this._streams}get stats(){return null===this._stats&&(this._stats=new Bl),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Nl.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[Ul]=null,e[Gl]=null,e[Hl]=null}}function zl(e){return"initSegment"!==e.sn}class Vl extends jl{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],t=this.byteRange[1];if(rl(e)&&rl(t))return t-e}return null}get bitrate(){return this.byteLength?8*this.byteLength/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){var e;const{levelkeys:t}=this;if(!t||t.NONE)return null;if(t.identity)this._decryptdata||(this._decryptdata=t.identity.getDecryptData(this.sn));else if(null==(e=this._decryptdata)||!e.keyId){const e=Object.keys(t);if(1===e.length){const n=this._decryptdata=t[e[0]]||null;n&&(this._decryptdata=n.getDecryptData(this.sn,t))}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(null===this.programDateTime)return null;const e=rl(this.duration)?this.duration:0;return this.programDateTime+1e3*e}get encrypted(){var e;if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){var t;const e=Object.keys(this.levelkeys),n=e.length;if(n>1||1===n&&null!=(t=this.levelkeys[e[0]])&&t.encrypted)return!0}return!1}get programDateTime(){return null===this._programDateTime&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){rl(e)?this._programDateTime=e:this._programDateTime=this.rawProgramDateTime=null}get ref(){return zl(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){const t=this.levelkeys;if(t){var n;const r=t[e];!r||null!=(n=this._decryptdata)&&n.keyId||(this._decryptdata=r.getDecryptData(this.sn,t))}}abortRequests(){var e,t;null==(e=this.loader)||e.abort(),null==(t=this.keyLoader)||t.abort()}setElementaryStreamInfo(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const{elementaryStreams:a}=this,o=a[e];o?(o.startPTS=Math.min(o.startPTS,t),o.endPTS=Math.max(o.endPTS,n),o.startDTS=Math.min(o.startDTS,r),o.endDTS=Math.max(o.endDTS,i)):a[e]={startPTS:t,endPTS:n,startDTS:r,endDTS:i,partial:s}}}class Kl extends jl{constructor(e,t,n,r,i){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=r;const s=e.enumeratedString("BYTERANGE");s&&this.setByteRange(s,i),i&&(this.fragOffset=i.fragOffset+i.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function Yl(e,t){const n=Object.getPrototypeOf(e);if(n){const e=Object.getOwnPropertyDescriptor(n,t);return e||Yl(n,t)}}const Wl=Math.pow(2,32)-1,ql=[].push,Xl={video:1,audio:2,id3:3,text:4};function Ql(e){return String.fromCharCode.apply(null,e)}function $l(e,t){const n=e[t]<<8|e[t+1];return n<0?65536+n:n}function Zl(e,t){const n=ec(e,t);return n<0?4294967296+n:n}function Jl(e,t){let n=Zl(e,t);return n*=Math.pow(2,32),n+=Zl(e,t+4),n}function ec(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function tc(e,t){const n=[];if(!t.length)return n;const r=e.byteLength;for(let i=0;i<r;){const s=Zl(e,i),a=s>1?i+s:r;if(Ql(e.subarray(i+4,i+8))===t[0])if(1===t.length)n.push(e.subarray(i+8,a));else{const r=tc(e.subarray(i+8,a),t.slice(1));r.length&&ql.apply(n,r)}i=a}return n}function nc(e){const t=[],n=e[0];let r=8;const i=Zl(e,r);r+=4;let s=0,a=0;0===n?(s=Zl(e,r),a=Zl(e,r+4),r+=8):(s=Jl(e,r),a=Jl(e,r+8),r+=16),r+=2;let o=e.length+a;const l=$l(e,r);r+=2;for(let c=0;c<l;c++){let n=r;const s=Zl(e,n);n+=4;const a=2147483647&s;if(1===(2147483648&s)>>>31)return Rl.warn("SIDX has hierarchical references (not supported)"),null;const l=Zl(e,n);n+=4,t.push({referenceSize:a,subsegmentDuration:l,info:{duration:l/i,start:o,end:o+a-1}}),o+=a,n+=4,r=n}return{earliestPresentationTime:s,timescale:i,version:n,referencesCount:l,references:t}}function rc(e){const t=[],n=tc(e,["moov","trak"]);for(let r=0;r<n.length;r++){const e=n[r],i=tc(e,["tkhd"])[0];if(i){let n=i[0];const r=Zl(i,0===n?12:20),s=tc(e,["mdia","mdhd"])[0];if(s){n=s[0];const i=Zl(s,0===n?12:20),a=tc(e,["mdia","hdlr"])[0];if(a){const n=Ql(a.subarray(8,12)),s={soun:Ul,vide:Gl}[n],o=ic(tc(e,["mdia","minf","stbl","stsd"])[0]);s?(t[r]={timescale:i,type:s,stsd:o},t[s]=Tl({timescale:i,id:r},o)):t[r]={timescale:i,type:n,stsd:o}}}}}return tc(e,["moov","mvex","trex"]).forEach(e=>{const n=Zl(e,4),r=t[n];r&&(r.default={duration:Zl(e,12),flags:Zl(e,20)})}),t}function ic(e){const t=e.subarray(8),n=t.subarray(86),r=Ql(t.subarray(4,8));let i,s=r;const a="enca"===r||"encv"===r;if(a){const e=tc(t,[r])[0];tc(e.subarray("enca"===r?28:78),["sinf"]).forEach(e=>{const t=tc(e,["schm"])[0];if(t){const n=Ql(t.subarray(4,8));if("cbcs"===n||"cenc"===n){const t=tc(e,["frma"])[0];t&&(s=Ql(t))}}})}const o=s;switch(s){case"avc1":case"avc2":case"avc3":case"avc4":{const e=tc(n,["avcC"])[0];e&&e.length>3&&(s+="."+oc(e[1])+oc(e[2])+oc(e[3]),i=sc("avc1"===o?"dva1":"dvav",n));break}case"mp4a":{const e=tc(t,[r])[0],n=tc(e.subarray(28),["esds"])[0];if(n&&n.length>7){let e=4;if(3!==n[e++])break;e=ac(n,e),e+=2;const t=n[e++];if(128&t&&(e+=2),64&t&&(e+=n[e++]),4!==n[e++])break;e=ac(n,e);const r=n[e++];if(64!==r)break;if(s+="."+oc(r),e+=12,5!==n[e++])break;e=ac(n,e);const i=n[e++];let a=(248&i)>>3;31===a&&(a+=1+((7&i)<<3)+((224&n[e])>>5)),s+="."+a}break}case"hvc1":case"hev1":{const e=tc(n,["hvcC"])[0];if(e&&e.length>12){const t=e[1],n=["","A","B","C"][t>>6],r=31&t,i=Zl(e,2),a=(32&t)>>5?"H":"L",o=e[12],l=e.subarray(6,12);s+="."+n+r,s+="."+function(e){let t=0;for(let n=0;n<32;n++)t|=(e>>n&1)<<31-n;return t>>>0}(i).toString(16).toUpperCase(),s+="."+a+o;let c="";for(let e=l.length;e--;){const t=l[e];if(t||c){c="."+t.toString(16).toUpperCase()+c}}s+=c}i=sc("hev1"==o?"dvhe":"dvh1",n);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":s=sc(s,n)||s;break;case"vp09":{const e=tc(n,["vpcC"])[0];if(e&&e.length>6){const t=e[4],n=e[5],r=e[6]>>4&15;s+="."+lc(t)+"."+lc(n)+"."+lc(r)}break}case"av01":{const e=tc(n,["av1C"])[0];if(e&&e.length>2){const t=e[1]>>>5,r=31&e[1],a=e[2]>>>7?"H":"M",o=(64&e[2])>>6,l=(32&e[2])>>5,c=2===t&&o?l?12:10:o?10:8,u=(16&e[2])>>4,d=(8&e[2])>>3,h=(4&e[2])>>2,f=3&e[2],g=1,p=1,m=1,v=0;s+="."+t+"."+lc(r)+a+"."+lc(c)+"."+u+"."+d+h+f+"."+lc(g)+"."+lc(p)+"."+lc(m)+"."+v,i=sc("dav1",n)}break}}return{codec:s,encrypted:a,supplemental:i}}function sc(e,t){const n=tc(t,["dvvC"]),r=n.length?n[0]:tc(t,["dvcC"])[0];if(r){const t=r[2]>>1&127,n=r[2]<<5&32|r[3]>>3&31;return e+"."+lc(t)+"."+lc(n)}}function ac(e,t){const n=t+5;for(;128&e[t++]&&t<n;);return t}function oc(e){return("0"+e.toString(16).toUpperCase()).slice(-2)}function lc(e){return(e<10?"0":"")+e}function cc(e,t){tc(e,["moov","trak"]).forEach(e=>{const n=tc(e,["mdia","minf","stbl","stsd"])[0];if(!n)return;const r=n.subarray(8);let i=tc(r,["enca"]);const s=i.length>0;s||(i=tc(r,["encv"])),i.forEach(e=>{tc(s?e.subarray(28):e.subarray(78),["sinf"]).forEach(e=>{const n=uc(e);n&&t(n,s)})})})}function uc(e){const t=tc(e,["schm"])[0];if(t){const n=Ql(t.subarray(4,8));if("cbcs"===n||"cenc"===n){const t=tc(e,["schi","tenc"])[0];if(t)return t}}}function dc(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function hc(e,t){const n=[],r=t.samples,i=t.timescale,s=t.id;let a=!1;return tc(r,["moof"]).map(o=>{const l=o.byteOffset-8;tc(o,["traf"]).map(o=>{const c=tc(o,["tfdt"]).map(e=>{const t=e[0];let n=Zl(e,4);return 1===t&&(n*=Math.pow(2,32),n+=Zl(e,8)),n/i})[0];return void 0!==c&&(e=c),tc(o,["tfhd"]).map(c=>{const u=Zl(c,4),d=16777215&Zl(c,0);let h=0;const f=0!==(16&d);let g=0;const p=0!==(32&d);let m=8;u===s&&(0!==(1&d)&&(m+=8),0!==(2&d)&&(m+=4),0!==(8&d)&&(h=Zl(c,m),m+=4),f&&(g=Zl(c,m),m+=4),p&&(m+=4),"video"===t.type&&(a=fc(t.codec)),tc(o,["trun"]).map(s=>{const o=s[0],c=16777215&Zl(s,0),u=0!==(1&c);let d=0;const f=0!==(4&c),p=0!==(256&c);let m=0;const v=0!==(512&c);let y=0;const E=0!==(1024&c),b=0!==(2048&c);let T=0;const S=Zl(s,4);let _=8;u&&(d=Zl(s,_),_+=4),f&&(_+=4);let k=d+l;for(let l=0;l<S;l++){if(p?(m=Zl(s,_),_+=4):m=h,v?(y=Zl(s,_),_+=4):y=g,E&&(_+=4),b&&(T=0===o?Zl(s,_):ec(s,_),_+=4),t.type===Gl){let t=0;for(;t<y;){const s=Zl(r,k);if(k+=4,gc(a,r[k])){pc(r.subarray(k,k+s),a?2:1,e+T/i,n)}k+=s,t+=s+4}}e+=m/i}}))})})}),n}function fc(e){if(!e)return!1;const t=e.substring(0,4);return"hvc1"===t||"hev1"===t||"dvh1"===t||"dvhe"===t}function gc(e,t){if(e){const e=t>>1&63;return 39===e||40===e}return 6===(31&t)}function pc(e,t,n,r){const i=mc(e);let s=0;s+=t;let a=0,o=0,l=0;for(;s<i.length;){a=0;do{if(s>=i.length)break;l=i[s++],a+=l}while(255===l);o=0;do{if(s>=i.length)break;l=i[s++],o+=l}while(255===l);const e=i.length-s;let t=s;if(o<e)s+=o;else if(o>e){Rl.error("Malformed SEI payload. ".concat(o," is too small, only ").concat(e," bytes left to parse."));break}if(4===a){if(181===i[t++]){const e=$l(i,t);if(t+=2,49===e){const e=Zl(i,t);if(t+=4,1195456820===e){const e=i[t++];if(3===e){const s=i[t++],o=64&s,l=o?2+3*(31&s):0,c=new Uint8Array(l);if(o){c[0]=s;for(let e=1;e<l;e++)c[e]=i[t++]}r.push({type:e,payloadType:a,pts:n,bytes:c})}}}}}else if(5===a&&o>16){const e=[];for(let n=0;n<16;n++){const r=i[t++].toString(16);e.push(1==r.length?"0"+r:r),3!==n&&5!==n&&7!==n&&9!==n||e.push("-")}const s=o-16,l=new Uint8Array(s);for(let n=0;n<s;n++)l[n]=i[t++];r.push({payloadType:a,pts:n,uuid:e.join(""),userData:Cl(l),userDataBytes:l})}}}function mc(e){const t=e.byteLength,n=[];let r=1;for(;r<t-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return e;const i=t-n.length,s=new Uint8Array(i);let a=0;for(r=0;r<i;a++,r++)a===n[0]&&(a++,n.shift()),s[r]=e[a];return s}function vc(e,t,n){if(16!==e.byteLength)throw new RangeError("Invalid system id");let r,i,s;r=0,i=new Uint8Array,s=new Uint8Array;const a=new Uint8Array(4);return n.byteLength>0&&new DataView(a.buffer).setUint32(0,n.byteLength,!1),function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.length;let s=8,a=i;for(;a--;)s+=n[a].byteLength;const o=new Uint8Array(s);for(o[0]=s>>24&255,o[1]=s>>16&255,o[2]=s>>8&255,o[3]=255&s,o.set(e,4),a=0,s=8;a<i;a++)o.set(n[a],s),s+=n[a].byteLength;return o}([112,115,115,104],new Uint8Array([0,0,0,0]),e,s,i,a,n)}function yc(e){const t=e.getUint32(0),n=e.byteOffset,r=e.byteLength;if(r<t)return{offset:n,size:r};if(1886614376!==e.getUint32(4))return{offset:n,size:t};const i=e.getUint32(8)>>>24;if(0!==i&&1!==i)return{offset:n,size:t};const s=e.buffer,a=Dl(new Uint8Array(s,n+12,16));let o=null,l=null,c=0;if(0===i)c=28;else{const i=e.getUint32(28);if(!i||r<32+16*i)return{offset:n,size:t};o=[];for(let e=0;e<i;e++)o.push(new Uint8Array(s,n+32+16*e,16));c=32+16*i}if(!c)return{offset:n,size:t};const u=e.getUint32(c);return t-32<u?{offset:n,size:t}:(l=new Uint8Array(s,n+c+4,u),{version:i,systemId:a,kids:o,data:l,offset:n,size:t})}const Ec=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),bc={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function Tc(e,t){const n=bc[t];return!!n&&!!n[e.slice(0,4)]}function Sc(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return!e.split(",").some(e=>!_c(e,t,n))}function _c(e,t){var n;const r=Il(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]);return null!=(n=null==r?void 0:r.isTypeSupported(kc(e,t)))&&n}function kc(e,t){return"".concat(t,"/mp4;codecs=").concat(e)}function Ac(e){if(e){const t=e.substring(0,4);return bc.video[t]}return 2}function Lc(e){const t=Ec();return e.split(",").reduce((e,n)=>{const r=t&&fc(n)?9:bc.video[n];return r?(2*r+e)/(e?3:2):(bc.audio[n]+e)/(e?2:1)},0)}const wc={};const Rc=/flac|opus|mp4a\.40\.34/i;function Ic(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.replace(Rc,e=>function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(wc[e])return wc[e];const n={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[e];for(let i=0;i<n.length;i++){var r;if(_c(n[i],"audio",t))return wc[e]=n[i],n[i];if("mp3"===n[i]&&null!=(r=Il(t))&&r.isTypeSupported("audio/mpeg"))return""}return e}(e.toLowerCase(),t))}function xc(e,t){if(e&&(e.length>4||-1!==["ac-3","ec-3","alac","fLaC","Opus"].indexOf(e))&&(Cc(e,"audio")||Cc(e,"video")))return e;if(t){const n=t.split(",");if(n.length>1){if(e)for(let t=n.length;t--;)if(n[t].substring(0,4)===e.substring(0,4))return n[t];return n[0]}}return t||e}function Cc(e,t){return Tc(e,t)&&_c(e,t)}function Dc(e){if(e.startsWith("av01.")){const t=e.split("."),n=["0","111","01","01","01","0"];for(let e=t.length;e>4&&e<10;e++)t[e]=n[e-4];return t.join(".")}return e}function Pc(e){const t=Il(e)||{isTypeSupported:()=>!1};return{mpeg:t.isTypeSupported("audio/mpeg"),mp3:t.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:t.isTypeSupported('audio/mp4; codecs="ac-3"')}}function Oc(e){return e.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const Mc={supported:!1,smooth:!1,powerEfficient:!1},Fc={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]};function Nc(e,t){return{supported:!1,configurations:t,decodingInfoResults:[Mc],error:e}}function Bc(e,t,n,r,i,s){const a=e.videoCodec,o=e.audioCodec?e.audioGroups:null,l=null==s?void 0:s.audioCodec,c=null==s?void 0:s.channels,u=c?parseInt(c):l?1/0:2;let d=null;if(null!=o&&o.length)try{d=1===o.length&&o[0]?t.groups[o[0]].channels:o.reduce((e,n)=>{if(n){const r=t.groups[n];if(!r)throw new Error("Audio track group ".concat(n," not found"));Object.keys(r.channels).forEach(t=>{e[t]=(e[t]||0)+r.channels[t]})}return e},{2:0})}catch(h){return!0}return void 0!==a&&(a.split(",").some(e=>fc(e))||e.width>1920&&e.height>1088||e.height>1920&&e.width>1088||e.frameRate>Math.max(r,30)||"SDR"!==e.videoRange&&e.videoRange!==n||e.bitrate>Math.max(i,8e6))||!!d&&rl(u)&&Object.keys(d).some(e=>parseInt(e)>u)}function Uc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=e.videoCodec;if(!i&&!e.audioCodec||!n)return Promise.resolve(Fc);const s=[],a=function(e){var t;const n=null==(t=e.videoCodec)?void 0:t.split(","),r=Hc(e),i=e.width||640,s=e.height||480,a=e.frameRate||30,o=e.videoRange.toLowerCase();return n?n.map(e=>{const t={contentType:kc(Dc(e),"video"),width:i,height:s,bitrate:r,framerate:a};return"sdr"!==o&&(t.transferFunction=o),t}):[]}(e),o=a.length,l=function(e,t,n){var r;const i=null==(r=e.audioCodec)?void 0:r.split(","),s=Hc(e);if(i&&e.audioGroups)return e.audioGroups.reduce((e,r)=>{var a;const o=r?null==(a=t.groups[r])?void 0:a.tracks:null;return o?o.reduce((e,t)=>{if(t.groupId===r){const r=parseFloat(t.channels||"");i.forEach(t=>{const i={contentType:kc(t,"audio"),bitrate:n?Gc(t,s):s};r&&(i.channels=""+r),e.push(i)})}return e},e):e},[]);return[]}(e,t,o>0),c=l.length;for(let u=o||1*c||1;u--;){const e={type:"media-source"};if(o&&(e.video=a[u%o]),c){e.audio=l[u%c];const t=e.audio.bitrate;e.video&&t&&(e.video.bitrate-=t)}s.push(e)}if(i){const e=navigator.userAgent;if(i.split(",").some(e=>fc(e))&&Ec())return Promise.resolve(Nc(new Error("Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (".concat(e,")")),s))}return Promise.all(s.map(e=>{const t=function(e){let t="";const{audio:n,video:r}=e;if(r){const e=Oc(r.contentType);t+="".concat(e,"_r").concat(r.height,"x").concat(r.width,"f").concat(Math.ceil(r.framerate)).concat(r.transferFunction||"sd","_").concat(Math.ceil(r.bitrate/1e5))}if(n){const e=Oc(n.contentType);t+="".concat(r?"_":"").concat(e,"_c").concat(n.channels)}return t}(e);return r[t]||(r[t]=n.decodingInfo(e))})).then(e=>({supported:!e.some(e=>!e.supported),configurations:s,decodingInfoResults:e})).catch(e=>({supported:!1,configurations:s,decodingInfoResults:[],error:e}))}function Gc(e,t){if(t<=1)return 1;let n=128e3;return"ec-3"===e?n=768e3:"ac-3"===e&&(n=64e4),Math.min(t/2,n)}function Hc(e){return 1e3*Math.ceil(Math.max(.9*e.bitrate,e.averageBitrate)/1e3)||1}const jc=["NONE","TYPE-0","TYPE-1",null];const zc=["SDR","PQ","HLG"];var Vc="",Kc="YES",Yc="v2";function Wc(e){const{canSkipUntil:t,canSkipDateRanges:n,age:r}=e;return t&&r<t/2?n?Yc:Kc:Vc}class qc{constructor(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}addDirectives(e){const t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Xc{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(e=>!!e).map(e=>e.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const n=null==(t=e.supplemental)?void 0:t.videoCodec;n&&n!==e.videoCodec&&(this.codecSet+=",".concat(n.substring(0,4)))}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return Qc(this._audioGroups,e)}hasSubtitleGroup(e){return Qc(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t)if("audio"===e){let e=this._audioGroups;e||(e=this._audioGroups=[]),-1===e.indexOf(t)&&e.push(t)}else if("text"===e){let e=this._subtitleGroups;e||(e=this._subtitleGroups=[]),-1===e.indexOf(t)&&e.push(t)}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return null==(e=this.audioGroups)?void 0:e[0]}get textGroupId(){var e;return null==(e=this.subtitleGroups)?void 0:e[0]}addFallback(){}}function Qc(e,t){return!(!t||!e)&&-1!==e.indexOf(t)}function $c(e,t){let n=!1,r=[];if(e&&(n="SDR"!==e,r=[e]),t){r=t.allowedVideoRanges||zc.slice(0);const e="SDR"!==r.join("")&&!t.videoCodec;n=void 0!==t.preferHDR?t.preferHDR:e&&function(){if("function"===typeof matchMedia){const e=matchMedia("(dynamic-range: high)"),t=matchMedia("bad query");if(e.media!==t.media)return!0===e.matches}return!1}(),n||(r=["SDR"])}return{preferHDR:n,allowedVideoRanges:r}}const Zc=(e,t)=>JSON.stringify(e,(e=>{const t=new WeakSet;return(n,r)=>{if(e&&(r=e(n,r)),"object"===typeof r&&null!==r){if(t.has(r))return;t.add(r)}return r}})(t));function Jc(e,t){Rl.log('[abr] start candidates with "'.concat(e,'" ignored because ').concat(t))}function eu(e){return e.reduce((e,t)=>{let n=e.groups[t.groupId];n||(n=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(t);const r=t.channels||"2";return n.channels[r]=(n.channels[r]||0)+1,n.hasDefault=n.hasDefault||t.default,n.hasAutoSelect=n.hasAutoSelect||t.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function tu(e){if(!e)return e;const{lang:t,assocLang:n,characteristics:r,channels:i,audioCodec:s}=e;return{lang:t,assocLang:n,characteristics:r,channels:i,audioCodec:s}}function nu(e,t,n){if("attrs"in e){const n=t.indexOf(e);if(-1!==n)return n}for(let r=0;r<t.length;r++){if(ru(e,t[r],n))return r}return-1}function ru(e,t,n){const{groupId:r,name:i,lang:s,assocLang:a,default:o}=e,l=e.forced;return(void 0===r||t.groupId===r)&&(void 0===i||t.name===i)&&(void 0===s||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"--";if(e.length===t.length)return e===t;return e.startsWith(t)||t.startsWith(e)}(s,t.lang))&&(void 0===s||t.assocLang===a)&&(void 0===o||t.default===o)&&(void 0===l||t.forced===l)&&(!("characteristics"in e)||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split(","),r=t.split(",");return n.length===r.length&&!n.some(e=>-1===r.indexOf(e))}(e.characteristics||"",t.characteristics))&&(void 0===n||n(e,t))}function iu(e,t){const{audioCodec:n,channels:r}=e;return(void 0===n||(t.audioCodec||"").substring(0,4)===n.substring(0,4))&&(void 0===r||r===(t.channels||"2"))}function su(e,t,n){for(let r=t;r>-1;r--)if(n(e[r]))return r;for(let r=t+1;r<e.length;r++)if(n(e[r]))return r;return-1}function au(e,t){var n;return!!e&&e!==(null==(n=t.loadLevelObj)?void 0:n.uri)}const ou=function(e,t){let n=0,r=e.length-1,i=null,s=null;for(;n<=r;){i=(n+r)/2|0,s=e[i];const a=t(s);if(a>0)n=i+1;else{if(!(a<0))return s;r=i-1}}return null};function lu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.005,s=null;if(e){s=t[1+e.sn-t[0].sn]||null;const r=e.endDTS-n;r>0&&r<15e-7&&(n+=15e-7),s&&e.level!==s.level&&s.end<=e.end&&(s=t[2+e.sn-t[0].sn]||null)}else 0===n&&0===t[0].start&&(s=t[0]);if(s&&((!e||e.level===s.level)&&0===cu(n,r,s)||function(e,t,n){if(t&&0===t.start&&t.level<e.level&&(t.endPTS||0)>0){const r=t.tagList.reduce((e,t)=>("INF"===t[0]&&(e+=parseFloat(t[1])),e),n);return e.start<=r}return!1}(s,e,Math.min(i,r))))return s;const a=ou(t,cu.bind(null,n,r));return!a||a===e&&s?s:a}function cu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(n.start<=e&&n.start+n.duration>e)return 0;const r=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=e?1:n.start-r>e&&n.start?-1:0}function uu(e,t,n){const r=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-r>e}function du(e,t,n){if(e&&e.startCC<=t&&e.endCC>=t){let r=e.fragments;const{fragmentHint:i}=e;let s;return i&&(r=r.concat(i)),ou(r,e=>e.cc<t?1:e.cc>t?-1:(s=e,e.end<=n?1:e.start>n?-1:0)),s||null}return null}function hu(e){switch(e.details){case ol.FRAG_LOAD_TIMEOUT:case ol.KEY_LOAD_TIMEOUT:case ol.LEVEL_LOAD_TIMEOUT:case ol.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function fu(e){return e.details.startsWith("key")}function gu(e){return fu(e)&&!!e.frag&&!e.frag.decryptdata}function pu(e,t){const n=hu(t);return e.default["".concat(n?"timeout":"error","Retry")]}function mu(e,t){const n="linear"===e.backoff?1:Math.pow(2,t);return Math.min(n*e.retryDelayMs,e.maxRetryDelayMs)}function vu(e){return Tl(Tl({},e),{errorRetry:null,timeoutRetry:null})}function yu(e,t,n,r){if(!e)return!1;const i=null==r?void 0:r.code,s=t<e.maxNumRetry&&(function(e){return Eu(e)||!!e&&(e<400||e>499)}(i)||!!n);return e.shouldRetry?e.shouldRetry(e,t,n,r,s):s}function Eu(e){return 0===e&&!1===navigator.onLine}var bu=0,Tu=2,Su=3,_u=5,ku=0,Au=1,Lu=2,wu=4;function Ru(e){const t={action:bu,flags:ku};return e&&(t.resolved=!0),t}var Iu="NOT_LOADED",xu="APPENDING",Cu="PARTIAL",Du="OK";class Pu{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ll.BUFFER_APPENDED,this.onBufferAppended,this),e.on(ll.FRAG_BUFFERED,this.onFragBuffered,this),e.on(ll.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ll.BUFFER_APPENDED,this.onBufferAppended,this),e.off(ll.FRAG_BUFFERED,this.onFragBuffered,this),e.off(ll.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const n=this.activePartLists[t];if(n)for(let r=n.length;r--;){const t=n[r];if(!t)break;if(t.start<=e&&e<=t.end&&t.loaded)return t}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,n){const{fragments:r}=this,i=Object.keys(r);for(let s=i.length;s--;){const a=r[i[s]];if((null==a?void 0:a.body.type)===t&&(!n||a.buffered)){const t=a.body;if(t.start<=e&&e<=t.end)return t}}return null}detectEvictedFragments(e,t,n,r,i){this.timeRanges&&(this.timeRanges[e]=t);const s=(null==r?void 0:r.fragment.sn)||-1;Object.keys(this.fragments).forEach(r=>{const a=this.fragments[r];if(!a)return;if(s>=a.body.sn)return;if(!a.buffered&&(!a.loaded||i))return void(a.body.type===n&&this.removeFragment(a.body));const o=a.range[e];o&&(0!==o.time.length?o.time.some(e=>{const n=!this.isTimeBuffered(e.startPTS,e.endPTS,t);return n&&this.removeFragment(a.body),n}):this.removeFragment(a.body))})}detectPartialFragments(e){const t=this.timeRanges;if(!t||"initSegment"===e.frag.sn)return;const n=e.frag,r=Mu(n),i=this.fragments[r];if(!i||i.buffered&&n.gap)return;const s=!n.relurl;if(Object.keys(t).forEach(r=>{const a=n.elementaryStreams[r];if(!a)return;const o=t[r],l=s||!0===a.partial;i.range[r]=this.getBufferedTimes(n,e.part,l,o)}),i.loaded=null,Object.keys(i.range).length){i.buffered=!0;(i.body.endList=n.endList||i.body.endList)&&(this.endListFragments[i.body.type]=i),Ou(i)||this.removeParts(n.sn-1,n.type)}else this.removeFragment(i.body)}removeParts(e,t){const n=this.activePartLists[t];n&&(this.activePartLists[t]=Fu(n,t=>t.fragment.sn>=e))}fragBuffered(e,t){const n=Mu(e);let r=this.fragments[n];!r&&t&&(r=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),r&&(r.loaded=null,r.buffered=!0)}getBufferedTimes(e,t,n,r){const i={time:[],partial:n},s=e.start,a=e.end,o=e.minEndPTS||a,l=e.maxStartPTS||s;for(let c=0;c<r.length;c++){const e=r.start(c)-this.bufferPadding,t=r.end(c)+this.bufferPadding;if(l>=e&&o<=t){i.time.push({startPTS:Math.max(s,r.start(c)),endPTS:Math.min(a,r.end(c))});break}if(s<t&&a>e){const e=Math.max(s,r.start(c)),t=Math.min(a,r.end(c));t>e&&(i.partial=!0,i.time.push({startPTS:e,endPTS:t}))}else if(a<=e)break}return i}getPartialFragment(e){let t,n,r,i=null,s=0;const{bufferPadding:a,fragments:o}=this;return Object.keys(o).forEach(l=>{const c=o[l];c&&Ou(c)&&(n=c.body.start-a,r=c.body.end+a,e>=n&&e<=r&&(t=Math.min(e-n,r-e),s<=t&&(i=c.body,s=t)))}),i}isEndListAppended(e){const t=this.endListFragments[e];return void 0!==t&&(t.buffered||Ou(t))}getState(e){const t=Mu(e),n=this.fragments[t];return n?n.buffered?Ou(n)?Cu:Du:xu:Iu}isTimeBuffered(e,t,n){let r,i;for(let s=0;s<n.length;s++){if(r=n.start(s)-this.bufferPadding,i=n.end(s)+this.bufferPadding,e>=r&&t<=i)return!0;if(t<=r)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if("initSegment"===t.frag.sn||t.frag.bitrateTest)return;const n=t.frag,r=t.part?null:t,i=Mu(n);this.fragments[i]={body:n,appendedPTS:null,loaded:r,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:n,part:r,timeRanges:i,type:s}=t;if("initSegment"===n.sn)return;const a=n.type;if(r){let e=this.activePartLists[a];e||(this.activePartLists[a]=e=[]),e.push(r)}this.timeRanges=i;const o=i[s];this.detectEvictedFragments(s,o,a,r)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=Mu(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,n=Object.keys(t);if(!e)return n.length>0;for(let r=n.length;r--;){const i=t[n[r]];if((null==i?void 0:i.body.type)===e)return!0}return!1}hasParts(e){var t;return!(null==(t=this.activePartLists[e])||!t.length)}removeFragmentsInRange(e,t,n,r,i){r&&!this.hasGaps||Object.keys(this.fragments).forEach(s=>{const a=this.fragments[s];if(!a)return;const o=a.body;o.type!==n||r&&!o.gap||o.start<t&&o.end>e&&(a.buffered||i)&&this.removeFragment(o)})}removeFragment(e){const t=Mu(e);e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const t=e.sn;this.activePartLists[e.type]=Fu(n,e=>e.fragment.sn!==t)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const t=null==(e=this.hls)||null==(e=e.latestLevelDetails)?void 0:e.partList;t&&t.forEach(e=>e.clearElementaryStreamInfo())}}function Ou(e){var t,n,r;return e.buffered&&!!(e.body.gap||null!=(t=e.range.video)&&t.partial||null!=(n=e.range.audio)&&n.partial||null!=(r=e.range.audiovideo)&&r.partial)}function Mu(e){return"".concat(e.type,"_").concat(e.level,"_").concat(e.sn)}function Fu(e,t){return e.filter(e=>{const n=t(e);return n||e.clearElementaryStreamInfo(),n})}var Nu=0,Bu=1;class Uu{constructor(e,t,n){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=n}decrypt(e,t){switch(this.aesMode){case Nu:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case Bu:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error("[AESCrypto] invalid aes mode ".concat(this.aesMode))}}}class Gu{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),n=new Uint32Array(4);for(let r=0;r<4;r++)n[r]=t.getUint32(4*r);return n}initTable(){const e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],s=n[2],a=n[3],o=this.invSubMix,l=o[0],c=o[1],u=o[2],d=o[3],h=new Uint32Array(256);let f=0,g=0,p=0;for(p=0;p<256;p++)h[p]=p<128?p<<1:p<<1^283;for(p=0;p<256;p++){let n=g^g<<1^g<<2^g<<3^g<<4;n=n>>>8^255&n^99,e[f]=n,t[n]=f;const o=h[f],p=h[o],m=h[p];let v=257*h[n]^16843008*n;r[f]=v<<24|v>>>8,i[f]=v<<16|v>>>16,s[f]=v<<8|v>>>24,a[f]=v,v=16843009*m^65537*p^257*o^16843008*f,l[n]=v<<24|v>>>8,c[n]=v<<16|v>>>16,u[n]=v<<8|v>>>24,d[n]=v,f?(f=o^h[h[h[m^o]]],g^=h[h[g]]):f=g=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let n=!0,r=0;for(;r<t.length&&n;)n=t[r]===this.key[r],r++;if(n)return;this.key=t;const i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);const s=this.ksRows=4*(i+6+1);let a,o;const l=this.keySchedule=new Uint32Array(s),c=this.invKeySchedule=new Uint32Array(s),u=this.sBox,d=this.rcon,h=this.invSubMix,f=h[0],g=h[1],p=h[2],m=h[3];let v,y;for(a=0;a<s;a++)a<i?v=l[a]=t[a]:(y=v,a%i===0?(y=y<<8|y>>>24,y=u[y>>>24]<<24|u[y>>>16&255]<<16|u[y>>>8&255]<<8|u[255&y],y^=d[a/i|0]<<24):i>6&&a%i===4&&(y=u[y>>>24]<<24|u[y>>>16&255]<<16|u[y>>>8&255]<<8|u[255&y]),l[a]=v=(l[a-i]^y)>>>0);for(o=0;o<s;o++)a=s-o,y=3&o?l[a]:l[a-4],c[o]=o<4||a<=4?y:f[u[y>>>24]]^g[u[y>>>16&255]]^p[u[y>>>8&255]]^m[u[255&y]],c[o]=c[o]>>>0}networkToHostOrderSwap(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}decrypt(e,t,n){const r=this.keySize+6,i=this.invKeySchedule,s=this.invSBox,a=this.invSubMix,o=a[0],l=a[1],c=a[2],u=a[3],d=this.uint8ArrayToUint32Array_(n);let h=d[0],f=d[1],g=d[2],p=d[3];const m=new Int32Array(e),v=new Int32Array(m.length);let y,E,b,T,S,_,k,A,L,w,R,I,x,C;const D=this.networkToHostOrderSwap;for(;t<m.length;){for(L=D(m[t]),w=D(m[t+1]),R=D(m[t+2]),I=D(m[t+3]),S=L^i[0],_=I^i[1],k=R^i[2],A=w^i[3],x=4,C=1;C<r;C++)y=o[S>>>24]^l[_>>16&255]^c[k>>8&255]^u[255&A]^i[x],E=o[_>>>24]^l[k>>16&255]^c[A>>8&255]^u[255&S]^i[x+1],b=o[k>>>24]^l[A>>16&255]^c[S>>8&255]^u[255&_]^i[x+2],T=o[A>>>24]^l[S>>16&255]^c[_>>8&255]^u[255&k]^i[x+3],S=y,_=E,k=b,A=T,x+=4;y=s[S>>>24]<<24^s[_>>16&255]<<16^s[k>>8&255]<<8^s[255&A]^i[x],E=s[_>>>24]<<24^s[k>>16&255]<<16^s[A>>8&255]<<8^s[255&S]^i[x+1],b=s[k>>>24]<<24^s[A>>16&255]<<16^s[S>>8&255]<<8^s[255&_]^i[x+2],T=s[A>>>24]<<24^s[S>>16&255]<<16^s[_>>8&255]<<8^s[255&k]^i[x+3],v[t]=D(y^h),v[t+1]=D(T^f),v[t+2]=D(b^g),v[t+3]=D(E^p),h=L,f=w,g=R,p=I,t+=4}return v.buffer}}class Hu{constructor(e,t,n){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=n}expandKey(){const e=function(e){switch(e){case Nu:return"AES-CBC";case Bu:return"AES-CTR";default:throw new Error("[FastAESKey] invalid aes mode ".concat(e))}}(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}class ju{constructor(e){let{removePKCS7Padding:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const e=self.crypto;e&&(this.subtle=e.subtle||e.webkitSubtle)}catch(n){}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?function(e){const t=e.byteLength,n=t&&new DataView(e.buffer).getUint8(t-1);return n?e.slice(0,t-n):e}(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,n,r){return this.useSoftware?new Promise((i,s)=>{const a=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(a,t,n,r);const o=this.flush();o?i(o.buffer):s(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,n,r)}softwareDecrypt(e,t,n,r){const{currentIV:i,currentResult:s,remainderData:a}=this;if(r!==Nu||16!==t.byteLength)return Rl.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),a&&(e=dc(a,e),this.remainderData=null);const o=this.getValidChunk(e);if(!o.length)return null;i&&(n=i);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new Gu),l.expandKey(t);const c=s;return this.currentResult=l.decrypt(o.buffer,0,n),this.currentIV=o.slice(-16).buffer,c||null}webCryptoDecrypt(e,t,n,r){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,n,r));this.key=t,this.fastAesKey=new Hu(this.subtle,t,r)}return this.fastAesKey.expandKey().then(t=>{if(!this.subtle)return Promise.reject(new Error("web crypto not initialized"));this.logOnce("WebCrypto AES decrypt");return new Uu(this.subtle,new Uint8Array(n),r).decrypt(e.buffer,t)}).catch(i=>(Rl.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, ".concat(i.name,": ").concat(i.message)),this.onWebCryptoError(e,t,n,r)))}onWebCryptoError(e,t,n,r){const i=this.enableSoftwareAES;if(i){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n,r);const i=this.flush();if(i)return i.buffer}throw new Error("WebCrypto"+(i?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const n=e.length-e.length%16;return n!==e.length&&(t=e.slice(0,n),this.remainderData=e.slice(n)),t}logOnce(e){this.logEnabled&&(Rl.log("[decrypter]: ".concat(e)),this.logEnabled=!1)}}const zu=Math.pow(2,17);class Vu{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const n=e.url;if(!n)return Promise.reject(new Wu({type:al.NETWORK_ERROR,details:ol.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a ".concat(n?"part list":"url")),networkDetails:null}));this.abort();const r=this.config,i=r.fLoader,s=r.loader;return new Promise((a,o)=>{if(this.loader&&this.loader.destroy(),e.gap){if(e.tagList.some(e=>"GAP"===e[0]))return void o(Yu(e));e.gap=!1}const l=this.loader=i?new i(r):new s(r),c=Ku(e);e.loader=l;const u=vu(r.fragLoadPolicy.default),d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===e.sn?1/0:zu};e.stats=l.stats;const h={onSuccess:(t,n,r,i)=>{this.resetLoader(e,l);let s=t.data;r.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(s.slice(0,16)),s=s.slice(16)),a({frag:e,part:null,payload:s,networkDetails:i})},onError:(t,r,i,s)=>{this.resetLoader(e,l),o(new Wu({type:al.NETWORK_ERROR,details:ol.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Tl({url:n,data:void 0},t),error:new Error("HTTP Error ".concat(t.code," ").concat(t.text)),networkDetails:i,stats:s}))},onAbort:(t,n,r)=>{this.resetLoader(e,l),o(new Wu({type:al.NETWORK_ERROR,details:ol.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:r,stats:t}))},onTimeout:(t,n,r)=>{this.resetLoader(e,l),o(new Wu({type:al.NETWORK_ERROR,details:ol.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error("Timeout after ".concat(d.timeout,"ms")),networkDetails:r,stats:t}))}};t&&(h.onProgress=(n,r,i,s)=>t({frag:e,part:null,payload:i,networkDetails:s})),l.load(c,d,h)})}loadPart(e,t,n){this.abort();const r=this.config,i=r.fLoader,s=r.loader;return new Promise((a,o)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap)return void o(Yu(e,t));const l=this.loader=i?new i(r):new s(r),c=Ku(e,t);e.loader=l;const u=vu(r.fragLoadPolicy.default),d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:zu};t.stats=l.stats,l.load(c,d,{onSuccess:(r,i,s,o)=>{this.resetLoader(e,l),this.updateStatsFromPart(e,t);const c={frag:e,part:t,payload:r.data,networkDetails:o};n(c),a(c)},onError:(n,r,i,s)=>{this.resetLoader(e,l),o(new Wu({type:al.NETWORK_ERROR,details:ol.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:Tl({url:c.url,data:void 0},n),error:new Error("HTTP Error ".concat(n.code," ").concat(n.text)),networkDetails:i,stats:s}))},onAbort:(n,r,i)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,l),o(new Wu({type:al.NETWORK_ERROR,details:ol.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:i,stats:n}))},onTimeout:(n,r,i)=>{this.resetLoader(e,l),o(new Wu({type:al.NETWORK_ERROR,details:ol.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error("Timeout after ".concat(d.timeout,"ms")),networkDetails:i,stats:n}))}})})}updateStatsFromPart(e,t){const n=e.stats,r=t.stats,i=r.total;if(n.loaded+=r.loaded,i){const r=Math.round(e.duration/t.duration),s=Math.min(Math.round(n.loaded/i),r),a=(r-s)*Math.round(n.loaded/s);n.total=n.loaded+a}else n.total=Math.max(n.loaded,n.total);const s=n.loading,a=r.loading;s.start?s.first+=a.first-a.start:(s.start=a.start,s.first=a.first),s.end=a.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function Ku(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=t||e,r={frag:e,part:t,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},i=n.byteRangeStartOffset,s=n.byteRangeEndOffset;if(rl(i)&&rl(s)){var a;let t=i,n=s;if("initSegment"===e.sn&&("AES-128"===(o=null==(a=e.decryptdata)?void 0:a.method)||"AES-256"===o)){const e=s-i;e%16&&(n=s+(16-e%16)),0!==i&&(r.resetIV=!0,t=i-16)}r.rangeStart=t,r.rangeEnd=n}var o;return r}function Yu(e,t){const n=new Error("GAP ".concat(e.gap?"tag":"attribute"," found")),r={type:al.MEDIA_ERROR,details:ol.FRAG_GAP,fatal:!1,frag:e,error:n,networkDetails:null};return t&&(r.part=t),(t||e).stats.aborted=!0,new Wu(r)}class Wu extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class qu extends Sl{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)}clearNextTick(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)}tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class Xu{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=n,this.size=r,this.part=i,this.partial=s}}const Qu={length:0,start:()=>0,end:()=>0};class $u{static isBuffered(e,t){if(e){const n=$u.getBuffered(e);for(let e=n.length;e--;)if(t>=n.start(e)&&t<=n.end(e))return!0}return!1}static bufferedRanges(e){if(e){const t=$u.getBuffered(e);return $u.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}static bufferInfo(e,t,n){if(e){const r=$u.bufferedRanges(e);if(r.length)return $u.bufferedInfo(r,t,n)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,n){t=Math.max(0,t),e.length>1&&e.sort((e,t)=>e.start-t.start||t.end-e.end);let r=-1,i=[];if(n)for(let c=0;c<e.length;c++){t>=e[c].start&&t<=e[c].end&&(r=c);const s=i.length;if(s){const t=i[s-1].end;e[c].start-t<n?e[c].end>t&&(i[s-1].end=e[c].end):i.push(e[c])}else i.push(e[c])}else i=e;let s,a=0,o=t,l=t;for(let c=0;c<i.length;c++){const e=i[c].start,u=i[c].end;if(-1===r&&t>=e&&t<=u&&(r=c),t+n>=e&&t<u)o=e,l=u,a=l-t;else if(t+n<e){s=e;break}}return{len:a,start:o||0,end:l||0,nextStart:s,buffered:e,bufferedIndex:r}}static getBuffered(e){try{return e.buffered||Qu}catch(t){return Rl.log("failed to get media.buffered",t),Qu}}}const Zu=/\{\$([a-zA-Z0-9-_]+)\}/g;function Ju(e){return Zu.test(e)}function ed(e,t){if(null!==e.variableList||e.hasVariableRefs){const n=e.variableList;return t.replace(Zu,t=>{const r=t.substring(2,t.length-1),i=null==n?void 0:n[r];return void 0===i?(e.playlistParsingError||(e.playlistParsingError=new Error('Missing preceding EXT-X-DEFINE tag for Variable Reference: "'.concat(r,'"'))),t):i})}return t}function td(e,t,n){let r,i,s=e.variableList;if(s||(e.variableList=s={}),"QUERYPARAM"in t){r=t.QUERYPARAM;try{const e=new self.URL(n).searchParams;if(!e.has(r))throw new Error('"'.concat(r,'" does not match any query parameter in URI: "').concat(n,'"'));i=e.get(r)}catch(a){e.playlistParsingError||(e.playlistParsingError=new Error("EXT-X-DEFINE QUERYPARAM: ".concat(a.message)))}}else r=t.NAME,i=t.VALUE;r in s?e.playlistParsingError||(e.playlistParsingError=new Error('EXT-X-DEFINE duplicate Variable Name declarations: "'.concat(r,'"'))):s[r]=i||""}function nd(e,t,n){const r=t.IMPORT;if(n&&r in n){let t=e.variableList;t||(e.variableList=t={}),t[r]=n[r]}else e.playlistParsingError||(e.playlistParsingError=new Error('EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "'.concat(r,'"')))}const rd=/^(\d+)x(\d+)$/,id=/(.+?)=(".*?"|.*?)(?:,|$)/g;class sd{constructor(e,t){"string"===typeof e&&(e=sd.parseAttrList(e,t)),El(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>"X-"===e.substring(0,2))}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;const n=new Uint8Array(t.length/2);for(let e=0;e<t.length/2;e++)n[e]=parseInt(t.slice(2*e,2*e+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const n=this[e];return n?parseFloat(n):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const n=this[e];return(n?n.split(/[ ,]+/):[]).reduce((e,t)=>(e[t.toLowerCase()]=!0,e),t)}bool(e){return"YES"===this[e]}decimalResolution(e){const t=rd.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let n;const r={};for(id.lastIndex=0;null!==(n=id.exec(e));){const i=n[1].trim();let s=n[2];const a=0===s.indexOf('"')&&s.lastIndexOf('"')===s.length-1;let o=!1;if(a)s=s.slice(1,-1);else switch(i){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":o=!0}if(t&&(a||o))s=ed(t,s);else if(!o&&!a)switch(i){case"CLOSED-CAPTIONS":if("NONE"===s)break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":Rl.warn("".concat(e,": attribute ").concat(i," is missing quotes"))}r[i]=s}return r}}function ad(e){return"ID"!==e&&"CLASS"!==e&&"CUE"!==e&&"START-DATE"!==e&&"DURATION"!==e&&"END-DATE"!==e&&"END-ON-NEXT"!==e}function od(e){return"SCTE35-OUT"===e||"SCTE35-IN"===e||"SCTE35-CMD"===e}class ld{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;var r;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(null==t?void 0:t.tagAnchor)||null,this.tagOrder=null!=(r=null==t?void 0:t.tagOrder)?r:n,t){const n=t.attr;for(const t in n)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==n[t]){Rl.warn('DATERANGE tag attribute: "'.concat(t,'" does not match for tags with ID: "').concat(e.ID,'"')),this._badValueForSameId=t;break}e=El(new sd({}),n,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const e=(null==t?void 0:t.endDate)||new Date(this.attr["END-DATE"]);rl(e.getTime())&&(this._endDate=e)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return void 0===e?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return null===e||null===e.programDateTime?(Rl.warn('Expected tagAnchor Fragment with PDT set for DateRange "'.concat(this.id,'": ').concat(e)),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return null!==t?this._dateAtEnd=new Date(this._startDate.getTime()+1e3*t):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(rl(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return"com.apple.hls.interstitial"===this.class}get isValid(){return!!this.id&&!this._badValueForSameId&&rl(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}class cd{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e)return this.advanced=!0,void(this.updated=!0);const t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||0===t&&n>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1}hasKey(e){return this.encryptedFragments.some(t=>{let n=t.decryptdata;return n||(t.setKeyFormat(e.keyFormat),n=t.decryptdata),!!n&&e.matches(n)})}get hasProgramDateTime(){return!!this.fragments.length&&rl(this.fragments[this.fragments.length-1].programDateTime)}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||10}get drift(){const e=this.driftEndTime-this.driftStartTime;if(e>0){return 1e3*(this.driftEnd-this.driftStart)/e}return 1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(-1!==t){for(let n=e.length;n--;)if(e[n].index>t)return e[n].index;return t}}return 0}get lastPartSn(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function ud(e,t){return e.length===t.length&&!e.some((e,n)=>e!==t[n])}function dd(e,t){return!e&&!t||!(!e||!t)&&ud(e,t)}function hd(e){return"AES-128"===e||"AES-256"===e||"AES-256-CTR"===e}function fd(e){switch(e){case"AES-128":case"AES-256":return Nu;case"AES-256-CTR":return Bu;default:throw new Error("invalid full segment method ".concat(e))}}function gd(e){return Uint8Array.from(atob(e),e=>e.charCodeAt(0))}function pd(e){return Uint8Array.from(unescape(encodeURIComponent(e)),e=>e.charCodeAt(0))}function md(e){const t=function(e,t,n){const r=e[t];e[t]=e[n],e[n]=r};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7)}function vd(e){const t=e.split(":");let n=null;if("data"===t[0]&&2===t.length){const e=t[1].split(";"),r=e[e.length-1].split(",");if(2===r.length){const t="base64"===r[0],i=r[1];t?(e.splice(-1,1),n=gd(i)):n=function(e){const t=pd(e).subarray(0,16),n=new Uint8Array(16);return n.set(t,16-t.length),n}(i)}}return n}const yd="undefined"!==typeof self?self:void 0;var Ed={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},bd="org.w3.clearkey",Td="com.apple.streamingkeydelivery",Sd="com.microsoft.playready",_d="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function kd(e){switch(e){case Td:return Ed.FAIRPLAY;case Sd:return Ed.PLAYREADY;case _d:return Ed.WIDEVINE;case bd:return Ed.CLEARKEY}}function Ad(e){switch(e){case Ed.FAIRPLAY:return Td;case Ed.PLAYREADY:return Sd;case Ed.WIDEVINE:return _d;case Ed.CLEARKEY:return bd}}function Ld(e){const{drmSystems:t,widevineLicenseUrl:n}=e,r=t?[Ed.FAIRPLAY,Ed.WIDEVINE,Ed.PLAYREADY,Ed.CLEARKEY].filter(e=>!!t[e]):[];return!r[Ed.WIDEVINE]&&n&&r.push(Ed.WIDEVINE),r}const wd=null!=yd&&null!=(Rd=yd.navigator)&&Rd.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;var Rd;function Id(e){const t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),n=String.fromCharCode.apply(null,Array.from(t)),r=n.substring(n.indexOf("<"),n.length),i=(new DOMParser).parseFromString(r,"text/xml").getElementsByTagName("KID")[0];if(i){const e=i.childNodes[0]?i.childNodes[0].nodeValue:i.getAttribute("VALUE");if(e){const t=gd(e).subarray(0,16);return md(t),t}}return null}let xd={};class Cd{static clearKeyUriToKeyIdMap(){xd={}}static setKeyIdForUri(e,t){xd[e]=t}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5?arguments[5]:void 0;this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=r,this.iv=i,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&!hd(e),null!=s&&s.startsWith("0x")&&(this.keyId=new Uint8Array(Pl(s)))}matches(e){return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&ud(e.keyFormatVersions,this.keyFormatVersions)&&dd(e.iv,this.iv)&&dd(e.keyId,this.keyId)}isSupported(){if(this.method){if(hd(this.method)||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case Td:case _d:case Sd:case bd:return-1!==["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1}getDecryptData(e,t){if(!this.encrypted||!this.uri)return null;if(hd(this.method)){let t=this.iv;t||("number"!==typeof e&&(Rl.warn('missing IV for initialization segment with method="'.concat(this.method,'" - compliance issue')),e=0),t=function(e){const t=new Uint8Array(16);for(let n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t}(e));return new Cd(this.method,this.uri,"identity",this.keyFormatVersions,t)}if(this.keyId){const e=xd[this.uri];if(e&&!ud(this.keyId,e)&&Cd.setKeyIdForUri(this.uri,this.keyId),this.pssh)return this}const n=vd(this.uri);if(n)switch(this.keyFormat){case _d:if(this.pssh=n,!this.keyId){const e=function(e){const t=[];if(e instanceof ArrayBuffer){const n=e.byteLength;let r=0;for(;r+32<n;){const n=yc(new DataView(e,r));t.push(n),r+=n.size}}return t}(n.buffer);if(e.length){var r;const t=e[0];this.keyId=null!=(r=t.kids)&&r.length?t.kids[0]:null}}this.keyId||(this.keyId=Dd(t));break;case Sd:{const e=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=vc(e,0,n),this.keyId=Id(n);break}default:{let e=n.subarray(0,16);if(16!==e.length){const t=new Uint8Array(16);t.set(e,16-e.length),e=t}this.keyId=e;break}}if(!this.keyId||16!==this.keyId.byteLength){let e;e=function(e){const t=null==e?void 0:e[_d];if(t)return t.keyId;return null}(t),e||(e=Dd(t),e||(e=xd[this.uri])),e&&(this.keyId=e,Cd.setKeyIdForUri(this.uri,e))}return this}}function Dd(e){const t=null==e?void 0:e[Sd];if(t){const e=vd(t.uri);if(e)return Id(e)}return null}const Pd=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,Od=/#EXT-X-MEDIA:(.*)/g,Md=/^#EXT(?:INF|-X-TARGETDURATION):/m,Fd=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),Nd=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Bd{static findGroup(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r.id===t)return r}}static resolve(e,t){return Nl.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return Md.test(e)}static parseMasterPlaylist(e,t){const n={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:Ju(e)},r=[];if(Pd.lastIndex=0,!e.startsWith("#EXTM3U"))return n.playlistParsingError=new Error("no EXTM3U delimiter"),n;let i;for(;null!=(i=Pd.exec(e));)if(i[1]){var s;const e=new sd(i[1],n),a=ed(n,i[2]),o={attrs:e,bitrate:e.decimalInteger("BANDWIDTH")||e.decimalInteger("AVERAGE-BANDWIDTH"),name:e.NAME,url:Bd.resolve(a,t)},l=e.decimalResolution("RESOLUTION");l&&(o.width=l.width,o.height=l.height),zd(e.CODECS,o);const c=e["SUPPLEMENTAL-CODECS"];c&&(o.supplemental={},zd(c,o.supplemental)),null!=(s=o.unknownCodecs)&&s.length||r.push(o),n.levels.push(o)}else if(i[3]){const e=i[3],r=i[4];switch(e){case"SESSION-DATA":{const e=new sd(r,n),t=e["DATA-ID"];t&&(null===n.sessionData&&(n.sessionData={}),n.sessionData[t]=e);break}case"SESSION-KEY":{const e=Hd(r,t,n);e.encrypted&&e.isSupported()?(null===n.sessionKeys&&(n.sessionKeys=[]),n.sessionKeys.push(e)):Rl.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'.concat(r,'"'));break}case"DEFINE":td(n,new sd(r,n),t);break;case"CONTENT-STEERING":{const e=new sd(r,n);n.contentSteering={uri:Bd.resolve(e["SERVER-URI"],t),pathwayId:e["PATHWAY-ID"]||"."};break}case"START":n.startTimeOffset=jd(r)}}const a=r.length>0&&r.length<n.levels.length;return n.levels=a?r:n.levels,0===n.levels.length&&(n.playlistParsingError=new Error("no levels found in manifest")),n}static parseMasterPlaylistMedia(e,t,n){let r;const i={},s=n.levels,a={AUDIO:s.map(e=>({id:e.attrs.AUDIO,audioCodec:e.audioCodec})),SUBTITLES:s.map(e=>({id:e.attrs.SUBTITLES,textCodec:e.textCodec})),"CLOSED-CAPTIONS":[]};let o=0;for(Od.lastIndex=0;null!==(r=Od.exec(e));){const e=new sd(r[1],n),s=e.TYPE;if(s){const n=a[s],r=i[s]||[];i[s]=r;const l=e.LANGUAGE,c=e["ASSOC-LANGUAGE"],u=e.CHANNELS,d=e.CHARACTERISTICS,h=e["INSTREAM-ID"],f={attrs:e,bitrate:0,id:o++,groupId:e["GROUP-ID"]||"",name:e.NAME||l||"",type:s,default:e.bool("DEFAULT"),autoselect:e.bool("AUTOSELECT"),forced:e.bool("FORCED"),lang:l,url:e.URI?Bd.resolve(e.URI,t):""};if(c&&(f.assocLang=c),u&&(f.channels=u),d&&(f.characteristics=d),h&&(f.instreamId=h),null!=n&&n.length){const e=Bd.findGroup(n,f.groupId)||n[0];Vd(f,e,"audioCodec"),Vd(f,e,"textCodec")}r.push(f)}}return i}static parseLevelPlaylist(e,t,n,r,i,s){var a;const o={url:t},l=new cd(t),c=l.fragments,u=[];let d,h,f,g,p=null,m=0,v=0,y=0,E=0,b=0,T=null,S=new Vl(r,o),_=-1,k=!1,A=null;if(Fd.lastIndex=0,l.m3u8=e,l.hasVariableRefs=Ju(e),"#EXTM3U"!==(null==(a=Fd.exec(e))?void 0:a[0]))return l.playlistParsingError=new Error("Missing format identifier #EXTM3U"),l;for(;null!==(d=Fd.exec(e));){k&&(k=!1,S=new Vl(r,o),S.playlistOffset=y,S.setStart(y),S.sn=m,S.cc=E,b&&(S.bitrate=b),S.level=n,p&&(S.initSegment=p,p.rawProgramDateTime&&(S.rawProgramDateTime=p.rawProgramDateTime,p.rawProgramDateTime=null),A&&(S.setByteRange(A),A=null)));const e=d[1];if(e){S.duration=parseFloat(e);const t=(" "+d[2]).slice(1);S.title=t||null,S.tagList.push(t?["INF",e,t]:["INF",e])}else if(d[3]){if(rl(S.duration)){S.playlistOffset=y,S.setStart(y),f&&Wd(S,f,l),S.sn=m,S.level=n,S.cc=E,c.push(S);const e=(" "+d[3]).slice(1);S.relurl=ed(l,e),Kd(S,T,u),T=S,y+=S.duration,m++,v=0,k=!0}}else{if(d=d[0].match(Nd),!d){Rl.warn("No matches on slow regex match for level playlist!");continue}for(h=1;h<d.length&&void 0===d[h];h++);const e=(" "+d[h]).slice(1),i=(" "+d[h+1]).slice(1),a=d[h+2]?(" "+d[h+2]).slice(1):null;switch(e){case"BYTERANGE":T?S.setByteRange(i,T):S.setByteRange(i);break;case"PROGRAM-DATE-TIME":S.rawProgramDateTime=i,S.tagList.push(["PROGRAM-DATE-TIME",i]),-1===_&&(_=c.length);break;case"PLAYLIST-TYPE":l.type&&qd(l,e,d),l.type=i.toUpperCase();break;case"MEDIA-SEQUENCE":0!==l.startSN?qd(l,e,d):c.length>0&&Xd(l,e,d),m=l.startSN=parseInt(i);break;case"SKIP":{l.skippedSegments&&qd(l,e,d);const t=new sd(i,l),n=t.decimalInteger("SKIPPED-SEGMENTS");if(rl(n)){l.skippedSegments+=n;for(let e=n;e--;)c.push(null);m+=n}const r=t.enumeratedString("RECENTLY-REMOVED-DATERANGES");r&&(l.recentlyRemovedDateranges=(l.recentlyRemovedDateranges||[]).concat(r.split("\t")));break}case"TARGETDURATION":0!==l.targetduration&&qd(l,e,d),l.targetduration=Math.max(parseInt(i),1);break;case"VERSION":null!==l.version&&qd(l,e,d),l.version=parseInt(i);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":l.live||qd(l,e,d),l.live=!1;break;case"#":(i||a)&&S.tagList.push(a?[i,a]:[i]);break;case"DISCONTINUITY":E++,S.tagList.push(["DIS"]);break;case"GAP":S.gap=!0,S.tagList.push([e]);break;case"BITRATE":S.tagList.push([e,i]),b=1e3*parseInt(i),rl(b)?S.bitrate=b:b=0;break;case"DATERANGE":{const e=new sd(i,l),t=new ld(e,l.dateRanges[e.ID],l.dateRangeTagCount);l.dateRangeTagCount++,t.isValid||l.skippedSegments?l.dateRanges[t.id]=t:Rl.warn('Ignoring invalid DATERANGE tag: "'.concat(i,'"')),S.tagList.push(["EXT-X-DATERANGE",i]);break}case"DEFINE":{const e=new sd(i,l);"IMPORT"in e?nd(l,e,s):td(l,e,t)}break;case"DISCONTINUITY-SEQUENCE":0!==l.startCC?qd(l,e,d):c.length>0&&Xd(l,e,d),l.startCC=E=parseInt(i);break;case"KEY":{const e=Hd(i,t,l);if(e.isSupported()){if("NONE"===e.method){f=void 0;break}f||(f={});const t=f[e.keyFormat];null!=t&&t.matches(e)||(t&&(f=El({},f)),f[e.keyFormat]=e)}else Rl.warn('[Keys] Ignoring unsupported EXT-X-KEY tag: "'.concat(i,'"'));break}case"START":l.startTimeOffset=jd(i);break;case"MAP":{const e=new sd(i,l);if(S.duration){const t=new Vl(r,o);Yd(t,e,n,f),p=t,S.initSegment=p,p.rawProgramDateTime&&!S.rawProgramDateTime&&(S.rawProgramDateTime=p.rawProgramDateTime)}else{const t=S.byteRangeEndOffset;if(t){const e=S.byteRangeStartOffset;A="".concat(t-e,"@").concat(e)}else A=null;Yd(S,e,n,f),p=S,k=!0}p.cc=E;break}case"SERVER-CONTROL":g&&qd(l,e,d),g=new sd(i),l.canBlockReload=g.bool("CAN-BLOCK-RELOAD"),l.canSkipUntil=g.optionalFloat("CAN-SKIP-UNTIL",0),l.canSkipDateRanges=l.canSkipUntil>0&&g.bool("CAN-SKIP-DATERANGES"),l.partHoldBack=g.optionalFloat("PART-HOLD-BACK",0),l.holdBack=g.optionalFloat("HOLD-BACK",0);break;case"PART-INF":{l.partTarget&&qd(l,e,d);const t=new sd(i);l.partTarget=t.decimalFloatingPoint("PART-TARGET");break}case"PART":{let e=l.partList;e||(e=l.partList=[]);const t=v>0?e[e.length-1]:void 0,n=v++,r=new sd(i,l),s=new Kl(r,S,o,n,t);e.push(s),S.duration+=s.duration;break}case"PRELOAD-HINT":{const e=new sd(i,l);l.preloadHint=e;break}case"RENDITION-REPORT":{const e=new sd(i,l);l.renditionReports=l.renditionReports||[],l.renditionReports.push(e);break}default:Rl.warn("line parsed but not handled: ".concat(d))}}}T&&!T.relurl?(c.pop(),y-=T.duration,l.partList&&(l.fragmentHint=T)):l.partList&&(Kd(S,T,u),S.cc=E,l.fragmentHint=S,f&&Wd(S,f,l)),l.targetduration||(l.playlistParsingError=new Error("Missing Target Duration"));const L=c.length,w=c[0],R=c[L-1];if(y+=l.skippedSegments*l.targetduration,y>0&&L&&R){l.averagetargetduration=y/L;const e=R.sn;l.endSN="initSegment"!==e?e:0,l.live||(R.endList=!0),_>0&&(!function(e,t){let n=e[t];for(let r=t;r--;){const t=e[r];if(!t)return;t.programDateTime=n.programDateTime-1e3*t.duration,n=t}}(c,_),w&&u.unshift(w))}return l.fragmentHint&&(y+=l.fragmentHint.duration),l.totalduration=y,u.length&&l.dateRangeTagCount&&w&&Ud(u,l),l.endCC=E,l}}function Ud(e,t){let n=e.length;if(!n){if(!t.hasProgramDateTime)return;{const r=t.fragments[t.fragments.length-1];e.push(r),n++}}const r=e[n-1],i=t.live?1/0:t.totalduration,s=Object.keys(t.dateRanges);for(let o=s.length;o--;){const l=t.dateRanges[s[o]],c=l.startDate.getTime();l.tagAnchor=r.ref;for(let r=n;r--;){var a;if((null==(a=e[r])?void 0:a.sn)<t.startSN)break;const n=Gd(t,c,e,r,i);if(-1!==n){l.tagAnchor=t.fragments[n].ref;break}}}}function Gd(e,t,n,r,i){const s=n[r];if(s){const o=s.programDateTime;if(t>=o||0===r){var a;if(t<=o+1e3*(((null==(a=n[r+1])?void 0:a.start)||i)-s.start)){const i=n[r].sn-e.startSN;if(i<0)return-1;const s=e.fragments;if(s.length>n.length){for(let a=(n[r+1]||s[s.length-1]).sn-e.startSN;a>i;a--){const e=s[a].programDateTime;if(t>=e&&t<e+1e3*s[a].duration)return a}}return i}}}return-1}function Hd(e,t,n){var r,i;const s=new sd(e,n),a=null!=(r=s.METHOD)?r:"",o=s.URI,l=s.hexadecimalInteger("IV"),c=s.KEYFORMATVERSIONS,u=null!=(i=s.KEYFORMAT)?i:"identity";o&&s.IV&&!l&&Rl.error("Invalid IV: ".concat(s.IV));const d=o?Bd.resolve(o,t):"",h=(c||"1").split("/").map(Number).filter(Number.isFinite);return new Cd(a,d,u,h,l,s.KEYID)}function jd(e){const t=new sd(e).decimalFloatingPoint("TIME-OFFSET");return rl(t)?t:null}function zd(e,t){let n=(e||"").split(/[ ,]+/).filter(e=>e);["video","audio","text"].forEach(e=>{const r=n.filter(t=>Tc(t,e));r.length&&(t["".concat(e,"Codec")]=r.map(e=>e.split("/")[0]).join(","),n=n.filter(e=>-1===r.indexOf(e)))}),t.unknownCodecs=n}function Vd(e,t,n){const r=t[n];r&&(e[n]=r)}function Kd(e,t,n){e.rawProgramDateTime?n.push(e):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime)}function Yd(e,t,n,r){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=n,e.sn="initSegment",r&&(e.levelkeys=r),e.initSegment=null}function Wd(e,t,n){e.levelkeys=t;const{encryptedFragments:r}=n;r.length&&r[r.length-1].levelkeys===t||!Object.keys(t).some(e=>t[e].isCommonEncryption)||r.push(e)}function qd(e,t,n){e.playlistParsingError=new Error("#EXT-X-".concat(t," must not appear more than once (").concat(n[0],")"))}function Xd(e,t,n){e.playlistParsingError=new Error("#EXT-X-".concat(t," must appear before the first Media Segment (").concat(n[0],")"))}function Qd(e,t){const n=t.startPTS;if(rl(n)){let r,i=0;t.sn>e.sn?(i=n-e.start,r=e):(i=e.start-n,r=t),r.duration!==i&&r.setDuration(i)}else if(t.sn>e.sn){e.cc===t.cc&&e.minEndPTS?t.setStart(e.start+(e.minEndPTS-e.start)):t.setStart(e.start+e.duration)}else t.setStart(Math.max(e.start-t.duration,0))}function $d(e,t,n,r,i,s,a){r-n<=0&&(a.warn("Fragment should have a positive duration",t),r=n+t.duration,s=i+t.duration);let o=n,l=r;const c=t.startPTS,u=t.endPTS;if(rl(c)){const d=Math.abs(c-n);e&&d>e.totalduration?a.warn("media timestamps and playlist times differ by ".concat(d,"s for level ").concat(t.level," ").concat(e.url)):rl(t.deltaPTS)?t.deltaPTS=Math.max(d,t.deltaPTS):t.deltaPTS=d,o=Math.max(n,c),n=Math.min(n,c),i=void 0!==t.startDTS?Math.min(i,t.startDTS):i,l=Math.min(r,u),r=Math.max(r,u),s=void 0!==t.endDTS?Math.max(s,t.endDTS):s}const d=n-t.start;0!==t.start&&t.setStart(n),t.setDuration(r-t.start),t.startPTS=n,t.maxStartPTS=o,t.startDTS=i,t.endPTS=r,t.minEndPTS=l,t.endDTS=s;const h=t.sn;if(!e||h<e.startSN||h>e.endSN)return 0;let f;const g=h-e.startSN,p=e.fragments;for(p[g]=t,f=g;f>0;f--)Qd(p[f],p[f-1]);for(f=g;f<p.length-1;f++)Qd(p[f],p[f+1]);return e.fragmentHint&&Qd(p[p.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,d}function Zd(e,t,n){if(e===t)return;let r=null;const i=e.fragments;for(let u=i.length-1;u>=0;u--){const e=i[u].initSegment;if(e){r=e;break}}let s;e.fragmentHint&&delete e.fragmentHint.endPTS,function(e,t,n){const r=t.skippedSegments,i=Math.max(e.startSN,t.startSN)-t.startSN,s=(e.fragmentHint?1:0)+(r?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,a=t.startSN-e.startSN,o=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments;for(let c=i;c<=s;c++){const i=l[a+c];let s=o[c];if(r&&!s&&i&&(s=t.fragments[c]=i),i&&s){n(i,s,c,o);const r=i.relurl,a=s.relurl;if(r&&oh(r,a))return void(t.playlistParsingError=Jd("media sequence mismatch ".concat(s.sn,":"),e,t,i,s));if(i.cc!==s.cc)return void(t.playlistParsingError=Jd("discontinuity sequence mismatch (".concat(i.cc,"!=").concat(s.cc,")"),e,t,i,s))}}}(e,t,(e,n,i,a)=>{if((!t.startCC||t.skippedSegments)&&n.cc!==e.cc){const r=e.cc-n.cc;for(let e=i;e<a.length;e++)a[e].cc+=r;t.endCC=a[a.length-1].cc}rl(e.startPTS)&&rl(e.endPTS)&&(n.setStart(n.startPTS=e.startPTS),n.startDTS=e.startDTS,n.maxStartPTS=e.maxStartPTS,n.endPTS=e.endPTS,n.endDTS=e.endDTS,n.minEndPTS=e.minEndPTS,n.setDuration(e.endPTS-e.startPTS),n.duration&&(s=n),t.PTSKnown=t.alignedSliding=!0),e.hasStreams&&(n.elementaryStreams=e.elementaryStreams),n.loader=e.loader,e.hasStats&&(n.stats=e.stats),e.initSegment&&(n.initSegment=e.initSegment,r=e.initSegment)});const a=t.fragments,o=t.fragmentHint?a.concat(t.fragmentHint):a;if(r&&o.forEach(e=>{var t;!e||e.initSegment&&e.initSegment.relurl!==(null==(t=r)?void 0:t.relurl)||(e.initSegment=r)}),t.skippedSegments){if(t.deltaUpdateFailed=a.some(e=>!e),t.deltaUpdateFailed){n.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let e=t.skippedSegments;e--;)a.shift();t.startSN=a[0].sn}else{t.canSkipDateRanges&&(t.dateRanges=function(e,t,n){const{dateRanges:r,recentlyRemovedDateranges:i}=t,s=El({},e);i&&i.forEach(e=>{delete s[e]});const a=Object.keys(s).length;if(!a)return r;return Object.keys(r).forEach(e=>{const t=s[e],i=new ld(r[e].attr,t);i.isValid?(s[e]=i,t||(i.tagOrder+=a)):n.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'.concat(Zc(r[e].attr),'"'))}),s}(e.dateRanges,t,n));const r=e.fragments.filter(e=>e.rawProgramDateTime);if(e.hasProgramDateTime&&!t.hasProgramDateTime)for(let e=1;e<o.length;e++)null===o[e].programDateTime&&Kd(o[e],o[e-1],r);Ud(r,t)}t.endCC=a[a.length-1].cc}if(!t.startCC){var l;const n=rh(e,t.startSN-1);t.startCC=null!=(l=null==n?void 0:n.cc)?l:a[0].cc}!function(e,t,n){if(e&&t){let r=0;for(let i=0,s=e.length;i<=s;i++){const s=e[i],a=t[i+r];s&&a&&s.index===a.index&&s.fragment.sn===a.fragment.sn?n(s,a):r--}}}(e.partList,t.partList,(e,t)=>{t.elementaryStreams=e.elementaryStreams,t.stats=e.stats}),s?$d(t,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS,n):eh(e,t),a.length&&(t.totalduration=t.edge-a[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;const c=t.advancedDateTime;if(t.advanced&&c){const e=t.edge;t.driftStart||(t.driftStartTime=c,t.driftStart=e),t.driftEndTime=c,t.driftEnd=e}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime;-1===t.requestScheduled&&(t.requestScheduled=e.requestScheduled)}function Jd(e,t,n,r,i){return new Error("".concat(e," ").concat(i.url,"\nPlaylist starting @").concat(t.startSN,"\n").concat(t.m3u8,"\n\nPlaylist starting @").concat(n.startSN,"\n").concat(n.m3u8))}function eh(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=t.startSN+t.skippedSegments-e.startSN,i=e.fragments,s=r>=0;let a=0;if(s&&r<i.length)a=i[r].start;else if(s&&t.startSN===e.endSN+1)a=e.fragmentEnd;else if(s&&n)a=e.fragmentStart+r*t.levelTargetDuration;else{if(t.skippedSegments||0!==t.fragmentStart)return;a=e.fragmentStart}th(t,a)}function th(e,t){if(t){const n=e.fragments;for(let r=e.skippedSegments;r<n.length;r++)n[r].addStart(t);e.fragmentHint&&e.fragmentHint.addStart(t)}}function nh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=1e3*e.targetduration;if(e.updated){const r=e.fragments,i=4;if(r.length&&n*i>t){const e=1e3*r[r.length-1].duration;e<n&&(n=e)}}else n/=2;return Math.round(n)}function rh(e,t,n){if(!e)return null;let r=e.fragments[t-e.startSN];return r||(r=e.fragmentHint,r&&r.sn===t?r:t<e.startSN&&n&&n.sn===t?n:null)}function ih(e,t,n){return e?sh(e.partList,t,n):null}function sh(e,t,n){if(e)for(let r=e.length;r--;){const i=e[r];if(i.index===n&&i.fragment.sn===t)return i}return null}function ah(e){e.forEach((e,t)=>{var n;null==(n=e.details)||n.fragments.forEach(e=>{e.level=t,e.initSegment&&(e.initSegment.level=t)})})}function oh(e,t){return!(e===t||!t)&&lh(e)!==lh(t)}function lh(e){return e.replace(/\?[^?]*$/,"")}function ch(e,t){for(let r=0,i=e.length;r<i;r++){var n;if((null==(n=e[r])?void 0:n.cc)===t)return e[r]}return null}function uh(e,t){const n=e.start+t;e.startPTS=n,e.setStart(n),e.endPTS=n+e.duration}function dh(e,t){const n=t.fragments;for(let r=0,i=n.length;r<i;r++)uh(n[r],e);t.fragmentHint&&uh(t.fragmentHint,e),t.alignedSliding=!0}function hh(e,t){if(!function(e,t){return!!(e&&t.startCC<e.endCC&&t.endCC>e.startCC)}(t,e))return;const n=Math.min(t.endCC,e.endCC),r=ch(t.fragments,n),i=ch(e.fragments,n);if(!r||!i)return;Rl.log("Aligning playlist at start of dicontinuity sequence ".concat(n));dh(r.start-i.start,e)}function fh(e,t){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;const n=e.fragments,r=t.fragments;if(!n.length||!r.length)return;let i,s;const a=Math.min(t.endCC,e.endCC);t.startCC<a&&e.startCC<a&&(i=ch(r,a),s=ch(n,a)),i&&s||(i=r[Math.floor(r.length/2)],s=ch(n,i.cc)||n[Math.floor(n.length/2)]);const o=i.programDateTime,l=s.programDateTime;if(!o||!l)return;dh((l-o)/1e3-(s.start-i.start),e)}function gh(e,t,n){ph(e,t,n),e.addEventListener(t,n)}function ph(e,t,n){e.removeEventListener(t,n)}const mh=function(e){let t="";const n=e.length;for(let r=0;r<n;r++)t+="[".concat(e.start(r).toFixed(3),"-").concat(e.end(r).toFixed(3),"]");return t},vh="STOPPED",yh="IDLE",Eh="KEY_LOADING",bh="FRAG_LOADING",Th="FRAG_LOADING_WAITING_RETRY",Sh="WAITING_TRACK",_h="PARSING",kh="PARSED",Ah="ENDED",Lh="ERROR",wh="WAITING_INIT_PTS",Rh="WAITING_LEVEL";class Ih extends qu{constructor(e,t,n,r,i){super(r,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=vh,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:e,fragCurrent:t,media:n,mediaBuffer:r,state:i}=this,s=n?n.currentTime:0,a=$u.bufferInfo(r||n,s,e.maxBufferHole),o=!a.len;if(this.log("Media seeking to ".concat(rl(s)?s.toFixed(3):s,", state: ").concat(i,", ").concat(o?"out of":"in"," buffer")),this.state===Ah)this.resetLoadingState();else if(t){const n=e.maxFragLookUpTolerance,r=t.start-n,i=t.start+t.duration+n;if(o||i<a.start||r>a.end){const e=s>i;(s<r||e)&&(e&&t.loader&&(this.log("Cancelling fragment load for seek (sn: ".concat(t.sn,")")),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(n){this.fragmentTracker.removeFragmentsInRange(s,1/0,this.playlistType,!0);if(s>this.lastCurrentTime&&(this.lastCurrentTime=s),!this.loadingParts){const e=Math.max(a.end,s),t=this.shouldLoadParts(this.getLevelDetails(),e);t&&(this.log("LL-Part loading ON after seeking to ".concat(s.toFixed(2)," with buffer @").concat(e.toFixed(2))),this.loadingParts=t)}}this.hls.hasEnoughToStart||(this.log("Setting ".concat(o?"startPosition":"nextLoadPosition"," to ").concat(s," for seek without enough to start")),this.nextLoadPosition=s,o&&(this.startPosition=s)),o&&this.state===yh&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=i,this.hls=e,this.fragmentLoader=new Vu(e.config),this.keyLoader=n,this.fragmentTracker=t,this.config=e.config,this.decrypter=new ju(e.config)}registerListeners(){const{hls:e}=this;e.on(ll.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ll.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ll.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(ll.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(ll.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ll.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ll.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(ll.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===vh)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=vh}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return-1===t&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const n=e.end||0,r=this.config.timelineOffset||0;if(n<=r)return!1;const i=e.buffered;this.config.maxBufferHole&&i&&i.length>1&&(e=$u.bufferedInfo(i,e.start,0));const s=e.nextStart;if(s&&s>r&&s<t.edge)return!1;if(this.media.currentTime<e.start)return!1;const a=t.partList;if(null!=a&&a.length){const e=a[a.length-1];return $u.isBuffered(this.media,e.start+e.duration/2)}const o=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(o)}getLevelDetails(){if(this.levels&&null!==this.levelLastLoaded)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;var t;return e?(null==(t=this.getLevelDetails())?void 0:t.appliedTimelineOffset)||e:0}onMediaAttached(e,t){const n=this.media=this.mediaBuffer=t.media;gh(n,"seeking",this.onMediaSeeking),gh(n,"ended",this.onMediaEnded);const r=this.config;this.levels&&r.autoStartLoad&&this.state===vh&&this.startLoad(r.startPosition)}onMediaDetaching(e,t){const n=!!t.transferMedia,r=this.media;if(null!==r){if(r.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),ph(r,"seeking",this.onMediaSeeking),ph(r,"ended",this.onMediaEnded),this.keyLoader&&!n&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,n)return this.resetLoadingState(),void this.resetTransmuxer();this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=vh,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,n){this.startFragRequested=!0,this._loadFragForPlayback(e,t,n)}_loadFragForPlayback(e,t,n){this._doFragLoad(e,t,n,e=>{const t=e.frag;if(this.fragContextChanged(t))return this.warn("".concat(t.type," sn: ").concat(t.sn).concat(e.part?" part: "+e.part.index:""," of ").concat(this.fragInfo(t,!1,e.part),") was dropped during download.")),void this.fragmentTracker.removeFragment(t);t.stats.chunkCount++,this._handleFragmentLoadProgress(e)}).then(e=>{if(!e)return;const t=this.state,n=e.frag;this.fragContextChanged(n)?(t===bh||!this.fragCurrent&&t===_h)&&(this.fragmentTracker.removeFragment(n),this.state=yh):("payload"in e&&(this.log("Loaded ".concat(n.type," sn: ").concat(n.sn," of ").concat(this.playlistLabel()," ").concat(n.level)),this.hls.trigger(ll.FRAG_LOADED,e)),this._handleFragmentLoadComplete(e))}).catch(t=>{this.state!==vh&&this.state!==Lh&&(this.warn("Frag error: ".concat((null==t?void 0:t.message)||t)),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:n}=this;if(n.getState(e)===xu){const t=e.type,r=this.getFwdBufferInfo(this.mediaBuffer,t),i=Math.max(e.duration,r?r.len:this.config.maxBufferLength),s=this.backtrackFragment;(1===(s?e.sn-s.sn:0)||this.reduceMaxBufferLength(i,e.duration))&&n.removeFragment(e)}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===Cu&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return(null==t?void 0:t.live)&&"EVENT"!==t.type&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t){if(!(e-t))return;const n={startOffset:e,endOffset:t,type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null};this.hls.trigger(ll.BUFFER_FLUSHING,n)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(e=>{const t=null==e?void 0:e.frag;if(!t||this.fragContextChanged(t)||!this.levels)throw new Error("init load aborted");return e}).then(e=>{const{hls:t}=this,{frag:n,payload:r}=e,i=n.decryptdata;if(r&&r.byteLength>0&&null!=i&&i.key&&i.iv&&hd(i.method)){const s=self.performance.now();return this.decrypter.decrypt(new Uint8Array(r),i.key.buffer,i.iv.buffer,fd(i.method)).catch(e=>{throw t.trigger(ll.ERROR,{type:al.MEDIA_ERROR,details:ol.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:n}),e}).then(r=>{const i=self.performance.now();return t.trigger(ll.FRAG_DECRYPTED,{frag:n,payload:r,stats:{tstart:s,tdecrypt:i}}),e.payload=r,this.completeInitSegmentLoad(e)})}return this.completeInitSegmentLoad(e)}).catch(t=>{this.state!==vh&&this.state!==Lh&&(this.warn(t),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state!==vh&&(this.state=yh),e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,t){var n,r;const i=e.tracks;if(i&&!t.encrypted&&(null!=(n=i.audio)&&n.encrypted||null!=(r=i.video)&&r.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const e=this.media,n=new Error("Encrypted track with no key in ".concat(this.fragInfo(t)," (media ").concat(e?"attached mediaKeys: "+e.mediaKeys:"detached",")"));return this.warn(n.message),!e||e.mediaKeys?!1:(this.hls.trigger(ll.ERROR,{type:al.KEY_SYSTEM_ERROR,details:ol.KEY_SYSTEM_NO_KEYS,fatal:!1,error:n,frag:t}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const n=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log("Buffered ".concat(e.type," sn: ").concat(e.sn).concat(t?" part: "+t.index:""," of ").concat(this.fragInfo(e,!1,t)," > buffer:").concat(n?mh($u.getBuffered(n)):"(detached)",")")),zl(e)){var r;if(e.type!==pl){const t=e.elementaryStreams;if(!Object.keys(t).some(e=>!!t[e]))return void(this.state=yh)}const t=null==(r=this.levels)?void 0:r[e.level];null!=t&&t.fragmentError&&(this.log("Resetting level fragment error count of ".concat(t.fragmentError," on frag buffered")),t.fragmentError=0)}this.state=yh}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:n,part:r,partsLoaded:i}=e,s=!i||0===i.length||i.some(e=>!e),a=new Xu(n.level,n.sn,n.stats.chunkCount+1,0,r?r.index:-1,!s);t.flush(a)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;var i;this.fragCurrent=e;const s=t.details;if(!this.levels||!s)throw new Error("frag load aborted, missing level".concat(s?"":" detail","s"));let a=null;if(!e.encrypted||null!=(i=e.decryptdata)&&i.key)e.encrypted||(a=this.keyLoader.loadClear(e,s.encryptedFragments,this.startFragRequested),a&&this.log("[eme] blocking frag load until media-keys acquired"));else if(this.log("Loading key for ".concat(e.sn," of [").concat(s.startSN,"-").concat(s.endSN,"], ").concat(this.playlistLabel()," ").concat(e.level)),this.state=Eh,this.fragCurrent=e,a=this.keyLoader.load(e).then(e=>{if(!this.fragContextChanged(e.frag))return this.hls.trigger(ll.KEY_LOADED,e),this.state===Eh&&(this.state=yh),e}),this.hls.trigger(ll.KEY_LOADING,{frag:e}),null===this.fragCurrent)return this.log("context changed in KEY_LOADING"),Promise.resolve(null);const o=this.fragPrevious;if(zl(e)&&(!o||e.sn!==o.sn)){const n=this.shouldLoadParts(t.details,e.end);n!==this.loadingParts&&(this.log("LL-Part loading ".concat(n?"ON":"OFF"," loading sn ").concat(null==o?void 0:o.sn,"->").concat(e.sn)),this.loadingParts=n)}if(n=Math.max(e.start,n||0),this.loadingParts&&zl(e)){const i=s.partList;if(i&&r){n>s.fragmentEnd&&s.fragmentHint&&(e=s.fragmentHint);const o=this.getNextPart(i,e,n);if(o>-1){const l=i[o];let c;return e=this.fragCurrent=l.fragment,this.log("Loading ".concat(e.type," sn: ").concat(e.sn," part: ").concat(l.index," (").concat(o,"/").concat(i.length-1,") of ").concat(this.fragInfo(e,!1,l),") cc: ").concat(e.cc," [").concat(s.startSN,"-").concat(s.endSN,"], target: ").concat(parseFloat(n.toFixed(3)))),this.nextLoadPosition=l.start+l.duration,this.state=bh,c=a?a.then(n=>!n||this.fragContextChanged(n.frag)?null:this.doFragPartsLoad(e,l,t,r)).catch(e=>this.handleFragLoadError(e)):this.doFragPartsLoad(e,l,t,r).catch(e=>this.handleFragLoadError(e)),this.hls.trigger(ll.FRAG_LOADING,{frag:e,part:l,targetBufferTime:n}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):c}if(!e.url||this.loadedEndOfParts(i,n))return Promise.resolve(null)}}var l;if(zl(e)&&this.loadingParts)this.log("LL-Part loading OFF after next part miss @".concat(n.toFixed(2)," Check buffer at sn: ").concat(e.sn," loaded parts: ").concat(null==(l=s.partList)?void 0:l.filter(e=>e.loaded).map(e=>"[".concat(e.start,"-").concat(e.end,"]")))),this.loadingParts=!1;else if(!e.url)return Promise.resolve(null);this.log("Loading ".concat(e.type," sn: ").concat(e.sn," of ").concat(this.fragInfo(e,!1),") cc: ").concat(e.cc," ").concat("["+s.startSN+"-"+s.endSN+"]",", target: ").concat(parseFloat(n.toFixed(3)))),rl(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=bh;const c=this.config.progressive;let u;return u=c&&a?a.then(t=>!t||this.fragContextChanged(t.frag)?null:this.fragmentLoader.load(e,r)).catch(e=>this.handleFragLoadError(e)):Promise.all([this.fragmentLoader.load(e,c?r:void 0),a]).then(e=>{let[t]=e;return!c&&r&&r(t),t}).catch(e=>this.handleFragLoadError(e)),this.hls.trigger(ll.FRAG_LOADING,{frag:e,targetBufferTime:n}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):u}doFragPartsLoad(e,t,n,r){return new Promise((i,s)=>{var a;const o=[],l=null==(a=n.details)?void 0:a.partList,c=t=>{this.fragmentLoader.loadPart(e,t,r).then(r=>{o[t.index]=r;const s=r.part;this.hls.trigger(ll.FRAG_LOADED,r);const a=ih(n.details,e.sn,t.index+1)||sh(l,e.sn,t.index+1);if(!a)return i({frag:e,part:s,partsLoaded:o});c(a)}).catch(s)};c(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;t.frag&&t.details===ol.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):t.frag&&t.type===al.KEY_SYSTEM_ERROR?(t.frag.abortRequests(),this.resetStartWhenNotLoaded(),this.resetFragmentLoading(t.frag)):this.hls.trigger(ll.ERROR,t)}else this.hls.trigger(ll.ERROR,{type:al.OTHER_ERROR,details:ol.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==_h)return void(this.fragCurrent||this.state===vh||this.state===Lh||(this.state=yh));const{frag:n,part:r,level:i}=t,s=self.performance.now();n.stats.parsing.end=s,r&&(r.stats.parsing.end=s);const a=this.getLevelDetails(),o=a&&n.sn>a.endSN||this.shouldLoadParts(a,n.end);o!==this.loadingParts&&(this.log("LL-Part loading ".concat(o?"ON":"OFF"," after parsing segment ending @").concat(n.end.toFixed(2))),this.loadingParts=o),this.updateLevelTiming(n,r,i,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var n;const i=e.partList[0];if(i.fragment.type===pl)return!1;if(t>=i.end+((null==(n=e.fragmentHint)?void 0:n.duration)||0)){var r;if((this.hls.hasEnoughToStart?(null==(r=this.media)?void 0:r.currentTime)||this.lastCurrentTime:this.getLoadPosition())>i.start-i.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:n}=this,{level:r,sn:i,part:s}=e;if(null==t||!t[r])return this.warn("Levels object was unset while buffering fragment ".concat(i," of ").concat(this.playlistLabel()," ").concat(r,". The current chunk will not be buffered.")),null;const a=t[r],o=a.details,l=s>-1?ih(o,i,s):null,c=l?l.fragment:rh(o,i,n);return c?(n&&n!==c&&(c.stats=n.stats),{frag:c,part:l,level:a}):null}bufferFragmentData(e,t,n,r,i){if(this.state!==_h)return;const{data1:s,data2:a}=e;let o=s;if(a&&(o=dc(s,a)),!o.length)return;const l=this.initPTS[t.cc],c=l?-l.baseTime/l.timescale:void 0,u={type:e.type,frag:t,part:n,chunkMeta:r,offset:c,parent:t.type,data:o};if(this.hls.trigger(ll.BUFFER_APPENDING,u),e.dropped&&e.independent&&!n){if(i)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!$u.isBuffered(t,t.currentTime))return void this.flushMainBuffer(0,e.start);const n=t.currentTime,r=$u.bufferInfo(t,n,0),i=e.duration,s=Math.min(2*this.config.maxFragLookUpTolerance,.25*i),a=Math.max(Math.min(e.start-s,r.end-s),n+s);e.start-a>s&&this.flushMainBuffer(a,e.start)}getFwdBufferInfo(e,t){var n;const r=this.getLoadPosition();if(!rl(r))return null;const i=this.lastCurrentTime>r||null!=(n=this.media)&&n.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,r,t,i)}getFwdBufferInfoAtPos(e,t,n,r){const i=$u.bufferInfo(e,t,r);if(0===i.len&&void 0!==i.nextStart){const s=this.fragmentTracker.getBufferedFrag(t,n);if(s&&(i.nextStart<=s.end||s.gap)){const n=Math.max(Math.min(i.nextStart,s.end)-t,r);return $u.bufferInfo(e,t,n)}}return i}getMaxBufferLength(e){const{config:t}=this;let n;return n=e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength,Math.min(n,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const n=this.config,r=Math.max(Math.min(e-t,n.maxBufferLength),t),i=Math.max(e-3*t,n.maxMaxBufferLength/2,r);return i>=r&&(n.maxMaxBufferLength=i,this.warn("Reduce max buffer length to ".concat(i,"s")),!0)}getAppendedFrag(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fl;const n=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,t):null;return n&&"fragment"in n?n.fragment:n}getNextFragment(e,t){const n=t.fragments,r=n.length;if(!r)return null;const{config:i}=this,s=n[0].start,a=i.lowLatencyMode&&!!t.partList;let o=null;if(t.live){const n=i.initialLiveManifestSize;if(r<n)return this.warn("Not enough fragments to start playback (have: ".concat(r,", need: ").concat(n,")")),null;if(!t.PTSKnown&&!this.startFragRequested&&-1===this.startPosition||e<s){var l;a&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),o=this.getInitialLiveFragment(t);const n=this.hls.startPosition,r=this.hls.liveSyncPosition,i=o?(-1!==n&&n>=s?n:r)||o.start:e;this.log("Setting startPosition to ".concat(i," to match start frag at live edge. mainStart: ").concat(n," liveSyncPosition: ").concat(r," frag.start: ").concat(null==(l=o)?void 0:l.start)),this.startPosition=this.nextLoadPosition=i}}else e<=s&&(o=n[0]);if(!o){const n=this.loadingParts?t.partEnd:t.fragmentEnd;o=this.getFragmentAtPosition(e,n,t)}let c=this.filterReplacedPrimary(o,t);if(!c&&o){const e=o.sn-t.startSN;c=this.filterReplacedPrimary(n[e+1]||null,t)}return this.mapToInitFragWhenRequired(c)}isLoopLoading(e,t){const n=this.fragmentTracker.getState(e);return(n===Du||n===Cu&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,n,r,i){let s=null;if(e.gap&&(s=this.getNextFragment(this.nextLoadPosition,t),s&&!s.gap&&n.nextStart)){const e=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,r,0);if(null!==e&&n.len+e.len>=i){const e=s.sn;return this.loopSn!==e&&(this.log('buffer full after gaps in "'.concat(r,'" playlist starting at sn: ').concat(e)),this.loopSn=e),null}}return this.loopSn=void 0,s}get primaryPrefetch(){if(xh(this.config)){var e;if(null==(e=this.hls.interstitialsManager)||null==(e=e.playingItem)?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(xh(this.config)&&e.type!==pl){const n=this.hls.interstitialsManager,r=null==n?void 0:n.bufferingItem;if(r){const n=r.event;if(n){if(n.appendInPlace||Math.abs(e.start-r.start)>1||0===r.start)return null}else{if(e.end<=r.start&&!1===(null==t?void 0:t.live))return null;if(e.start>r.end&&r.nextEvent&&(r.nextEvent.appendInPlace||e.start-r.end>1))return null}}const i=null==n?void 0:n.playerQueue;if(i)for(let t=i.length;t--;){const n=i[t].interstitial;if(n.appendInPlace&&e.start>=n.startTime&&e.end<=n.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return null==e||!e.initSegment||e.initSegment.data||this.bitrateTest?e:e.initSegment}getNextPart(e,t,n){let r=-1,i=!1,s=!0;for(let a=0,o=e.length;a<o;a++){const o=e[a];if(s=s&&!o.independent,r>-1&&n<o.start)break;const l=o.loaded;l?r=-1:(i||(o.independent||s)&&o.fragment===t)&&(o.fragment!==t&&this.warn("Need buffer at ".concat(n," but next unloaded part starts at ").concat(o.start)),r=a),i=l}return r}loadedEndOfParts(e,t){let n;for(let r=e.length;r--;){if(n=e[r],!n.loaded)return!1;if(t>n.start)return!0}return!1}getInitialLiveFragment(e){const t=e.fragments,n=this.fragPrevious;let r=null;if(n){if(e.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: ".concat(n.programDateTime)),r=function(e,t,n){if(null===t||!Array.isArray(e)||!e.length||!rl(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;for(let r=0;r<e.length;++r){const i=e[r];if(uu(t,n,i))return i}return null}(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!r){const i=n.sn+1;if(i>=e.startSN&&i<=e.endSN){const s=t[i-e.startSN];n.cc===s.cc&&(r=s,this.log("Live playlist, switching playlist, load frag with next SN: ".concat(r.sn)))}r||(r=du(e,n.cc,n.end),r&&this.log("Live playlist, switching playlist, load frag with same CC: ".concat(r.sn)))}}else{const t=this.hls.liveSyncPosition;null!==t&&(r=this.getFragmentAtPosition(t,this.bitrateTest?e.fragmentEnd:e.edge,e))}return r}getFragmentAtPosition(e,t,n){const{config:r}=this;let{fragPrevious:i}=this,{fragments:s,endSN:a}=n;const{fragmentHint:o}=n,{maxFragLookUpTolerance:l}=r,c=n.partList,u=!!(this.loadingParts&&null!=c&&c.length&&o);let d;if(u&&!this.bitrateTest&&c[c.length-1].fragment.sn===o.sn&&(s=s.concat(o),a=o.sn),e<t){var h;d=lu(i,s,e,e<this.lastCurrentTime||e>t-l||null!=(h=this.media)&&h.paused||!this.startFragRequested?0:l)}else d=s[s.length-1];if(d){const e=d.sn-n.startSN,t=this.fragmentTracker.getState(d);if((t===Du||t===Cu&&d.gap)&&(i=d),i&&d.sn===i.sn&&(!u||c[0].fragment.sn>d.sn||!n.live)){if(d.level===i.level){const t=s[e+1];d=d.sn<a&&this.fragmentTracker.getState(t)!==Du?t:null}}}return d}alignPlaylists(e,t,n){const r=e.fragments.length;if(!r)return this.warn("No fragments in live playlist"),0;const i=e.fragmentStart,s=!t,a=e.alignedSliding&&rl(i);if(s||!a&&!i){!function(e,t){e&&(hh(t,e),t.alignedSliding||fh(t,e),t.alignedSliding||t.skippedSegments||eh(e,t,!1))}(n,e);const i=e.fragmentStart;return this.log("Live playlist sliding: ".concat(i.toFixed(2)," start-sn: ").concat(t?t.startSN:"na","->").concat(e.startSN," fragments: ").concat(r)),i}return i}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)}setStartPosition(e,t){let n=this.startPosition;n<t&&(n=-1);const r=this.timelineOffset;if(-1===n){const i=null!==this.startTimeOffset,s=i?this.startTimeOffset:e.startTimeOffset;null!==s&&rl(s)?(n=t+s,s<0&&(n+=e.edge),n=Math.min(Math.max(t,n),t+e.totalduration),this.log("Setting startPosition to ".concat(n," for start time offset ").concat(s," found in ").concat(i?"multivariant":"media"," playlist")),this.startPosition=n):e.live?(n=this.hls.liveSyncPosition||t,this.log("Setting startPosition to -1 to start at live edge ".concat(n)),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=n=0),this.lastCurrentTime=n+r}this.nextLoadPosition=n+r}getLoadPosition(){var e;const{media:t}=this;let n=0;return null!=(e=this.hls)&&e.hasEnoughToStart&&t?n=t.currentTime:this.nextLoadPosition>=0&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&zl(e)&&e.stats.aborted&&(this.log("Fragment ".concat(e.sn).concat(t?" part "+t.index:""," of ").concat(this.playlistLabel()," ").concat(e.level," was aborted")),this.resetFragmentLoading(e))}resetFragmentLoading(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===Th)||(this.state=yh)}onFragmentOrKeyLoadError(e,t){var n;if(t.chunkMeta&&!t.frag){const e=this.getCurrentContext(t.chunkMeta);e&&(t.frag=e.frag)}const r=t.frag;if(!r||r.type!==e||!this.levels)return;var i;if(this.fragContextChanged(r))return void this.warn("Frag load error must match current frag to retry ".concat(r.url," > ").concat(null==(i=this.fragCurrent)?void 0:i.url));const s=t.details===ol.FRAG_GAP;s&&this.fragmentTracker.fragBuffered(r,!0);const a=t.errorAction;if(!a)return void(this.state=Lh);const{action:o,flags:l,retryCount:c=0,retryConfig:u}=a,d=!!u,h=d&&o===_u,f=d&&!a.resolved&&l===Au,g=null==(n=this.hls.latestLevelDetails)?void 0:n.live;if(!h&&f&&zl(r)&&!r.endList&&g&&!gu(t))this.resetFragmentErrors(e),this.treatAsGap(r),a.resolved=!0;else if((h||f)&&c<u.maxNumRetry){var p;const n=Eu(null==(p=t.response)?void 0:p.code),i=mu(u,c);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+i,this.state=Th,a.resolved=!0,n)return this.log("Waiting for connection (offline)"),this.retryDate=1/0,void(t.reason="offline");this.warn("Fragment ".concat(r.sn," of ").concat(e," ").concat(r.level," errored with ").concat(t.details,", retrying loading ").concat(c+1,"/").concat(u.maxNumRetry," in ").concat(i,"ms"))}else if(u){if(this.resetFragmentErrors(e),!(c<u.maxNumRetry))return void this.warn("".concat(t.details," reached or exceeded max retry (").concat(c,")"));s||o===Su||(a.resolved=!0)}else this.state=o===Tu?Rh:Lh;this.tickImmediate()}checkRetryDate(){const e=self.performance.now(),t=this.retryDate,n=t===1/0;(!t||e>=t||n&&!Eu(0))&&(n&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=yh)}reduceLengthAndFlushBuffer(e){if(this.state===_h||this.state===kh){const t=e.frag,n=e.parent,r=this.getFwdBufferInfo(this.mediaBuffer,n),i=r&&r.len>.5;i&&this.reduceMaxBufferLength(r.len,(null==t?void 0:t.duration)||10);const s=!i;return s&&this.warn("Buffer full error while media.currentTime (".concat(this.getLoadPosition(),") is not buffered, flush ").concat(n," buffer")),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),s}return!1}resetFragmentErrors(e){e===gl&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==vh&&(this.state=yh)}afterBufferFlushed(e,t,n){if(!e)return;const r=$u.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,r,n),this.state===Ah&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==vh&&(this.state=yh)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const e=this.levelLastLoaded,t=e?e.details:null;null!=t&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.log("Loading context changed while buffering sn ".concat(e.sn," of ").concat(this.playlistLabel()," ").concat(-1===e.level?"<removed>":e.level,". This chunk will not be buffered.")),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,n,r){const i=n.details;if(!i)return void this.warn("level.details undefined");var s;if(!Object.keys(e.elementaryStreams).reduce((t,s)=>{const a=e.elementaryStreams[s];if(a){const o=a.endPTS-a.startPTS;if(o<=0)return this.warn("Could not parse fragment ".concat(e.sn," ").concat(s," duration reliably (").concat(o,")")),t||!1;const l=r?0:$d(i,e,a.startPTS,a.endPTS,a.startDTS,a.endDTS,this);return this.hls.trigger(ll.LEVEL_PTS_UPDATED,{details:i,level:n,drift:l,type:s,frag:e,start:a.startPTS,end:a.endPTS}),!0}return t},!1)&&(0===n.fragmentError&&this.treatAsGap(e,n),null===(null==(s=this.transmuxer)?void 0:s.error))){const t=new Error("Found no media in fragment ".concat(e.sn," of ").concat(this.playlistLabel()," ").concat(e.level," resetting transmuxer to fallback to playlist timing"));if(this.warn(t.message),this.hls.trigger(ll.ERROR,{type:al.MEDIA_ERROR,details:ol.FRAG_PARSING_ERROR,fatal:!1,error:t,frag:e,reason:"Found no media in msn ".concat(e.sn," of ").concat(this.playlistLabel(),' "').concat(n.url,'"')}),!this.hls)return;this.resetTransmuxer()}this.state=kh,this.log("Parsed ".concat(e.type," sn: ").concat(e.sn).concat(t?" part: "+t.index:""," of ").concat(this.fragInfo(e,!1,t),")")),this.hls.trigger(ll.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===fl?"level":"track"}fragInfo(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;var r,i;return"".concat(this.playlistLabel()," ").concat(e.level," (").concat(n?"part":"frag",":[").concat((null!=(r=t&&!n?e.startPTS:(n||e).start)?r:NaN).toFixed(3),"-").concat((null!=(i=t&&!n?e.endPTS:(n||e).end)?i:NaN).toFixed(3),"]").concat(n&&"main"===e.type?"INDEPENDENT="+(n.independent?"YES":"NO"):"")}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;null==(e=this.transmuxer)||e.reset()}recoverWorkerError(e){"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log("".concat(t,"->").concat(e)))}get state(){return this._state}}function xh(e){return!!e.interstitialsController&&!1!==e.enableInterstitialPlayback}class Ch{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let n;return e.length?(n=1===e.length?e[0]:function(e,t){const n=new Uint8Array(t);let r=0;for(let i=0;i<e.length;i++){const t=e[i];n.set(t,r),r+=t.length}return n}(e,t),this.reset(),n):new Uint8Array(0)}reset(){this.chunks.length=0,this.dataLength=0}}var Dh,Ph={exports:{}};var Oh=(Dh||(Dh=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,r,s,a){if("function"!==typeof r)throw new TypeError("The listener must be a function");var o=new i(r,s||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,a=new Array(s);i<s;i++)a[i]=r[i].fn;return a},o.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,i,s,a){var o=n?n+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,s),!0;case 6:return u.fn.call(u.context,t,r,i,s,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,r,i){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||i&&!o.once||r&&o.context!==r||a(this,s);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==t||i&&!o[l].once||r&&o[l].context!==r)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(Ph)),Ph.exports),Mh=Ol(Oh);const Fh="1.6.13",Nh={};function Bh(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function Uh(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function Gh(e,t){let n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3],n}function Hh(e,t){const n=t;let r=0;for(;Uh(e,t);){r+=10;r+=Gh(e,t+6),Bh(e,t+10)&&(r+=10),t+=r}if(r>0)return e.subarray(n,n+r)}function jh(e,t){return 255===e[t]&&240===(246&e[t+1])}function zh(e,t){return 1&e[t+1]?7:9}function Vh(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function Kh(e,t){return t+1<e.length&&jh(e,t)}function Yh(e,t){if(Kh(e,t)){const n=zh(e,t);if(t+n>=e.length)return!1;const r=Vh(e,t);if(r<=n)return!1;const i=t+r;return i===e.length||Kh(e,i)}return!1}function Wh(e,t,n,r,i){if(!e.samplerate){const s=function(e,t,n,r){const i=t[n+2],s=i>>2&15;if(s>12){const t=new Error("invalid ADTS sampling index:".concat(s));return void e.emit(ll.ERROR,ll.ERROR,{type:al.MEDIA_ERROR,details:ol.FRAG_PARSING_ERROR,fatal:!0,error:t,reason:t.message})}const a=1+(i>>6&3),o=t[n+3]>>6&3|(1&i)<<2,l="mp4a.40."+a,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350][s];let u=s;5!==a&&29!==a||(u-=3);const d=[a<<3|(14&u)>>1,(1&u)<<7|o<<3];return Rl.log("manifest codec:".concat(r,", parsed codec:").concat(l,", channels:").concat(o,", rate:").concat(c," (ADTS object type:").concat(a," sampling index:").concat(s,")")),{config:d,samplerate:c,channelCount:o,codec:l,parsedCodec:l,manifestCodec:r}}(t,n,r,i);if(!s)return;El(e,s)}}function qh(e){return 9216e4/e}function Xh(e,t,n,r,i){const s=r+i*qh(e.samplerate),a=function(e,t){const n=zh(e,t);if(t+n<=e.length){const r=Vh(e,t)-n;if(r>0)return{headerLength:n,frameLength:r}}}(t,n);let o;if(a){const{frameLength:r,headerLength:i}=a,l=i+r,c=Math.max(0,n+l-t.length);c?(o=new Uint8Array(l-i),o.set(t.subarray(n+i,t.length),0)):o=t.subarray(n+i,n+l);const u={unit:o,pts:s};return c||e.samples.push(u),{sample:u,length:l,missing:c}}const l=t.length-n;o=new Uint8Array(l),o.set(t.subarray(n,t.length),0);return{sample:{unit:o,pts:s},length:l,missing:-1}}function Qh(e,t){return Uh(e,t)&&Gh(e,t+6)+10<=e.length-t}function $h(e){return function(e,t,n,r){const i=function(e){return e instanceof ArrayBuffer?e:e.buffer}(e);let s=1;"BYTES_PER_ELEMENT"in r&&(s=r.BYTES_PER_ELEMENT);const a=(d=e,d&&d.buffer instanceof ArrayBuffer&&void 0!==d.byteLength&&void 0!==d.byteOffset?e.byteOffset:0),o=(a+e.byteLength)/s,l=(a+t)/s,c=Math.floor(Math.max(0,Math.min(l,o))),u=Math.floor(Math.min(c+Math.max(n,0),o));var d;return new r(i,c,u-c)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,Uint8Array)}function Zh(e){const t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.size<2)return;if(3!==e.data[0])return void console.log("Ignore frame with unrecognized character encoding");const n=e.data.subarray(1).indexOf(0);if(-1===n)return;const r=Cl($h(e.data,1,n)),i=e.data[2+n],s=e.data.subarray(3+n).indexOf(0);if(-1===s)return;const a=Cl($h(e.data,3+n,s));let o;return o="--\x3e"===r?Cl($h(e.data,4+n+s)):function(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}(e.data.subarray(4+n+s)),t.mimeType=r,t.pictureType=i,t.description=a,t.data=o,t}function Jh(e){return"PRIV"===e.type?function(e){if(e.size<2)return;const t=Cl(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:n.buffer}}(e):"W"===e.type[0]?function(e){if("WXXX"===e.type){if(e.size<2)return;let t=1;const n=Cl(e.data.subarray(t),!0);t+=n.length+1;const r=Cl(e.data.subarray(t));return{key:e.type,info:n,data:r}}const t=Cl(e.data);return{key:e.type,info:"",data:t}}(e):"APIC"===e.type?Zh(e):function(e){if(e.size<2)return;if("TXXX"===e.type){let t=1;const n=Cl(e.data.subarray(t),!0);t+=n.length+1;const r=Cl(e.data.subarray(t));return{key:e.type,info:n,data:r}}const t=Cl(e.data.subarray(1));return{key:e.type,info:"",data:t}}(e)}function ef(e){const t=String.fromCharCode(e[0],e[1],e[2],e[3]),n=Gh(e,4);return{type:t,size:n,data:e.subarray(10,10+n)}}function tf(e){let t=0;const n=[];for(;Uh(e,t);){const r=Gh(e,t+6);e[t+5]>>6&1&&(t+=10),t+=10;const i=t+r;for(;t+10<i;){const r=ef(e.subarray(t)),i=Jh(r);i&&n.push(i),t+=r.size+10}Bh(e,t)&&(t+=10)}return n}function nf(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info}function rf(e){if(8===e.data.byteLength){const t=new Uint8Array(e.data),n=1&t[3];let r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}}function sf(e){const t=tf(e);for(let n=0;n<t.length;n++){const e=t[n];if(nf(e))return rf(e)}}let af=function(e){return e.audioId3="org.id3",e.dateRange="com.apple.quicktime.HLS",e.emsg="https://aomedia.org/emsg/ID3",e.misbklv="urn:misb:KLV:bin:1910.1",e}({});function of(){return{type:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",id:-1,pid:-1,inputTimeScale:arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4,sequenceNumber:-1,samples:[],dropped:0}}class lf{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,n,r){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,n){}demux(e,t){this.cachedData&&(e=dc(this.cachedData,e),this.cachedData=null);let n,r=Hh(e,0),i=r?r.length:0;const s=this._audioTrack,a=this._id3Track,o=r?sf(r):void 0,l=e.length;for((null===this.basePTS||0===this.frameIndex&&rl(o))&&(this.basePTS=cf(o,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),r&&r.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:af.audioId3,duration:Number.POSITIVE_INFINITY});i<l;){if(this.canParse(e,i)){const t=this.appendFrame(s,e,i);t?(this.frameIndex++,this.lastPTS=t.sample.pts,i+=t.length,n=i):i=l}else Qh(e,i)?(r=Hh(e,i),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:af.audioId3,duration:Number.POSITIVE_INFINITY}),i+=r.length,n=i):i++;if(i===l&&n!==l){const t=e.slice(n);this.cachedData?this.cachedData=dc(this.cachedData,t):this.cachedData=t}}return{audioTrack:s,videoTrack:of(),id3Track:a,textTrack:of()}}demuxSampleAes(e,t,n){return Promise.reject(new Error("[".concat(this,"] This demuxer does not support Sample-AES decryption")))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:of(),id3Track:this._id3Track,textTrack:of()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const cf=(e,t,n)=>{if(rl(e))return 90*e;return 9e4*t+(n?9e4*n.baseTime/n.timescale:0)};let uf=null;const df=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],hf=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],ff=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],gf=[0,1,1,4];function pf(e,t,n,r,i){if(n+24>t.length)return;const s=mf(t,n);if(s&&n+s.frameLength<=t.length){const a=r+i*(9e4*s.samplesPerFrame/s.sampleRate),o={unit:t.subarray(n,n+s.frameLength),pts:a,dts:a};return e.config=[],e.channelCount=s.channelCount,e.samplerate=s.sampleRate,e.samples.push(o),{sample:o,length:s.frameLength,missing:0}}}function mf(e,t){const n=e[t+1]>>3&3,r=e[t+1]>>1&3,i=e[t+2]>>4&15,s=e[t+2]>>2&3;if(1!==n&&0!==i&&15!==i&&3!==s){const a=e[t+2]>>1&1,o=e[t+3]>>6,l=1e3*df[14*(3===n?3-r:3===r?3:4)+i-1],c=hf[3*(3===n?0:2===n?1:2)+s],u=3===o?1:2,d=ff[n][r],h=gf[r],f=8*d*h,g=Math.floor(d*l/c+a)*h;if(null===uf){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);uf=e?parseInt(e[1]):0}return!!uf&&uf<=87&&2===r&&l>=224e3&&0===o&&(e[t+3]=128|e[t+3]),{sampleRate:c,channelCount:u,frameLength:g,samplesPerFrame:f}}}function vf(e,t){return 255===e[t]&&224===(224&e[t+1])&&0!==(6&e[t+1])}function yf(e,t){return t+1<e.length&&vf(e,t)}function Ef(e,t){if(t+1<e.length&&vf(e,t)){const n=4,r=mf(e,t);let i=n;null!=r&&r.frameLength&&(i=r.frameLength);const s=t+i;return s===e.length||yf(e,s)}return!1}const bf=(e,t)=>{let n=0,r=5;t+=r;const i=new Uint32Array(1),s=new Uint32Array(1),a=new Uint8Array(1);for(;r>0;){a[0]=e[t];const o=Math.min(r,8),l=8-o;s[0]=4278190080>>>24+l<<l,i[0]=(a[0]&s[0])>>l,n=n?n<<o|i[0]:i[0],t+=1,r-=o}return n};class Tf extends lf{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,n){const r=Sf(e,t,n,this.basePTS,this.frameIndex);if(-1!==r){return{sample:e.samples[e.samples.length-1],length:r,missing:0}}}static probe(e){if(!e)return!1;const t=Hh(e,0);if(!t)return!1;const n=t.length;return 11===e[n]&&119===e[n+1]&&void 0!==sf(t)&&bf(e,n)<16}}function Sf(e,t,n,r,i){if(n+8>t.length)return-1;if(11!==t[n]||119!==t[n+1])return-1;const s=t[n+4]>>6;if(s>=3)return-1;const a=[48e3,44100,32e3][s],o=63&t[n+4],l=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*o+s];if(n+l>t.length)return-1;const c=t[n+6]>>5;let u=0;2===c?u+=2:(1&c&&1!==c&&(u+=2),4&c&&(u+=2));const d=(t[n+6]<<8|t[n+7])>>12-u&1,h=[2,1,2,3,3,4,4,5][c]+d,f=t[n+5]>>3,g=7&t[n+5],p=new Uint8Array([s<<6|f<<1|g>>2,(3&g)<<6|c<<3|d<<2|o>>4,o<<4&224]),m=r+i*(1536/a*9e4),v=t.subarray(n,n+l);return e.config=p,e.channelCount=h,e.samplerate=a,e.samples.push({unit:v,pts:m}),l}const _f=/\/emsg[-/]ID3/i;function kf(e,t){return rl(e.presentationTime)?e.presentationTime/e.timeScale:t+e.presentationTimeDelta/e.timeScale}class Af{constructor(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new ju(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,Nu)}decryptAacSample(e,t,n){const r=e[t].unit;if(r.length<=16)return;const i=r.subarray(16,r.length-r.length%16),s=i.buffer.slice(i.byteOffset,i.byteOffset+i.length);this.decryptBuffer(s).then(i=>{const s=new Uint8Array(i);r.set(s,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,n)}).catch(n)}decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t);let r=0;for(let i=32;i<e.length-16;i+=160,r+=16)n.set(e.subarray(i,i+16),r);return n}getAvcDecryptedUnit(e,t){const n=new Uint8Array(t);let r=0;for(let i=32;i<e.length-16;i+=160,r+=16)e.set(n.subarray(r,r+16),i);return e}decryptAvcSample(e,t,n,r,i){const s=mc(i.data),a=this.getAvcEncryptedData(s);this.decryptBuffer(a.buffer).then(a=>{i.data=this.getAvcDecryptedUnit(s,a),this.decrypter.isSync()||this.decryptAvcSamples(e,t,n+1,r)}).catch(r)}decryptAvcSamples(e,t,n,r){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length)return void r();const i=e[t].units;for(;!(n>=i.length);n++){const s=i[n];if(!(s.data.length<=48||1!==s.type&&5!==s.type)&&(this.decryptAvcSample(e,t,n,r,s),!this.decrypter.isSync()))return}}}}class Lf{constructor(){this.VideoSample=null}createVideoSample(e,t,n){return{key:e,frame:!1,pts:t,dts:n,units:[],length:0}}getLastNalUnit(e){var t;let n,r=this.VideoSample;if(r&&0!==r.units.length||(r=e[e.length-1]),null!=(t=r)&&t.units){const e=r.units;n=e[e.length-1]}return n}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){const n=t.samples,r=n.length;if(!r)return void t.dropped++;{const t=n[r-1];e.pts=t.pts,e.dts=t.dts}}t.samples.push(e)}}parseNALu(e,t,n){const r=t.byteLength;let i=e.naluState||0;const s=i,a=[];let o,l,c,u=0,d=-1,h=0;for(-1===i&&(d=0,h=this.getNALuType(t,0),i=0,u=1);u<r;)if(o=t[u++],i)if(1!==i)if(o)if(1===o){if(l=u-i-1,d>=0){const e={data:t.subarray(d,l),type:h};a.push(e)}else{const n=this.getLastNalUnit(e.samples);n&&(s&&u<=4-s&&n.state&&(n.data=n.data.subarray(0,n.data.byteLength-s)),l>0&&(n.data=dc(n.data,t.subarray(0,l)),n.state=0))}u<r?(c=this.getNALuType(t,u),d=u,h=c,i=0):i=-1}else i=0;else i=3;else i=o?0:2;else i=o?0:1;if(d>=0&&i>=0){const e={data:t.subarray(d,r),type:h,state:i};a.push(e)}if(0===a.length){const n=this.getLastNalUnit(e.samples);n&&(n.data=dc(n.data,t))}return e.naluState=i,a}}class wf{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i}skipBits(e){let t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(t=(e-=this.bitsAvailable)>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const n=this.word>>>32-t;if(e>32&&Rl.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(0!==(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return 1===this.readBits(1)}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class Rf extends Lf{parsePES(e,t,n,r){const i=this.parseNALu(e,n.data,r);let s,a=this.VideoSample,o=!1;n.data=null,a&&i.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),i.forEach(r=>{var i,l;switch(r.type){case 1:{let t=!1;s=!0;const i=r.data;if(o&&i.length>4){const e=this.readSliceType(i);2!==e&&4!==e&&7!==e&&9!==e||(t=!0)}var c;if(t)null!=(c=a)&&c.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null);a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.frame=!0,a.key=t;break}case 5:s=!0,null!=(i=a)&&i.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 6:s=!0,pc(r.data,1,n.pts,t.samples);break;case 7:{var u,d;s=!0,o=!0;const t=r.data,n=this.readSPS(t);if(!e.sps||e.width!==n.width||e.height!==n.height||(null==(u=e.pixelRatio)?void 0:u[0])!==n.pixelRatio[0]||(null==(d=e.pixelRatio)?void 0:d[1])!==n.pixelRatio[1]){e.width=n.width,e.height=n.height,e.pixelRatio=n.pixelRatio,e.sps=[t];const r=t.subarray(1,4);let i="avc1.";for(let e=0;e<3;e++){let t=r[e].toString(16);t.length<2&&(t="0"+t),i+=t}e.codec=i}break}case 8:s=!0,e.pps=[r.data];break;case 9:s=!0,e.audFound=!0,null!=(l=a)&&l.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;case 12:s=!0;break;default:s=!1}if(a&&s){a.units.push(r)}}),r&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}getNALuType(e,t){return 31&e[t]}readSliceType(e){const t=new wf(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let n,r=8,i=8;for(let s=0;s<e;s++)0!==i&&(n=t.readEG(),i=(r+n+256)%256),r=0===i?r:i}readSPS(e){const t=new wf(e);let n,r,i,s=0,a=0,o=0,l=0;const c=t.readUByte.bind(t),u=t.readBits.bind(t),d=t.readUEG.bind(t),h=t.readBoolean.bind(t),f=t.skipBits.bind(t),g=t.skipEG.bind(t),p=t.skipUEG.bind(t),m=this.skipScalingList.bind(this);c();const v=c();if(u(5),f(3),c(),p(),100===v||110===v||122===v||244===v||44===v||83===v||86===v||118===v||128===v){const e=d();if(3===e&&f(1),p(),p(),f(1),h())for(r=3!==e?8:12,i=0;i<r;i++)h()&&m(i<6?16:64,t)}p();const y=d();if(0===y)d();else if(1===y)for(f(1),g(),g(),n=d(),i=0;i<n;i++)g();p(),f(1);const E=d(),b=d(),T=u(1);0===T&&f(1),f(1),h()&&(s=d(),a=d(),o=d(),l=d());let S=[1,1];if(h()&&h()){switch(c()){case 1:S=[1,1];break;case 2:S=[12,11];break;case 3:S=[10,11];break;case 4:S=[16,11];break;case 5:S=[40,33];break;case 6:S=[24,11];break;case 7:S=[20,11];break;case 8:S=[32,11];break;case 9:S=[80,33];break;case 10:S=[18,11];break;case 11:S=[15,11];break;case 12:S=[64,33];break;case 13:S=[160,99];break;case 14:S=[4,3];break;case 15:S=[3,2];break;case 16:S=[2,1];break;case 255:S=[c()<<8|c(),c()<<8|c()]}}return{width:Math.ceil(16*(E+1)-2*s-2*a),height:(2-T)*(b+1)*16-(T?2:4)*(o+l),pixelRatio:S}}}class If extends Lf{constructor(){super(...arguments),this.initVPS=null}parsePES(e,t,n,r){const i=this.parseNALu(e,n.data,r);let s,a=this.VideoSample,o=!1;n.data=null,a&&i.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),i.forEach(r=>{var i,l;switch(r.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),a.frame=!0,s=!0;break;case 16:case 17:case 18:case 21:var c;if(s=!0,o)null!=(c=a)&&c.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null);a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 19:case 20:s=!0,null!=(i=a)&&i.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 39:s=!0,pc(r.data,2,n.pts,t.samples);break;case 32:s=!0,e.vps||("object"!==typeof e.params&&(e.params={}),e.params=El(e.params,this.readVPS(r.data)),this.initVPS=r.data),e.vps=[r.data];break;case 33:if(s=!0,o=!0,void 0===e.vps||e.vps[0]===this.initVPS||void 0===e.sps||this.matchSPS(e.sps[0],r.data)||(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const t=this.readSPS(r.data);e.width=t.width,e.height=t.height,e.pixelRatio=t.pixelRatio,e.codec=t.codecString,e.sps=[],"object"!==typeof e.params&&(e.params={});for(const n in t.params)e.params[n]=t.params[n]}this.pushParameterSet(e.sps,r.data,e.vps),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0;break;case 34:if(s=!0,"object"===typeof e.params){if(!e.pps){e.pps=[];const t=this.readPPS(r.data);for(const n in t)e.params[n]=t[n]}this.pushParameterSet(e.pps,r.data,e.vps)}break;case 35:s=!0,e.audFound=!0,null!=(l=a)&&l.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;default:s=!1}if(a&&s){a.units.push(r)}}),r&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}pushParameterSet(e,t,n){(n&&n[0]===this.initVPS||!n&&!e.length)&&e.push(t)}getNALuType(e,t){return(126&e[t])>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let n=0;for(let r=0;r<e.byteLength;r++)r>=2&&3===e[r]&&0===e[r-1]&&0===e[r-2]||(t[n]=e[r],n++);return new Uint8Array(t.buffer,0,n)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new wf(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);return{numTemporalLayers:t.readBits(3)+1,temporalIdNested:t.readBoolean()}}readSPS(e){const t=new wf(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const n=t.readBits(3);t.readBoolean();const r=t.readBits(2),i=t.readBoolean(),s=t.readBits(5),a=t.readUByte(),o=t.readUByte(),l=t.readUByte(),c=t.readUByte(),u=t.readUByte(),d=t.readUByte(),h=t.readUByte(),f=t.readUByte(),g=t.readUByte(),p=t.readUByte(),m=t.readUByte(),v=[],y=[];for(let Y=0;Y<n;Y++)v.push(t.readBoolean()),y.push(t.readBoolean());if(n>0)for(let Y=n;Y<8;Y++)t.readBits(2);for(let Y=0;Y<n;Y++)v[Y]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),y[Y]&&t.readUByte();t.readUEG();const E=t.readUEG();3==E&&t.skipBits(1);const b=t.readUEG(),T=t.readUEG(),S=t.readBoolean();let _=0,k=0,A=0,L=0;S&&(_+=t.readUEG(),k+=t.readUEG(),A+=t.readUEG(),L+=t.readUEG());const w=t.readUEG(),R=t.readUEG(),I=t.readUEG();for(let Y=t.readBoolean()?0:n;Y<=n;Y++)t.skipUEG(),t.skipUEG(),t.skipUEG();t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.readBoolean()){if(t.readBoolean())for(let e=0;e<4;e++)for(let n=0;n<(3===e?2:6);n++){if(t.readBoolean()){const n=Math.min(64,1<<4+(e<<1));e>1&&t.readEG();for(let e=0;e<n;e++)t.readEG()}else t.readUEG()}}t.readBoolean(),t.readBoolean();t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const x=t.readUEG();let C=0;for(let Y=0;Y<x;Y++){let e=!1;if(0!==Y&&(e=t.readBoolean()),e){Y===x&&t.readUEG(),t.readBoolean(),t.readUEG();let e=0;for(let n=0;n<=C;n++){const n=t.readBoolean();let r=!1;n||(r=t.readBoolean()),(n||r)&&e++}C=e}else{const e=t.readUEG(),n=t.readUEG();C=e+n;for(let r=0;r<e;r++)t.readUEG(),t.readBoolean();for(let r=0;r<n;r++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const e=t.readUEG();for(let n=0;n<e;n++){for(let e=0;e<I+4;e++)t.readBits(1);t.readBits(1)}}let D=0,P=1,O=1,M=!0,F=1,N=0;t.readBoolean(),t.readBoolean();let B=!1;if(t.readBoolean()){if(t.readBoolean()){const e=t.readUByte();e>0&&e<16?(P=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][e-1],O=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][e-1]):255===e&&(P=t.readBits(16),O=t.readBits(16))}t.readBoolean()&&t.readBoolean();if(t.readBoolean()){t.readBits(3),t.readBoolean();t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())}t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),B=t.readBoolean(),B&&(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG());if(t.readBoolean()){F=t.readBits(32),N=t.readBits(32);t.readBoolean()&&t.readUEG();if(t.readBoolean()){const e=t.readBoolean(),r=t.readBoolean();let i=!1;(e||r)&&(i=t.readBoolean(),i&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),i&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let s=0;s<=n;s++){M=t.readBoolean();let n=!1;M||t.readBoolean()?t.readEG():n=t.readBoolean();const s=n?1:t.readUEG()+1;if(e)for(let e=0;e<s;e++)t.readUEG(),t.readUEG(),i&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(r)for(let e=0;e<s;e++)t.readUEG(),t.readUEG(),i&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),D=t.readUEG())}let U=b,G=T;if(S){let e=1,t=1;1===E?e=t=2:2==E&&(e=2),U=b-e*k-e*_,G=T-t*L-t*A}const H=r?["A","B","C"][r]:"",j=a<<24|o<<16|l<<8|c;let z=0;for(let Y=0;Y<32;Y++)z=(z|(j>>Y&1)<<31-Y)>>>0;let V=z.toString(16);1===s&&"2"===V&&(V="6");const K=i?"H":"L";return{codecString:"hvc1.".concat(H).concat(s,".").concat(V,".").concat(K).concat(m,".B0"),params:{general_tier_flag:i,general_profile_idc:s,general_profile_space:r,general_profile_compatibility_flags:[a,o,l,c],general_constraint_indicator_flags:[u,d,h,f,g,p],general_level_idc:m,bit_depth:w+8,bit_depth_luma_minus8:w,bit_depth_chroma_minus8:R,min_spatial_segmentation_idc:D,chroma_format_idc:E,frame_rate:{fixed:M,fps:N/F}},width:U,height:G,pixelRatio:[P,O]}}readPPS(e){const t=new wf(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2);t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const n=t.readBoolean(),r=t.readBoolean();let i=1;return r&&n?i=0:r?i=3:n&&(i=2),{parallelismType:i}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const xf=188;class Cf{constructor(e,t,n,r){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.logger=r,this.videoParser=null}static probe(e,t){const n=Cf.syncOffset(e);return n>0&&t.warn("MPEG2-TS detected but first sync word found @ offset ".concat(n)),-1!==n}static syncOffset(e){const t=e.length;let n=Math.min(940,t-xf)+1,r=0;for(;r<n;){let i=!1,s=-1,a=0;for(let o=r;o<t;o+=xf){if(71!==e[o]||t-o!==xf&&71!==e[o+xf]){if(a)return-1;break}if(a++,-1===s&&(s=o,0!==s&&(n=Math.min(s+18612,e.length-xf)+1)),i||(i=0===Df(e,o)),i&&a>1&&(0===s&&a>2||o+xf>n))return s}r++}return-1}static createTrack(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:Xl[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}}resetInitSegment(e,t,n,r){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Cf.createTrack("video"),this._videoTrack.duration=r,this._audioTrack=Cf.createTrack("audio",r),this._id3Track=Cf.createTrack("id3"),this._txtTrack=Cf.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:n}=this;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];r||(this.sampleAes=null);const s=this._videoTrack,a=this._audioTrack,o=this._id3Track,l=this._txtTrack;let c=s.pid,u=s.pesData,d=a.pid,h=o.pid,f=a.pesData,g=o.pesData,p=null,m=this.pmtParsed,v=this._pmtId,y=e.length;if(this.remainderData&&(y=(e=dc(this.remainderData,e)).length,this.remainderData=null),y<xf&&!i)return this.remainderData=e,{audioTrack:a,videoTrack:s,id3Track:o,textTrack:l};const E=Math.max(0,Cf.syncOffset(e));y-=(y-E)%xf,y<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,y,e.buffer.byteLength-y));let b=0;for(let S=E;S<y;S+=xf)if(71===e[S]){const t=!!(64&e[S+1]),i=Df(e,S);let y;if((48&e[S+3])>>4>1){if(y=S+5+e[S+4],y===S+xf)continue}else y=S+4;switch(i){case c:t&&(u&&(n=Nf(u,this.logger))&&(this.readyVideoParser(s.segmentCodec),null!==this.videoParser&&this.videoParser.parsePES(s,l,n,!1)),u={data:[],size:0}),u&&(u.data.push(e.subarray(y,S+xf)),u.size+=S+xf-y);break;case d:if(t){if(f&&(n=Nf(f,this.logger)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,n);break;case"mp3":this.parseMPEGPES(a,n);break;case"ac3":this.parseAC3PES(a,n)}f={data:[],size:0}}f&&(f.data.push(e.subarray(y,S+xf)),f.size+=S+xf-y);break;case h:t&&(g&&(n=Nf(g,this.logger))&&this.parseID3PES(o,n),g={data:[],size:0}),g&&(g.data.push(e.subarray(y,S+xf)),g.size+=S+xf-y);break;case 0:t&&(y+=e[y]+1),v=this._pmtId=Pf(e,y);break;case v:{t&&(y+=e[y]+1);const n=Of(e,y,this.typeSupported,r,this.observer,this.logger);c=n.videoPid,c>0&&(s.pid=c,s.segmentCodec=n.segmentVideoCodec),d=n.audioPid,d>0&&(a.pid=d,a.segmentCodec=n.segmentAudioCodec),h=n.id3Pid,h>0&&(o.pid=h),null===p||m||(this.logger.warn("MPEG-TS PMT found at ".concat(S," after unknown PID '").concat(p,"'. Backtracking to sync byte @").concat(E," to parse all TS packets.")),p=null,S=E-188),m=this.pmtParsed=!0;break}case 17:case 8191:break;default:p=i}}else b++;b>0&&Mf(this.observer,new Error("Found ".concat(b," TS packet/s that do not start with 0x47")),void 0,this.logger),s.pesData=u,a.pesData=f,o.pesData=g;const T={audioTrack:a,videoTrack:s,id3Track:o,textTrack:l};return i&&this.extractRemainingSamples(T),T}flush(){const{remainderData:e}=this;let t;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:n,id3Track:r,textTrack:i}=e,s=n.pesData,a=t.pesData,o=r.pesData;let l;if(s&&(l=Nf(s,this.logger))?(this.readyVideoParser(n.segmentCodec),null!==this.videoParser&&(this.videoParser.parsePES(n,i,l,!0),n.pesData=null)):n.pesData=s,a&&(l=Nf(a,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,l);break;case"mp3":this.parseMPEGPES(t,l);break;case"ac3":this.parseAC3PES(t,l)}t.pesData=null}else null!=a&&a.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=a;o&&(l=Nf(o,this.logger))?(this.parseID3PES(r,l),r.pesData=null):r.pesData=o}demuxSampleAes(e,t,n){const r=this.demux(e,n,!0,!this.config.progressive),i=this.sampleAes=new Af(this.observer,this.config,t);return this.decrypt(r,i)}readyVideoParser(e){null===this.videoParser&&("avc"===e?this.videoParser=new Rf:"hevc"===e&&(this.videoParser=new If))}decrypt(e,t){return new Promise(n=>{const{audioTrack:r,videoTrack:i}=e;r.samples&&"aac"===r.segmentCodec?t.decryptAacSamples(r.samples,0,()=>{i.samples?t.decryptAvcSamples(i.samples,0,0,()=>{n(e)}):n(e)}):i.samples&&t.decryptAvcSamples(i.samples,0,0,()=>{n(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let n=0;const r=this.aacOverFlow;let i,s,a,o=t.data;if(r){this.aacOverFlow=null;const t=r.missing,i=r.sample.unit.byteLength;if(-1===t)o=dc(r.sample.unit,o);else{const s=i-t;r.sample.unit.set(o.subarray(0,t),s),e.samples.push(r.sample),n=r.missing}}for(i=n,s=o.length;i<s-1&&!Kh(o,i);i++);if(i!==n){let e;const t=i<s-1;if(e=t?"AAC PES did not start with ADTS header,offset:".concat(i):"No ADTS header found in AAC PES",Mf(this.observer,new Error(e),t,this.logger),!t)return}if(Wh(e,this.observer,o,i,this.audioCodec),void 0!==t.pts)a=t.pts;else{if(!r)return void this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");{const t=qh(e.samplerate);a=r.sample.pts+t}}let l,c=0;for(;i<s;){if(l=Xh(e,o,i,a,c),i+=l.length,l.missing){this.aacOverFlow=l;break}for(c++;i<s-1&&!Kh(o,i);i++);}}parseMPEGPES(e,t){const n=t.data,r=n.length;let i=0,s=0;const a=t.pts;if(void 0!==a)for(;s<r;)if(yf(n,s)){const t=pf(e,n,s,a,i);if(!t)break;s+=t.length,i++}else s++;else this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")}parseAC3PES(e,t){{const n=t.data,r=t.pts;if(void 0===r)return void this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");const i=n.length;let s,a=0,o=0;for(;o<i&&(s=Sf(e,n,o,r,a++))>0;)o+=s}}parseID3PES(e,t){if(void 0===t.pts)return void this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");const n=El({},t,{type:this._videoTrack?af.emsg:af.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function Df(e,t){return((31&e[t+1])<<8)+e[t+2]}function Pf(e,t){return(31&e[t+10])<<8|e[t+11]}function Of(e,t,n,r,i,s){const a={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<o;){const o=Df(e,t),l=(15&e[t+3])<<8|e[t+4];switch(e[t]){case 207:if(!r){Ff("ADTS AAC",s);break}case 15:-1===a.audioPid&&(a.audioPid=o);break;case 21:-1===a.id3Pid&&(a.id3Pid=o);break;case 219:if(!r){Ff("H.264",s);break}case 27:-1===a.videoPid&&(a.videoPid=o);break;case 3:case 4:n.mpeg||n.mp3?-1===a.audioPid&&(a.audioPid=o,a.segmentAudioCodec="mp3"):s.log("MPEG audio found, not supported in this browser");break;case 193:if(!r){Ff("AC-3",s);break}case 129:n.ac3?-1===a.audioPid&&(a.audioPid=o,a.segmentAudioCodec="ac3"):s.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===a.audioPid&&l>0){let r=t+5,i=l;for(;i>2;){if(106===e[r])!0!==n.ac3?s.log("AC-3 audio found, not supported in this browser for now"):(a.audioPid=o,a.segmentAudioCodec="ac3");const t=e[r+1]+2;r+=t,i-=t}}break;case 194:case 135:return Mf(i,new Error("Unsupported EC-3 in M2TS found"),void 0,s),a;case 36:-1===a.videoPid&&(a.videoPid=o,a.segmentVideoCodec="hevc",s.log("HEVC in M2TS found"))}t+=l+5}return a}function Mf(e,t,n,r){r.warn("parsing error: ".concat(t.message)),e.emit(ll.ERROR,ll.ERROR,{type:al.MEDIA_ERROR,details:ol.FRAG_PARSING_ERROR,fatal:!1,levelRetry:n,error:t,reason:t.message})}function Ff(e,t){t.log("".concat(e," with AES-128-CBC encryption found in unencrypted stream"))}function Nf(e,t){let n,r,i,s,a,o=0;const l=e.data;if(!e||0===e.size)return null;for(;l[0].length<19&&l.length>1;)l[0]=dc(l[0],l[1]),l.splice(1,1);n=l[0];if(1===(n[0]<<16)+(n[1]<<8)+n[2]){if(r=(n[4]<<8)+n[5],r&&r>e.size-6)return null;const c=n[7];192&c&&(s=536870912*(14&n[9])+4194304*(255&n[10])+16384*(254&n[11])+128*(255&n[12])+(254&n[13])/2,64&c?(a=536870912*(14&n[14])+4194304*(255&n[15])+16384*(254&n[16])+128*(255&n[17])+(254&n[18])/2,s-a>54e5&&(t.warn("".concat(Math.round((s-a)/9e4),"s delta between PTS and DTS, align them")),s=a)):a=s),i=n[8];let u=i+9;if(e.size<=u)return null;e.size-=u;const d=new Uint8Array(e.size);for(let e=0,t=l.length;e<t;e++){n=l[e];let t=n.byteLength;if(u){if(u>t){u-=t;continue}n=n.subarray(u),t-=u,u=0}d.set(n,o),o+=t}return r&&(r-=i+3),{data:d,pts:s,dts:a,len:r}}return null}class Bf{static getSilentFrame(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}const Uf=Math.pow(2,32)-1;class Gf{static init(){let e;for(e in Gf.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},Gf.types)Gf.types.hasOwnProperty(e)&&(Gf.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Gf.HDLR_TYPES={video:t,audio:n};const r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);Gf.STTS=Gf.STSC=Gf.STCO=i,Gf.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Gf.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Gf.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),Gf.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const s=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]);Gf.FTYP=Gf.box(Gf.types.ftyp,s,o,s,a),Gf.DINF=Gf.box(Gf.types.dinf,Gf.box(Gf.types.dref,r))}static box(e){let t=8;for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];let s=r.length;const a=s;for(;s--;)t+=r[s].byteLength;const o=new Uint8Array(t);for(o[0]=t>>24&255,o[1]=t>>16&255,o[2]=t>>8&255,o[3]=255&t,o.set(e,4),s=0,t=8;s<a;s++)o.set(r[s],t),t+=r[s].byteLength;return o}static hdlr(e){return Gf.box(Gf.types.hdlr,Gf.HDLR_TYPES[e])}static mdat(e){return Gf.box(Gf.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(Uf+1)),r=Math.floor(t%(Uf+1));return Gf.box(Gf.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))}static mdia(e){return Gf.box(Gf.types.mdia,Gf.mdhd(e.timescale||0,e.duration||0),Gf.hdlr(e.type),Gf.minf(e))}static mfhd(e){return Gf.box(Gf.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}static minf(e){return"audio"===e.type?Gf.box(Gf.types.minf,Gf.box(Gf.types.smhd,Gf.SMHD),Gf.DINF,Gf.stbl(e)):Gf.box(Gf.types.minf,Gf.box(Gf.types.vmhd,Gf.VMHD),Gf.DINF,Gf.stbl(e))}static moof(e,t,n){return Gf.box(Gf.types.moof,Gf.mfhd(e),Gf.traf(n,t))}static moov(e){let t=e.length;const n=[];for(;t--;)n[t]=Gf.trak(e[t]);return Gf.box.apply(null,[Gf.types.moov,Gf.mvhd(e[0].timescale||0,e[0].duration||0)].concat(n).concat(Gf.mvex(e)))}static mvex(e){let t=e.length;const n=[];for(;t--;)n[t]=Gf.trex(e[t]);return Gf.box.apply(null,[Gf.types.mvex,...n])}static mvhd(e,t){t*=e;const n=Math.floor(t/(Uf+1)),r=Math.floor(t%(Uf+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Gf.box(Gf.types.mvhd,i)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);let r,i;for(r=0;r<t.length;r++)i=t[r].flags,n[r+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return Gf.box(Gf.types.sdtp,n)}static stbl(e){return Gf.box(Gf.types.stbl,Gf.stsd(e),Gf.box(Gf.types.stts,Gf.STTS),Gf.box(Gf.types.stsc,Gf.STSC),Gf.box(Gf.types.stsz,Gf.STSZ),Gf.box(Gf.types.stco,Gf.STCO))}static avc1(e){let t,n,r,i=[],s=[];for(t=0;t<e.sps.length;t++)n=e.sps[t],r=n.byteLength,i.push(r>>>8&255),i.push(255&r),i=i.concat(Array.prototype.slice.call(n));for(t=0;t<e.pps.length;t++)n=e.pps[t],r=n.byteLength,s.push(r>>>8&255),s.push(255&r),s=s.concat(Array.prototype.slice.call(n));const a=Gf.box(Gf.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps.length].concat(i).concat([e.pps.length]).concat(s))),o=e.width,l=e.height,c=e.pixelRatio[0],u=e.pixelRatio[1];return Gf.box(Gf.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,Gf.box(Gf.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Gf.box(Gf.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,u>>24,u>>16&255,u>>8&255,255&u])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,255&t,0,0])}static mp4a(e){return Gf.box(Gf.types.mp4a,Gf.audioStsd(e),Gf.box(Gf.types.esds,Gf.esds(e)))}static mp3(e){return Gf.box(Gf.types[".mp3"],Gf.audioStsd(e))}static ac3(e){return Gf.box(Gf.types["ac-3"],Gf.audioStsd(e),Gf.box(Gf.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if("audio"===e.type){if("aac"===t)return Gf.box(Gf.types.stsd,Gf.STSD,Gf.mp4a(e));if("ac3"===t&&e.config)return Gf.box(Gf.types.stsd,Gf.STSD,Gf.ac3(e));if("mp3"===t&&"mp3"===e.codec)return Gf.box(Gf.types.stsd,Gf.STSD,Gf.mp3(e))}else{if(!e.pps||!e.sps)throw new Error("video track missing pps or sps");if("avc"===t)return Gf.box(Gf.types.stsd,Gf.STSD,Gf.avc1(e));if("hevc"===t&&e.vps)return Gf.box(Gf.types.stsd,Gf.STSD,Gf.hvc1(e))}throw new Error("unsupported ".concat(e.type," segment codec (").concat(t,"/").concat(e.codec,")"))}static tkhd(e){const t=e.id,n=(e.duration||0)*(e.timescale||0),r=e.width||0,i=e.height||0,s=Math.floor(n/(Uf+1)),a=Math.floor(n%(Uf+1));return Gf.box(Gf.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,a>>24,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,i>>8&255,255&i,0,0]))}static traf(e,t){const n=Gf.sdtp(e),r=e.id,i=Math.floor(t/(Uf+1)),s=Math.floor(t%(Uf+1));return Gf.box(Gf.types.traf,Gf.box(Gf.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),Gf.box(Gf.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,s>>24,s>>16&255,s>>8&255,255&s])),Gf.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,Gf.box(Gf.types.trak,Gf.tkhd(e),Gf.mdia(e))}static trex(e){const t=e.id;return Gf.box(Gf.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const n=e.samples||[],r=n.length,i=12+16*r,s=new Uint8Array(i);let a,o,l,c,u,d;for(t+=8+i,s.set(["video"===e.type?1:0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,255&r,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),a=0;a<r;a++)o=n[a],l=o.duration,c=o.size,u=o.flags,d=o.cts,s.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,c>>>24&255,c>>>16&255,c>>>8&255,255&c,u.isLeading<<2|u.dependsOn,u.isDependedOn<<6|u.hasRedundancy<<4|u.paddingValue<<1|u.isNonSync,61440&u.degradPrio,15&u.degradPrio,d>>>24&255,d>>>16&255,d>>>8&255,255&d],12+16*a);return Gf.box(Gf.types.trun,s)}static initSegment(e){Gf.types||Gf.init();const t=Gf.moov(e);return dc(Gf.FTYP,t)}static hvc1(e){const t=e.params,n=[e.vps,e.sps,e.pps],r=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),3|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),n.length]);let i=r.length;for(let h=0;h<n.length;h+=1){i+=3;for(let e=0;e<n[h].length;e+=1)i+=2+n[h][e].length}const s=new Uint8Array(i);s.set(r,0),i=r.length;const a=n.length-1;for(let h=0;h<n.length;h+=1){s.set(new Uint8Array([32+h|(h===a?128:0),0,n[h].length]),i),i+=3;for(let e=0;e<n[h].length;e+=1)s.set(new Uint8Array([n[h][e].length>>8,255&n[h][e].length]),i),i+=2,s.set(n[h][e],i),i+=n[h][e].length}const o=Gf.box(Gf.types.hvcC,s),l=e.width,c=e.height,u=e.pixelRatio[0],d=e.pixelRatio[1];return Gf.box(Gf.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,Gf.box(Gf.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Gf.box(Gf.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,d>>24,d>>16&255,d>>8&255,255&d])))}}Gf.types=void 0,Gf.HDLR_TYPES=void 0,Gf.STTS=void 0,Gf.STSC=void 0,Gf.STCO=void 0,Gf.STSZ=void 0,Gf.VMHD=void 0,Gf.SMHD=void 0,Gf.STSD=void 0,Gf.FTYP=void 0,Gf.DINF=void 0;function Hf(e,t){const n=e*t*(arguments.length>2&&void 0!==arguments[2]?arguments[2]:1);return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?Math.round(n):n}function jf(e){return Hf(e,1e3,1/9e4,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}function zf(e){const{baseTime:t,timescale:n,trackId:r}=e;return"".concat(t/n," (").concat(t,"/").concat(n,") trackId: ").concat(r)}let Vf,Kf=null,Yf=null;function Wf(e,t,n,r){return{duration:t,size:n,cts:r,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class qf extends Sl{constructor(e,t,n,r){if(super("mp4-remuxer",r),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,null===Kf){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Kf=e?parseInt(e[1]):0}if(null===Yf){const e=navigator.userAgent.match(/Safari\/(\d+)/i);Yf=e?parseInt(e[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){const t=this._initPTS;t&&e&&e.trackId===t.trackId&&e.baseTime===t.baseTime&&e.timescale===t.timescale||this.log("Reset initPTS: ".concat(t?zf(t):t," > ").concat(e?zf(e):e)),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const n=e[0].pts,r=e.reduce((e,r)=>{let i=r.pts,s=i-e;return s<-4294967296&&(t=!0,i=Xf(i,n),s=i-e),s>0?e:i},n);return t&&this.debug("PTS rollover detected"),r}remux(e,t,n,r,i,s,a,o){let l,c,u,d,h,f,g=i,p=i;const m=e.pid>-1,v=t.pid>-1,y=t.samples.length,E=e.samples.length>0,b=a&&y>0||y>1;if((!m||E)&&(!v||b)||this.ISGenerated||a){if(this.ISGenerated){var T,S,_,k;const e=this.videoTrackConfig;(e&&(t.width!==e.width||t.height!==e.height||(null==(T=t.pixelRatio)?void 0:T[0])!==(null==(S=e.pixelRatio)?void 0:S[0])||(null==(_=t.pixelRatio)?void 0:_[1])!==(null==(k=e.pixelRatio)?void 0:k[1]))||!e&&b||null===this.nextAudioTs&&E)&&this.resetInitSegment()}this.ISGenerated||(u=this.generateIS(e,t,i,s));const n=this.isVideoContiguous;let r,a=-1;if(b&&(a=function(e){for(let t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!n&&this.config.forceKeyFrameOnDiscontinuity))if(f=!0,a>0){this.warn("Dropped ".concat(a," out of ").concat(y," video samples due to a missing keyframe"));const e=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(a),t.dropped+=a,p+=(t.samples[0].pts-e)/t.inputTimeScale,r=p}else-1===a&&(this.warn("No keyframe found out of ".concat(y," video samples")),f=!1);if(this.ISGenerated){if(E&&b){const n=this.getVideoStartPts(t.samples),r=(Xf(e.samples[0].pts,n)-n)/t.inputTimeScale;g+=Math.max(0,r),p+=Math.max(0,-r)}if(E){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),u=this.generateIS(e,t,i,s)),c=this.remuxAudio(e,g,this.isAudioContiguous,s,v||b||o===gl?p:void 0),b){const r=c?c.endPTS-c.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),u=this.generateIS(e,t,i,s)),l=this.remuxVideo(t,p,n,r)}}else b&&(l=this.remuxVideo(t,p,n,0));l&&(l.firstKeyFrame=a,l.independent=-1!==a,l.firstKeyFramePTS=r)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(h=Qf(n,i,this._initPTS,this._initDTS)),r.samples.length&&(d=$f(r,i,this._initPTS))),{audio:c,video:l,initSegment:u,independent:f,text:d,id3:h}}computeInitPts(e,t,n,r){const i=Math.round(n*t);let s=Xf(e,i);if(s<i+t)for(this.log("Adjusting PTS for rollover in timeline near ".concat((i-s)/t," ").concat(r));s<i+t;)s+=8589934592;return s-i}generateIS(e,t,n,r){const i=e.samples,s=t.samples,a=this.typeSupported,o={},l=this._initPTS;let c,u,d,h=!l||r,f="audio/mp4",g=-1;if(h&&(c=u=1/0),e.config&&i.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":a.mpeg?(f="audio/mpeg",e.codec=""):a.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3"}o.audio={id:"audio",container:f,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&a.mpeg?new Uint8Array(0):Gf.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(g=e.id,d=e.inputTimeScale,l&&d===l.timescale?h=!1:c=u=this.computeInitPts(i[0].pts,d,n,"audio"))}if(t.sps&&t.pps&&s.length){if(t.timescale=t.inputTimeScale,o.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:Gf.initSegment([t]),metadata:{width:t.width,height:t.height}},h)if(g=t.id,d=t.inputTimeScale,l&&d===l.timescale)h=!1;else{const e=this.getVideoStartPts(s),t=Xf(s[0].dts,e),r=this.computeInitPts(t,d,n,"video"),i=this.computeInitPts(e,d,n,"video");u=Math.min(u,r),c=Math.min(c,i)}this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(o).length)return this.ISGenerated=!0,h?(l&&this.warn("Timestamps at playlist time: ".concat(r?"":"~").concat(n," ").concat(c/d," != initPTS: ").concat(l.baseTime/l.timescale," (").concat(l.baseTime,"/").concat(l.timescale,") trackId: ").concat(l.trackId)),this.log("Found initPTS at playlist time: ".concat(n," offset: ").concat(c/d," (").concat(c,"/").concat(d,") trackId: ").concat(g)),this._initPTS={baseTime:c,timescale:d,trackId:g},this._initDTS={baseTime:u,timescale:d,trackId:g}):c=d=void 0,{tracks:o,initPTS:c,timescale:d,trackId:g}}remuxVideo(e,t,n,r){const i=e.inputTimeScale,s=e.samples,a=[],o=s.length,l=this._initPTS,c=l.baseTime*i/l.timescale;let u,d,h=this.nextVideoTs,f=8,g=this.videoSampleDuration,p=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,v=!1;if(!n||null===h){const e=c+t*i,r=s[0].pts-Xf(s[0].dts,s[0].pts);Kf&&null!==h&&Math.abs(e-r-(h+c))<15e3?n=!0:h=e-r-c}const y=h+c;for(let M=0;M<o;M++){const e=s[M];e.pts=Xf(e.pts,y),e.dts=Xf(e.dts,y),e.dts<s[M>0?M-1:M].dts&&(v=!0)}v&&s.sort(function(e,t){const n=e.dts-t.dts,r=e.pts-t.pts;return n||r}),u=s[0].dts,d=s[s.length-1].dts;const E=d-u,b=E?Math.round(E/(o-1)):g||e.inputTimeScale/30;if(n){const n=u-y,r=n>b,i=n<-1;if((r||i)&&(r?this.warn("".concat((e.segmentCodec||"").toUpperCase(),": ").concat(jf(n,!0)," ms (").concat(n,"dts) hole between fragments detected at ").concat(t.toFixed(3))):this.warn("".concat((e.segmentCodec||"").toUpperCase(),": ").concat(jf(-n,!0)," ms (").concat(n,"dts) overlapping between fragments detected at ").concat(t.toFixed(3))),!i||y>=s[0].pts||Kf)){u=y;const e=s[0].pts-n;if(r)s[0].dts=u,s[0].pts=e;else{let t=!0;for(let r=0;r<s.length&&!(s[r].dts>e&&t);r++){const e=s[r].pts;if(s[r].dts-=n,s[r].pts-=n,r<s.length-1){const n=s[r+1].pts;t=n<=s[r].pts==n<=e}}}this.log("Video: Initial PTS/DTS adjusted: ".concat(jf(e,!0),"/").concat(jf(u,!0),", delta: ").concat(jf(n,!0)," ms"))}}u=Math.max(0,u);let T=0,S=0,_=u;for(let M=0;M<o;M++){const e=s[M],t=e.units,n=t.length;let r=0;for(let i=0;i<n;i++)r+=t[i].data.length;S+=r,T+=n,e.length=r,e.dts<_?(e.dts=_,_+=b/4|0||1):_=e.dts,p=Math.min(e.pts,p),m=Math.max(e.pts,m)}d=s[o-1].dts;const k=S+4*T+8;let A;try{A=new Uint8Array(k)}catch(O){return void this.observer.emit(ll.ERROR,ll.ERROR,{type:al.MUX_ERROR,details:ol.REMUX_ALLOC_ERROR,fatal:!1,error:O,bytes:k,reason:"fail allocating video mdat ".concat(k)})}const L=new DataView(A.buffer);L.setUint32(0,k),A.set(Gf.types.mdat,4);let w=!1,R=Number.POSITIVE_INFINITY,I=Number.POSITIVE_INFINITY,x=Number.NEGATIVE_INFINITY,C=Number.NEGATIVE_INFINITY;for(let M=0;M<o;M++){const e=s[M],t=e.units;let n,l=0;for(let r=0,i=t.length;r<i;r++){const e=t[r],n=e.data,i=e.data.byteLength;L.setUint32(f,i),f+=4,A.set(n,f),f+=i,l+=4+i}if(M<o-1)g=s[M+1].dts-e.dts,n=s[M+1].pts-e.pts;else{const t=this.config,a=M>0?e.dts-s[M-1].dts:b;if(n=M>0?e.pts-s[M-1].pts:b,t.stretchShortVideoTrack&&null!==this.nextAudioTs){const n=Math.floor(t.maxBufferHole*i),s=(r?p+r*i:this.nextAudioTs+c)-e.pts;s>n?(g=s-a,g<0?g=a:w=!0,this.log("It is approximately ".concat(s/90," ms to the next segment; using duration ").concat(g/90," ms for the last video frame."))):g=a}else g=a}const u=Math.round(e.pts-e.dts);R=Math.min(R,g),x=Math.max(x,g),I=Math.min(I,n),C=Math.max(C,n),a.push(Wf(e.key,g,l,u))}if(a.length)if(Kf){if(Kf<70){const e=a[0].flags;e.dependsOn=2,e.isNonSync=0}}else if(Yf&&C-I<x-R&&b/x<.025&&0===a[0].cts){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let e=u;for(let t=0,n=a.length;t<n;t++){const r=e+a[t].duration,i=e+a[t].cts;if(t<n-1){const e=r+a[t+1].cts;a[t].duration=e-i}else a[t].duration=t?a[t-1].duration:b;a[t].cts=0,e=r}}g=w||!g?b:g;const D=d+g;this.nextVideoTs=h=D-c,this.videoSampleDuration=g,this.isVideoContiguous=!0;const P={data1:Gf.moof(e.sequenceNumber++,u,El(e,{samples:a})),data2:A,startPTS:(p-c)/i,endPTS:(m+g-c)/i,startDTS:(u-c)/i,endDTS:h/i,type:"video",hasAudio:!1,hasVideo:!0,nb:a.length,dropped:e.dropped};return e.samples=[],e.dropped=0,P}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return 1152;case"ac3":return 1536;default:return 1024}}remuxAudio(e,t,n,r,i){const s=e.inputTimeScale,a=s/(e.samplerate?e.samplerate:s),o=this.getSamplesPerFrame(e),l=o*a,c=this._initPTS,u="mp3"===e.segmentCodec&&this.typeSupported.mpeg,d=[],h=void 0!==i;let f=e.samples,g=u?0:8,p=this.nextAudioTs||-1;const m=c.baseTime*s/c.timescale,v=m+t*s;if(this.isAudioContiguous=n=n||f.length&&p>0&&(r&&Math.abs(v-(p+m))<9e3||Math.abs(Xf(f[0].pts,v)-(p+m))<20*l),f.forEach(function(e){e.pts=Xf(e.pts,v)}),!n||p<0){const e=f.length;if(f=f.filter(e=>e.pts>=0),e!==f.length&&this.warn("Removed ".concat(f.length-e," of ").concat(e," samples (initPTS ").concat(m," / ").concat(s,")")),!f.length)return;p=0===i?0:r&&!h?Math.max(0,v-m):f[0].pts-m}if("aac"===e.segmentCodec){const t=this.config.maxAudioFramesDrift;for(let n=0,r=p+m;n<f.length;n++){const i=f[n],a=i.pts,o=a-r,c=Math.abs(1e3*o/s);if(o<=-t*l&&h)0===n&&(this.warn("Audio frame @ ".concat((a/s).toFixed(3),"s overlaps marker by ").concat(Math.round(1e3*o/s)," ms.")),this.nextAudioTs=p=a-m,r=a);else if(o>=t*l&&c<1e4&&h){let t=Math.round(o/l);for(r=a-t*l;r<0&&t&&l;)t--,r+=l;0===n&&(this.nextAudioTs=p=r-m),this.warn("Injecting ".concat(t," audio frames @ ").concat(((r-m)/s).toFixed(3),"s due to ").concat(Math.round(1e3*o/s)," ms gap."));for(let s=0;s<t;s++){let t=Bf.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);t||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),t=i.unit.subarray()),f.splice(n,0,{unit:t,pts:r}),r+=l,n++}}i.pts=r,r+=l}}let y,E=null,b=null,T=0,S=f.length;for(;S--;)T+=f[S].unit.byteLength;for(let x=0,C=f.length;x<C;x++){const t=f[x],r=t.unit;let i=t.pts;if(null!==b){d[x-1].duration=Math.round((i-b)/a)}else{if(n&&"aac"===e.segmentCodec&&(i=p+m),E=i,!(T>0))return;T+=g;try{y=new Uint8Array(T)}catch(I){return void this.observer.emit(ll.ERROR,ll.ERROR,{type:al.MUX_ERROR,details:ol.REMUX_ALLOC_ERROR,fatal:!1,error:I,bytes:T,reason:"fail allocating audio mdat ".concat(T)})}if(!u){new DataView(y.buffer).setUint32(0,T),y.set(Gf.types.mdat,4)}}y.set(r,g);const s=r.byteLength;g+=s,d.push(Wf(!0,o,s,0)),b=i}const _=d.length;if(!_)return;const k=d[d.length-1];p=b-m,this.nextAudioTs=p+a*k.duration;const A=u?new Uint8Array(0):Gf.moof(e.sequenceNumber++,E/a,El({},e,{samples:d}));e.samples=[];const L=(E-m)/s,w=p/s,R={data1:A,data2:y,startPTS:L,endPTS:w,startDTS:L,endDTS:w,type:"audio",hasAudio:!0,hasVideo:!1,nb:_};return this.isAudioContiguous=!0,R}}function Xf(e,t){let n;if(null===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e}function Qf(e,t,n,r){const i=e.samples.length;if(!i)return;const s=e.inputTimeScale;for(let o=0;o<i;o++){const i=e.samples[o];i.pts=Xf(i.pts-n.baseTime*s/n.timescale,t*s)/s,i.dts=Xf(i.dts-r.baseTime*s/r.timescale,t*s)/s}const a=e.samples;return e.samples=[],{samples:a}}function $f(e,t,n){const r=e.samples.length;if(!r)return;const i=e.inputTimeScale;for(let a=0;a<r;a++){const r=e.samples[a];r.pts=Xf(r.pts-n.baseTime*i/n.timescale,t*i)/i}e.samples.sort((e,t)=>e.pts-t.pts);const s=e.samples;return e.samples=[],{samples:s}}function Zf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return void 0!==(null==e?void 0:e.start)?(e.start+(n?e.duration:0))/e.timescale:t}function Jf(e,t,n){const r=e.codec;if(r&&r.length>4)return r;if(t===Ul){if("ec-3"===r||"ac-3"===r||"alac"===r)return r;if("fLaC"===r||"Opus"===r){return Ic(r,!1)}return n.warn('Unhandled audio codec "'.concat(r,'" in mp4 MAP')),r||"mp4a"}return n.warn('Unhandled video codec "'.concat(r,'" in mp4 MAP')),r||"avc1"}try{Vf=self.performance.now.bind(self.performance)}catch(wE){Vf=Date.now}const eg=[{demux:class{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,n,r){const i=this.videoTrack=of("video",1),s=this.audioTrack=of("audio",1),a=this.txtTrack=of("text",1);if(this.id3Track=of("id3",1),this.timeOffset=0,null==e||!e.byteLength)return;const o=rc(e);if(o.video){const{id:e,timescale:t,codec:n,supplemental:r}=o.video;i.id=e,i.timescale=a.timescale=t,i.codec=n,i.supplemental=r}if(o.audio){const{id:e,timescale:t,codec:n}=o.audio;s.id=e,s.timescale=t,s.codec=n}a.id=Xl.text,i.sampleDuration=0,i.duration=s.duration=r}resetContiguity(){this.remainderData=null}static probe(e){return function(e){const t=e.byteLength;for(let n=0;n<t;){const r=Zl(e,n);if(r>8&&109===e[n+4]&&111===e[n+5]&&111===e[n+6]&&102===e[n+7])return!0;n=r>1?n+r:t}return!1}(e)}demux(e,t){this.timeOffset=t;let n=e;const r=this.videoTrack,i=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=dc(this.remainderData,e));const t=function(e){const t={valid:null,remainder:null},n=tc(e,["moof"]);if(n.length<2)return t.remainder=e,t;const r=n[n.length-1];return t.valid=e.slice(0,r.byteOffset-8),t.remainder=e.slice(r.byteOffset-8),t}(n);this.remainderData=t.remainder,r.samples=t.valid||new Uint8Array}else r.samples=n;const s=this.extractID3Track(r,t);return i.samples=hc(t,r),{videoTrack:r,audioTrack:this.audioTrack,id3Track:s,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const r=this.extractID3Track(t,this.timeOffset);return n.samples=hc(e,t),{videoTrack:t,audioTrack:of(),id3Track:r,textTrack:of()}}extractID3Track(e,t){const n=this.id3Track;if(e.samples.length){const r=tc(e.samples,["emsg"]);r&&r.forEach(e=>{const r=function(e){const t=e[0];let n="",r="",i=0,s=0,a=0,o=0,l=0,c=0;if(0===t){for(;"\0"!==Ql(e.subarray(c,c+1));)n+=Ql(e.subarray(c,c+1)),c+=1;for(n+=Ql(e.subarray(c,c+1)),c+=1;"\0"!==Ql(e.subarray(c,c+1));)r+=Ql(e.subarray(c,c+1)),c+=1;r+=Ql(e.subarray(c,c+1)),c+=1,i=Zl(e,12),s=Zl(e,16),o=Zl(e,20),l=Zl(e,24),c=28}else if(1===t){c+=4,i=Zl(e,c),c+=4;const t=Zl(e,c);c+=4;const s=Zl(e,c);for(c+=4,a=2**32*t+s,il(a)||(a=Number.MAX_SAFE_INTEGER,Rl.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=Zl(e,c),c+=4,l=Zl(e,c),c+=4;"\0"!==Ql(e.subarray(c,c+1));)n+=Ql(e.subarray(c,c+1)),c+=1;for(n+=Ql(e.subarray(c,c+1)),c+=1;"\0"!==Ql(e.subarray(c,c+1));)r+=Ql(e.subarray(c,c+1)),c+=1;r+=Ql(e.subarray(c,c+1)),c+=1}return{schemeIdUri:n,value:r,timeScale:i,presentationTime:a,presentationTimeDelta:s,eventDuration:o,id:l,payload:e.subarray(c,e.byteLength)}}(e);if(_f.test(r.schemeIdUri)){const e=kf(r,t);let i=4294967295===r.eventDuration?Number.POSITIVE_INFINITY:r.eventDuration/r.timeScale;i<=.001&&(i=Number.POSITIVE_INFINITY);const s=r.payload;n.samples.push({data:s,len:s.byteLength,dts:e,pts:e,type:af.emsg,duration:i})}else if(this.config.enableEmsgKLVMetadata&&r.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const e=kf(r,t);n.samples.push({data:r.payload,len:r.payload.byteLength,dts:e,pts:e,type:af.misbklv,duration:Number.POSITIVE_INFINITY})}})}return n}demuxSampleAes(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}},remux:class extends Sl{constructor(e,t,n,r){super("passthrough-remuxer",r),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,n,r){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(e,r),this.emitInitSegment=!0}generateInitSegment(e,t){let{audioCodec:n,videoCodec:r}=this;if(null==e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);const{audio:i,video:s}=this.initData=rc(e);if(t)!function(e,t){if(!e||!t)return;const n=t.keyId;n&&t.isCommonEncryption&&cc(e,(e,t)=>{const r=e.subarray(8,24);r.some(e=>0!==e)||(Rl.log("[eme] Patching keyId in 'enc".concat(t?"a":"v",">sinf>>tenc' box: ").concat(Dl(r)," -> ").concat(Dl(n))),e.set(n,8))})}(e,t);else{const e=i||s;null!=e&&e.encrypted&&this.warn('Init segment with encrypted track with has no key ("'.concat(e.codec,'")!'))}i&&(n=Jf(i,Ul,this)),s&&(r=Jf(s,Gl,this));const a={};i&&s?a.audiovideo={container:"video/mp4",codec:n+","+r,supplemental:s.supplemental,encrypted:s.encrypted,initSegment:e,id:"main"}:i?a.audio={container:"audio/mp4",codec:n,encrypted:i.encrypted,initSegment:e,id:"audio"}:s?a.video={container:"video/mp4",codec:r,supplemental:s.supplemental,encrypted:s.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=a}remux(e,t,n,r,i,s){var a,o;let{initPTS:l,lastEndTime:c}=this;const u={audio:void 0,video:void 0,text:r,id3:n,initSegment:void 0};rl(c)||(c=this.lastEndTime=i||0);const d=t.samples;if(!d.length)return u;const h={initPTS:void 0,timescale:void 0,trackId:void 0};let f=this.initData;if(null!=(a=f)&&a.length||(this.generateInitSegment(d),f=this.initData),null==(o=f)||!o.length)return this.warn("Failed to generate initSegment."),u;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);const g=function(e,t,n){const r={},i=tc(e,["moof","traf"]);for(let s=0;s<i.length;s++){const e=i[s],a=tc(e,["tfhd"])[0],o=Zl(a,4),l=t[o];if(!l)continue;r[o]||(r[o]={start:NaN,duration:0,sampleCount:0,timescale:l.timescale,type:l.type});const c=r[o],u=tc(e,["tfdt"])[0];if(u){const e=u[0];let t=Zl(u,4);1===e&&(t===Wl?n.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(t*=Wl+1,t+=Zl(u,8))),rl(t)&&(!rl(c.start)||t<c.start)&&(c.start=t)}const d=l.default,h=Zl(a,0)|(null==d?void 0:d.flags);let f=(null==d?void 0:d.duration)||0;8&h&&(f=Zl(a,2&h?12:8));const g=tc(e,["trun"]);let p=c.start||0,m=0,v=f;for(let t=0;t<g.length;t++){const e=g[t],n=Zl(e,4),r=c.sampleCount;c.sampleCount+=n;const i=1&e[3],s=4&e[3],a=1&e[2],o=2&e[2],l=4&e[2],u=8&e[2];let d=8,h=n;for(i&&(d+=4),s&&n&&(1&e[d+1]||void 0!==c.keyFrameIndex||(c.keyFrameIndex=r),d+=4,a?(v=Zl(e,d),d+=4):v=f,o&&(d+=4),u&&(d+=4),p+=v,m+=v,h--);h--;)a?(v=Zl(e,d),d+=4):v=f,o&&(d+=4),l&&(1&e[d+1]||void 0===c.keyFrameIndex&&(c.keyFrameIndex=c.sampleCount-(h+1),c.keyFrameStart=p),d+=4),u&&(d+=4),p+=v,m+=v;!m&&f&&(m+=f*n)}c.duration+=m}if(!Object.keys(r).some(e=>r[e].duration)){let t=1/0,n=0;const i=tc(e,["sidx"]);for(let e=0;e<i.length;e++){const r=nc(i[e]);if(null!=r&&r.references){t=Math.min(t,r.earliestPresentationTime/r.timescale);const e=r.references.reduce((e,t)=>e+t.info.duration||0,0);n=Math.max(n,e+r.earliestPresentationTime/r.timescale)}}n&&rl(n)&&Object.keys(r).forEach(e=>{r[e].duration||(r[e].duration=n*r[e].timescale-r[e].start)})}return r}(d,f,this),p=f.audio?g[f.audio.id]:null,m=f.video?g[f.video.id]:null,v=Zf(m,1/0),y=Zf(p,1/0),E=Zf(m,0,!0),b=Zf(p,0,!0);let T=i,S=0;const _=p&&(!m||!l&&y<v||l&&l.trackId===f.audio.id),k=_?p:m;if(k){const e=k.timescale,t=k.start-i*e,n=_?f.audio.id:f.video.id;T=k.start/e,S=_?b-y:E-v,!s&&l||!function(e,t,n,r){if(null===e)return!0;const i=Math.max(r,1),s=t-e.baseTime/e.timescale;return Math.abs(s-n)>i}(l,T,i,S)&&e===l.timescale||(l&&this.warn("Timestamps at playlist time: ".concat(s?"":"~").concat(i," ").concat(t/e," != initPTS: ").concat(l.baseTime/l.timescale," (").concat(l.baseTime,"/").concat(l.timescale,") trackId: ").concat(l.trackId)),this.log("Found initPTS at playlist time: ".concat(i," offset: ").concat(T-i," (").concat(t,"/").concat(e,") trackId: ").concat(n)),l=null,h.initPTS=t,h.timescale=e,h.trackId=n)}else this.warn("No audio or video samples found for initPTS at playlist time: ".concat(i));l?(h.initPTS=l.baseTime,h.timescale=l.timescale,h.trackId=l.trackId):(h.timescale&&void 0!==h.trackId&&void 0!==h.initPTS||(this.warn("Could not set initPTS"),h.initPTS=T,h.timescale=1,h.trackId=-1),this.initPTS=l={baseTime:h.initPTS,timescale:h.timescale,trackId:h.trackId});const A=T-l.baseTime/l.timescale,L=A+S;S>0?this.lastEndTime=L:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const w=!!f.audio,R=!!f.video;let I="";w&&(I+="audio"),R&&(I+="video");const x={data1:d,startPTS:A,startDTS:A,endPTS:L,endDTS:L,type:I,hasAudio:w,hasVideo:R,nb:1,dropped:0,encrypted:!!f.audio&&f.audio.encrypted||!!f.video&&f.video.encrypted};u.audio=w&&!R?x:void 0,u.video=R?x:void 0;const C=null==m?void 0:m.sampleCount;if(C){const e=m.keyFrameIndex,t=-1!==e;x.nb=C,x.dropped=0===e||this.isVideoContiguous?0:t?e:C,x.independent=t,x.firstKeyFrame=e,t&&m.keyFrameStart&&(x.firstKeyFramePTS=(m.keyFrameStart-l.baseTime)/l.timescale),this.isVideoContiguous||(u.independent=t),this.isVideoContiguous||(this.isVideoContiguous=t),x.dropped&&this.warn("fmp4 does not start with IDR: firstIDR ".concat(e,"/").concat(C," dropped: ").concat(x.dropped," start: ").concat(x.firstKeyFramePTS||"NA"))}return u.initSegment=h,u.id3=Qf(n,i,l,l),r.samples.length&&(u.text=$f(r,i,l)),u}}},{demux:Cf,remux:qf},{demux:class extends lf{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const n=Hh(e,0);let r=(null==n?void 0:n.length)||0;if(Ef(e,r))return!1;for(let i=e.length;r<i;r++)if(Yh(e,r))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return function(e,t){return t+5<e.length}(e,t)&&jh(e,t)&&Vh(e,t)<=e.length-t}(e,t)}appendFrame(e,t,n){Wh(e,this.observer,t,n,e.manifestCodec);const r=Xh(e,t,n,this.basePTS,this.frameIndex);if(r&&0===r.missing)return r}},remux:qf},{demux:class extends lf{resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=Hh(e,0);let n=(null==t?void 0:t.length)||0;if(t&&11===e[n]&&119===e[n+1]&&void 0!==sf(t)&&bf(e,n)<=16)return!1;for(let r=e.length;n<r;n++)if(Ef(e,n))return Rl.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return vf(e,t)&&4<=e.length-t}(e,t)}appendFrame(e,t,n){if(null!==this.basePTS)return pf(e,t,n,this.basePTS,this.frameIndex)}},remux:qf}];eg.splice(2,0,{demux:Tf,remux:qf});class tg{constructor(e,t,n,r,i,s){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.id=i,this.logger=s}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,n,r){const i=n.transmuxing;i.executeStart=Vf();let s=new Uint8Array(e);const{currentTransmuxState:a,transmuxConfig:o}=this;r&&(this.currentTransmuxState=r);const{contiguous:l,discontinuity:c,trackSwitch:u,accurateTimeOffset:d,timeOffset:h,initSegmentChange:f}=r||a,{audioCodec:g,videoCodec:p,defaultInitPts:m,duration:v,initSegmentData:y}=o,E=function(e,t){let n=null;e.byteLength>0&&null!=(null==t?void 0:t.key)&&null!==t.iv&&null!=t.method&&(n=t);return n}(s,t);if(E&&hd(E.method)){const e=this.getDecrypter(),t=fd(E.method);if(!e.isSync())return this.asyncResult=!0,this.decryptionPromise=e.webCryptoDecrypt(s,E.key.buffer,E.iv.buffer,t).then(e=>{const t=this.push(e,null,n);return this.decryptionPromise=null,t}),this.decryptionPromise;{let r=e.softwareDecrypt(s,E.key.buffer,E.iv.buffer,t);if(n.part>-1){const t=e.flush();r=t?t.buffer:t}if(!r)return i.executeEnd=Vf(),ng(n);s=new Uint8Array(r)}}const b=this.needsProbing(c,u);if(b){const e=this.configureTransmuxer(s);if(e)return this.logger.warn("[transmuxer] ".concat(e.message)),this.observer.emit(ll.ERROR,ll.ERROR,{type:al.MEDIA_ERROR,details:ol.FRAG_PARSING_ERROR,fatal:!1,error:e,reason:e.message}),i.executeEnd=Vf(),ng(n)}(c||u||f||b)&&this.resetInitSegment(y,g,p,v,t),(c||f||b)&&this.resetInitialTimestamp(m),l||this.resetContiguity();const T=this.transmux(s,E,h,d,n);this.asyncResult=rg(T);const S=this.currentTransmuxState;return S.contiguous=!0,S.discontinuity=!1,S.trackSwitch=!1,i.executeEnd=Vf(),T}flush(e){const t=e.transmuxing;t.executeStart=Vf();const{decrypter:n,currentTransmuxState:r,decryptionPromise:i}=this;if(i)return this.asyncResult=!0,i.then(()=>this.flush(e));const s=[],{timeOffset:a}=r;if(n){const t=n.flush();t&&s.push(this.push(t.buffer,null,e))}const{demuxer:o,remuxer:l}=this;if(!o||!l){t.executeEnd=Vf();const n=[ng(e)];return this.asyncResult?Promise.resolve(n):n}const c=o.flush(a);return rg(c)?(this.asyncResult=!0,c.then(t=>(this.flushRemux(s,t,e),s))):(this.flushRemux(s,c,e),this.asyncResult?Promise.resolve(s):s)}flushRemux(e,t,n){const{audioTrack:r,videoTrack:i,id3Track:s,textTrack:a}=t,{accurateTimeOffset:o,timeOffset:l}=this.currentTransmuxState;this.logger.log("[transmuxer.ts]: Flushed ".concat(this.id," sn: ").concat(n.sn).concat(n.part>-1?" part: "+n.part:""," of ").concat(this.id===fl?"level":"track"," ").concat(n.level));const c=this.remuxer.remux(r,i,s,a,l,o,!0,this.id);e.push({remuxResult:c,chunkMeta:n}),n.transmuxing.executeEnd=Vf()}resetInitialTimestamp(e){const{demuxer:t,remuxer:n}=this;t&&n&&(t.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,n,r,i){const{demuxer:s,remuxer:a}=this;s&&a&&(s.resetInitSegment(e,t,n,r),a.resetInitSegment(e,t,n,i))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,n,r,i){let s;return s=t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,n,r,i):this.transmuxUnencrypted(e,n,r,i),s}transmuxUnencrypted(e,t,n,r){const{audioTrack:i,videoTrack:s,id3Track:a,textTrack:o}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(i,s,a,o,t,n,!1,this.id),chunkMeta:r}}transmuxSampleAes(e,t,n,r,i){return this.demuxer.demuxSampleAes(e,t,n).then(e=>({remuxResult:this.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,n,r,!1,this.id),chunkMeta:i}))}configureTransmuxer(e){const{config:t,observer:n,typeSupported:r}=this;let i;for(let u=0,d=eg.length;u<d;u++){var s;if(null!=(s=eg[u].demux)&&s.probe(e,this.logger)){i=eg[u];break}}if(!i)return new Error("Failed to find demuxer by probing fragment data");const a=this.demuxer,o=this.remuxer,l=i.remux,c=i.demux;o&&o instanceof l||(this.remuxer=new l(n,t,r,this.logger)),a&&a instanceof c||(this.demuxer=new c(n,t,r,this.logger),this.probe=c.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new ju(this.config)),e}}const ng=e=>({remuxResult:{},chunkMeta:e});function rg(e){return"then"in e&&e.then instanceof Function}class ig{constructor(e,t,n,r,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=r,this.defaultInitPts=i||null}}class sg{constructor(e,t,n,r,i,s){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=r,this.timeOffset=i,this.initSegmentChange=s}}let ag=0;class og{constructor(e,t,n,r){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=ag++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=e=>{const t=e.data,n=this.hls;if(n&&null!=t&&t.event&&t.instanceNo===this.instanceNo)switch(t.event){case"init":{var r;const e=null==(r=this.workerContext)?void 0:r.objectURL;e&&self.URL.revokeObjectURL(e);break}case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":n.logger[t.data.logType]&&n.logger[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.part=this.part,t.data.id=this.id,n.trigger(t.event,t.data)}},this.onWorkerError=e=>{if(!this.hls)return;const t=new Error("".concat(e.message,"  (").concat(e.filename,":").concat(e.lineno,")"));this.hls.config.enableWorker=!1,this.hls.logger.warn('Error in "'.concat(this.id,'" Web Worker, fallback to inline')),this.hls.trigger(ll.ERROR,{type:al.OTHER_ERROR,details:ol.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:t})};const i=e.config;this.hls=e,this.id=t,this.useWorker=!!i.enableWorker,this.onTransmuxComplete=n,this.onFlush=r;const s=(e,t)=>{(t=t||{}).frag=this.frag||void 0,e===ll.ERROR&&(t.parent=this.id,t.part=this.part,this.error=t.error),this.hls.trigger(e,t)};this.observer=new Mh,this.observer.on(ll.FRAG_DECRYPTED,s),this.observer.on(ll.ERROR,s);const a=Pc(i.preferManagedMediaSource);if(this.useWorker&&"undefined"!==typeof Worker){const n=this.hls.logger;if(i.workerPath||"function"===typeof __HLS_WORKER_BUNDLE__){try{i.workerPath?(n.log("loading Web Worker ".concat(i.workerPath,' for "').concat(t,'"')),this.workerContext=function(e){const t=Nh[e];if(t)return t.clientCount++,t;const n=new self.URL(e,self.location.href).href,r={worker:new self.Worker(n),scriptURL:n,clientCount:1};return Nh[e]=r,r}(i.workerPath)):(n.log('injecting Web Worker for "'.concat(t,'"')),this.workerContext=function(){const e=Nh[Fh];if(e)return e.clientCount++,e;const t=new self.Blob(["var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(".concat(__HLS_WORKER_BUNDLE__.toString(),")(true);")],{type:"text/javascript"}),n=self.URL.createObjectURL(t),r={worker:new self.Worker(n),objectURL:n,clientCount:1};return Nh[Fh]=r,r}());const{worker:e}=this.workerContext;e.addEventListener("message",this.onWorkerMessage),e.addEventListener("error",this.onWorkerError),e.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:a,id:t,config:Zc(i)})}catch(wE){n.warn('Error setting up "'.concat(t,'" Web Worker, fallback to inline'),wE),this.terminateWorker(),this.error=null,this.transmuxer=new tg(this.observer,a,i,"",t,e.logger)}return}}this.transmuxer=new tg(this.observer,a,i,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=ag++;const t=this.hls.config,n=Pc(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:n,id:this.id,config:Zc(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),function(e){const t=Nh[e||Fh];if(t&&1===t.clientCount--){const{worker:n,objectURL:r}=t;delete Nh[e||Fh],r&&self.URL.revokeObjectURL(r),n.terminate()}}(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,n,r,i,s,a,o,l,c){var u,d;l.transmuxing.start=self.performance.now();const{instanceNo:h,transmuxer:f}=this,g=s?s.start:i.start,p=i.decryptdata,m=this.frag,v=!(m&&i.cc===m.cc),y=!(m&&l.level===m.level),E=m?l.sn-m.sn:-1,b=this.part?l.part-this.part.index:-1,T=0===E&&l.id>1&&l.id===(null==m?void 0:m.stats.chunkCount),S=!y&&(1===E||0===E&&(1===b||T&&b<=0)),_=self.performance.now();(y||E||0===i.stats.parsing.start)&&(i.stats.parsing.start=_),!s||!b&&S||(s.stats.parsing.start=_);const k=!(m&&(null==(u=i.initSegment)?void 0:u.url)===(null==(d=m.initSegment)?void 0:d.url)),A=new sg(v,S,o,y,g,k);if(!S||v||k){this.hls.logger.log("[transmuxer-interface]: Starting new transmux session for ".concat(i.type," sn: ").concat(l.sn).concat(l.part>-1?" part: "+l.part:""," ").concat(this.id===fl?"level":"track",": ").concat(l.level," id: ").concat(l.id,"\n        discontinuity: ").concat(v,"\n        trackSwitch: ").concat(y,"\n        contiguous: ").concat(S,"\n        accurateTimeOffset: ").concat(o,"\n        timeOffset: ").concat(g,"\n        initSegmentChange: ").concat(k));const e=new ig(n,r,t,a,c);this.configureTransmuxer(e)}if(this.frag=i,this.part=s,this.workerContext)this.workerContext.worker.postMessage({instanceNo:h,cmd:"demux",data:e,decryptdata:p,chunkMeta:l,state:A},e instanceof ArrayBuffer?[e]:[]);else if(f){const t=f.push(e,p,l,A);rg(t)?t.then(e=>{this.handleTransmuxComplete(e)}).catch(e=>{this.transmuxerError(e,l,"transmuxer-interface push error")}):this.handleTransmuxComplete(t)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(n){const t=n.flush(e);rg(t)?t.then(t=>{this.handleFlushResult(t,e)}).catch(t=>{this.transmuxerError(t,e,"transmuxer-interface flush error")}):this.handleFlushResult(t,e)}}transmuxerError(e,t,n){this.hls&&(this.error=e,this.hls.trigger(ll.ERROR,{type:al.MEDIA_ERROR,details:ol.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,t){e.forEach(e=>{this.handleTransmuxComplete(e)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}class lg extends Sl{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,n){const r=null==t?void 0:t.renditionReports;if(r){let s=-1;for(let n=0;n<r.length;n++){const a=r[n];let o;try{o=new self.URL(a.URI,t.url).href}catch(i){this.warn("Could not construct new URL for Rendition Report: ".concat(i)),o=a.URI||""}if(o===e){s=n;break}o===e.substring(0,o.length)&&(s=n)}if(-1!==s){const e=r[s],i=parseInt(e["LAST-MSN"])||t.lastPartSn;let a=parseInt(e["LAST-PART"])||t.lastPartIndex;if(this.hls.config.lowLatencyMode){const e=Math.min(t.age-t.partTarget,t.targetduration);a>=0&&e>t.partTarget&&(a+=1)}const o=n&&Wc(n);return new qc(i,a>=0?a:void 0,o)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(n){this.warn("Could not construct new URL with HLS Delivery Directives: ".concat(n))}return e}playlistLoaded(e,t,n){const{details:r,stats:i}=t,s=self.performance.now(),a=i.loading.first?Math.max(0,s-i.loading.first):0;r.advancedDateTime=Date.now()-a;const o=this.hls.config.timelineOffset;if(o!==r.appliedTimelineOffset){const e=Math.max(o||0,0);r.appliedTimelineOffset=e,r.fragments.forEach(t=>{t.setStart(t.playlistOffset+e)})}if(r.live||null!=n&&n.live){const o="levelInfo"in t?t.levelInfo:t.track;if(r.reloaded(n),n&&r.fragments.length>0){Zd(n,r,this);const e=r.playlistParsingError;if(e){this.warn(e);const n=this.hls;if(!n.config.ignorePlaylistParsingErrors){var l;const{networkDetails:s}=t;return void n.trigger(ll.ERROR,{type:al.NETWORK_ERROR,details:ol.LEVEL_PARSING_ERROR,fatal:!1,url:r.url,error:e,reason:e.message,level:t.level||void 0,parent:null==(l=r.fragments[0])?void 0:l.type,networkDetails:s,stats:i})}r.playlistParsingError=null}}-1===r.requestScheduled&&(r.requestScheduled=i.loading.start);const c=this.hls.mainForwardBufferInfo,u=c?c.end-c.len:0,d=nh(r,1e3*(r.edge-u));if(r.requestScheduled+d<s?r.requestScheduled=s:r.requestScheduled+=d,this.log("live playlist ".concat(e," ").concat(r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:r.updated?"UPDATED":"MISSED")),!this.canLoad||!r.live)return;let h,f,g;if(r.canBlockReload&&r.endSN&&r.advanced){const e=this.hls.config.lowLatencyMode,i=r.lastPartSn,a=r.endSN,l=r.lastPartIndex,c=i===a;-1!==l?c?(f=a+1,g=e?0:l):(f=i,g=e?l+1:r.maxPartIndex):f=a+1;const u=r.age,d=u+r.ageHeader;let p=Math.min(d-r.partTarget,1.5*r.targetduration);if(p>0){if(d>3*r.targetduration)this.log("Playlist last advanced ".concat(u.toFixed(2),"s ago. Omitting segment and part directives.")),f=void 0,g=void 0;else if(null!=n&&n.tuneInGoal&&d-r.partTarget>n.tuneInGoal)this.warn("CDN Tune-in goal increased from: ".concat(n.tuneInGoal," to: ").concat(p," with playlist age: ").concat(r.age)),p=0;else{const e=Math.floor(p/r.targetduration);if(f+=e,void 0!==g){g+=Math.round(p%r.targetduration/r.partTarget)}this.log("CDN Tune-in age: ".concat(r.ageHeader,"s last advanced ").concat(u.toFixed(2),"s goal: ").concat(p," skip sn ").concat(e," to part ").concat(g))}r.tuneInGoal=p}if(h=this.getDeliveryDirectives(r,t.deliveryDirectives,f,g),e||!c)return r.requestScheduled=s,void this.loadingPlaylist(o,h)}else(r.canBlockReload||r.canSkipUntil)&&(h=this.getDeliveryDirectives(r,t.deliveryDirectives,f,g));h&&void 0!==f&&r.canBlockReload&&(r.requestScheduled=i.loading.first+Math.max(d-2*a,d/2)),this.scheduleLoading(o,h,r)}else this.clearTimer()}scheduleLoading(e,t,n){const r=n||e.details;if(!r)return void this.loadingPlaylist(e,t);const i=self.performance.now(),s=r.requestScheduled;if(i>=s)return void this.loadingPlaylist(e,t);const a=s-i;this.log("reload live playlist ".concat(e.name||e.bitrate+"bps"," in ").concat(Math.round(a)," ms")),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),a)}getDeliveryDirectives(e,t,n,r){let i=Wc(e);return null!=t&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,r=t.part,i=Vc),new qc(n,r,i)}checkRetry(e){const t=e.details,n=hu(e),r=e.errorAction,{action:i,retryCount:s=0,retryConfig:a}=r||{},o=!!r&&!!a&&(i===_u||!r.resolved&&i===Tu);if(o){var l;if(s>=a.maxNumRetry)return!1;if(n&&null!=(l=e.context)&&l.deliveryDirectives)this.warn("Retrying playlist loading ".concat(s+1,"/").concat(a.maxNumRetry,' after "').concat(t,'" without delivery-directives')),this.loadPlaylist();else{const e=mu(a,s);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),e),this.warn("Retrying playlist loading ".concat(s+1,"/").concat(a.maxNumRetry,' after "').concat(t,'" in ').concat(e,"ms"))}e.levelRetry=!0,r.resolved=!0}return o}}function cg(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!ug(e[n].attrs,t[n].attrs))return!1;return!0}function ug(e,t,n){const r=e["STABLE-RENDITION-ID"];return r&&!n?r===t["STABLE-RENDITION-ID"]:!(n||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(n=>e[n]!==t[n])}function dg(e,t){return t.label.toLowerCase()===e.name.toLowerCase()&&(!t.language||t.language.toLowerCase()===(e.lang||"").toLowerCase())}class hg{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,n){if(null===this.queues||null===this.tracks)return;const r=this.queues[t];r.push(e),1!==r.length||n||this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const n={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(n,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const n={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(n)}})}removeBlockers(){null!==this.queues&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const n=null==(t=e[0])?void 0:t.label;"async-blocker"!==n&&"async-blocker-prepend"!==n||(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(null===this.queues)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(null===this.queues||null===this.tracks)return;const t=this.queues[e];if(t.length){const i=t[0];try{i.execute()}catch(r){var n;if(i.onError(r),null===this.queues||null===this.tracks)return;const t=null==(n=this.tracks[e])?void 0:n.buffer;null!=t&&t.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){null!==this.queues&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return(null==(t=this.queues)?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return null===e||null===t?"<destroyed>":"\n".concat(this.list("video"),"\n").concat(this.list("audio"),"\n").concat(this.list("audiovideo"),"}")}list(e){var t,n;return null!=(t=this.queues)&&t[e]||null!=(n=this.tracks)&&n[e]?"".concat(e,": (").concat(this.listSbInfo(e),") ").concat(this.listOps(e)):""}listSbInfo(e){var t;const n=null==(t=this.tracks)?void 0:t[e],r=null==n?void 0:n.buffer;return r?"SourceBuffer".concat(r.updating?" updating":"").concat(n.ended?" ended":"").concat(n.ending?" ending":""):"none"}listOps(e){var t;return(null==(t=this.queues)?void 0:t[e].map(e=>e.label).join(", "))||""}}const fg=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,gg="HlsJsTrackRemovedError";class pg extends Error{constructor(e){super(e),this.name=gg}}function mg(e){const t=e.querySelectorAll("source");[].slice.call(t).forEach(t=>{e.removeChild(t)})}function vg(e){return"audio"===e?1:0}class yg{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(ll.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(ll.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(ll.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ll.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(ll.BUFFER_CODECS,this.onBufferCodecs,this),e.on(ll.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(ll.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(ll.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(ll.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ll.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(ll.BUFFER_CODECS,this.onBufferCodecs,this),e.off(ll.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&rl(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0)return void(this.clientRect=null);const e=this.hls.levels;if(e.length){const t=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&t.logger.log("Setting autoLevelCapping to ".concat(n,": ").concat(e[n].height,"p@").concat(e[n].bitrate," for media ").concat(this.mediaWidth,"x").concat(this.mediaHeight)),t.autoLevelCapping=n,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const n=t.filter((t,n)=>this.isLevelAllowed(t)&&n<=e);return this.clientRect=null,yg.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.width||t.height||(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(t){}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(t=>e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height)}static getMaxLevelByMediaSize(e,t,n){if(null==e||!e.length)return-1;const r=(e,t)=>!t||(e.width!==t.width||e.height!==t.height);let i=e.length-1;const s=Math.max(t,n);for(let a=0;a<e.length;a+=1){const t=e[a];if((t.width>=s||t.height>=s)&&r(t,e[a+1])){i=a;break}}return i}}const Eg={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},bg={HLS:"h"};class Tg{constructor(e,t){Array.isArray(e)&&(e=e.map(e=>e instanceof Tg?e:new Tg(e))),this.value=e,this.params=t}}function Sg(e,t,n,r){return new Error("failed to ".concat(e,' "').concat((i=t,Array.isArray(i)?JSON.stringify(i):i instanceof Map?"Map{}":i instanceof Set?"Set{}":"object"===typeof i?JSON.stringify(i):String(i)),'" as ').concat(n),{cause:r});var i}function _g(e,t,n){return Sg("serialize",e,t,n)}class kg{constructor(e){this.description=e}}const Ag="Bare Item";function Lg(e){if(!1===ArrayBuffer.isView(e))throw _g(e,"Byte Sequence");return":".concat((t=e,btoa(String.fromCharCode(...t))),":");var t}function wg(e){if(function(e){return e<-999999999999999||999999999999999<e}(e))throw _g(e,"Integer");return e.toString()}function Rg(e,t){if(e<0)return-Rg(-e,t);const n=Math.pow(10,t);if(Math.abs(e*n%1-.5)<Number.EPSILON){const t=Math.floor(e*n);return(t%2===0?t:t+1)/n}return Math.round(e*n)/n}function Ig(e){const t=Rg(e,3);if(Math.floor(Math.abs(t)).toString().length>12)throw _g(e,"Decimal");const n=t.toString();return n.includes(".")?n:"".concat(n,".0")}const xg=/[\x00-\x1f\x7f]+/;function Cg(e){const t=(n=e).description||n.toString().slice(7,-1);var n;if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(t))throw _g(t,"Token");return t}function Dg(e){switch(typeof e){case"number":if(!rl(e))throw _g(e,Ag);return Number.isInteger(e)?wg(e):Ig(e);case"string":return function(e){if(xg.test(e))throw _g(e,"String");return'"'.concat(e.replace(/\\/g,"\\\\").replace(/"/g,'\\"'),'"')}(e);case"symbol":return Cg(e);case"boolean":return function(e){if("boolean"!==typeof e)throw _g(e,"Boolean");return e?"?1":"?0"}(e);case"object":if(e instanceof Date)return function(e){return"@".concat(wg(e.getTime()/1e3))}(e);if(e instanceof Uint8Array)return Lg(e);if(e instanceof kg)return Cg(e);default:throw _g(e,Ag)}}function Pg(e){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(e))throw _g(e,"Key");return e}function Og(e){return null==e?"":Object.entries(e).map(e=>{let[t,n]=e;return!0===n?";".concat(Pg(t)):";".concat(Pg(t),"=").concat(Dg(n))}).join("")}function Mg(e){return e instanceof Tg?"".concat(Dg(e.value)).concat(Og(e.params)):Dg(e)}function Fg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{whitespace:!0};if("object"!==typeof e||null==e)throw _g(e,"Dict");const n=e instanceof Map?e.entries():Object.entries(e),r=(null===t||void 0===t?void 0:t.whitespace)?" ":"";return Array.from(n).map(e=>{let[t,n]=e;n instanceof Tg===!1&&(n=new Tg(n));let r=Pg(t);var i;return!0===n.value?r+=Og(n.params):(r+="=",Array.isArray(n.value)?r+="(".concat((i=n).value.map(Mg).join(" "),")").concat(Og(i.params)):r+=Mg(n)),r}).join(",".concat(r))}function Ng(e,t){return Fg(e,t)}const Bg="CMCD-Object",Ug="CMCD-Request",Gg="CMCD-Session",Hg="CMCD-Status",jg={br:Bg,ab:Bg,d:Bg,ot:Bg,tb:Bg,tpb:Bg,lb:Bg,tab:Bg,lab:Bg,url:Bg,pb:Ug,bl:Ug,tbl:Ug,dl:Ug,ltc:Ug,mtp:Ug,nor:Ug,nrr:Ug,rc:Ug,sn:Ug,sta:Ug,su:Ug,ttfb:Ug,ttfbb:Ug,ttlb:Ug,cmsdd:Ug,cmsds:Ug,smrt:Ug,df:Ug,cs:Ug,ts:Ug,cid:Gg,pr:Gg,sf:Gg,sid:Gg,st:Gg,v:Gg,msd:Gg,bs:Hg,bsd:Hg,cdn:Hg,rtp:Hg,bg:Hg,pt:Hg,ec:Hg,e:Hg},zg=Ug;function Vg(e,t){const n={};if(!e)return n;const r=Object.keys(e),i=t?(s=t,Object.keys(s).reduce((e,t)=>{var n;return null===(n=s[t])||void 0===n||n.forEach(n=>e[n]=t),e},{})):{};var s;return r.reduce((t,n)=>{var r;const s=jg[n]||i[n]||zg;return(null!==(r=t[s])&&void 0!==r?r:t[s]={})[n]=e[n],t},n)}const Kg="event";const Yg=e=>Math.round(e),Wg=(e,t)=>Array.isArray(e)?e.map(e=>Wg(e,t)):e instanceof Tg&&"string"===typeof e.value?new Tg(Wg(e.value,t),e.params):(t.baseUrl&&(e=function(e,t){const n=new URL(e),r=new URL(t);if(n.origin!==r.origin)return e;const i=n.pathname.split("/").slice(1),s=r.pathname.split("/").slice(1,-1);for(;i[0]===s[0];)i.shift(),s.shift();for(;s.length;)s.shift(),i.unshift("..");return i.join("/")+n.search+n.hash}(e,t.baseUrl)),1===t.version?encodeURIComponent(e):e),qg=e=>100*Yg(e/100),Xg={br:Yg,d:Yg,bl:qg,dl:qg,mtp:qg,nor:(e,t)=>{let n=e;return t.version>=2&&(e instanceof Tg&&"string"===typeof e.value?n=new Tg([e]):"string"===typeof e&&(n=[e])),Wg(n,t)},rtp:qg,tb:Yg},Qg="request",$g="response",Zg=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],Jg=["e"],ep=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function tp(e){return ep.test(e)}const np=["d","dl","nor","ot","rtp","su"];const rp=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];const ip=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function sp(e){return ip.includes(e)||tp(e)}const ap={[$g]:function(e){return Zg.includes(e)||np.includes(e)||rp.includes(e)||tp(e)},[Kg]:function(e){return Zg.includes(e)||Jg.includes(e)||tp(e)},[Qg]:function(e){return Zg.includes(e)||np.includes(e)||tp(e)}};function op(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={};if(null==e||"object"!==typeof e)return n;const r=t.version||e.v||1,i=t.reportingMode||Qg,s=1===r?sp:ap[i];let a=Object.keys(e).filter(s);const o=t.filter;"function"===typeof o&&(a=a.filter(o));const l=i===$g||i===Kg;l&&!a.includes("ts")&&a.push("ts"),r>1&&!a.includes("v")&&a.push("v");const c=El({},Xg,t.formatters),u={version:r,reportingMode:i,baseUrl:t.baseUrl};return a.sort().forEach(t=>{let i=e[t];const s=c[t];if("function"===typeof s&&(i=s(i,u)),"v"===t){if(1===r)return;i=r}"pr"==t&&1===i||(l&&"ts"===t&&!rl(i)&&(i=Date.now()),function(e){return"number"===typeof e?rl(e):null!=e&&""!==e&&!1!==e}(i)&&(function(e){return["ot","sf","st","e","sta"].includes(e)}(t)&&"string"===typeof i&&(i=new kg(i)),n[t]=i))}),n}function lp(e,t,n){return El(e,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={};if(!e)return n;const r=Vg(op(e,t),null===t||void 0===t?void 0:t.customHeaderMap);return Object.entries(r).reduce((e,t)=>{let[n,r]=t;const i=Ng(r,{whitespace:!1});return i&&(e[n]=i),e},n)}(t,n))}function cp(e){if(!e)return"";const t=function(e){return e?Ng(op(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),{whitespace:!1}):""}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return encodeURIComponent(t)}const up=/CMCD=[^&#]+/;function dp(e,t,n){const r=function(e){if(!e)return"";const t=cp(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return"".concat("CMCD","=").concat(t)}(t,n);if(!r)return e;if(up.test(e))return e.replace(up,r);const i=e.includes("?")?"&":"?";return"".concat(e).concat(i).concat(r)}function hp(e,t,n,r){e&&Object.keys(t).forEach(i=>{const s=e.filter(e=>e.groupId===i).map(e=>{const s=El({},e);return s.details=void 0,s.attrs=new sd(s.attrs),s.url=s.attrs.URI=fp(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),s.groupId=s.attrs["GROUP-ID"]=t[i],s.attrs["PATHWAY-ID"]=r,s});e.push(...s)})}function fp(e,t,n,r){const{HOST:i,PARAMS:s,[n]:a}=r;let o;t&&(o=null==a?void 0:a[t],o&&(e=o));const l=new self.URL(e);return i&&!o&&(l.host=i),s&&Object.keys(s).sort().forEach(e=>{e&&l.searchParams.set(e,s[e])}),l.href}class gp extends Sl{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=gp.CDMCleanupPromise?[gp.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=e=>{const{initDataType:t,initData:n}=e,r='"'.concat(e.type,'" event: init data type: "').concat(t,'"');if(this.debug(r),null!==n){if(!this.keyFormatPromise){let e=Object.keys(this.keySystemAccessPromises);e.length||(e=Ld(this.config));const t=e.map(Ad).filter(e=>!!e);this.keyFormatPromise=this.getKeyFormatPromise(t)}this.keyFormatPromise.then(i=>{const s=kd(i);if("sinf"!==t||s!==Ed.FAIRPLAY)return void this.log('Ignoring "'.concat(e.type,'" event with init data type: "').concat(t,'" for selected key-system ').concat(s));let a;try{const e=Ql(new Uint8Array(n)),t=uc(gd(JSON.parse(e).sinf));if(!t)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");a=new Uint8Array(t.subarray(8,24))}catch(d){return void this.warn("".concat(r," Failed to parse sinf: ").concat(d))}const o=Dl(a),{keyIdToKeySessionPromise:l,mediaKeySessions:c}=this;let u=l[o];for(let e=0;e<c.length;e++){const r=c[e],i=r.decryptdata;if(!i.keyId)continue;const s=Dl(i.keyId);if(ud(a,i.keyId)||-1!==i.uri.replace(/-/g,"").indexOf(o)){if(u=l[s],!u)continue;if(i.pssh)break;delete l[s],i.pssh=new Uint8Array(n),i.keyId=a,u=l[o]=u.then(()=>this.generateRequestWithPreferredKeySession(r,t,n,"encrypted-event-key-match")),u.catch(e=>this.handleError(e));break}}u||this.handleError(new Error("Key ID ".concat(o," not encountered in playlist. Key-system sessions ").concat(c.length,".")))}).catch(e=>this.handleError(e))}},this.onWaitingForKey=e=>{this.log('"'.concat(e.type,'" event'))},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(ll.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(ll.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(ll.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(ll.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(ll.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(ll.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(ll.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(ll.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(ll.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(ll.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:n}=this.config,r=null==t?void 0:t[e];return r?r.licenseUrl:e===Ed.WIDEVINE&&n?n:void 0}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(void 0===t)throw new Error('no license server URL configured for key-system "'.concat(e,'"'));return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,n=null==t?void 0:t[e];if(n)return n.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'.concat(e,'"]'))}attemptKeySystemAccess(e){const t=this.hls.levels,n=(e,t,n)=>!!e&&n.indexOf(e)===t,r=t.map(e=>e.audioCodec).filter(n),i=t.map(e=>e.videoCodec).filter(n);return r.length+i.length===0&&i.push("avc1.42e01e"),new Promise((t,n)=>{const s=e=>{const a=e.shift();this.getMediaKeysPromise(a,r,i).then(e=>t({keySystem:a,mediaKeys:e})).catch(t=>{e.length?s(e):n(t instanceof vp?t:new vp({type:al.KEY_SYSTEM_ERROR,details:ol.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))})};s(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:n}=this.config;if("function"!==typeof n){let e="Configured requestMediaKeySystemAccess is not a function ".concat(n);return null===wd&&"http:"===self.location.protocol&&(e="navigator.requestMediaKeySystemAccess is not available over insecure protocol ".concat(location.protocol)),Promise.reject(new Error(e))}return n(e,t)}getMediaKeysPromise(e,t,n){var r;const i=function(e,t,n,r){let i;switch(e){case Ed.FAIRPLAY:i=["cenc","sinf"];break;case Ed.WIDEVINE:case Ed.PLAYREADY:i=["cenc"];break;case Ed.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error("Unknown key-system: ".concat(e))}return function(e,t,n,r){return[{initDataTypes:e,persistentState:r.persistentState||"optional",distinctiveIdentifier:r.distinctiveIdentifier||"optional",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:t.map(e=>({contentType:"audio/mp4; codecs=".concat(e),robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null})),videoCapabilities:n.map(e=>({contentType:"video/mp4; codecs=".concat(e),robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null}))}]}(i,t,n,r)}(e,t,n,this.config.drmSystemOptions||{});let s=this.keySystemAccessPromises[e],a=null==(r=s)?void 0:r.keySystemAccess;if(!a){this.log('Requesting encrypted media "'.concat(e,'" key-system access with config: ').concat(Zc(i))),a=this.requestMediaKeySystemAccess(e,i);const t=s=this.keySystemAccessPromises[e]={keySystemAccess:a};return a.catch(t=>{this.log('Failed to obtain access to key-system "'.concat(e,'": ').concat(t))}),a.then(n=>{this.log('Access for key-system "'.concat(n.keySystem,'" obtained'));const r=this.fetchServerCertificate(e);this.log('Create media-keys for "'.concat(e,'"'));const i=t.mediaKeys=n.createMediaKeys().then(n=>(this.log('Media-keys created for "'.concat(e,'"')),t.hasMediaKeys=!0,r.then(t=>t?this.setMediaKeysServerCertificate(n,e,t):n)));return i.catch(t=>{this.error('Failed to create media-keys for "'.concat(e,'"}: ').concat(t))}),i})}return a.then(()=>s.mediaKeys)}createMediaKeySessionContext(e){let{decryptdata:t,keySystem:n,mediaKeys:r}=e;this.log('Creating key-system session "'.concat(n,'" keyId: ').concat(Dl(t.keyId||[])," keyUri: ").concat(t.uri));const i=r.createSession(),s={decryptdata:t,keySystem:n,mediaKeys:r,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(s),s}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const n=this.createMediaKeySessionContext(e),r=pp(t),i="cenc";this.keyIdToKeySessionPromise[r]=this.generateRequestWithPreferredKeySession(n,i,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}updateKeySession(e,t){const n=e.mediaKeysSession;return this.log('Updating key-session "'.concat(n.sessionId,'" for keyId ').concat(Dl(e.decryptdata.keyId||[]),"\n      } (data length: ").concat(t.byteLength,")")),n.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(e=>{let{hasMediaKeys:t}=e;return!!t}).map(e=>{let{keySystem:t}=e;return Ad(t)}).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(e=>{let{keySystem:t,mediaKeys:n}=e;return this.attemptSetMediaKeys(t,n)})}selectKeySystem(e){return new Promise((t,n)=>{this.getKeySystemSelectionPromise(e).then(e=>{let{keySystem:r}=e;const i=Ad(r);i?t(i):n(new Error('Unable to find format for key-system "'.concat(r,'"')))}).catch(n)})}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: ".concat(e.sn," ").concat(e.type,": ").concat(e.level,") key formats ").concat(t.join(", "))),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){const t=Ld(this.config),n=e.map(kd).filter(e=>!!e&&-1!==t.indexOf(e));return this.selectKeySystem(n)}getKeyStatus(e){const{mediaKeySessions:t}=this;for(let n=0;n<t.length;n++){const r=mp(e,t[n]);if(r)return r}}loadKey(e){const t=e.keyInfo.decryptdata,n=pp(t),r=this.bannedKeyIds[n];if(r||"internal-error"===this.getKeyStatus(t)){const n=yp(r||"internal-error",t);return this.handleError(n,e.frag),Promise.reject(n)}const i="(keyId: ".concat(n,' format: "').concat(t.keyFormat,'" method: ').concat(t.method," uri: ").concat(t.uri,")");this.log("Starting session for key ".concat(i));const s=this.keyIdToKeySessionPromise[n];if(!s){const r=this.getKeySystemForKeyPromise(t).then(n=>{let{keySystem:r,mediaKeys:s}=n;return this.throwIfDestroyed(),this.log("Handle encrypted media sn: ".concat(e.frag.sn," ").concat(e.frag.type,": ").concat(e.frag.level," using key ").concat(i)),this.attemptSetMediaKeys(r,s).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:r,mediaKeys:s,decryptdata:t})))}).then(e=>{const n=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(e,"cenc",n,"playlist-key")});return r.catch(t=>this.handleError(t,e.frag)),this.keyIdToKeySessionPromise[n]=r,r}return s.catch(n=>{if(n instanceof vp){const r=Tl({},n.data);"internal-error"===this.getKeyStatus(t)&&(r.decryptdata=t);const i=new vp(r,n.message);this.handleError(i,e.frag)}}),s}throwIfDestroyed(){if(!this.hls)throw new Error("invalid state")}handleError(e,t){if(this.hls)if(e instanceof vp){t&&(e.data.frag=t);const n=e.data.decryptdata;this.error("".concat(e.message).concat(n?" (".concat(Dl(n.keyId||[]),")"):"")),this.hls.trigger(ll.ERROR,e.data)}else this.error(e.message),this.hls.trigger(ll.ERROR,{type:al.KEY_SYSTEM_ERROR,details:ol.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0})}getKeySystemForKeyPromise(e){const t=pp(e),n=this.keyIdToKeySessionPromise[t];if(!n){const t=kd(e.keyFormat),n=t?[t]:Ld(this.config);return this.attemptKeySystemAccess(n)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=Ld(this.config)),0===e.length)throw new vp({type:al.KEY_SYSTEM_ERROR,details:ol.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options ".concat(Zc({drmSystems:this.config.drmSystems})));return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaKeys===t)return Promise.resolve();const n=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'.concat(e,'"'));const r=Promise.all(n).then(()=>{if(!this.media)throw this.mediaKeys=null,new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.mediaKeys=t,this.setMediaKeysQueue.push(r),r.then(()=>{this.log('Media-keys set for "'.concat(e,'"')),n.push(r),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(e=>-1===n.indexOf(e))})}generateRequestWithPreferredKeySession(e,t,n,r){var i;const s=null==(i=this.config.drmSystems)||null==(i=i[e.keySystem])?void 0:i.generateRequest;if(s)try{const r=s.call(this.hls,t,n,e);if(!r)throw new Error("Invalid response from configured generateRequest filter");t=r.initDataType,n=r.initData?r.initData:null,e.decryptdata.pssh=n?new Uint8Array(n):null}catch(f){if(this.warn(f.message),this.hls&&this.hls.config.debug)throw f}if(null===n)return this.log('Skipping key-session request for "'.concat(r,'" (no initData)')),Promise.resolve(e);const a=pp(e.decryptdata),o=e.decryptdata.uri;this.log('Generating key-session request for "'.concat(r,'" keyId: ').concat(a," URI: ").concat(o," (init data type: ").concat(t," length: ").concat(n.byteLength,")"));const l=new Mh,c=e._onmessage=t=>{const n=e.mediaKeysSession;if(!n)return void l.emit("error",new Error("invalid state"));const{messageType:r,message:i}=t;this.log('"'.concat(r,'" message event for session "').concat(n.sessionId,'" message size: ').concat(i.byteLength)),"license-request"===r||"license-renewal"===r?this.renewLicense(e,i).catch(e=>{l.eventNames().length?l.emit("error",e):this.handleError(e)}):"license-release"===r?e.keySystem===Ed.FAIRPLAY&&this.updateKeySession(e,pd("acknowledged")).then(()=>this.removeSession(e)).catch(e=>this.handleError(e)):this.warn('unhandled media key message type "'.concat(r,'"'))},u=(e,t)=>{let n;t.keyStatus=e,e.startsWith("usable")?l.emit("resolved"):"internal-error"===e||"output-restricted"===e||"output-downscaled"===e?n=yp(e,t.decryptdata):"expired"===e?n=new Error("key expired (keyId: ".concat(a,")")):"released"===e?n=new Error("key released"):"status-pending"===e||this.warn('unhandled key status change "'.concat(e,'" (keyId: ').concat(a,")")),n&&(l.eventNames().length?l.emit("error",n):this.handleError(n))},d=e._onkeystatuseschange=t=>{if(!e.mediaKeysSession)return void l.emit("error",new Error("invalid state"));const n=this.getKeyStatuses(e);if(!Object.keys(n).some(e=>"status-pending"!==n[e]))return;if("expired"===n[a])return this.log("Expired key ".concat(Zc(n),' in key-session "').concat(e.mediaKeysSession.sessionId,'"')),void this.renewKeySession(e);let r=n[a];if(r)u(r,e);else{var i;const t=1e3;e.keyStatusTimeouts||(e.keyStatusTimeouts={}),(i=e.keyStatusTimeouts)[a]||(i[a]=self.setTimeout(()=>{if(!e.mediaKeysSession||!this.mediaKeys)return;const n=this.getKeyStatus(e.decryptdata);if(n&&"status-pending"!==n)return this.log("No status for keyId ".concat(a,' in key-session "').concat(e.mediaKeysSession.sessionId,'". Using session key-status ').concat(n," from other session.")),u(n,e);this.log("key status for ".concat(a,' in key-session "').concat(e.mediaKeysSession.sessionId,'" timed out after ').concat(t,"ms")),r="internal-error",u(r,e)},t)),this.log("No status for keyId ".concat(a," (").concat(Zc(n),")."))}};gh(e.mediaKeysSession,"message",c),gh(e.mediaKeysSession,"keystatuseschange",d);const h=new Promise((e,t)=>{l.on("error",t),l.on("resolved",e)});return e.mediaKeysSession.generateRequest(t,n).then(()=>{this.log('Request generated for key-session "'.concat(e.mediaKeysSession.sessionId,'" keyId: ').concat(a," URI: ").concat(o))}).catch(t=>{throw new vp({type:al.KEY_SYSTEM_ERROR,details:ol.KEY_SYSTEM_NO_SESSION,error:t,decryptdata:e.decryptdata,fatal:!1},"Error generating key-session request: ".concat(t))}).then(()=>h).catch(t=>(l.removeAllListeners(),this.removeSession(e).then(()=>{throw t}))).then(()=>(l.removeAllListeners(),e))}getKeyStatuses(e){const t={};return e.mediaKeysSession.keyStatuses.forEach((n,r)=>{if("string"===typeof r&&"object"===typeof n){const e=r;r=n,n=e}const i="buffer"in r?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r);e.keySystem===Ed.PLAYREADY&&16===i.length&&md(i);const s=Dl(i);"internal-error"===n&&(this.bannedKeyIds[s]=n),this.log('key status change "'.concat(n,'" for keyStatuses keyId: ').concat(s,' key-session "').concat(e.mediaKeysSession.sessionId,'"')),t[s]=n}),t}fetchServerCertificate(e){const t=this.config,n=new(0,t.loader)(t),r=this.getServerCertificateUrl(e);return r?(this.log('Fetching server certificate for "'.concat(e,'"')),new Promise((i,s)=>{const a={responseType:"arraybuffer",url:r},o=t.certLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(e,t,n,r)=>{i(e.data)},onError:(t,n,i,o)=>{s(new vp({type:al.KEY_SYSTEM_ERROR,details:ol.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:Tl({url:a.url,data:void 0},t)},'"'.concat(e,'" certificate request failed (').concat(r,"). Status: ").concat(t.code," (").concat(t.text,")")))},onTimeout:(t,n,i)=>{s(new vp({type:al.KEY_SYSTEM_ERROR,details:ol.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:{url:a.url,data:void 0}},'"'.concat(e,'" certificate request timed out (').concat(r,")")))},onAbort:(e,t,n)=>{s(new Error("aborted"))}};n.load(a,l,c)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,n){return new Promise((r,i)=>{e.setServerCertificate(n).then(i=>{this.log("setServerCertificate ".concat(i?"success":"not supported by CDM"," (").concat(n.byteLength,') on "').concat(t,'"')),r(e)}).catch(e=>{i(new vp({type:al.KEY_SYSTEM_ERROR,details:ol.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(t=>this.updateKeySession(e,new Uint8Array(t)).catch(t=>{throw new vp({type:al.KEY_SYSTEM_ERROR,details:ol.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:e.decryptdata,error:t,fatal:!1},t.message)}))}unpackPlayReadyKeyMessage(e,t){const n=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const r=(new DOMParser).parseFromString(n,"application/xml"),i=r.querySelectorAll("HttpHeader");if(i.length>0){let t;for(let n=0,r=i.length;n<r;n++){var s,a;t=i[n];const r=null==(s=t.querySelector("name"))?void 0:s.textContent,o=null==(a=t.querySelector("value"))?void 0:a.textContent;r&&o&&e.setRequestHeader(r,o)}}const o=r.querySelector("Challenge"),l=null==o?void 0:o.textContent;if(!l)throw new Error("Cannot find <Challenge> in key message");return pd(atob(l))}setupLicenseXHR(e,t,n,r){const i=this.config.licenseXhrSetup;return i?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return i.call(this.hls,e,t,n,r)}).catch(s=>{if(!n.decryptdata)throw s;return e.open("POST",t,!0),i.call(this.hls,e,t,n,r)}).then(n=>{e.readyState||e.open("POST",t,!0);return{xhr:e,licenseChallenge:n||r}}):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:r}))}requestLicense(e,t){const n=this.config.keyLoadPolicy.default;return new Promise((r,i)=>{const s=this.getLicenseServerUrlOrThrow(e.keySystem);this.log("Sending license request to URL: ".concat(s));const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return i(new Error("invalid state"));if(4===a.readyState)if(200===a.status){this._requestLicenseFailureCount=0;let t=a.response;this.log("License received ".concat(t instanceof ArrayBuffer?t.byteLength:t));const n=this.config.licenseResponseCallback;if(n)try{t=n.call(this.hls,a,s,e)}catch(o){this.error(o)}r(t)}else{const o=n.errorRetry,l=o?o.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>l||a.status>=400&&a.status<500)i(new vp({type:al.KEY_SYSTEM_ERROR,details:ol.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:e.decryptdata,fatal:!0,networkDetails:a,response:{url:s,data:void 0,code:a.status,text:a.statusText}},"License Request XHR failed (".concat(s,"). Status: ").concat(a.status," (").concat(a.statusText,")")));else{const n=l-this._requestLicenseFailureCount+1;this.warn("Retrying license request, ".concat(n," attempts left")),this.requestLicense(e,t).then(r,i)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=a,this.setupLicenseXHR(a,s,e,t).then(t=>{let{xhr:n,licenseChallenge:r}=t;e.keySystem==Ed.PLAYREADY&&(r=this.unpackPlayReadyKeyMessage(n,r)),n.send(r)}).catch(i)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const n=t.media;this.media=n,gh(n,"encrypted",this.onMediaEncrypted),gh(n,"waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media;e&&(ph(e,"encrypted",this.onMediaEncrypted),ph(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;if(this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={},!this.mediaKeys&&!this.mediaKeySessions.length)return;const t=this.media,n=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,Cd.clearKeyUriToKeyIdMap();const r=n.length;gp.CDMCleanupPromise=Promise.all(n.map(e=>this.removeSession(e)).concat((null==t||null==(e=t.setMediaKeys(null))?void 0:e.catch(e=>{this.log("Could not clear media keys: ".concat(e)),this.hls&&this.hls.trigger(ll.ERROR,{type:al.OTHER_ERROR,details:ol.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error("Could not clear media keys: ".concat(e))})}))||Promise.resolve())).catch(e=>{this.log("Could not close sessions and clear media keys: ".concat(e)),this.hls&&this.hls.trigger(ll.ERROR,{type:al.OTHER_ERROR,details:ol.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error("Could not close sessions and clear media keys: ".concat(e))})}).then(()=>{r&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this.keyFormatPromise=null,this.bannedKeyIds={}}onManifestLoaded(e,t){let{sessionKeys:n}=t;if(n&&this.config.emeEnabled&&!this.keyFormatPromise){const e=n.reduce((e,t)=>(-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e),[]);this.log("Selecting key-system from session-keys ".concat(e.join(", "))),this.keyFormatPromise=this.getKeyFormatPromise(e)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:n,decryptdata:r}=e;if(t){this.log('Remove licenses and keys and close session "'.concat(t.sessionId,'" keyId: ').concat(Dl((null==r?void 0:r.keyId)||[]))),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const i=this.mediaKeySessions.indexOf(e);i>-1&&this.mediaKeySessions.splice(i,1);const{keyStatusTimeouts:s}=e;s&&Object.keys(s).forEach(e=>self.clearTimeout(s[e]));const{drmSystemOptions:a}=this.config,o=function(e){var t;return!!e&&("persistent-license"===e.sessionType||!(null==(t=e.sessionTypes)||!t.some(e=>"persistent-license"===e)))}(a)?new Promise((e,n)=>{self.setTimeout(()=>n(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(e).catch(n)}):Promise.resolve();return o.catch(e=>{this.log("Could not remove session: ".concat(e)),this.hls&&this.hls.trigger(ll.ERROR,{type:al.OTHER_ERROR,details:ol.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error("Could not remove session: ".concat(e))})}).then(()=>t.close()).catch(e=>{this.log("Could not close session: ".concat(e)),this.hls&&this.hls.trigger(ll.ERROR,{type:al.OTHER_ERROR,details:ol.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error("Could not close session: ".concat(e))})})}return Promise.resolve()}}function pp(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return Dl(e.keyId)}function mp(e,t){return e.keyId&&t.mediaKeysSession.keyStatuses.has(e.keyId)?t.mediaKeysSession.keyStatuses.get(e.keyId):e.matches(t.decryptdata)?t.keyStatus:void 0}gp.CDMCleanupPromise=void 0;class vp extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}function yp(e,t){const n="output-restricted"===e,r=n?ol.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:ol.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new vp({type:al.KEY_SYSTEM_ERROR,details:r,fatal:!1,decryptdata:t},n?"HDCP level output restricted":'key status changed to "'.concat(e,'"'))}function Ep(e,t){let n;try{n=new Event("addtrack")}catch(wE){n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function bp(e,t){const n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error("addCue is failed for: ".concat(t))}catch(wE){Rl.debug("[texttrack-utils]: ".concat(wE));try{const n=new self.TextTrackCue(t.startTime,t.endTime,t.text);n.id=t.id,e.addCue(n)}catch(r){Rl.debug("[texttrack-utils]: Legacy TextTrackCue fallback failed: ".concat(r))}}"disabled"===n&&(e.mode=n)}function Tp(e,t){const n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues)for(let r=e.cues.length;r--;)t&&e.cues[r].removeEventListener("enter",t),e.removeCue(e.cues[r]);"disabled"===n&&(e.mode=n)}function Sp(e,t,n,r){const i=e.mode;if("disabled"===i&&(e.mode="hidden"),e.cues&&e.cues.length>0){const i=function(e,t,n){const r=[],i=function(e,t){if(t<=e[0].startTime)return 0;const n=e.length-1;if(t>e[n].endTime)return-1;let r,i=0,s=n;for(;i<=s;)if(r=Math.floor((s+i)/2),t<e[r].startTime)s=r-1;else{if(!(t>e[r].startTime&&i<n))return r;i=r+1}return e[i].startTime-t<t-e[s].startTime?i:s}(e,t);if(i>-1)for(let s=i,a=e.length;s<a;s++){const i=e[s];if(i.startTime>=t&&i.endTime<=n)r.push(i);else if(i.startTime>n)return r}return r}(e.cues,t,n);for(let t=0;t<i.length;t++)r&&!r(i[t])||e.removeCue(i[t])}"disabled"===i&&(e.mode=i)}function _p(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];"subtitles"!==r.kind&&"captions"!==r.kind||!r.label||t.push(e[n])}return t}function kp(e){let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()}const Ap=.025;let Lp=function(e){return e[e.Point=0]="Point",e[e.Range=1]="Range",e}({});function wp(e,t,n){return"".concat(e.identifier,"-").concat(n+1,"-").concat(kp(t))}class Rp{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,null==(e=this.assetListLoader)||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;const n=this.playoutLimit;if(e<=0||isNaN(n))return!1;if(0===n)return!0;return((null==(t=this.assetList[e])?void 0:t.startOffset)||0)>n}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return Ip(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(0===this.startTime||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime;return t-Ip(t,e)<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=rl(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return Ip(e,t)}return e}get appendInPlace(){return!!this.appendInPlaceStarted||!this.appendInPlaceDisabled&&!(this.cue.once||this.cue.pre||!this.startIsAligned||!(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<Ap))}set appendInPlace(e){this.appendInPlaceStarted?this.resetOnResume=!e:this.appendInPlaceDisabled=!e}get timelineStart(){return null!==this._timelineStart?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return t=null!==this._duration?this._duration:this.dateRange.duration?this.dateRange.duration:this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return"RANGE"===this.dateRange.attr["X-TIMELINE-OCCUPIES"]?Lp.Range:Lp.Point}get supplementsPrimary(){return"PRIMARY"===this.dateRange.attr["X-TIMELINE-STYLE"]}get contentMayVary(){return"NO"!==this.dateRange.attr["X-CONTENT-MAY-VARY"]}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||null!==this.assetListResponse}toString(){return'["'.concat((e=this).identifier,'" ').concat(e.cue.pre?"<pre>":e.cue.post?"<post>":"").concat(e.timelineStart.toFixed(2),"-").concat(e.resumeTime.toFixed(2),"]");var e}}function Ip(e,t){return e-t.start<t.duration/2&&!(Math.abs(e-(t.start+t.duration))<Ap)?t.start:t.start+t.duration}function xp(e,t,n){const r=new self.URL(e,n);return"data:"!==r.protocol&&r.searchParams.set("_HLS_primary_id",t),r}function Cp(e,t){for(;null!=(n=e.assetList[++t])&&n.error;)var n;return t}function Dp(e){const t=e.timelineStart,n=e.duration||0;return'["'.concat(e.identifier,'" ').concat(t.toFixed(2),"-").concat((t+n).toFixed(2),"]")}class Pp{constructor(e,t,n,r){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(ll.PLAYOUT_LIMIT_REACHED,{})};const i=this.hls=new e(t);this.interstitial=n,this.assetItem=r;const s=()=>{this.hasDetails=!0};i.once(ll.LEVEL_LOADED,s),i.once(ll.AUDIO_TRACK_LOADED,s),i.once(ll.SUBTITLE_TRACK_LOADED,s),i.on(ll.MEDIA_ATTACHING,(e,t)=>{let{media:n}=t;this.removeMediaListeners(),this.mediaAttached=n;this.interstitial.playoutLimit&&(n.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&i.on(ll.BUFFER_APPENDED,()=>{const e=this.bufferedEnd;this.reachedPlayout(e)&&(this._bufferedEosTime=e,i.trigger(ll.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let n=this.assetItem.uri;try{n=xp(n,e.config.primarySessionId||"").href}catch(t){}e.loadSource(n)}}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if(null!=(t=this.hls)&&t.bufferedToEnd)return!0;if(!e)return!1;const n=Math.min(this._bufferedEosTime||1/0,this.duration),r=this.timelineOffset,i=$u.bufferInfo(e,r,0);return this.getAssetTime(i.end)>=n-.02}reachedPlayout(e){const t=this.interstitial.playoutLimit;return this.startOffset+e>=t}get destroyed(){var e;return!(null!=(e=this.hls)&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return(null==(e=this.hls)?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=$u.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const t=this.interstitial.playoutLimit;if(t){const n=t-this.startOffset;if(n>0&&n<e)return n}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return(null==(e=this.hls)?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const n=e-t;if(Math.abs(n)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,n=this.duration;return Math.min(Math.max(0,e-t),n)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){var e;this.mediaAttached&&(null!=(e=this.hls)&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd))}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var t;this.loadSource(),null==(t=this.hls)||t.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,null==(e=this.hls)||e.detachMedia()}resumeBuffering(){var e;null==(e=this.hls)||e.resumeBuffering()}pauseBuffering(){var e;null==(e=this.hls)||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),(null==(e=this.hls)?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const t=e=>delete e.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,n){var r;null==(r=this.hls)||r.on(e,t)}once(e,t,n){var r;null==(r=this.hls)||r.once(e,t)}off(e,t,n){var r;null==(r=this.hls)||r.off(e,t)}toString(){var e;return"HlsAssetPlayer: ".concat(Dp(this.assetItem)," ").concat(null==(e=this.hls)?void 0:e.sessionId," ").concat(this.appendInPlace?"append-in-place":"")}}class Op extends Sl{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((n,r)=>e<=r.startOffset&&t>r.startOffset?(delete r.error,n+1):n,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let n=-1;e.nextEvent?n=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(n=this.findEventIndex(e.previousEvent.identifier)+1);const r=this.items;if(r)for(r[n]||(void 0===t&&(t=e.start),n=this.findItemIndexAtTime(t));n>=0&&null!=(i=r[n])&&i.event;){var i;n--}return n}findItemIndexAtTime(e,t){const n=this.items;if(n)for(let r=0;r<n.length;r++){let i=n[r];if(t&&"primary"!==t&&(i=i[t]),e===i.start||e>i.start&&e<i.end)return r}return-1}findJumpRestrictedIndex(e,t){const n=this.items;if(n)for(let r=e;r<=t&&n[r];r++){const e=n[r].event;if(null!=e&&e.restrictions.jump&&!e.appendInPlace)return r}return-1}findEventIndex(e){const t=this.items;if(t)for(let r=t.length;r--;){var n;if((null==(n=t[r].event)?void 0:n.identifier)===e)return r}return-1}findAssetIndex(e,t){const n=e.assetList,r=n.length;if(r>1)for(let i=0;i<r;i++){const e=n[i];if(!e.error){const n=e.timelineStart;if(t===n||t>n&&(t<n+(e.duration||0)||i===r-1))return i}}return 0}get assetIdAtEnd(){var e;const t=null==(e=this.items)||null==(e=e[this.length-1])?void 0:e.event;if(t){const e=t.assetList,n=e[e.length-1];if(n)return n.identifier}return null}parseInterstitialDateRanges(e,t){const n=e.main.details,{dateRanges:r}=n,i=this.events,s=this.parseDateRanges(r,{url:n.url},t),a=Object.keys(r),o=i?i.filter(e=>!a.includes(e.identifier)):[];s.length&&s.sort((e,t)=>{const n=e.cue.pre,r=e.cue.post,i=t.cue.pre,s=t.cue.post;if(n&&!i)return-1;if(i&&!n)return 1;if(r&&!s)return 1;if(s&&!r)return-1;if(!n&&!i&&!r&&!s){const n=e.startTime,r=t.startTime;if(n!==r)return n-r}return e.dateRange.tagOrder-t.dateRange.tagOrder}),this.events=s,o.forEach(e=>{this.removeEvent(e)}),this.updateSchedule(e,o)}updateSchedule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=this.events||[];if(r.length||t.length||this.length<2){const i=this.items,s=this.parseSchedule(r,e);(n||t.length||(null==i?void 0:i.length)!==s.length||s.some((e,t)=>Math.abs(e.playout.start-i[t].playout.start)>.005||Math.abs(e.playout.end-i[t].playout.end)>.005))&&(this.items=s,this.onScheduleUpdate(t,i))}}parseDateRanges(e,t,n){const r=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const a=i[s],o=e[a];if(o.isInterstitial){let e=this.eventMap[a];e?e.setDateRange(o):(e=new Rp(o,t),this.eventMap[a]=e,!1===n&&(e.appendInPlace=n)),r.push(e)}}return r}parseSchedule(e,t){const n=[],r=t.main.details,i=r.live?1/0:r.edge;let s=0;if((e=e.filter(e=>!e.error&&!(e.cue.once&&e.hasPlayed))).length){this.resolveOffsets(e,t);let r=0,o=0;if(e.forEach((t,a)=>{const l=t.cue.pre,c=t.cue.post,u=e[a-1]||null,d=t.appendInPlace,h=c?i:t.startOffset,f=t.duration,g=t.timelineOccupancy===Lp.Range?f:0,p=t.resumptionOffset,m=(null==u?void 0:u.startTime)===h,v=h+t.cumulativeDuration;let y=d?v+f:h+p;if(l||!c&&h<=0){const e=o;o+=g,t.timelineStart=v;const r=s;s+=f,n.push({event:t,start:v,end:y,playout:{start:r,end:s},integrated:{start:e,end:o}})}else{if(!(h<=i))return;{if(!m){const i=h-r;if(i>.033){const l=r,c=o;o+=i;const u=s;s+=i;const d={previousEvent:e[a-1]||null,nextEvent:t,start:l,end:l+i,playout:{start:u,end:s},integrated:{start:c,end:o}};n.push(d)}else i>0&&u&&(u.cumulativeDuration+=i,n[n.length-1].end=h)}c&&(y=v),t.timelineStart=v;const i=o;o+=g;const l=s;s+=f,n.push({event:t,start:v,end:y,playout:{start:l,end:s},integrated:{start:i,end:o}})}}const E=t.resumeTime;r=c||E>i?i:E}),r<i){var a;const e=r,t=o,l=i-r;o+=l;const c=s;s+=l,n.push({previousEvent:(null==(a=n[n.length-1])?void 0:a.event)||null,nextEvent:null,start:r,end:e+l,playout:{start:c,end:s},integrated:{start:t,end:o}})}this.setDurations(i,s,o)}else{const e=0;n.push({previousEvent:null,nextEvent:null,start:e,end:i,playout:{start:e,end:i},integrated:{start:e,end:i}}),this.setDurations(i,i,i)}return n}setDurations(e,t,n){this.durations={primary:e,playout:t,integrated:n}}resolveOffsets(e,t){const n=t.main.details,r=n.live?1/0:n.edge;let i=0,s=-1;e.forEach((a,o)=>{const l=a.cue.pre,c=a.cue.post,u=l?0:c?r:a.startTime;this.updateAssetDurations(a);if(s===u?a.cumulativeDuration=i:(i=0,s=u),!c&&a.snapOptions.in&&(a.resumeAnchor=lu(null,n.fragments,a.startOffset+a.resumptionOffset,0,0)||void 0),a.appendInPlace&&!a.appendInPlaceStarted){this.primaryCanResumeInPlaceAt(a,t)||(a.appendInPlace=!1)}if(!a.appendInPlace&&o+1<e.length){e[o+1].startTime-e[o].resumeTime<.033&&(e[o+1].appendInPlace=!1,e[o+1].appendInPlace&&this.warn("Could not change append strategy for abutting event ".concat(a)))}const d=rl(a.resumeOffset)?a.resumeOffset:a.duration;i+=d})}primaryCanResumeInPlaceAt(e,t){const n=e.resumeTime,r=e.startTime+e.resumptionOffset;if(Math.abs(n-r)>Ap)return this.log('"'.concat(e.identifier,'" resumption ').concat(n," not aligned with estimated timeline end ").concat(r)),!1;return!Object.keys(t).some(r=>{const i=t[r].details,s=i.edge;if(n>=s)return this.log('"'.concat(e.identifier,'" resumption ').concat(n," past ").concat(r," playlist end ").concat(s)),!1;const a=lu(null,i.fragments,n);if(!a)return this.log('"'.concat(e.identifier,'" resumption ').concat(n," does not align with any fragments in ").concat(r," playlist (").concat(i.fragStart,"-").concat(i.fragmentEnd,")")),!0;const o="audio"===r?.175:0;return!(Math.abs(a.start-n)<Ap+o||Math.abs(a.end-n)<Ap+o)&&(this.log('"'.concat(e.identifier,'" resumption ').concat(n," not aligned with ").concat(r," fragment bounds (").concat(a.start,"-").concat(a.end," sn: ").concat(a.sn," cc: ").concat(a.cc,")")),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let n=0,r=!1,i=!1;for(let s=0;s<e.assetList.length;s++){const a=e.assetList[s],o=t+n;a.startOffset=n,a.timelineStart=o,r||(r=null===a.duration),i||(i=!!a.error);n+=a.error?0:a.duration||0}e.duration=r&&!i?Math.max(n,e.duration):n}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function Mp(e){return"[".concat(e.event?'"'+e.event.identifier+'"':"primary",": ").concat(e.start.toFixed(2),"-").concat(e.end.toFixed(2),"]")}class Fp{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const n=e.assetListUrl;let r;try{r=xp(n,this.hls.sessionId,e.baseUrl)}catch(u){const t=this.assignAssetListError(e,ol.ASSET_LIST_LOAD_ERROR,u,n);return void this.hls.trigger(ll.ERROR,t)}t&&"data:"!==r.protocol&&r.searchParams.set("_HLS_start_offset",""+t);const i=this.hls.config,s=new(0,i.loader)(i),a={responseType:"json",url:r.href},o=i.interstitialAssetListLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(t,n,r,i)=>{const s=t.data,a=null==s?void 0:s.ASSETS;if(!Array.isArray(a)){const t=this.assignAssetListError(e,ol.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),r.url,n,i);return void this.hls.trigger(ll.ERROR,t)}e.assetListResponse=s,this.hls.trigger(ll.ASSET_LIST_LOADED,{event:e,assetListResponse:s,networkDetails:i})},onError:(t,n,r,i)=>{const s=this.assignAssetListError(e,ol.ASSET_LIST_LOAD_ERROR,new Error("Error loading X-ASSET-LIST: HTTP status ".concat(t.code," ").concat(t.text," (").concat(n.url,")")),n.url,i,r);this.hls.trigger(ll.ERROR,s)},onTimeout:(t,n,r)=>{const i=this.assignAssetListError(e,ol.ASSET_LIST_LOAD_TIMEOUT,new Error("Timeout loading X-ASSET-LIST (".concat(n.url,")")),n.url,t,r);this.hls.trigger(ll.ERROR,i)}};return s.load(a,l,c),this.hls.trigger(ll.ASSET_LIST_LOADING,{event:e}),s}assignAssetListError(e,t,n,r,i,s){return e.error=n,{type:al.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:r,error:n,networkDetails:s,stats:i}}}function Np(e){null==e||e.play().catch(()=>{})}function Bp(e,t){return"[".concat(e,"] Advancing timeline position to ").concat(t)}class Up{constructor(e){this.buffered=void 0;const t=(t,n,r)=>{if((n>>>=0)>r-1)throw new DOMException("Failed to execute '".concat(t,"' on 'TimeRanges': The index provided (").concat(n,") is greater than the maximum bound (").concat(r,")"));return e[n][t]};this.buffered={get length(){return e.length},end:n=>t("end",n,e.length),start:n=>t("start",n,e.length)}}}const Gp={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Hp=e=>String.fromCharCode(Gp[e]||e),jp=15,zp=100,Vp={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Kp={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Yp={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Wp={25:2,26:4,29:6,30:8,31:10,27:13,28:15},qp=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class Xp{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const n="function"===typeof t?t():t;Rl.log("".concat(this.time," [").concat(e,"] ").concat(n))}}}const Qp=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t};class $p{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class Zp{constructor(){this.uchar=" ",this.penState=new $p}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}class Jp{constructor(e){this.chars=[],this.pos=0,this.currPenState=new $p,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<zp;t++)this.chars.push(new Zp);this.logger=e}equals(e){for(let t=0;t<zp;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<zp;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<zp;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>zp&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=zp)}moveCursor(e){const t=this.pos+e;if(e>1)for(let n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=Hp(e);this.pos>=zp?this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}clearFromPos(e){let t;for(t=e;t<zp;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<zp;n++){const r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e);this.chars[this.pos].setPenState(this.currPenState)}}class em{constructor(e){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<jp;t++)this.rows.push(new Jp(e));this.logger=e}reset(){for(let e=0;e<jp;e++)this.rows[e].clear();this.currRow=14}equals(e){let t=!0;for(let n=0;n<jp;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<jp;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<jp;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e);this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+Zc(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let t=0;t<jp;t++)this.rows[t].clear();const e=this.currRow+1-this.nrRollUpRows,n=this.lastOutputScreen;if(n){const r=n.rows[e].cueStartTime,i=this.logger.time;if(null!==r&&null!==i&&r<i)for(let s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(n.rows[e+s])}}this.currRow=t;const n=this.rows[this.currRow];if(null!==e.indent){const t=e.indent,r=Math.max(t-1,0);n.setCursor(e.indent),e.color=n.chars[r].penState.foreground}const r={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(r)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+Zc(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(null===this.nrRollUpRows)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",r=-1;for(let i=0;i<jp;i++){const n=this.rows[i].getTextString();n&&(r=i+1,e?t.push("Row "+r+": '"+n+"'"):t.push(n.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n}getTextAndFormat(){return this.rows}}class tm{constructor(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new em(n),this.nonDisplayedMemory=new em(n),this.lastOutputScreen=new em(n),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}this.logger.log(2,"MIDROW: "+Zc(t)),this.writeScreen.setPen(t)}outputDataUpdate(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class nm{constructor(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory={a:null,b:null},this.logger=void 0;const r=this.logger=new Xp;this.channels=[null,new tm(e,t,r),new tm(e+1,n,r)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let n=0;n<t.length;n+=2){const e=127&t[n],r=127&t[n+1];let i=!1,s=null;if(0===e&&0===r)continue;this.logger.log(3,()=>"["+Qp([t[n],t[n+1]])+"] -> ("+Qp([e,r])+")");const a=this.cmdHistory;if(e>=16&&e<=31){if(im(e,r,a)){rm(null,null,a),this.logger.log(3,()=>"Repeated command ("+Qp([e,r])+") is dropped");continue}rm(e,r,this.cmdHistory),i=this.parseCmd(e,r),i||(i=this.parseMidrow(e,r)),i||(i=this.parsePAC(e,r)),i||(i=this.parseBackgroundAttributes(e,r))}else rm(null,null,a);if(!i&&(s=this.parseChars(e,r),s)){const e=this.currentChannel;if(e&&e>0){this.channels[e].insertChars(s)}else this.logger.log(2,"No channel found yet. TEXT-MODE?")}i||s||this.logger.log(2,()=>"Couldn't parse cleaned data "+Qp([e,r])+" orig: "+Qp([t[n],t[n+1]]))}}parseCmd(e,t){if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=33&&t<=35))return!1;const n=20===e||21===e||23===e?1:2,r=this.channels[n];return 20===e||21===e||28===e||29===e?32===t?r.ccRCL():33===t?r.ccBS():34===t?r.ccAOF():35===t?r.ccAON():36===t?r.ccDER():37===t?r.ccRU(2):38===t?r.ccRU(3):39===t?r.ccRU(4):40===t?r.ccFON():41===t?r.ccRDC():42===t?r.ccTR():43===t?r.ccRTD():44===t?r.ccEDM():45===t?r.ccCR():46===t?r.ccENM():47===t&&r.ccEOC():r.ccTO(t-32),this.currentChannel=n,!0}parseMidrow(e,t){let n=0;if((17===e||25===e)&&t>=32&&t<=47){if(n=17===e?1:2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const r=this.channels[n];return!!r&&(r.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+Qp([e,t])+")"),!0)}return!1}parsePAC(e,t){let n;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127)&&!((16===e||24===e)&&t>=64&&t<=95))return!1;const r=e<=23?1:2;n=t>=64&&t<=95?1===r?Vp[e]:Yp[e]:1===r?Kp[e]:Wp[e];const i=this.channels[r];return!!i&&(i.setPAC(this.interpretPAC(n,t)),this.currentChannel=r,!0)}interpretPAC(e,t){let n;const r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1===(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r}parseChars(e,t){let n,r=null,i=null;if(e>=25?(n=2,i=e-8):(n=1,i=e),i>=17&&i<=19){let e;e=17===i?t+80:18===i?t+112:t+144,this.logger.log(2,()=>"Special char '"+Hp(e)+"' in channel "+n),r=[e]}else e>=32&&e<=127&&(r=0===t?[e]:[e,t]);return r&&this.logger.log(3,()=>"Char codes =  "+Qp(r).join(",")),r}parseBackgroundAttributes(e,t){if(!((16===e||24===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=45&&t<=47))return!1;let n;const r={};16===e||24===e?(n=Math.floor((t-32)/2),r.background=qp[n],t%2===1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0));const i=e<=23?1:2;return this.channels[i].setBkgData(r),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}rm(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}function rm(e,t,n){n.a=e,n.b=t}function im(e,t,n){return n.a===e&&n.b===t}var sm=function(){if(null!=yd&&yd.VTTCue)return self.VTTCue;const e=["","lr","rl"],t=["start","middle","end","left","right"];function n(e,t){if("string"!==typeof t)return!1;if(!Array.isArray(e))return!1;const n=t.toLowerCase();return!!~e.indexOf(n)&&n}function r(e){return n(t,e)}function i(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=1;for(;i<arguments.length;i++){const t=arguments[i];for(const n in t)e[n]=t[n]}return e}function s(t,s,a){const o=this,l={enumerable:!0};o.hasBeenReset=!1;let c="",u=!1,d=t,h=s,f=a,g=null,p="",m=!0,v="auto",y="start",E=50,b="middle",T=50,S="middle";Object.defineProperty(o,"id",i({},l,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(o,"pauseOnExit",i({},l,{get:function(){return u},set:function(e){u=!!e}})),Object.defineProperty(o,"startTime",i({},l,{get:function(){return d},set:function(e){if("number"!==typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",i({},l,{get:function(){return h},set:function(e){if("number"!==typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",i({},l,{get:function(){return f},set:function(e){f=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",i({},l,{get:function(){return g},set:function(e){g=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",i({},l,{get:function(){return p},set:function(t){const r=function(t){return n(e,t)}(t);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");p=r,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",i({},l,{get:function(){return m},set:function(e){m=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",i({},l,{get:function(){return v},set:function(e){if("number"!==typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",i({},l,{get:function(){return y},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",i({},l,{get:function(){return E},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",i({},l,{get:function(){return b},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",i({},l,{get:function(){return T},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");T=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",i({},l,{get:function(){return S},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");S=t,this.hasBeenReset=!0}})),o.displayState=void 0}return s.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},s}();class am{decode(e,t){if(!e)return"";if("string"!==typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function om(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+parseFloat(r||0)}const n=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?t(n[2],n[3],0,n[4]):t(n[1],n[2],n[3],n[4]):null}class lm{constructor(){this.values=Object.create(null)}set(e,t){this.get(e)||""===t||(this.values[e]=t)}get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,n){for(let r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function cm(e,t,n,r){const i=r?e.split(r):[e];for(const s in i){if("string"!==typeof i[s])continue;const e=i[s].split(n);if(2!==e.length)continue;t(e[0],e[1])}}const um=new sm(0,0,""),dm="middle"===um.align?"middle":"center";function hm(e,t,n){const r=e;function i(){const t=om(e);if(null===t)throw new Error("Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function s(){e=e.replace(/^\s+/,"")}if(s(),t.startTime=i(),s(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.slice(3),s(),t.endTime=i(),s(),function(e,t){const r=new lm;cm(e,function(e,t){let i;switch(e){case"region":for(let i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":i=t.split(","),r.integer(e,i[0]),r.percent(e,i[0])&&r.set("snapToLines",!1),r.alt(e,i[0],["auto"]),2===i.length&&r.alt("lineAlign",i[1],["start",dm,"end"]);break;case"position":i=t.split(","),r.percent(e,i[0]),2===i.length&&r.alt("positionAlign",i[1],["start",dm,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",dm,"end","left","right"])}},/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");let i=r.get("line","auto");"auto"===i&&-1===um.line&&(i=-1),t.line=i,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",dm);let s=r.get("position","auto");"auto"===s&&50===um.position&&(s="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=s}(e,t)}function fm(e){return e.replace(/<br(?: \/)?>/gi,"\n")}class gm{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new am,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;function n(){let e=t.buffer,n=0;for(e=fm(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;const r=e.slice(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.slice(n),r}function r(e){cm(e,function(e,t){},/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{let e="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;e=n();const r=e.match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(null==r||!r[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let s=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(s?s=!1:e=n(),t.state){case"HEADER":/:/.test(e)?r(e):e||(t.state="ID");continue;case"NOTE":e||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(e)){t.state="NOTE";break}if(!e)continue;if(t.cue=new sm(0,0,""),t.state="CUE",-1===e.indexOf("--\x3e")){t.cue.id=e;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{hm(e,t.cue,t.regionList)}catch(i){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const n=-1!==e.indexOf("--\x3e");if(!e||n&&(s=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=e}continue;case"BADCUE":e||(t.state="ID")}}}catch(i){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const pm=/\r\n|\n\r|\n|\r/g,mm=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.slice(n,n+t.length)===t};function vm(e,t,n){return kp(e.toString())+kp(t.toString())+kp(n)}function ym(e,t,n,r,i,s,a){const o=new gm,l=Cl(new Uint8Array(e)).trim().replace(pm,"\n").split("\n"),c=[],u=t?function(e){return Hf(e,9e4,1/(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1))}(t.baseTime,t.timescale):0;let d,h="00:00.000",f=0,g=0,p=!0;o.oncue=function(e){const s=n[r];let a=n.ccOffset;const o=(f-u)/9e4;if(null!=s&&s.new&&(void 0!==g?a=n.ccOffset=s.start:function(e,t,n){let r=e[t],i=e[r.prevCC];if(!i||!i.new&&r.new)return e.ccOffset=e.presentationOffset=r.start,void(r.new=!1);for(;null!=(s=i)&&s.new;){var s;e.ccOffset+=r.start-i.start,r.new=!1,r=i,i=e[r.prevCC]}e.presentationOffset=n}(n,r,o)),o){if(!t)return void(d=new Error("Missing initPTS for VTT MPEGTS"));a=o-n.presentationOffset}const l=e.endTime-e.startTime,h=Xf(9e4*(e.startTime+a-g),9e4*i)/9e4;e.startTime=Math.max(h,0),e.endTime=Math.max(h+l,0);const p=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(p)),e.id||(e.id=vm(e.startTime,e.endTime,p)),e.endTime>0&&c.push(e)},o.onparsingerror=function(e){d=e},o.onflush=function(){d?a(d):s(c)},l.forEach(e=>{if(p){if(mm(e,"X-TIMESTAMP-MAP=")){p=!1,e.slice(16).split(",").forEach(e=>{mm(e,"LOCAL:")?h=e.slice(6):mm(e,"MPEGTS:")&&(f=parseInt(e.slice(7)))});try{g=function(e){let t=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),r=parseInt(e.slice(-9,-7)),i=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!rl(t)||!rl(n)||!rl(r)||!rl(i))throw Error("Malformed X-TIMESTAMP-MAP: Local:".concat(e));return t+=1e3*n,t+=6e4*r,t+=36e5*i,t}(h)/1e3}catch(t){d=t}return}""===e&&(p=!1)}o.parse(e+"\n")}),o.flush()}const Em="stpp.ttml.im1t",bm=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Tm=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Sm={left:"start",center:"center",right:"end",start:"start",end:"end"};function _m(e,t,n,r){const i=tc(new Uint8Array(e),["mdat"]);if(0===i.length)return void r(new Error("Could not parse IMSC1 mdat"));const s=i.map(e=>Cl(e)),a=function(e,t){return Hf(e,t,1/(arguments.length>2&&void 0!==arguments[2]?arguments[2]:1),arguments.length>3&&void 0!==arguments[3]&&arguments[3])}(t.baseTime,1,t.timescale);try{s.forEach(e=>n(function(e,t){const n=(new DOMParser).parseFromString(e,"text/xml"),r=n.getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");const i={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},s=Object.keys(i).reduce((e,t)=>(e[t]=r.getAttribute("ttp:".concat(t))||i[t],e),{}),a="preserve"!==r.getAttribute("xml:space"),o=Am(km(r,"styling","style")),l=Am(km(r,"layout","region")),c=km(r,"body","[begin]");return[].map.call(c,e=>{const n=Lm(e,a);if(!n||!e.hasAttribute("begin"))return null;const r=Im(e.getAttribute("begin"),s),i=Im(e.getAttribute("dur"),s);let c=Im(e.getAttribute("end"),s);if(null===r)throw Rm(e);if(null===c){if(null===i)throw Rm(e);c=r+i}const u=new sm(r-t,c-t,n);u.id=vm(u.startTime,u.endTime,u.text);const d=function(e,t,n){const r="http://www.w3.org/ns/ttml#styling";let i=null;const s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=null!=e&&e.hasAttribute("style")?e.getAttribute("style"):null;a&&n.hasOwnProperty(a)&&(i=n[a]);return s.reduce((n,s)=>{const a=wm(t,r,s)||wm(e,r,s)||wm(i,r,s);return a&&(n[s]=a),n},{})}(l[e.getAttribute("region")],o[e.getAttribute("style")],o),{textAlign:h}=d;if(h){const e=Sm[h];e&&(u.lineAlign=e),u.align=h}return El(u,d),u}).filter(e=>null!==e)}(e,a)))}catch(o){r(o)}}function km(e,t,n){const r=e.getElementsByTagName(t)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function Am(e){return e.reduce((e,t)=>{const n=t.getAttribute("xml:id");return n&&(e[n]=t),e},{})}function Lm(e,t){return[].slice.call(e.childNodes).reduce((e,n,r)=>{var i;return"br"===n.nodeName&&r?e+"\n":null!=(i=n.childNodes)&&i.length?Lm(n,t):t?e+n.textContent.trim().replace(/\s+/g," "):e+n.textContent},"")}function wm(e,t,n){return e&&e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function Rm(e){return new Error("Could not parse ttml timestamp ".concat(e))}function Im(e,t){if(!e)return null;let n=om(e);return null===n&&(bm.test(e)?n=function(e,t){const n=bm.exec(e),r=(0|n[4])+(0|n[5])/t.subFrameRate;return 3600*(0|n[1])+60*(0|n[2])+(0|n[3])+r/t.frameRate}(e,t):Tm.test(e)&&(n=function(e,t){const n=Tm.exec(e),r=Number(n[1]);switch(n[2]){case"h":return 3600*r;case"m":return 60*r;case"ms":return 1e3*r;case"f":return r/t.frameRate;case"t":return r/t.tickRate}return r}(e,t))),n}class xm{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}function Cm(e){return e.characteristics&&/transcribes-spoken-dialog/gi.test(e.characteristics)&&/describes-music-and-sound/gi.test(e.characteristics)?"captions":"subtitles"}function Dm(e,t){return!!e&&e.kind===Cm(t)&&dg(t,e)}function Pm(e,t,n,r){return Math.min(t,r)-Math.max(e,n)}const Om=/\s/,Mm={newCue(e,t,n,r){const i=[];let s,a,o,l,c;const u=self.VTTCue||self.TextTrackCue;for(let h=0;h<r.rows.length;h++)if(s=r.rows[h],o=!0,l=0,c="",!s.isEmpty()){var d;for(let e=0;e<s.chars.length;e++)Om.test(s.chars[e].uchar)&&o?l++:(c+=s.chars[e].uchar,o=!1);s.cueStartTime=t,t===n&&(n+=1e-4),l>=16?l--:l++;const r=fm(c.trim()),f=vm(t,n,r);null!=e&&null!=(d=e.cues)&&d.getCueById(f)||(a=new u(t,n,r),a.id=f,a.line=h+1,a.align="left",a.position=10+Math.min(80,10*Math.floor(8*l/32)),i.push(a))}return e&&i.length&&(i.sort((e,t)=>"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line),i.forEach(t=>bp(e,t))),i}};const Fm=/(\d+)-(\d+)\/(\d+)/;class Nm{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||Bm,this.controller=new self.AbortController,this.stats=new Bl}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,n){const r=this.stats;if(r.loading.start)throw new Error("Loader can only be used once.");r.loading.start=self.performance.now();const i=function(e,t){const n={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(El({},e.headers))};e.rangeEnd&&n.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1));return n}(e,this.controller.signal),s="arraybuffer"===e.responseType,a=s?"byteLength":"length",{maxTimeToFirstByteMs:o,maxLoadTimeMs:l}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,i),self.clearTimeout(this.requestTimeout),t.timeout=o&&rl(o)?o:l,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(r,e,this.response))},t.timeout);(rg(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(n=>{var i;this.response=this.loader=n;const a=Math.max(self.performance.now(),r.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=l,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(r,e,this.response))},l-(a-r.loading.start)),!n.ok){const{status:e,statusText:t}=n;throw new Um(t||"fetch, bad network response",e,n)}r.loading.first=a,r.total=function(e){const t=e.get("Content-Range");if(t){const e=function(e){const t=Fm.exec(e);if(t)return parseInt(t[2])-parseInt(t[1])+1}(t);if(rl(e))return e}const n=e.get("Content-Length");if(n)return parseInt(n)}(n.headers)||r.total;const o=null==(i=this.callbacks)?void 0:i.onProgress;return o&&rl(t.highWaterMark)?this.loadProgressively(n,r,e,t.highWaterMark,o):s?n.arrayBuffer():"json"===e.responseType?n.json():n.text()}).then(n=>{var i,s;const o=this.response;if(!o)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),r.loading.end=Math.max(self.performance.now(),r.loading.first);const l=n[a];l&&(r.loaded=r.total=l);const c={url:o.url,data:n,code:o.status},u=null==(i=this.callbacks)?void 0:i.onProgress;u&&!rl(t.highWaterMark)&&u(r,e,n,o),null==(s=this.callbacks)||s.onSuccess(c,r,e,o)}).catch(t=>{var n;if(self.clearTimeout(this.requestTimeout),r.aborted)return;const i=t&&t.code||0,s=t?t.message:null;null==(n=this.callbacks)||n.onError({code:i,text:s},e,t?t.details:null,r)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;const s=new Ch,a=e.body.getReader(),o=()=>a.read().then(a=>{if(a.done)return s.dataLength&&i(t,n,s.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const l=a.value,c=l.length;return t.loaded+=c,c<r||s.dataLength?(s.push(l),s.dataLength>=r&&i(t,n,s.flush().buffer,e)):i(t,n,l.buffer,e),o()}).catch(()=>Promise.reject());return o()}}function Bm(e,t){return new self.Request(e.url,t)}class Um extends Error{constructor(e,t,n){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=n}}const Gm=/^age:\s*[\d.]+\s*$/im;class Hm{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Bl,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const n=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0,r.aborted=!1;const i=this.xhrSetup;i?Promise.resolve().then(()=>{if(this.loader===n&&!this.stats.aborted)return i(n,t.url)}).catch(e=>{if(this.loader===n&&!this.stats.aborted)return n.open("GET",t.url,!0),i(n,t.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,t,e)}).catch(e=>{var i;null==(i=this.callbacks)||i.onError({code:n.status,text:e.message},t,n,r)}):this.openAndSendXhr(n,t,e)}openAndSendXhr(e,t,n){e.readyState||e.open("GET",t.url,!0);const r=t.headers,{maxTimeToFirstByteMs:i,maxLoadTimeMs:s}=n.loadPolicy;if(r)for(const a in r)e.setRequestHeader(a,r[a]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=i&&rl(i)?i:s,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:n}=this;if(!e||!t)return;const r=t.readyState,i=this.config;if(!n.aborted&&r>=2&&(0===n.loading.first&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),i.timeout!==i.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),i.timeout=i.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),4===r)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const r=t.status,l="text"===t.responseType?t.responseText:null;if(r>=200&&r<300){const i=null!=l?l:t.response;if(null!=i){var s,a;n.loading.end=Math.max(self.performance.now(),n.loading.first);const o="arraybuffer"===t.responseType?i.byteLength:i.length;n.loaded=n.total=o,n.bwEstimate=8e3*n.total/(n.loading.end-n.loading.first);const l=null==(s=this.callbacks)?void 0:s.onProgress;l&&l(n,e,i,t);const c={url:t.responseURL,data:i,code:r};return void(null==(a=this.callbacks)||a.onSuccess(c,n,e,t))}}const c=i.loadPolicy.errorRetry;var o;if(yu(c,n.retry,!1,{url:e.url,data:void 0,code:r}))this.retry(c);else Rl.error("".concat(r," while loading ").concat(e.url)),null==(o=this.callbacks)||o.onError({code:r,text:t.statusText},e,t,n)}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry;if(yu(e,this.stats.retry,!0))this.retry(e);else{var t;Rl.warn("timeout while loading ".concat(null==(t=this.context)?void 0:t.url));const e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:n}=this;this.retryDelay=mu(e,n.retry),n.retry++,Rl.warn("".concat(status?"HTTP Status "+status:"Timeout"," while loading ").concat(null==t?void 0:t.url,", retrying ").concat(n.retry,"/").concat(e.maxNumRetry," in ").concat(this.retryDelay,"ms")),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&Gm.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp("^".concat(e,":\\s*[\\d.]+\\s*$"),"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const jm=Tl(Tl({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:6e7,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:Hm,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:class extends Sl{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=e=>{var t;const{fragCurrent:n,partCurrent:r,hls:i}=this,{autoLevelEnabled:s,media:a}=i;if(!n||!a)return;const o=performance.now(),l=r?r.stats:n.stats,c=r?r.duration:n.duration,u=o-l.loading.start,d=i.minAutoLevel,h=n.level,f=this._nextAutoLevel;if(l.aborted||l.loaded&&l.loaded===l.total||h<=d)return this.clearTimer(),void(this._nextAutoLevel=-1);if(!s)return;const g=f>-1&&f!==h,p=!!e||g;if(!p&&(a.paused||!a.playbackRate||!a.readyState))return;const m=i.mainForwardBufferInfo;if(!p&&null===m)return;const v=this.bwEstimator.getEstimateTTFB(),y=Math.abs(a.playbackRate);if(u<=Math.max(v,c/(2*y)*1e3))return;const E=m?m.len/y:0,b=l.loading.first?l.loading.first-l.loading.start:-1,T=l.loaded&&b>-1,S=this.getBwEstimate(),_=i.levels,k=_[h],A=Math.max(l.loaded,Math.round(c*(n.bitrate||k.averageBitrate)/8));let L=T?u-b:u;L<1&&T&&(L=Math.min(u,8*l.loaded/S));const w=T?1e3*l.loaded/L:0,R=v/1e3,I=w?(A-l.loaded)/w:8*A/S+R;if(I<=E)return;const x=w?8*w:S,C=!0===(null==(t=(null==e?void 0:e.details)||this.hls.latestLevelDetails)?void 0:t.live),D=this.hls.config.abrBandWidthUpFactor;let P,O=Number.POSITIVE_INFINITY;for(P=h-1;P>d;P--){const e=_[P].maxBitrate,t=!_[P].details||C;if(O=this.getTimeToLoadFrag(R,x,c*e,t),O<Math.min(E,c+R))break}if(O>=I)return;if(O>10*c)return;T?this.bwEstimator.sample(u-Math.min(v,b),l.loaded):this.bwEstimator.sampleTTFB(u);const M=_[P].maxBitrate;this.getBwEstimate()*D>M&&this.resetEstimator(M);const F=this.findBestLevel(M,d,P,0,E,1,1);F>-1&&(P=F),this.warn("Fragment ".concat(n.sn).concat(r?" part "+r.index:""," of level ").concat(h," is loading too slowly;\n      Fragment duration: ").concat(n.duration.toFixed(3),"\n      Time to underbuffer: ").concat(E.toFixed(3)," s\n      Estimated load time for current fragment: ").concat(I.toFixed(3)," s\n      Estimated load time for down switch fragment: ").concat(O.toFixed(3)," s\n      TTFB estimate: ").concat(0|b," ms\n      Current BW estimate: ").concat(rl(S)?0|S:"Unknown"," bps\n      New BW estimate: ").concat(0|this.getBwEstimate()," bps\n      Switching to level ").concat(P," @ ").concat(0|M," bps")),i.nextLoadLevel=i.nextAutoLevel=P,this.clearTimer();const N=()=>{if(this.clearTimer(),this.fragCurrent===n&&this.hls.loadLevel===P&&P>0){const e=this.getStarvationDelay();if(this.warn("Aborting inflight request ".concat(P>0?"and switching down":"","\n      Fragment duration: ").concat(n.duration.toFixed(3)," s\n      Time to underbuffer: ").concat(e.toFixed(3)," s")),n.abortRequests(),this.fragCurrent=this.partCurrent=null,P>d){let t=this.findBestLevel(this.hls.levels[d].bitrate,d,P,0,e,1,1);-1===t&&(t=d),this.hls.nextLoadLevel=this.hls.nextAutoLevel=t,this.resetEstimator(this.hls.levels[t].bitrate)}}};g||I>2*O?N():this.timer=self.setInterval(N,1e3*O),i.trigger(ll.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,part:r,stats:l})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log("setting initial bwe to ".concat(e)),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new vl(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ll.FRAG_LOADING,this.onFragLoading,this),e.on(ll.FRAG_LOADED,this.onFragLoaded,this),e.on(ll.FRAG_BUFFERED,this.onFragBuffered,this),e.on(ll.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(ll.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ll.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(ll.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(ll.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ll.FRAG_LOADING,this.onFragLoading,this),e.off(ll.FRAG_LOADED,this.onFragLoaded,this),e.off(ll.FRAG_BUFFERED,this.onFragBuffered,this),e.off(ll.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(ll.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ll.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(ll.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(ll.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const n=t.frag;if(!this.ignoreFragment(n)){var r;if(!n.bitrateTest)this.fragCurrent=n,this.partCurrent=null!=(r=t.part)?r:null;this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case ol.BUFFER_ADD_CODEC_ERROR:case ol.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case ol.FRAG_LOAD_TIMEOUT:{const e=t.frag,{fragCurrent:n,partCurrent:r}=this;if(e&&n&&e.sn===n.sn&&e.level===n.level){const t=performance.now(),n=r?r.stats:e.stats,i=t-n.loading.start,s=n.loading.first?n.loading.first-n.loading.start:-1;if(n.loaded&&s>-1){const e=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(i-Math.min(e,s),n.loaded)}else this.bwEstimator.sampleTTFB(i)}break}}}getTimeToLoadFrag(e,t,n,r){return e+n/t+(r?e+this.lastLevelLoadSec:0)}onLevelLoaded(e,t){const n=this.hls.config,{loading:r}=t.stats,i=r.end-r.first;rl(i)&&(this.lastLevelLoadSec=i/1e3),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,t){let{frag:n,part:r}=t;const i=r?r.stats:n.stats;if(n.type===fl&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(n)){if(this.clearTimer(),n.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const e=r?r.duration:n.duration,t=this.hls.levels[n.level],s=(t.loaded?t.loaded.bytes:0)+i.loaded,a=(t.loaded?t.loaded.duration:0)+e;t.loaded={bytes:s,duration:a},t.realBitrate=Math.round(8*s/a)}if(n.bitrateTest){const e={stats:i,frag:n,part:r,id:n.type};this.onFragBuffered(ll.FRAG_BUFFERED,e),n.bitrateTest=!1}else this.lastLoadedFragLevel=n.level}}onFragBuffered(e,t){const{frag:n,part:r}=t,i=null!=r&&r.stats.loaded?r.stats:n.stats;if(i.aborted)return;if(this.ignoreFragment(n))return;const s=i.parsing.end-i.loading.start-Math.min(i.loading.first-i.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(s,i.loaded),i.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=s/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==fl||"initSegment"===e.sn}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,n=this.getBwEstimate(),r=this.hls.config.maxStarvationDelay,i=this.findBestLevel(n,t,e,0,r,1,1);if(i>-1)return i;const s=this.hls.firstLevel,a=Math.min(Math.max(s,t),e);return this.warn("Could not find best starting auto level. Defaulting to first in playlist ".concat(s," clamped to ").concat(a)),a}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,t=this.bwEstimator.canEstimate(),n=this.lastLoadedFragLevel>-1;if(-1!==e&&(!t||!n||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const r=t&&n?this.getNextABRAutoLevel():this.firstAutoLevel;if(-1!==e){const t=this.hls.levels;if(t.length>Math.max(e,r)&&t[e].loadError<=t[r].loadError)return e}return this._nextAutoLevel=r,this.nextAutoLevelKey=this.getAutoLevelKey(),r}getAutoLevelKey(){return"".concat(this.getBwEstimate(),"_").concat(this.getStarvationDelay().toFixed(2))}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:n}=this;if(n.levels.length<=1)return n.loadLevel;const{maxAutoLevel:r,config:i,minAutoLevel:s}=n,a=t?t.duration:e?e.duration:0,o=this.getBwEstimate(),l=this.getStarvationDelay();let c=i.abrBandWidthFactor,u=i.abrBandWidthUpFactor;if(l){const e=this.findBestLevel(o,s,r,l,0,c,u);if(e>=0)return this.rebufferNotice=-1,e}let d=a?Math.min(a,i.maxStarvationDelay):i.maxStarvationDelay;if(!l){const e=this.bitrateTestDelay;if(e){d=(a?Math.min(a,i.maxLoadingDelay):i.maxLoadingDelay)-e,this.info("bitrate test took ".concat(Math.round(1e3*e),"ms, set first fragment max fetchDuration to ").concat(Math.round(1e3*d)," ms")),c=u=1}}const h=this.findBestLevel(o,s,r,l,d,c,u);if(this.rebufferNotice!==h&&(this.rebufferNotice=h,this.info("".concat(l?"rebuffering expected":"buffer is empty",", optimal quality level ").concat(h))),h>-1)return h;const f=n.levels[s],g=n.loadLevelObj;return g&&(null==f?void 0:f.bitrate)<g.bitrate?s:n.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const n=t&&0!==t.playbackRate?Math.abs(t.playbackRate):1,r=e.mainForwardBufferInfo;return(r?r.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,n,r,i,s,a){var o;const l=r+i,c=this.lastLoadedFragLevel,u=-1===c?this.hls.firstLevel:c,{fragCurrent:d,partCurrent:h}=this,{levels:f,allAudioTracks:g,loadLevel:p,config:m}=this.hls;if(1===f.length)return 0;const v=f[u],y=!(null==(o=this.hls.latestLevelDetails)||!o.live),E=-1===p||-1===c;let b,T="SDR",S=(null==v?void 0:v.frameRate)||0;const{audioPreference:_,videoPreference:k}=m,A=this.audioTracksByGroup||(this.audioTracksByGroup=eu(g));let L=-1;if(E){if(-1!==this.firstSelection)return this.firstSelection;const r=this.codecTiers||(this.codecTiers=function(e,t,n,r){return e.slice(n,r+1).reduce((e,n,r)=>{if(!n.codecSet)return e;const i=n.audioGroups;let s=e[n.codecSet];s||(e[n.codecSet]=s={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:r,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!i,fragmentError:0}),s.minBitrate=Math.min(s.minBitrate,n.bitrate);const a=Math.min(n.height,n.width);return s.minHeight=Math.min(s.minHeight,a),s.minFramerate=Math.min(s.minFramerate,n.frameRate),s.minIndex=Math.min(s.minIndex,r),s.maxScore=Math.max(s.maxScore,n.score),s.fragmentError+=n.fragmentError,s.videoRanges[n.videoRange]=(s.videoRanges[n.videoRange]||0)+1,i&&i.forEach(e=>{if(!e)return;const n=t.groups[e];n&&(s.hasDefaultAudio=s.hasDefaultAudio||t.hasDefaultAudio?n.hasDefault:n.hasAutoSelect||!t.hasDefaultAudio&&!t.hasAutoSelectAudio,Object.keys(n.channels).forEach(e=>{s.channels[e]=(s.channels[e]||0)+n.channels[e]}))}),e},{})}(f,A,t,n)),i=function(e,t,n,r,i){const s=Object.keys(e),a=null==r?void 0:r.channels,o=null==r?void 0:r.audioCodec,l=null==i?void 0:i.videoCodec,c=a&&2===parseInt(a);let u=!1,d=!1,h=1/0,f=1/0,g=1/0,p=1/0,m=0,v=[];const{preferHDR:y,allowedVideoRanges:E}=$c(t,i);for(let _=s.length;_--;){const t=e[s[_]];u||(u=t.channels[2]>0),h=Math.min(h,t.minHeight),f=Math.min(f,t.minFramerate),g=Math.min(g,t.minBitrate),E.filter(e=>t.videoRanges[e]>0).length>0&&(d=!0)}h=rl(h)?h:0,f=rl(f)?f:0;const b=Math.max(1080,h),T=Math.max(30,f);g=rl(g)?g:n,n=Math.max(g,n),d||(t=void 0);const S=s.length>1;return{codecSet:s.reduce((t,r)=>{const i=e[r];if(r===t)return t;if(v=d?E.filter(e=>i.videoRanges[e]>0):[],S){if(i.minBitrate>n)return Jc(r,"min bitrate of ".concat(i.minBitrate," > current estimate of ").concat(n)),t;if(!i.hasDefaultAudio)return Jc(r,"no renditions with default or auto-select sound found"),t;if(o&&r.indexOf(o.substring(0,4))%5!==0)return Jc(r,'audio codec preference "'.concat(o,'" not found')),t;if(a&&!c){if(!i.channels[a])return Jc(r,"no renditions with ".concat(a," channel sound found (channels options: ").concat(Object.keys(i.channels),")")),t}else if((!o||c)&&u&&0===i.channels[2])return Jc(r,"no renditions with stereo sound found"),t;if(i.minHeight>b)return Jc(r,"min resolution of ".concat(i.minHeight," > maximum of ").concat(b)),t;if(i.minFramerate>T)return Jc(r,"min framerate of ".concat(i.minFramerate," > maximum of ").concat(T)),t;if(!v.some(e=>i.videoRanges[e]>0))return Jc(r,"no variants with VIDEO-RANGE of ".concat(Zc(v)," found")),t;if(l&&r.indexOf(l.substring(0,4))%5!==0)return Jc(r,'video codec preference "'.concat(l,'" not found')),t;if(i.maxScore<m)return Jc(r,"max score of ".concat(i.maxScore," < selected max of ").concat(m)),t}return t&&(Lc(r)>=Lc(t)||i.fragmentError>e[t].fragmentError)?t:(p=i.minIndex,m=i.maxScore,r)},void 0),videoRanges:v,preferHDR:y,minFramerate:f,minBitrate:g,minIndex:p}}(r,T,e,_,k),{codecSet:s,videoRanges:a,minFramerate:o,minBitrate:l,minIndex:c,preferHDR:u}=i;L=c,b=s,T=u?a[a.length-1]:a[0],S=o,e=Math.max(e,l),this.log("picked start tier ".concat(Zc(i)))}else b=null==v?void 0:v.codecSet,T=null==v?void 0:v.videoRange;const w=h?h.duration:d?d.duration:0,R=this.bwEstimator.getEstimateTTFB()/1e3,I=[];for(let C=n;C>=t;C--){var x;const t=f[C],o=C>u;if(!t)continue;if(m.useMediaCapabilities&&!t.supportedResult&&!t.supportedPromise){const n=navigator.mediaCapabilities;"function"===typeof(null==n?void 0:n.decodingInfo)&&Bc(t,A,T,S,e,_)?(t.supportedPromise=Uc(t,A,n,this.supportedCache),t.supportedPromise.then(e=>{if(!this.hls)return;t.supportedResult=e;const n=this.hls.levels,r=n.indexOf(t);e.error?this.warn('MediaCapabilities decodingInfo error: "'.concat(e.error,'" for level ').concat(r," ").concat(Zc(e))):e.supported?e.decodingInfoResults.some(e=>!1===e.smooth||!1===e.powerEfficient)&&this.log("MediaCapabilities decodingInfo for level ".concat(r," not smooth or powerEfficient: ").concat(Zc(e))):(this.warn("Unsupported MediaCapabilities decodingInfo result for level ".concat(r," ").concat(Zc(e))),r>-1&&n.length>1&&(this.log("Removing unsupported level ".concat(r)),this.hls.removeLevel(r),-1===this.hls.loadLevel&&(this.hls.nextLoadLevel=0)))}).catch(e=>{this.warn("Error handling MediaCapabilities decodingInfo: ".concat(e))})):t.supportedResult=Fc}if((b&&t.codecSet!==b||T&&t.videoRange!==T||o&&S>t.frameRate||!o&&S>0&&S<t.frameRate||null!=(x=t.supportedResult)&&null!=(x=x.decodingInfoResults)&&x.some(e=>!1===e.smooth))&&(!E||C!==L)){I.push(C);continue}const d=t.details,g=(h?null==d?void 0:d.partTarget:null==d?void 0:d.averagetargetduration)||w;let v;v=o?a*e:s*e;const k=w&&r>=2*w&&0===i?t.averageBitrate:t.maxBitrate,D=this.getTimeToLoadFrag(R,v,k*g,void 0===d);if(v>=k&&(C===c||0===t.loadError&&0===t.fragmentError)&&(D<=R||!rl(D)||y&&!this.bitrateTestDelay||D<l)){const e=this.forcedAutoLevel;return C===p||-1!==e&&e===p||(I.length&&this.trace("Skipped level(s) ".concat(I.join(",")," of ").concat(n,' max with CODECS and VIDEO-RANGE:"').concat(f[I[0]].codecs,'" ').concat(f[I[0]].videoRange,'; not compatible with "').concat(b,'" ').concat(T)),this.info("switch candidate:".concat(u,"->").concat(C," adjustedbw(").concat(Math.round(v),")-bitrate=").concat(Math.round(v-k)," ttfb:").concat(R.toFixed(1)," avgDuration:").concat(g.toFixed(1)," maxFetchDuration:").concat(l.toFixed(1)," fetchDuration:").concat(D.toFixed(1)," firstSelection:").concat(E," codecSet:").concat(t.codecSet," videoRange:").concat(t.videoRange," hls.loadLevel:").concat(p))),E&&(this.firstSelection=C),C}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:n}=this.hls;return Math.min(Math.max(e,n),t)}},bufferController:class extends Sl{constructor(e,t){var n;super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=e=>{var t;this.hls&&"open"===(null==(t=this.mediaSource)?void 0:t.readyState)&&this.hls.pauseBuffering()},this._onStartStreaming=e=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=e=>{const{media:t,mediaSource:n}=this;e&&this.log("Media source opened"),t&&n&&(n.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(ll.MEDIA_ATTACHED,{media:t,mediaSource:n}),null!==this.mediaSource&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:e,_objectUrl:t}=this;e!==t&&this.error("Media element src was set while attaching MediaSource (".concat(t," > ").concat(e,")"))},this.hls=e,this.fragmentTracker=t,this.appendSource=(n=Il(e.config.preferManagedMediaSource),"undefined"!==typeof self&&n===self.ManagedMediaSource),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(ll.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(ll.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ll.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ll.BUFFER_RESET,this.onBufferReset,this),e.on(ll.BUFFER_APPENDING,this.onBufferAppending,this),e.on(ll.BUFFER_CODECS,this.onBufferCodecs,this),e.on(ll.BUFFER_EOS,this.onBufferEos,this),e.on(ll.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(ll.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(ll.FRAG_PARSED,this.onFragParsed,this),e.on(ll.FRAG_CHANGED,this.onFragChanged,this),e.on(ll.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(ll.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(ll.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ll.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ll.BUFFER_RESET,this.onBufferReset,this),e.off(ll.BUFFER_APPENDING,this.onBufferAppending,this),e.off(ll.BUFFER_CODECS,this.onBufferCodecs,this),e.off(ll.BUFFER_EOS,this.onBufferEos,this),e.off(ll.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(ll.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(ll.FRAG_PARSED,this.onFragParsed,this),e.off(ll.FRAG_CHANGED,this.onFragChanged,this),e.off(ll.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const n={};if(this.operationQueue){const e=this.isUpdating();e||this.operationQueue.removeBlockers();const t=this.isQueued();(e||t)&&this.warn("Transfering MediaSource with".concat(t?" operations in queue":"").concat(e?" updating SourceBuffer(s)":""," ").concat(this.operationQueue)),this.operationQueue.destroy()}const r=this.transferData;return!this.sourceBufferCount&&r&&r.mediaSource===t?El(n,r.tracks):this.sourceBuffers.forEach(e=>{const[t]=e;t&&(n[t]=El({},this.tracks[t]),this.removeBuffer(t)),e[0]=e[1]=null}),{media:e,mediaSource:t,tracks:n}}initTracks(){this.sourceBuffers=[[null,null],[null,null]],this.tracks={},this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var n;let r=2;(t.audio&&!t.video||!t.altAudio)&&(r=1),this.bufferCodecEventsTotal=r,this.log("".concat(r," bufferCodec event(s) expected.")),null!=(n=this.transferData)&&n.mediaSource&&this.sourceBufferCount&&r&&this.bufferCreated()}onMediaAttaching(e,t){const n=this.media=t.media;this.transferData=this.overrides=void 0;const r=Il(this.appendSource);if(r){const e=!!t.mediaSource;(e||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const s=this.mediaSource=t.mediaSource||new r;if(this.assignMediaSource(s),e)this._objectUrl=n.src,this.attachTransferred();else{const e=this._objectUrl=self.URL.createObjectURL(s);if(this.appendSource)try{n.removeAttribute("src");const t=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||t&&s instanceof t,mg(n),function(e,t){const n=self.document.createElement("source");n.type="video/mp4",n.src=t,e.appendChild(n)}(n,e),n.load()}catch(i){n.src=e}else n.src=e}n.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,n;this.log("".concat((null==(t=this.transferData)?void 0:t.mediaSource)===e?"transferred":"created"," media source: ").concat(null==(n=e.constructor)?void 0:n.name)),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const n=this.tracks,r=t.tracks,i=r?Object.keys(r):null,s=i?i.length:0,a=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(r&&i&&s){if(!this.tracksReady)return this.hls.config.startFragPrefetch=!0,void this.log("attachTransferred: waiting for SourceBuffer track info");if(this.log("attachTransferred: (bufferCodecEventsTotal ".concat(this.bufferCodecEventsTotal,")\nrequired tracks: ").concat(Zc(n,(e,t)=>"initSegment"===e?void 0:t),";\ntransfer tracks: ").concat(Zc(r,(e,t)=>"initSegment"===e?void 0:t),"}")),!xl(r,n)){t.mediaSource=null,t.tracks=void 0;const i=e.currentTime,s=this.details,a=Math.max(i,(null==s?void 0:s.fragments[0].start)||0);return a-i>1?void this.log("attachTransferred: waiting for playback to reach new tracks start time ".concat(i," -> ").concat(a)):(this.warn('attachTransferred: resetting MediaSource for incompatible tracks ("'.concat(Object.keys(r),'"->"').concat(Object.keys(n),'") start time: ').concat(a," currentTime: ").concat(i)),this.onMediaDetaching(ll.MEDIA_DETACHING,{}),this.onMediaAttaching(ll.MEDIA_ATTACHING,t),void(e.currentTime=a))}this.transferData=void 0,i.forEach(e=>{const t=e,n=r[t];if(n){const e=n.buffer;if(e){const r=this.fragmentTracker,i=n.id;if(r.hasFragments(i)||r.hasParts(i)){const n=$u.getBuffered(e);r.detectEvictedFragments(t,n,i,null,!0)}const s=vg(t),a=[t,e];this.sourceBuffers[s]=a,e.updating&&this.operationQueue&&this.operationQueue.prependBlocker(t),this.trackSourceBuffer(t,n)}}}),a(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),a()}get mediaSourceOpenOrEnded(){var e;const t=null==(e=this.mediaSource)?void 0:e.readyState;return"open"===t||"ended"===t}onMediaDetaching(e,t){const n=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:r,mediaSource:i,_objectUrl:s}=this;if(i){if(this.log("media source ".concat(n?"transferring":"detaching")),n)this.sourceBuffers.forEach(e=>{let[t]=e;t&&this.removeBuffer(t)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const e="open"===i.readyState;try{const t=i.sourceBuffers;for(let n=t.length;n--;)e&&t[n].abort(),i.removeSourceBuffer(t[n]);e&&i.endOfStream()}catch(wE){this.warn("onMediaDetaching: ".concat(wE.message," while calling endOfStream"))}}this.sourceBufferCount&&this.onBufferReset()}i.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("sourceended",this._onMediaSourceEnded),i.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(i.removeEventListener("startstreaming",this._onStartStreaming),i.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}r&&(r.removeEventListener("emptied",this._onMediaEmptied),n||(s&&self.URL.revokeObjectURL(s),this.mediaSrc===s?(r.removeAttribute("src"),this.appendSource&&mg(r),r.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(ll.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(e=>{let[t]=e;t&&this.resetBuffer(t)}),this.initTracks()}resetBuffer(e){var t;const n=null==(t=this.tracks[e])?void 0:t.buffer;if(this.removeBuffer(e),n)try{var r;null!=(r=this.mediaSource)&&r.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}catch(wE){this.warn("onBufferReset ".concat(e),wE)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[vg(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new hg(this.tracks)}onBufferCodecs(e,t){var n;const r=this.tracks,i=Object.keys(t);this.log('BUFFER_CODECS: "'.concat(i,'" (current SB count ').concat(this.sourceBufferCount,")"));const s="audiovideo"in t&&(r.audio||r.video)||r.audiovideo&&("audio"in t||"video"in t),a=!s&&this.sourceBufferCount&&this.media&&i.some(e=>!r[e]);s||a?this.warn('Unsupported transition between "'.concat(Object.keys(r),'" and "').concat(i,'" SourceBuffers')):(i.forEach(e=>{var n,i;const s=t[e],{id:a,codec:o,levelCodec:l,container:c,metadata:u,supplemental:d}=s;let h=r[e];const f=null==(n=this.transferData)||null==(n=n.tracks)?void 0:n[e],g=null!=f&&f.buffer?f:h,p=(null==g?void 0:g.pendingCodec)||(null==g?void 0:g.codec),m=null==g?void 0:g.levelCodec;h||(h=r[e]={buffer:void 0,listeners:[],codec:o,supplemental:d,container:c,levelCodec:l,metadata:u,id:a});const v=xc(p,m),y=null==v?void 0:v.replace(fg,"$1");let E=xc(o,l);const b=null==(i=E)?void 0:i.replace(fg,"$1");E&&v&&y!==b&&("audio"===e.slice(0,5)&&(E=Ic(E,this.appendSource)),this.log("switching codec ".concat(p," to ").concat(E)),E!==(h.pendingCodec||h.codec)&&(h.pendingCodec=E),h.container=c,this.appendChangeType(e,c,E))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),this.sourceBufferCount||(this.bufferCodecEventsTotal>1&&!this.tracks.video&&!t.video&&"main"===(null==(n=t.audio)?void 0:n.id)&&(this.log("Main audio-only"),this.bufferCodecEventsTotal=1),this.mediaSourceOpenOrEnded&&this.checkPendingTracks()))}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const n=this.tracks[t];return e[t]={id:n.id,container:n.container,codec:n.codec,levelCodec:n.levelCodec},e},{})}appendChangeType(e,t,n){const r="".concat(t,";codecs=").concat(n),i={label:"change-type=".concat(r),execute:()=>{const i=this.tracks[e];if(i){const s=i.buffer;null!=s&&s.changeType&&(this.log("changing ".concat(e," sourceBuffer type to ").concat(r)),s.changeType(r),i.codec=n,i.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:t=>{this.warn("Failed to change ".concat(e," SourceBuffer type"),t)}};this.append(i,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const n=e.start,r=n+.05*e.duration;if(!0===(null==(t=this.fragmentTracker.getAppendedFrag(n,fl))?void 0:t.gap))return;const i={label:"block-audio",execute:()=>{var e;const t=this.tracks.video;(this.lastVideoAppendEnd>r||null!=t&&t.buffer&&$u.isBuffered(t.buffer,r)||!0===(null==(e=this.fragmentTracker.getAppendedFrag(r,fl))?void 0:e.gap))&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:e=>{this.warn("Error executing block-audio operation",e)}};this.blockedAudioAppend={op:i,frag:e},this.append(i,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:n}=this,{data:r,type:i,parent:s,frag:a,part:o,chunkMeta:l,offset:c}=t,u=l.buffering[i],{sn:d,cc:h}=a,f=self.performance.now();u.start=f;const g=a.stats.buffering,p=o?o.stats.buffering:null;0===g.start&&(g.start=f),p&&0===p.start&&(p.start=f);const m=n.audio;let v=!1;"audio"===i&&"audio/mpeg"===(null==m?void 0:m.container)&&(v=!this.lastMpegAudioChunk||1===l.id||this.lastMpegAudioChunk.sn!==l.sn,this.lastMpegAudioChunk=l);const y=n.video,E=null==y?void 0:y.buffer;if(E&&"initSegment"!==d){const e=o||a,t=this.blockedAudioAppend;if("audio"!==i||"main"===s||this.blockedAudioAppend||y.ending||y.ended){if("video"===i){const n=e.end;if(t){const e=t.frag.start;(n>e||n<this.lastVideoAppendEnd||$u.isBuffered(E,e))&&this.unblockAudio()}this.lastVideoAppendEnd=n}}else{const t=e.start+.05*e.duration,n=E.buffered,r=this.currentOp("video");n.length||r?!r&&!$u.isBuffered(E,t)&&this.lastVideoAppendEnd<t&&this.blockAudio(e):this.blockAudio(e)}}const b=(o||a).start,T={label:"append-".concat(i),execute:()=>{var e;u.executeStart=self.performance.now();const t=null==(e=this.tracks[i])?void 0:e.buffer;t&&(v?this.updateTimestampOffset(t,b,.1,i,d,h):void 0!==c&&rl(c)&&this.updateTimestampOffset(t,c,1e-6,i,d,h)),this.appendExecutor(r,i)},onStart:()=>{},onComplete:()=>{const e=self.performance.now();u.executeEnd=u.end=e,0===g.first&&(g.first=e),p&&0===p.first&&(p.first=e);const t={};this.sourceBuffers.forEach(e=>{let[n,r]=e;n&&(t[n]=$u.getBuffered(r))}),this.appendErrors[i]=0,"audio"===i||"video"===i?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(ll.BUFFER_APPENDED,{type:i,frag:a,part:o,chunkMeta:l,parent:a.type,timeRanges:t})},onError:e=>{var t;const n={type:al.MEDIA_ERROR,parent:a.type,details:ol.BUFFER_APPEND_ERROR,sourceBufferName:i,frag:a,part:o,chunkMeta:l,error:e,err:e,fatal:!1},r=null==(t=this.media)?void 0:t.error;if(e.code===DOMException.QUOTA_EXCEEDED_ERR||"QuotaExceededError"==e.name||"quota"in e)n.details=ol.BUFFER_FULL_ERROR;else if(e.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!r)n.errorAction=Ru(!0);else if(e.name===gg&&0===this.sourceBufferCount)n.errorAction=Ru(!0);else{const e=++this.appendErrors[i];this.warn("Failed ".concat(e,"/").concat(this.hls.config.appendErrorMaxRetry,' times to append segment in "').concat(i,'" sourceBuffer (').concat(r||"no media error",")")),(e>=this.hls.config.appendErrorMaxRetry||r)&&(n.fatal=!0)}this.hls.trigger(ll.ERROR,n)}};this.log('queuing "'.concat(i,'" append sn: ').concat(d).concat(o?" p: "+o.index:""," of ").concat(a.type===fl?"level":"track"," ").concat(a.level," cc: ").concat(h)),this.append(T,i,this.isPending(this.tracks[i]))}getFlushOp(e,t,n){return this.log('queuing "'.concat(e,'" remove ').concat(t,"-").concat(n)),{label:"remove",execute:()=>{this.removeExecutor(e,t,n)},onStart:()=>{},onComplete:()=>{this.hls.trigger(ll.BUFFER_FLUSHED,{type:e})},onError:r=>{this.warn("Failed to remove ".concat(t,"-").concat(n,' from "').concat(e,'" SourceBuffer'),r)}}}onBufferFlushing(e,t){const{type:n,startOffset:r,endOffset:i}=t;n?this.append(this.getFlushOp(n,r,i),n):this.sourceBuffers.forEach(e=>{let[t]=e;t&&this.append(this.getFlushOp(t,r,i),t)})}onFragParsed(e,t){const{frag:n,part:r}=t,i=[],s=r?r.elementaryStreams:n.elementaryStreams;s[Hl]?i.push("audiovideo"):(s[Ul]&&i.push("audio"),s[Gl]&&i.push("video"));0===i.length&&this.warn("Fragments must have at least one ElementaryStreamType set. type: ".concat(n.type," level: ").concat(n.level," sn: ").concat(n.sn)),this.blockBuffers(()=>{const e=self.performance.now();n.stats.buffering.end=e,r&&(r.stats.buffering.end=e);const t=r?r.stats:n.stats;this.hls.trigger(ll.FRAG_BUFFERED,{frag:n,part:r,stats:t,id:n.type})},i).catch(e=>{this.warn("Fragment buffered callback ".concat(e)),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(e=>{let[t]=e;if(t){const e=this.tracks[t];if(e)return!e.ended||e.ending}return!1})}onBufferEos(e,t){var n;this.sourceBuffers.forEach(e=>{let[n]=e;if(n){const e=this.tracks[n];t.type&&t.type!==n||(e.ending=!0,e.ended||(e.ended=!0,this.log("".concat(n," buffer reached EOS"))))}});const r=!1!==(null==(n=this.overrides)?void 0:n.endOfStream);this.sourceBufferCount>0&&!this.sourceBuffers.some(e=>{let[t]=e;var n;return t&&!(null!=(n=this.tracks[t])&&n.ended)})?r?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:e}=this;e&&"open"===e.readyState?(this.log("Calling mediaSource.endOfStream()"),e.endOfStream(),this.hls.trigger(ll.BUFFERED_TO_END,void 0)):e&&this.log("Could not call mediaSource.endOfStream(). mediaSource.readyState: ".concat(e.readyState))})):(this.tracksEnded(),this.hls.trigger(ll.BUFFERED_TO_END,void 0)):"video"===t.type&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(e=>{let[t]=e;if(null!==t){const e=this.tracks[t];e&&(e.ending=!1)}})}onLevelUpdated(e,t){let{details:n}=t;n.fragments.length&&(this.details=n,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,t){if(t.details===ol.BUFFER_APPEND_ERROR&&t.frag){var n;const e=null==(n=t.errorAction)?void 0:n.nextAutoLevel;rl(e)&&e!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:n}=this;if(!n||null===t)return;if(!this.sourceBufferCount)return;const r=e.config,i=n.currentTime,s=t.levelTargetDuration,a=t.live&&null!==r.liveBackBufferLength?r.liveBackBufferLength:r.backBufferLength;if(rl(a)&&a>=0){const e=Math.max(a,s),t=Math.floor(i/s)*s-e;this.flushBackBuffer(i,s,t)}const o=r.frontBufferFlushThreshold;if(rl(o)&&o>0){const e=Math.max(r.maxBufferLength,o),t=Math.max(e,s),n=Math.floor(i/s)*s+t;this.flushFrontBuffer(i,s,n)}}flushBackBuffer(e,t,n){this.sourceBuffers.forEach(e=>{let[t,r]=e;if(r){const e=$u.getBuffered(r);if(e.length>0&&n>e.start(0)){var i;this.hls.trigger(ll.BACK_BUFFER_REACHED,{bufferEnd:n});const e=this.tracks[t];if(null!=(i=this.details)&&i.live)this.hls.trigger(ll.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(null!=e&&e.ended)return void this.log("Cannot flush ".concat(t," back buffer while SourceBuffer is in ended state"));this.hls.trigger(ll.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:t})}}})}flushFrontBuffer(e,t,n){this.sourceBuffers.forEach(t=>{let[r,i]=t;if(i){const t=$u.getBuffered(i),s=t.length;if(s<2)return;const a=t.start(s-1),o=t.end(s-1);if(n>a||e>=a&&e<=o)return;this.hls.trigger(ll.BUFFER_FLUSHING,{startOffset:a,endOffset:1/0,type:r})}})}getDurationAndRange(){var e;const{details:t,mediaSource:n}=this;if(!t||!this.media||"open"!==(null==n?void 0:n.readyState))return null;const r=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&n.setLiveSeekableRange){const e=Math.max(0,t.fragmentStart);return{duration:1/0,start:e,end:Math.max(e,r)}}return{duration:1/0}}const i=null==(e=this.overrides)?void 0:e.duration;if(i)return rl(i)?{duration:i}:null;const s=this.media.duration;return r>(rl(n.duration)?n.duration:0)&&r>s||!rl(s)?{duration:r}:null}updateMediaSource(e){let{duration:t,start:n,end:r}=e;const i=this.mediaSource;this.media&&i&&"open"===i.readyState&&(i.duration!==t&&(rl(t)&&this.log("Updating MediaSource duration to ".concat(t.toFixed(3))),i.duration=t),void 0!==n&&void 0!==r&&(this.log("MediaSource duration is set to ".concat(i.duration,". Setting seekable range to ").concat(n,"-").concat(r,".")),i.setLiveSeekableRange(n,r)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:n}=this;if(this.log("checkPendingTracks (pending: ".concat(t," codec events expected: ").concat(e,") ").concat(Zc(n))),this.tracksReady){var r;const e=null==(r=this.transferData)?void 0:r.tracks;e&&Object.keys(e).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(t=>{let[n,r]=t;if(n){const t=this.tracks[n];e[n]={buffer:r,container:t.container,codec:t.codec,supplemental:t.supplemental,levelCodec:t.levelCodec,id:t.id,metadata:t.metadata}}}),this.hls.trigger(ll.BUFFER_CREATED,{tracks:e}),this.log("SourceBuffers created. Running queue: ".concat(this.operationQueue)),this.sourceBuffers.forEach(e=>{let[t]=e;this.executeNext(t)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(ll.ERROR,{type:al.MEDIA_ERROR,details:ol.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:n}=this;if(!n)throw new Error("createSourceBuffers called when mediaSource was null");for(const s in e){const a=s,o=e[a];if(this.isPending(o)){const e=this.getTrackCodec(o,a),s="".concat(o.container,";codecs=").concat(e);o.codec=e,this.log("creating sourceBuffer(".concat(s,")").concat(this.currentOp(a)?" Queued":""," ").concat(Zc(o)));try{const e=n.addSourceBuffer(s),r=vg(a),i=[a,e];t[r]=i,o.buffer=e}catch(i){var r;return this.error("error while trying to add sourceBuffer: ".concat(i.message)),this.shiftAndExecuteNext(a),null==(r=this.operationQueue)||r.removeBlockers(),delete this.tracks[a],void this.hls.trigger(ll.ERROR,{type:al.MEDIA_ERROR,details:ol.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:i,sourceBufferName:a,mimeType:s,parent:o.id})}this.trackSourceBuffer(a,o)}}this.bufferCreated()}getTrackCodec(e,t){const n=e.supplemental;let r=e.codec;n&&("video"===t||"audiovideo"===t)&&Sc(n,"video")&&(r=function(e,t){const n=[];if(e){const t=e.split(",");for(let e=0;e<t.length;e++)Tc(t[e],"video")||n.push(t[e])}return t&&n.push(t),n.join(",")}(r,n));const i=xc(r,e.levelCodec);return i?"audio"===t.slice(0,5)?Ic(i,this.appendSource):i:""}trackSourceBuffer(e,t){const n=t.buffer;if(!n)return;const r=this.getTrackCodec(t,e);this.tracks[e]={buffer:n,codec:r,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(e,t)=>{const n=t.removedRanges;null!=n&&n.length&&this.hls.trigger(ll.BUFFER_FLUSHED,{type:e})})}get mediaSrc(){var e,t;const n=(null==(e=this.media)||null==(t=e.querySelector)?void 0:t.call(e,"source"))||this.media;return null==n?void 0:n.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if("closed"===(null==(t=this.mediaSource)?void 0:t.readyState))return void this.resetBuffer(e);const n=this.currentOp(e);n&&(n.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var n;const r=new Error("".concat(e," SourceBuffer error. MediaSource readyState: ").concat(null==(n=this.mediaSource)?void 0:n.readyState));this.error("".concat(r),t),this.hls.trigger(ll.ERROR,{type:al.MEDIA_ERROR,details:ol.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:r,fatal:!1});const i=this.currentOp(e);i&&i.onError(r)}updateTimestampOffset(e,t,n,r,i,s){const a=t-e.timestampOffset;Math.abs(a)>=n&&(this.log("Updating ".concat(r," SourceBuffer timestampOffset to ").concat(t," (sn: ").concat(i," cc: ").concat(s,")")),e.timestampOffset=t)}removeExecutor(e,t,n){const{media:r,mediaSource:i}=this,s=this.tracks[e],a=null==s?void 0:s.buffer;if(!r||!i||!a)return this.warn("Attempting to remove from the ".concat(e," SourceBuffer, but it does not exist")),void this.shiftAndExecuteNext(e);const o=rl(r.duration)?r.duration:1/0,l=rl(i.duration)?i.duration:1/0,c=Math.max(0,t),u=Math.min(n,o,l);u>c&&(!s.ending||s.ended)?(s.ended=!1,this.log("Removing [".concat(c,",").concat(u,"] from the ").concat(e," SourceBuffer")),a.remove(c,u)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const n=this.tracks[t],r=null==n?void 0:n.buffer;if(!r)throw new pg("Attempting to append to the ".concat(t," SourceBuffer, but it does not exist"));n.ending=!1,n.ended=!1,r.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(e=>{this.warn("SourceBuffer blocked callback ".concat(e)),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn("Callback run without blocking ".concat(this.operationQueue," ").concat(t))}}isUpdating(){return this.sourceBuffers.some(e=>{let[t,n]=e;return t&&n.updating})}isQueued(){return this.sourceBuffers.some(e=>{let[t]=e;return t&&!!this.currentOp(t)})}isPending(e){return!!e&&!e.buffer}blockBuffers(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.sourceBufferTypes;if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:n}=this,r=t.map(e=>this.appendBlocker(e));return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(r).then(t=>{n===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(e=>{var t;const n=null==(t=this.tracks[e])?void 0:t.buffer;n&&!n.updating&&this.shiftAndExecuteNext(e)})}append(e,t,n){this.operationQueue&&this.operationQueue.append(e,t,n)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,t)=>{let[n]=t;return e+(n?1:0)},0)}get sourceBufferTypes(){return this.sourceBuffers.map(e=>{let[t]=e;return t}).filter(e=>!!e)}addBufferListener(e,t,n){const r=this.tracks[e];if(!r)return;const i=r.buffer;if(!i)return;const s=n.bind(this,e);r.listeners.push({event:t,listener:s}),i.addEventListener(t,s)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const n=t.buffer;n&&(t.listeners.forEach(e=>{n.removeEventListener(e.event,e.listener)}),t.listeners.length=0)}},capLevelController:yg,errorController:class extends Sl{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(ll.ERROR,this.onError,this),e.on(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ll.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(ll.ERROR,this.onError,this),e.off(ll.ERROR,this.onErrorOut,this),e.off(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ll.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(null==e?void 0:e.type)===fl?e.level:this.getVariantIndex()}getVariantIndex(){var e;const t=this.hls,n=t.currentLevel;return null!=(e=t.loadLevelObj)&&e.details||-1===n?t.loadLevel:n}variantHasKey(e,t){if(e){var n;if(null!=(n=e.details)&&n.hasKey(t))return!0;const r=e.audioGroups;if(r){return this.hls.allAudioTracks.filter(e=>r.indexOf(e.groupId)>=0).some(e=>{var n;return null==(n=e.details)?void 0:n.hasKey(t)})}}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(e,t){var n;if(t.fatal)return;const r=this.hls,i=t.context;switch(t.details){case ol.FRAG_LOAD_ERROR:case ol.FRAG_LOAD_TIMEOUT:case ol.KEY_LOAD_ERROR:case ol.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case ol.FRAG_PARSING_ERROR:if(null!=(n=t.frag)&&n.gap)return void(t.errorAction=Ru());case ol.FRAG_GAP:case ol.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=Tu);case ol.LEVEL_EMPTY_ERROR:case ol.LEVEL_PARSING_ERROR:{var s;const e=t.parent===fl?t.level:r.loadLevel;t.details===ol.LEVEL_EMPTY_ERROR&&null!=(s=t.context)&&null!=(s=s.levelDetails)&&s.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,e):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,e))}return;case ol.LEVEL_LOAD_ERROR:case ol.LEVEL_LOAD_TIMEOUT:return void("number"===typeof(null==i?void 0:i.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.level)));case ol.AUDIO_TRACK_LOAD_ERROR:case ol.AUDIO_TRACK_LOAD_TIMEOUT:case ol.SUBTITLE_LOAD_ERROR:case ol.SUBTITLE_TRACK_LOAD_TIMEOUT:if(i){const e=r.loadLevelObj;if(e&&(i.type===dl&&e.hasAudioGroup(i.groupId)||i.type===hl&&e.hasSubtitleGroup(i.groupId)))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.loadLevel),t.errorAction.action=Tu,void(t.errorAction.flags=Au)}return;case ol.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:return void(t.errorAction={action:Tu,flags:Lu});case ol.KEY_SYSTEM_SESSION_UPDATE_FAILED:case ol.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case ol.KEY_SYSTEM_NO_SESSION:return void(t.errorAction={action:Tu,flags:wu});case ol.BUFFER_ADD_CODEC_ERROR:case ol.REMUX_ALLOC_ERROR:case ol.BUFFER_APPEND_ERROR:var a;if(!t.errorAction)t.errorAction=this.getLevelSwitchAction(t,null!=(a=t.level)?a:r.loadLevel);return;case ol.INTERNAL_EXCEPTION:case ol.BUFFER_APPENDING_ERROR:case ol.BUFFER_FULL_ERROR:case ol.LEVEL_SWITCH_ERROR:case ol.BUFFER_STALLED_ERROR:case ol.BUFFER_SEEK_OVER_HOLE:case ol.BUFFER_NUDGE_ON_STALL:return void(t.errorAction=Ru())}t.type===al.KEY_SYSTEM_ERROR&&(t.levelRetry=!1,t.errorAction=Ru())}getPlaylistRetryOrSwitchAction(e,t){const n=pu(this.hls.config.playlistLoadPolicy,e),r=this.playlistError++;if(yu(n,r,hu(e),e.response))return{action:_u,flags:ku,retryConfig:n,retryCount:r};const i=this.getLevelSwitchAction(e,t);return n&&(i.retryConfig=n,i.retryCount=r),i}getFragRetryOrSwitchAction(e){const t=this.hls,n=this.getVariantLevelIndex(e.frag),r=t.levels[n],{fragLoadPolicy:i,keyLoadPolicy:s}=t.config,a=pu(fu(e)?s:i,e),o=t.levels.reduce((e,t)=>e+t.fragmentError,0);if(r&&(e.details!==ol.FRAG_GAP&&r.fragmentError++,!gu(e))){if(yu(a,o,hu(e),e.response))return{action:_u,flags:ku,retryConfig:a,retryCount:o}}const l=this.getLevelSwitchAction(e,n);return a&&(l.retryConfig=a,l.retryCount=o),l}getLevelSwitchAction(e,t){const n=this.hls;null!==t&&void 0!==t||(t=n.loadLevel);const r=this.hls.levels[t];if(r){var i,s;const t=e.details;r.loadError++,t===ol.BUFFER_APPEND_ERROR&&r.fragmentError++;let l=-1;const{levels:c,loadLevel:u,minAutoLevel:d,maxAutoLevel:h}=n;n.autoLevelEnabled||n.config.preserveManualLevelOnError||(n.loadLevel=-1);const f=null==(i=e.frag)?void 0:i.type,g=(f===gl&&t===ol.FRAG_PARSING_ERROR||"audio"===e.sourceBufferName&&(t===ol.BUFFER_ADD_CODEC_ERROR||t===ol.BUFFER_APPEND_ERROR))&&c.some(e=>{let{audioCodec:t}=e;return r.audioCodec!==t}),p="video"===e.sourceBufferName&&(t===ol.BUFFER_ADD_CODEC_ERROR||t===ol.BUFFER_APPEND_ERROR)&&c.some(e=>{let{codecSet:t,audioCodec:n}=e;return r.codecSet!==t&&r.audioCodec===n}),{type:m,groupId:v}=null!=(s=e.context)?s:{};for(let n=c.length;n--;){const i=(n+u)%c.length;if(i!==u&&i>=d&&i<=h&&0===c[i].loadError){var a,o;const n=c[i];if(t===ol.FRAG_GAP&&f===fl&&e.frag){const t=c[i].details;if(t){const n=lu(e.frag,t.fragments,e.frag.start);if(null!=n&&n.gap)continue}}else{if(m===dl&&n.hasAudioGroup(v)||m===hl&&n.hasSubtitleGroup(v))continue;if(f===gl&&null!=(a=r.audioGroups)&&a.some(e=>n.hasAudioGroup(e))||f===pl&&null!=(o=r.subtitleGroups)&&o.some(e=>n.hasSubtitleGroup(e))||g&&r.audioCodec===n.audioCodec||p&&r.codecSet===n.codecSet||!g&&r.codecSet!==n.codecSet)continue}l=i;break}}if(l>-1&&n.loadLevel!==l)return e.levelRetry=!0,this.playlistError=0,{action:Tu,flags:ku,nextAutoLevel:l}}return{action:Tu,flags:Au}}onErrorOut(e,t){var n;switch(null==(n=t.errorAction)?void 0:n.action){case bu:break;case Tu:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===ol.FRAG_GAP?/MediaSource readyState: ended/.test(t.error.message)&&(this.warn('MediaSource ended after "'.concat(t.sourceBufferName,'" sourceBuffer append error. Attempting to recover from media error.')),this.hls.recoverMediaError()):t.fatal=!0}t.fatal&&this.hls.stopLoad()}sendAlternateToPenaltyBox(e){const t=this.hls,n=e.errorAction;if(!n)return;const{flags:r}=n,i=n.nextAutoLevel;switch(r){case ku:this.switchLevel(e,i);break;case Lu:{const r=this.getVariantLevelIndex(e.frag),i=t.levels[r],s=null==i?void 0:i.attrs["HDCP-LEVEL"];if(n.hdcpLevel=s,"NONE"===s)this.warn("HDCP policy resticted output with HDCP-LEVEL=NONE");else if(s){t.maxHdcpLevel=jc[jc.indexOf(s)-1],n.resolved=!0,this.warn('Restricting playback to HDCP-LEVEL of "'.concat(t.maxHdcpLevel,'" or lower'));break}}case wu:{const t=e.decryptdata;if(t){const r=this.hls.levels,i=r.length;for(let n=i;n--;){var s,a;if(this.variantHasKey(r[n],t))this.log("Banned key found in level ".concat(n," (").concat(r[n].bitrate,'bps) or audio group "').concat(null==(s=r[n].audioGroups)?void 0:s.join(","),'" (').concat(null==(a=e.frag)?void 0:a.type," fragment) ").concat(Dl(t.keyId||[]))),r[n].fragmentError++,r[n].loadError++,this.log("Removing level ".concat(n," with key error (").concat(e.error,")")),this.hls.removeLevel(n)}const o=e.frag;if(this.hls.levels.length<i)n.resolved=!0;else if(o&&o.type!==fl){const e=o.decryptdata;e&&!t.matches(e)&&(n.resolved=!0)}}break}}n.resolved||this.switchLevel(e,i)}switchLevel(e,t){if(void 0!==t&&e.errorAction&&(this.warn("switching to level ".concat(t," after ").concat(e.details)),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===ol.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&"audiovideo"!==e.sourceBufferName)){const t=Oc(e.mimeType),n=this.hls.levels;for(let r=n.length;r--;)n[r]["".concat(e.sourceBufferName,"Codec")]===t&&(this.log("Removing level ".concat(r," for ").concat(e.details,' ("').concat(t,'" not supported)')),this.hls.removeLevel(r))}}},fpsController:class{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(ll.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(ll.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(ll.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(ll.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const n=this.hls.config;if(n.capLevelOnFPSDrop){const e=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=e,e&&"function"===typeof e.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,n){const r=performance.now();if(t){if(this.lastTime){const e=r-this.lastTime,i=n-this.lastDroppedFrames,s=t-this.lastDecodedFrames,a=1e3*i/e,o=this.hls;if(o.trigger(ll.FPS_DROP,{currentDropped:i,currentDecoded:s,totalDroppedFrames:n}),a>0&&i>o.config.fpsDroppedMonitoringThreshold*s){let e=o.currentLevel;o.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+e),e>0&&(-1===o.autoLevelCapping||o.autoLevelCapping>=e)&&(e-=1,o.trigger(ll.FPS_DROP_LEVEL_CAPPING,{level:e,droppedLevel:o.currentLevel}),o.autoLevelCapping=e,this.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}},stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:wd,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:Mm,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:class extends Ih{constructor(e,t,n){super(e,t,n,"subtitle-stream-controller",pl),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(ll.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ll.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(ll.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(ll.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(ll.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(ll.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(ll.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ll.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(ll.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(ll.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(ll.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(ll.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=yh,this.setInterval(500),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:n,success:r}=t;if(this.fragContextChanged(n)||(zl(n)&&(this.fragPrevious=n),this.state=yh),!r)return;const i=this.tracksBuffered[this.currentTrackId];if(!i)return;let s;const a=n.start;for(let l=0;l<i.length;l++)if(a>=i[l].start&&a<=i[l].end){s=i[l];break}const o=n.start+n.duration;s?s.end=o:(s={start:a,end:o},i.push(s)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:n,endOffset:r}=t;if(0===n&&r!==Number.POSITIVE_INFINITY){const e=r-1;if(e<=0)return;t.endOffsetSubtitles=Math.max(0,e),this.tracksBuffered.forEach(t=>{for(let n=0;n<t.length;)if(t[n].end<=e)t.shift();else{if(!(t[n].start<e))break;t[n].start=e,n++}}),this.fragmentTracker.removeFragmentsInRange(n,e,pl)}}onError(e,t){const n=t.frag;(null==n?void 0:n.type)===pl&&(t.details===ol.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==vh&&(this.state=yh))}onSubtitleTracksUpdated(e,t){let{subtitleTracks:n}=t;this.levels&&cg(this.levels,n)?this.levels=n.map(e=>new Xc(e)):(this.tracksBuffered=[],this.levels=n.map(e=>{const t=new Xc(e);return this.tracksBuffered[t.id]=[],t}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,pl),this.fragPrevious=null,this.mediaBuffer=null)}onSubtitleTrackSwitch(e,t){var n;if(this.currentTrackId=t.id,null==(n=this.levels)||!n.length||-1===this.currentTrackId)return void this.clearInterval();const r=this.levels[this.currentTrackId];null!=r&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.state!==vh&&this.setInterval(500)}onSubtitleTrackLoaded(e,t){var n;const{currentTrackId:r,levels:i}=this,{details:s,id:a}=t;if(!i)return void this.warn("Subtitle tracks were reset while loading level ".concat(a));const o=i[a];if(a>=i.length||!o)return;this.log("Subtitle track ".concat(a," loaded [").concat(s.startSN,",").concat(s.endSN,"]").concat(s.lastPartSn?"[part-".concat(s.lastPartSn,"-").concat(s.lastPartIndex,"]"):"",",duration:").concat(s.totalduration)),this.mediaBuffer=this.mediaBufferTimeRanges;let l=0;if(s.live||null!=(n=o.details)&&n.live){if(s.deltaUpdateFailed)return;const e=this.mainDetails;if(!e)return void(this.startFragRequested=!1);const t=e.fragments[0];var c;if(o.details)l=this.alignPlaylists(s,o.details,null==(c=this.levelLastLoaded)?void 0:c.details),0===l&&t&&(l=t.start,th(s,l));else s.hasProgramDateTime&&e.hasProgramDateTime?(fh(s,e),l=s.fragmentStart):t&&(l=t.start,th(s,l));e&&!this.startFragRequested&&this.setStartPosition(e,l)}if(o.details=s,this.levelLastLoaded=o,a===r&&(this.hls.trigger(ll.SUBTITLE_TRACK_UPDATED,{details:s,id:a,groupId:t.groupId}),this.tick(),s.live&&!this.fragCurrent&&this.media&&this.state===yh)){lu(null,s.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),o.details=void 0)}}_handleFragmentLoadComplete(e){const{frag:t,payload:n}=e,r=t.decryptdata,i=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&null!=r&&r.key&&r.iv&&hd(r.method)){const e=performance.now();this.decrypter.decrypt(new Uint8Array(n),r.key.buffer,r.iv.buffer,fd(r.method)).catch(e=>{throw i.trigger(ll.ERROR,{type:al.MEDIA_ERROR,details:ol.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:t}),e}).then(n=>{const r=performance.now();i.trigger(ll.FRAG_DECRYPTED,{frag:t,payload:n,stats:{tstart:e,tdecrypt:r}})}).catch(e=>{this.warn("".concat(e.name,": ").concat(e.message)),this.state=yh})}}doTick(){if(this.media){if(this.state===yh){const{currentTrackId:e,levels:t}=this,n=null==t?void 0:t[e];if(!n||!t.length||!n.details)return;if(this.waitForLive(n))return;const{config:r}=this,i=this.getLoadPosition(),s=$u.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],i,r.maxBufferHole),{end:a,len:o}=s,l=n.details;if(o>this.hls.maxBufferLength+l.levelTargetDuration)return;const c=l.fragments,u=c.length,d=l.edge;let h=null;const f=this.fragPrevious;if(a<d){const e=r.maxFragLookUpTolerance,t=a>d-e?0:e;h=lu(f,c,Math.max(c[0].start,a),t),!h&&f&&f.start<c[0].start&&(h=c[0])}else h=c[u-1];if(h=this.filterReplacedPrimary(h,n.details),!h)return;const g=c[h.sn-l.startSN-1];if(g&&g.cc===h.cc&&this.fragmentTracker.getState(g)===Iu&&(h=g),this.fragmentTracker.getState(h)===Iu){const e=this.mapToInitFragWhenRequired(h);e&&this.loadFragment(e,n,a)}}}else this.state=yh}loadFragment(e,t,n){zl(e)?super.loadFragment(e,t,n):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new Up(this.tracksBuffered[this.currentTrackId]||[])}},subtitleTrackController:class extends lg{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let e=null;const t=_p(this.media.textTracks);for(let r=0;r<t.length;r++)if("hidden"===t[r].mode)e=t[r];else if("showing"===t[r].mode){e=t[r];break}const n=this.findTrackForTextTrack(e);this.subtitleTrack!==n&&this.setSubtitleTrack(n)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(ll.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ll.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ll.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ll.LEVEL_LOADING,this.onLevelLoading,this),e.on(ll.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(ll.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(ll.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(ll.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ll.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ll.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ll.LEVEL_LOADING,this.onLevelLoading,this),e.off(ll.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(ll.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(ll.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const n=this.media;if(!n)return;const r=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||n.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,r)return;_p(n.textTracks).forEach(e=>{Tp(e)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:n,groupId:r,details:i}=t,s=this.tracksInGroup[n];if(!s||s.groupId!==r)return void this.warn("Subtitle track with id:".concat(n," and group:").concat(r," not found in active group ").concat(null==s?void 0:s.groupId));const a=s.details;s.details=t.details,this.log("Subtitle track ".concat(n,' "').concat(s.name,'" lang:').concat(s.lang," group:").concat(r," loaded [").concat(i.startSN,"-").concat(i.endSN,"]")),n===this.trackId&&this.playlistLoaded(n,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.subtitleGroups||null,r=this.groupIds;let i=this.currentTrack;if(!n||(null==r?void 0:r.length)!==(null==n?void 0:n.length)||null!=n&&n.some(e=>-1===(null==r?void 0:r.indexOf(e)))){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter(e=>!n||-1!==n.indexOf(e.groupId));if(e.length)this.selectDefaultTrack&&!e.some(e=>e.default)&&(this.selectDefaultTrack=!1),e.forEach((e,t)=>{e.id=t});else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.subtitlePreference;if(!i&&t){this.selectDefaultTrack=!1;const n=nu(t,e);if(n>-1)i=e[n];else{const e=nu(t,this.tracks);i=this.tracks[e]}}let r=this.findTrackId(i);-1===r&&i&&(r=this.findTrackId(null));const s={subtitleTracks:e};this.log("Updating subtitle tracks, ".concat(e.length,' track(s) found in "').concat(null==n?void 0:n.join(","),'" group-id')),this.hls.trigger(ll.SUBTITLE_TRACKS_UPDATED,s),-1!==r&&-1===this.trackId&&this.setSubtitleTrack(r)}}findTrackId(e){const t=this.tracksInGroup,n=this.selectDefaultTrack;for(let r=0;r<t.length;r++){const i=t[r];if((!n||i.default)&&(n||e)&&(!e||ru(i,e)))return r}if(e){for(let n=0;n<t.length;n++){const r=t[n];if(ug(e.attrs,r.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return n}for(let n=0;n<t.length;n++){const r=t[n];if(ug(e.attrs,r.attrs,["LANGUAGE"]))return n}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){if(dg(t[n],e))return n}}return-1}onError(e,t){!t.fatal&&t.context&&(t.context.type!==hl||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(-1===e.id)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const n=this.currentTrack;if(n&&ru(e,n))return n;const r=nu(e,this.tracksInGroup);if(r>-1){const e=this.tracksInGroup[r];return this.setSubtitleTrack(r),e}if(n)return null;{const n=nu(e,t);if(n>-1)return t[n]}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,r=e.groupId,i=this.getUrlWithDirectives(e.url,t),s=e.details,a=null==s?void 0:s.age;this.log("Loading subtitle ".concat(n,' "').concat(e.name,'" lang:').concat(e.lang," group:").concat(r).concat(void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:"").concat(a&&s.live?" age "+a.toFixed(1)+(s.type?" "+s.type||0:""):""," ").concat(i)),this.hls.trigger(ll.SUBTITLE_TRACK_LOADING,{url:i,id:n,groupId:r,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=_p(e.textTracks),n=this.currentTrack;let r;if(n&&(r=t.filter(e=>dg(n,e))[0],r||this.warn('Unable to find subtitle TextTrack with name "'.concat(n.name,'" and language "').concat(n.lang,'"'))),[].slice.call(t).forEach(e=>{"disabled"!==e.mode&&e!==r&&(e.mode="disabled")}),r){const e=this.subtitleDisplay?"showing":"hidden";r.mode!==e&&(r.mode=e)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media)return void(this.queuedDefaultTrack=e);if(e<-1||e>=t.length||!rl(e))return void this.warn("Invalid subtitle track id: ".concat(e));this.selectDefaultTrack=!1;const n=this.currentTrack,r=t[e]||null;if(this.trackId=e,this.currentTrack=r,this.toggleTrackModes(),!r)return void this.hls.trigger(ll.SUBTITLE_TRACK_SWITCH,{id:e});const i=!!r.details&&!r.details.live;if(e===this.trackId&&r===n&&i)return;this.log("Switching to subtitle-track ".concat(e)+(r?' "'.concat(r.name,'" lang:').concat(r.lang," group:").concat(r.groupId):""));const{id:s,groupId:a="",name:o,type:l,url:c}=r;this.hls.trigger(ll.SUBTITLE_TRACK_SWITCH,{id:s,groupId:a,name:o,type:l,url:c});const u=this.switchParams(r.url,null==n?void 0:n.details,r.details);this.loadPlaylist(u)}},timelineController:class{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(ll.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(ll.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ll.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(ll.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(ll.FRAG_LOADING,this.onFragLoading,this),e.on(ll.FRAG_LOADED,this.onFragLoaded,this),e.on(ll.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(ll.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(ll.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(ll.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(ll.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(ll.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(ll.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ll.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(ll.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(ll.FRAG_LOADING,this.onFragLoading,this),e.off(ll.FRAG_LOADED,this.onFragLoaded,this),e.off(ll.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(ll.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(ll.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(ll.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(ll.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new xm(this,"textTrack1"),t=new xm(this,"textTrack2"),n=new xm(this,"textTrack3"),r=new xm(this,"textTrack4");this.cea608Parser1=new nm(1,e,t),this.cea608Parser2=new nm(3,n,r)}addCues(e,t,n,r,i){let s=!1;for(let a=i.length;a--;){const e=i[a],r=Pm(e[0],e[1],t,n);if(r>=0&&(e[0]=Math.min(e[0],t),e[1]=Math.max(e[1],n),s=!0,r/(n-t)>.5))return}if(s||i.push([t,n]),this.config.renderTextTracksNatively){const i=this.captionsTracks[e];this.Cues.newCue(i,t,n,r)}else{const i=this.Cues.newCue(null,t,n,r);this.hls.trigger(ll.CUES_PARSED,{type:"captions",cues:i,track:e})}}onInitPtsFound(e,t){let{frag:n,id:r,initPTS:i,timescale:s,trackId:a}=t;const{unparsedVttFrags:o}=this;r===fl&&(this.initPTS[n.cc]={baseTime:i,timescale:s,trackId:a}),o.length&&(this.unparsedVttFrags=[],o.forEach(e=>{this.initPTS[e.frag.cc]?this.onFragLoaded(ll.FRAG_LOADED,e):this.hls.trigger(ll.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,t){const{media:n}=this;if(n)for(let r=0;r<n.textTracks.length;r++){const i=n.textTracks[r];if(Dm(i,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return i}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:n,media:r}=this,{label:i,languageCode:s}=t[e],a=this.getExistingTrack(i,s);if(a)n[e]=a,Tp(n[e]),Ep(n[e],r);else{const t=this.createTextTrack("captions",i,s);t&&(t[e]=!0,n[e]=t)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const n={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=n,this.hls.trigger(ll.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}createTextTrack(e,t,n){const r=this.media;if(r)return r.addTextTrack(e,t,n)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const n=!!t.transferMedia;if(this.media=null,n)return;const{captionsTracks:r}=this;Object.keys(r).forEach(e=>{Tp(r[e]),delete r[e]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let n=0;n<t.length;n++)Tp(t[n])}onSubtitleTracksUpdated(e,t){const n=t.subtitleTracks||[],r=n.some(e=>e.textCodec===Em);if(this.config.enableWebVTT||r&&this.config.enableIMSC1){if(cg(this.tracks,n))return void(this.tracks=n);if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const e=this.media,t=e?_p(e.textTracks):null;if(this.tracks.forEach((e,n)=>{let r;if(t){let n=null;for(let r=0;r<t.length;r++)if(t[r]&&Dm(t[r],e)){n=t[r],t[r]=null;break}n&&(r=n)}if(r)Tp(r);else{const t=Cm(e);r=this.createTextTrack(t,e.name,e.lang),r&&(r.mode="disabled")}r&&this.textTracks.push(r)}),null!=t&&t.length){const e=t.filter(e=>null!==e).map(e=>e.label);e.length&&this.hls.logger.warn("Media element contains unused subtitle tracks: ".concat(e.join(", "),". Replace media element for each source to clear TextTracks and captions menu."))}}else if(this.tracks.length){const e=this.tracks.map(e=>({label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}));this.hls.trigger(ll.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:e})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(e=>{const t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(!t)return;const n="textTrack".concat(t[1]),r=this.captionsProperties[n];r&&(r.label=e.name,e.lang&&(r.languageCode=e.lang),r.media=e)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===fl){var n,r;const{cea608Parser1:e,cea608Parser2:i,lastSn:s}=this,{cc:a,sn:o}=t.frag,l=null!=(n=null==(r=t.part)?void 0:r.index)?n:-1;e&&i&&(o!==s+1||o===s&&l!==this.lastPartIndex+1||a!==this.lastCc)&&(e.reset(),i.reset()),this.lastCc=a,this.lastSn=o,this.lastPartIndex=l}}onFragLoaded(e,t){const{frag:n,payload:r}=t;if(n.type===pl)if(r.byteLength){const e=n.decryptdata,i="stats"in t;if(null==e||!e.encrypted||i){const e=this.tracks[n.level],i=this.vttCCs;i[n.cc]||(i[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),e&&e.textCodec===Em?this._parseIMSC1(n,r):this._parseVTTs(t)}}else this.hls.trigger(ll.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const n=this.hls;_m(t,this.initPTS[e.cc],t=>{this._appendCues(t,e.level),n.trigger(ll.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},t=>{n.logger.log("Failed to parse IMSC1: ".concat(t)),n.trigger(ll.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})})}_parseVTTs(e){var t;const{frag:n,payload:r}=e,{initPTS:i,unparsedVttFrags:s}=this,a=i.length-1;if(!i[n.cc]&&-1===a)return void s.push(e);const o=this.hls;ym(null!=(t=n.initSegment)&&t.data?dc(n.initSegment.data,new Uint8Array(r)).buffer:r,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,e=>{this._appendCues(e,n.level),o.trigger(ll.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},t=>{const i="Missing initPTS for VTT MPEGTS"===t.message;i?s.push(e):this._fallbackToIMSC1(n,r),o.logger.log("Failed to parse VTT cue: ".concat(t)),i&&a>n.cc||o.trigger(ll.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:t})})}_fallbackToIMSC1(e,t){const n=this.tracks[e.level];n.textCodec||_m(t,this.initPTS[e.cc],()=>{n.textCodec=Em,this._parseIMSC1(e,t)},()=>{n.textCodec="wvtt"})}_appendCues(e,t){const n=this.hls;if(this.config.renderTextTracksNatively){const n=this.textTracks[t];if(!n||"disabled"===n.mode)return;e.forEach(e=>bp(n,e))}else{const r=this.tracks[t];if(!r)return;const i=r.default?"default":"subtitles"+t;n.trigger(ll.CUES_PARSED,{type:"subtitles",cues:e,track:i})}}onFragDecrypted(e,t){const{frag:n}=t;n.type===pl&&this.onFragLoaded(ll.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:n,samples:r}=t;if(n.type!==fl||"NONE"!==this.closedCaptionsForLevel(n))for(let i=0;i<r.length;i++){const e=r[i].bytes;if(e){this.cea608Parser1||this.initCea608Parsers();const t=this.extractCea608Data(e);this.cea608Parser1.addData(r[i].pts,t[0]),this.cea608Parser2.addData(r[i].pts,t[1])}}}onBufferFlushing(e,t){let{startOffset:n,endOffset:r,endOffsetSubtitles:i,type:s}=t;const{media:a}=this;if(a&&!(a.currentTime<r)){if(!s||"video"===s){const{captionsTracks:e}=this;Object.keys(e).forEach(t=>Sp(e[t],n,r))}if(this.config.renderTextTracksNatively&&0===n&&void 0!==i){const{textTracks:e}=this;Object.keys(e).forEach(t=>Sp(e[t],n,i))}}}extractCea608Data(e){const t=[[],[]],n=31&e[0];let r=2;for(let i=0;i<n;i++){const n=e[r++],i=127&e[r++],s=127&e[r++];if(0===i&&0===s)continue;if(0!==(4&n)){const e=3&n;0!==e&&1!==e||(t[e].push(i),t[e].push(s))}}return t}},audioStreamController:class extends Ih{constructor(e,t,n){super(e,t,n,"audio-stream-controller",gl),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(ll.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ll.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(ll.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(ll.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(ll.BUFFER_RESET,this.onBufferReset,this),e.on(ll.BUFFER_CREATED,this.onBufferCreated,this),e.on(ll.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(ll.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(ll.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(ll.FRAG_LOADING,this.onFragLoading,this),e.on(ll.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(ll.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ll.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(ll.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(ll.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(ll.BUFFER_RESET,this.onBufferReset,this),e.off(ll.BUFFER_CREATED,this.onBufferCreated,this),e.off(ll.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(ll.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(ll.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(ll.FRAG_LOADING,this.onFragLoading,this),e.off(ll.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,t){let{frag:n,id:r,initPTS:i,timescale:s,trackId:a}=t;if(r===fl){const e=n.cc,t=this.fragCurrent;if(this.initPTS[e]={baseTime:i,timescale:s,trackId:a},this.log("InitPTS for cc: ".concat(e," found from main: ").concat(i/s," (").concat(i,"/").concat(s,") trackId: ").concat(a)),this.mainAnchor=n,this.state===wh){const t=this.waitingData;(!t&&!this.loadingParts||t&&t.frag.cc!==e)&&this.syncWithAnchor(n,null==t?void 0:t.frag)}else!this.hls.hasEnoughToStart&&t&&t.cc!==e?(t.abortRequests(),this.syncWithAnchor(n,t)):this.state===yh&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var n;const r=(null==(n=this.mainFragLoading)?void 0:n.frag)||null;if(t&&(null==r?void 0:r.cc)===t.cc)return;const i=(r||e).cc,s=du(this.getLevelDetails(),i,this.getLoadPosition());s&&(this.log("Syncing with main frag at ".concat(s.start," cc ").concat(s.cc)),this.startFragRequested=!1,this.nextLoadPosition=s.start,this.resetLoadingState(),this.state===yh&&this.doTickIdle())}startLoad(e,t){if(!this.levels)return this.startPosition=e,void(this.state=vh);const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),n>0&&-1===e?(this.log("Override startPosition with lastCurrentTime @".concat(n.toFixed(3))),e=n,this.state=yh):this.state=Sh,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case yh:this.doTickIdle();break;case Sh:{const{levels:e,trackId:t}=this,n=null==e?void 0:e[t],r=null==n?void 0:n.details;if(r&&!this.waitForLive(n)){if(this.waitForCdnTuneIn(r))break;this.state=wh}break}case Th:this.checkRetryDate();break;case wh:{const e=this.waitingData;if(e){const{frag:t,part:n,cache:r,complete:i}=e,s=this.mainAnchor;if(void 0!==this.initPTS[t.cc]){this.waitingData=null,this.state=bh;const e={frag:t,part:n,payload:r.flush().buffer,networkDetails:null};this._handleFragmentLoadProgress(e),i&&super._handleFragmentLoadComplete(e)}else s&&s.cc!==e.frag.cc&&this.syncWithAnchor(s,e.frag)}else this.state=yh}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:n,media:r,trackId:i}=this,s=t.config;if(!this.buffering||!r&&!this.primaryPrefetch&&(this.startFragRequested||!s.startFragPrefetch)||null==n||!n[i])return;const a=n[i],o=a.details;if(!o||this.waitForLive(a)||this.waitForCdnTuneIn(o))return this.state=Sh,void(this.startFragRequested=!1);const l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,Ul,gl));const c=this.getFwdBufferInfo(l,gl);if(null===c)return;if(!this.switchingTrack&&this._streamEnded(c,o))return t.trigger(ll.BUFFER_EOS,{type:"audio"}),void(this.state=Ah);const u=c.len,d=t.maxBufferLength,h=o.fragments,f=h[0].start,g=this.getLoadPosition(),p=this.flushing?g:c.end;if(this.switchingTrack&&r){const e=g;o.PTSKnown&&e<f&&(c.end>f||c.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=f+.05)}if(u>=d&&!this.switchingTrack&&p<h[h.length-1].start)return;let m=this.getNextFragment(p,o);if(m&&this.isLoopLoading(m,p)&&(m=this.getNextFragmentLoopLoading(m,o,c,fl,d)),!m)return void(this.bufferFlushed=!0);let v=(null==(e=this.mainFragLoading)?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&v&&zl(m)&&!m.endList&&(!o.live||!this.loadingParts&&p<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(v)===Du&&(this.mainFragLoading=v=null),v&&zl(v))){if(m.start>v.end){const e=this.fragmentTracker.getFragAtPos(p,fl);e&&e.end>v.end&&(v=e,this.mainFragLoading={frag:e,targetBufferTime:null})}if(m.start>v.end)return}this.loadFragment(m,a,p)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,t){let{audioTracks:n}=t;this.resetTransmuxer(),this.levels=n.map(e=>new Xc(e))}onAudioTrackSwitching(e,t){const n=!!t.url;this.trackId=t.id;const{fragCurrent:r}=this;r&&(r.abortRequests(),this.removeUnbufferedFrags(r.start)),this.resetLoadingState(),n?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==vh&&(this.setInterval(100),this.state=yh,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const n=this.cachedTrackLoadedData;n&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(ll.AUDIO_TRACK_LOADED,n))}onAudioTrackLoaded(e,t){var n;const{levels:r}=this,{details:i,id:s,groupId:a,track:o}=t;if(!r)return void this.warn("Audio tracks reset while loading track ".concat(s,' "').concat(o.name,'" of "').concat(a,'"'));const l=this.mainDetails;if(!l||i.endCC>l.endCC||l.expired)return this.cachedTrackLoadedData=t,void(this.state!==vh&&(this.state=Sh));this.cachedTrackLoadedData=null,this.log("Audio track ".concat(s,' "').concat(o.name,'" of "').concat(a,'" loaded [').concat(i.startSN,",").concat(i.endSN,"]").concat(i.lastPartSn?"[part-".concat(i.lastPartSn,"-").concat(i.lastPartIndex,"]"):"",",duration:").concat(i.totalduration));const c=r[s];let u=0;if(i.live||null!=(n=c.details)&&n.live){if(this.checkLiveUpdate(i),i.deltaUpdateFailed)return;var d;if(c.details)u=this.alignPlaylists(i,c.details,null==(d=this.levelLastLoaded)?void 0:d.details);i.alignedSliding||(hh(i,l),i.alignedSliding||fh(i,l),u=i.fragmentStart)}c.details=i,this.levelLastLoaded=c,this.startFragRequested||this.setStartPosition(l,u),this.hls.trigger(ll.AUDIO_TRACK_UPDATED,{details:i,id:s,groupId:t.groupId}),this.state!==Sh||this.waitForCdnTuneIn(i)||(this.state=yh),this.tick()}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:r,payload:i}=e,{config:s,trackId:a,levels:o}=this;if(!o)return void this.warn("Audio tracks were reset while fragment load was in progress. Fragment ".concat(n.sn," of level ").concat(n.level," will not be buffered"));const l=o[a];if(!l)return void this.warn("Audio track is undefined on fragment load progress");const c=l.details;if(!c)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(n.start);const u=s.defaultAudioCodec||l.audioCodec||"mp4a.40.2";let d=this.transmuxer;d||(d=this.transmuxer=new og(this.hls,gl,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const h=this.initPTS[n.cc],f=null==(t=n.initSegment)?void 0:t.data;if(void 0!==h){const e=!1,t=r?r.index:-1,s=-1!==t,a=new Xu(n.level,n.sn,n.stats.chunkCount,i.byteLength,t,s);d.push(i,f,u,"",n,r,c.totalduration,e,a,h)}else{this.log("Unknown video PTS for cc ".concat(n.cc,", waiting for video PTS before demuxing audio frag ").concat(n.sn," of [").concat(c.startSN," ,").concat(c.endSN,"],track ").concat(a));const{cache:e}=this.waitingData=this.waitingData||{frag:n,part:r,cache:new Ch,complete:!1};e.push(new Uint8Array(i)),this.state!==vh&&(this.state=wh)}}_handleFragmentLoadComplete(e){this.waitingData?this.waitingData.complete=!0:super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===fl&&zl(t.frag)&&(this.mainFragLoading=t,this.state===yh&&this.tick())}onFragBuffered(e,t){const{frag:n,part:r}=t;if(n.type===gl)if(this.fragContextChanged(n))this.warn("Fragment ".concat(n.sn).concat(r?" p: "+r.index:""," of level ").concat(n.level," finished buffering, but was aborted. state: ").concat(this.state,", audioSwitch: ").concat(this.switchingTrack?this.switchingTrack.name:"false"));else{if(zl(n)){this.fragPrevious=n;const e=this.switchingTrack;e&&(this.bufferedTrack=e,this.switchingTrack=null,this.hls.trigger(ll.AUDIO_TRACK_SWITCHED,Tl({},e)))}this.fragBufferedComplete(n,r),this.media&&this.tick()}else this.audioOnly||n.type!==fl||n.elementaryStreams.video||n.elementaryStreams.audiovideo||(this.audioOnly=!0,this.mainFragLoading=null)}onError(e,t){var n;if(t.fatal)this.state=Lh;else switch(t.details){case ol.FRAG_GAP:case ol.FRAG_PARSING_ERROR:case ol.FRAG_DECRYPT_ERROR:case ol.FRAG_LOAD_ERROR:case ol.FRAG_LOAD_TIMEOUT:case ol.KEY_LOAD_ERROR:case ol.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(gl,t);break;case ol.AUDIO_TRACK_LOAD_ERROR:case ol.AUDIO_TRACK_LOAD_TIMEOUT:case ol.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==Sh||(null==(n=t.context)?void 0:n.type)!==dl||(this.state=yh);break;case ol.BUFFER_ADD_CODEC_ERROR:case ol.BUFFER_APPEND_ERROR:if("audio"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)||this.resetLoadingState();break;case ol.BUFFER_FULL_ERROR:if("audio"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case ol.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onBufferFlushing(e,t){let{type:n}=t;n!==Gl&&(this.flushing=!0)}onBufferFlushed(e,t){let{type:n}=t;if(n!==Gl){this.flushing=!1,this.bufferFlushed=!0,this.state===Ah&&(this.state=yh);const e=this.mediaBuffer||this.media;e&&(this.afterBufferFlushed(e,n,gl),this.tick())}}_handleTransmuxComplete(e){var t;const n="audio",{hls:r}=this,{remuxResult:i,chunkMeta:s}=e,a=this.getCurrentContext(s);if(!a)return void this.resetWhenMissingContext(s);const{frag:o,part:l,level:c}=a,{details:u}=c,{audio:d,text:h,id3:f,initSegment:g}=i;if(!this.fragContextChanged(o)&&u){if(this.state=_h,this.switchingTrack&&d&&this.completeAudioSwitch(this.switchingTrack),null!=g&&g.tracks){const e=o.initSegment||o;if(this.unhandledEncryptionError(g,o))return;this._bufferInitSegment(c,g.tracks,e,s),r.trigger(ll.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:n,tracks:g.tracks})}if(d){const{startPTS:e,endPTS:t,startDTS:n,endDTS:r}=d;l&&(l.elementaryStreams[Ul]={startPTS:e,endPTS:t,startDTS:n,endDTS:r}),o.setElementaryStreamInfo(Ul,e,t,n,r),this.bufferFragmentData(d,o,l,s)}if(null!=f&&null!=(t=f.samples)&&t.length){const e=El({id:n,frag:o,details:u},f);r.trigger(ll.FRAG_PARSING_METADATA,e)}if(h){const e=El({id:n,frag:o,details:u},h);r.trigger(ll.FRAG_PARSING_USERDATA,e)}}else this.fragmentTracker.removeFragment(o)}_bufferInitSegment(e,t,n,r){if(this.state!==_h)return;if(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio)return;const i=t.audio;i.id=gl;const s=e.audioCodec;this.log("Init audio buffer, container:".concat(i.container,", codecs[level/parsed]=[").concat(s,"/").concat(i.codec,"]")),s&&1===s.split(",").length&&(i.levelCodec=s),this.hls.trigger(ll.BUFFER_CODECS,t);const a=i.initSegment;if(null!=a&&a.byteLength){const e={type:"audio",frag:n,part:null,chunkMeta:r,parent:n.type,data:a};this.hls.trigger(ll.BUFFER_APPENDING,e)}this.tickImmediate()}loadFragment(e,t,n){const r=this.fragmentTracker.getState(e);var i;if(this.switchingTrack||r===Iu||r===Cu)if(zl(e))if(null!=(i=t.details)&&i.live&&!this.initPTS[e.cc]){this.log("Waiting for video PTS in continuity counter ".concat(e.cc," of live stream before loading audio fragment ").concat(e.sn," of level ").concat(this.trackId)),this.state=wh;const n=this.mainDetails;n&&n.fragmentStart!==t.details.fragmentStart&&fh(t.details,n)}else super.loadFragment(e,t,n);else this._loadInitSegment(e,t);else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:n,assocLang:r,characteristics:i,audioCodec:s,channels:a}=this.bufferedTrack;ru({name:t,lang:n,assocLang:r,characteristics:i,audioCodec:s,channels:a},e,iu)||(au(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(ll.AUDIO_TRACK_SWITCHED,Tl({},e))}},audioTrackController:class extends lg{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ll.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ll.LEVEL_LOADING,this.onLevelLoading,this),e.on(ll.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(ll.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(ll.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ll.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ll.LEVEL_LOADING,this.onLevelLoading,this),e.off(ll.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(ll.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(ll.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:n,groupId:r,details:i}=t,s=this.tracksInGroup[n];if(!s||s.groupId!==r)return void this.warn("Audio track with id:".concat(n," and group:").concat(r," not found in active group ").concat(null==s?void 0:s.groupId));const a=s.details;s.details=t.details,this.log("Audio track ".concat(n,' "').concat(s.name,'" lang:').concat(s.lang," group:").concat(r," loaded [").concat(i.startSN,"-").concat(i.endSN,"]")),n===this.trackId&&this.playlistLoaded(n,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.audioGroups||null,r=this.groupIds;let i=this.currentTrack;if(!n||(null==r?void 0:r.length)!==(null==n?void 0:n.length)||null!=n&&n.some(e=>-1===(null==r?void 0:r.indexOf(e)))){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter(e=>!n||-1!==n.indexOf(e.groupId));if(e.length)this.selectDefaultTrack&&!e.some(e=>e.default)&&(this.selectDefaultTrack=!1),e.forEach((e,t)=>{e.id=t});else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.audioPreference;if(!i&&t){const n=nu(t,e,iu);if(n>-1)i=e[n];else{const e=nu(t,this.tracks);i=this.tracks[e]}}let r=this.findTrackId(i);-1===r&&i&&(r=this.findTrackId(null));const a={audioTracks:e};this.log("Updating audio tracks, ".concat(e.length," track(s) found in group(s): ").concat(null==n?void 0:n.join(","))),this.hls.trigger(ll.AUDIO_TRACKS_UPDATED,a);const o=this.trackId;if(-1!==r&&-1===o)this.setAudioTrack(r);else if(e.length&&-1===o){var s;const t=new Error("No audio track selected for current audio group-ID(s): ".concat(null==(s=this.groupIds)?void 0:s.join(",")," track count: ").concat(e.length));this.warn(t.message),this.hls.trigger(ll.ERROR,{type:al.MEDIA_ERROR,details:ol.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:t})}}}onError(e,t){!t.fatal&&t.context&&(t.context.type!==dl||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const r=this.currentTrack;if(r&&ru(e,r,iu))return r;const i=nu(e,this.tracksInGroup,iu);if(i>-1){const e=this.tracksInGroup[i];return this.setAudioTrack(i),e}if(r){let r=t.loadLevel;-1===r&&(r=t.firstAutoLevel);const i=function(e,t,n,r,i){const s=t[r],a=t.reduce((e,t,n)=>{const r=t.uri;return(e[r]||(e[r]=[])).push(n),e},{})[s.uri];a.length>1&&(r=Math.max.apply(Math,a));const o=s.videoRange,l=s.frameRate,c=s.codecSet.substring(0,4),u=su(t,r,t=>{if(t.videoRange!==o||t.frameRate!==l||t.codecSet.substring(0,4)!==c)return!1;const r=t.audioGroups,s=n.filter(e=>!r||-1!==r.indexOf(e.groupId));return nu(e,s,i)>-1});return u>-1?u:su(t,r,t=>{const r=t.audioGroups,s=n.filter(e=>!r||-1!==r.indexOf(e.groupId));return nu(e,s,i)>-1})}(e,t.levels,n,r,iu);if(-1===i)return null;t.nextLoadLevel=i}if(e.channels||e.audioCodec){const t=nu(e,n);if(t>-1)return n[t]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length)return void this.warn("Invalid audio track id: ".concat(e));this.selectDefaultTrack=!1;const n=this.currentTrack,r=t[e],i=r.details&&!r.details.live;if(e===this.trackId&&r===n&&i)return;if(this.log("Switching to audio-track ".concat(e,' "').concat(r.name,'" lang:').concat(r.lang," group:").concat(r.groupId," channels:").concat(r.channels)),this.trackId=e,this.currentTrack=r,this.hls.trigger(ll.AUDIO_TRACK_SWITCHING,Tl({},r)),i)return;const s=this.switchParams(r.url,null==n?void 0:n.details,r.details);this.loadPlaylist(s)}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const r=t[n];if((!this.selectDefaultTrack||r.default)&&(!e||ru(e,r,iu)))return n}if(e){const{name:n,lang:r,assocLang:i,characteristics:s,audioCodec:a,channels:o}=e;for(let e=0;e<t.length;e++){if(ru({name:n,lang:r,assocLang:i,characteristics:s,audioCodec:a,channels:o},t[e],iu))return e}for(let l=0;l<t.length;l++){const n=t[l];if(ug(e.attrs,n.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return l}for(let l=0;l<t.length;l++){const n=t[l];if(ug(e.attrs,n.attrs,["LANGUAGE"]))return l}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&au(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,r=e.groupId,i=this.getUrlWithDirectives(e.url,t),s=e.details,a=null==s?void 0:s.age;this.log("Loading audio-track ".concat(n,' "').concat(e.name,'" lang:').concat(e.lang," group:").concat(r).concat(void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:"").concat(a&&s.live?" age "+a.toFixed(1)+(s.type?" "+s.type||0:""):""," ").concat(i)),this.hls.trigger(ll.AUDIO_TRACK_LOADING,{url:i,id:n,groupId:r,deliveryDirectives:t||null,track:e})}},emeController:gp,cmcdController:class{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=e=>{try{this.apply(e,{ot:Eg.MANIFEST,su:!this.initialized})}catch(t){this.hls.logger.warn("Could not generate manifest CMCD data.",t)}},this.applyFragmentData=e=>{try{const{frag:t,part:n}=e,r=this.hls.levels[t.level],i=this.getObjectType(t),s={d:1e3*(n||t).duration,ot:i};i!==Eg.VIDEO&&i!==Eg.AUDIO&&i!=Eg.MUXED||(s.br=r.bitrate/1e3,s.tb=this.getTopBandwidth(i)/1e3,s.bl=this.getBufferLength(i));const a=n?this.getNextPart(n):this.getNextFrag(t);null!=a&&a.url&&a.url!==t.url&&(s.nor=a.url),this.apply(e,s)}catch(t){this.hls.logger.warn("Could not generate segment CMCD data.",t)}},this.hls=e;const t=this.config=e.config,{cmcd:n}=t;null!=n&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||e.sessionId,this.cid=n.contentId,this.useHeaders=!0===n.useHeaders,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(ll.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ll.MEDIA_DETACHED,this.onMediaDetached,this),e.on(ll.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(ll.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ll.MEDIA_DETACHED,this.onMediaDetached,this),e.off(ll.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var n,r;this.audioBuffer=null==(n=t.tracks.audio)?void 0:n.buffer,this.videoBuffer=null==(r=t.tracks.video)?void 0:r.buffer}createData(){var e;return{v:1,sf:bg.HLS,sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};El(t,this.createData());const n=t.ot===Eg.INIT||t.ot===Eg.VIDEO||t.ot===Eg.MUXED;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering);const{includeKeys:r}=this;r&&(t=Object.keys(t).reduce((e,n)=>(r.includes(n)&&(e[n]=t[n]),e),{}));const i={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),lp(e.headers,t,i)):e.url=dp(e.url,t,i)}getNextFrag(e){var t;const n=null==(t=this.hls.levels[e.level])?void 0:t.details;if(n){const t=e.sn-n.startSN;return n.fragments[t+1]}}getNextPart(e){var t;const{index:n,fragment:r}=e,i=null==(t=this.hls.levels[r.level])||null==(t=t.details)?void 0:t.partList;if(i){const{sn:e}=r;for(let t=i.length-1;t>=0;t--){const r=i[t];if(r.index===n&&r.fragment.sn===e)return i[t+1]}}}getObjectType(e){const{type:t}=e;return"subtitle"===t?Eg.TIMED_TEXT:"initSegment"===e.sn?Eg.INIT:"audio"===t?Eg.AUDIO:"main"===t?this.hls.audioTracks.length?Eg.VIDEO:Eg.MUXED:void 0}getTopBandwidth(e){let t,n=0;const r=this.hls;if(e===Eg.AUDIO)t=r.audioTracks;else{const e=r.maxAutoLevel,n=e>-1?e+1:r.levels.length;t=r.levels.slice(0,n)}return t.forEach(e=>{e.bitrate>n&&(n=e.bitrate)}),n>0?n:NaN}getBufferLength(e){const t=this.media,n=e===Eg.AUDIO?this.audioBuffer:this.videoBuffer;if(!n||!t)return NaN;return 1e3*$u.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new n(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,n,r){t(e),this.loader.load(e,n,r)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,n=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new n(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,n,r){t(e),this.loader.load(e,n,r)}}}},contentSteeringController:class extends Sl{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ll.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(ll.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ll.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ll.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(ll.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ll.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=1e3*this.timeToLoad-(performance.now()-this.updated);if(e>0)return void this.scheduleRefresh(this.uri,e)}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(t=>t!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:n}=t;null!==n&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:n}=t;if((null==n?void 0:n.action)===Tu&&n.flags===Au){const e=this.levels;let r=this._pathwayPriority,i=this.pathwayId;if(t.context){const{groupId:n,pathwayId:r,type:s}=t.context;n&&e?i=this.getPathwayForGroupId(n,s,i):r&&(i=r)}i in this.penalizedPathways||(this.penalizedPathways[i]=performance.now()),!r&&e&&(r=this.pathways()),r&&r.length>1&&(this.updatePathwayPriority(r),n.resolved=this.pathwayId!==i),t.details!==ol.BUFFER_APPEND_ERROR||t.fatal?n.resolved||this.warn("Could not resolve ".concat(t.details,' ("').concat(t.error.message,'") with content-steering for Pathway: ').concat(i," levels: ").concat(e?e.length:e," priorities: ").concat(Zc(r)," penalized: ").concat(Zc(this.penalizedPathways))):n.resolved=!0}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){const n=e[0].pathwayId;this.log("No levels found in Pathway ".concat(this.pathwayId,'. Setting initial Pathway to "').concat(n,'"')),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length&&this.log("Found ".concat(t.length,"/").concat(e.length,' levels in Pathway "').concat(this.pathwayId,'"')),t}getLevelsForPathway(e){return null===this.levels?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){let t;this._pathwayPriority=e;const n=this.penalizedPathways,r=performance.now();Object.keys(n).forEach(e=>{r-n[e]>3e5&&delete n[e]});for(let i=0;i<e.length;i++){const r=e[i];if(r in n)continue;if(r===this.pathwayId)return;const s=this.hls.nextLoadLevel,a=this.hls.levels[s];if(t=this.getLevelsForPathway(r),t.length>0){this.log('Setting Pathway to "'.concat(r,'"')),this.pathwayId=r,ah(t),this.hls.trigger(ll.LEVELS_UPDATED,{levels:t});const e=this.hls.levels[s];a&&e&&this.levels&&(e.attrs["STABLE-VARIANT-ID"]!==a.attrs["STABLE-VARIANT-ID"]&&e.bitrate!==a.bitrate&&this.log("Unstable Pathways change from bitrate ".concat(a.bitrate," to ").concat(e.bitrate)),this.hls.nextLoadLevel=s);break}}}getPathwayForGroupId(e,t,n){const r=this.getLevelsForPathway(n).concat(this.levels||[]);for(let i=0;i<r.length;i++)if(t===dl&&r[i].hasAudioGroup(e)||t===hl&&r[i].hasSubtitleGroup(e))return r[i].pathwayId;return n}clonePathways(e){const t=this.levels;if(!t)return;const n={},r={};e.forEach(e=>{const{ID:i,"BASE-ID":s,"URI-REPLACEMENT":a}=e;if(t.some(e=>e.pathwayId===i))return;const o=this.getLevelsForPathway(s).map(e=>{const t=new sd(e.attrs);t["PATHWAY-ID"]=i;const s=t.AUDIO&&"".concat(t.AUDIO,"_clone_").concat(i),o=t.SUBTITLES&&"".concat(t.SUBTITLES,"_clone_").concat(i);s&&(n[t.AUDIO]=s,t.AUDIO=s),o&&(r[t.SUBTITLES]=o,t.SUBTITLES=o);const l=fp(e.uri,t["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",a),c=new Xc({attrs:t,audioCodec:e.audioCodec,bitrate:e.bitrate,height:e.height,name:e.name,url:l,videoCodec:e.videoCodec,width:e.width});if(e.audioGroups)for(let n=1;n<e.audioGroups.length;n++)c.addGroupId("audio","".concat(e.audioGroups[n],"_clone_").concat(i));if(e.subtitleGroups)for(let n=1;n<e.subtitleGroups.length;n++)c.addGroupId("text","".concat(e.subtitleGroups[n],"_clone_").concat(i));return c});t.push(...o),hp(this.audioTracks,n,a,i),hp(this.subtitleTracks,r,a,i)})}loadSteeringManifest(e){const t=this.hls.config,n=t.loader;let r;this.loader&&this.loader.destroy(),this.loader=new n(t);try{r=new self.URL(e)}catch(c){return this.enabled=!1,void this.log("Failed to parse Steering Manifest URI: ".concat(e))}if("data:"!==r.protocol){const e=0|(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate);r.searchParams.set("_HLS_pathway",this.pathwayId),r.searchParams.set("_HLS_throughput",""+e)}const i={responseType:"json",url:r.href},s=t.steeringManifestLoadPolicy.default,a=s.errorRetry||s.timeoutRetry||{},o={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},l={onSuccess:(e,t,n,i)=>{this.log('Loaded steering manifest: "'.concat(r,'"'));const s=e.data;if(1!==(null==s?void 0:s.VERSION))return void this.log("Steering VERSION ".concat(s.VERSION," not supported!"));this.updated=performance.now(),this.timeToLoad=s.TTL;const{"RELOAD-URI":a,"PATHWAY-CLONES":o,"PATHWAY-PRIORITY":l}=s;if(a)try{this.uri=new self.URL(a,r).href}catch(c){return this.enabled=!1,void this.log("Failed to parse Steering Manifest RELOAD-URI: ".concat(a))}this.scheduleRefresh(this.uri||n.url),o&&this.clonePathways(o);const u={steeringManifest:s,url:r.toString()};this.hls.trigger(ll.STEERING_MANIFEST_LOADED,u),l&&this.updatePathwayPriority(l)},onError:(e,t,n,r)=>{if(this.log("Error loading steering manifest: ".concat(e.code," ").concat(e.text," (").concat(t.url,")")),this.stopLoad(),410===e.code)return this.enabled=!1,void this.log("Steering manifest ".concat(t.url," no longer available"));let i=1e3*this.timeToLoad;if(429===e.code){const e=this.loader;if("function"===typeof(null==e?void 0:e.getResponseHeader)){const t=e.getResponseHeader("Retry-After");t&&(i=1e3*parseFloat(t))}return void this.log("Steering manifest ".concat(t.url," rate limited"))}this.scheduleRefresh(this.uri||t.url,i)},onTimeout:(e,t,n)=>{this.log("Timeout loading steering manifest (".concat(t.url,")")),this.scheduleRefresh(this.uri||t.url)}};this.log("Requesting steering manifest: ".concat(r)),this.loader.load(i,o,l)}scheduleRefresh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3*this.timeToLoad;this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var t;const n=null==(t=this.hls)?void 0:t.media;!n||n.ended?this.scheduleRefresh(e,1e3*this.timeToLoad):this.loadSteeringManifest(e)},t)}},interstitialsController:class extends Sl{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const e=this.currentTime;if(void 0===e||this.playbackDisabled||!this.schedule)return;const t=e-this.timelinePos;if(Math.abs(t)<1/7056e5)return;const n=t<=-.01;this.timelinePos=e,this.bufferedPos=e;const r=this.playingItem;if(!r)return void this.checkBuffer();if(n){this.schedule.resetErrorsInRange(e,e-t)&&this.updateSchedule(!0)}if(this.checkBuffer(),n&&e<r.start||e>=r.end){var i;const t=this.findItemIndex(r);let s=this.schedule.findItemIndexAtTime(e);if(-1===s&&(s=t+(n?-1:1),this.log("seeked ".concat(n?"back ":"","to position not covered by schedule ").concat(e," (resolving from ").concat(t," to ").concat(s,")"))),!this.isInterstitial(r)&&null!=(i=this.media)&&i.paused&&(this.shouldPlay=!1),!n&&s>t){const e=this.schedule.findJumpRestrictedIndex(t+1,s);if(e>t)return void this.setSchedulePosition(e)}return void this.setSchedulePosition(s)}const s=this.playingAsset;if(!s){if(this.playingLastItem&&this.isInterstitial(r)){const t=r.event.assetList[0];t&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(e,t))}return}const a=s.timelineStart,o=s.duration||0;var l;(n&&e<a||e>=a+o)&&(null!=(l=r.event)&&l.appendInPlace&&(this.clearInterstitial(r.event,r),this.flushFrontBuffer(e)),this.setScheduleToAssetAtTime(e,s))},this.onTimeupdate=()=>{const e=this.currentTime;if(void 0===e||this.playbackDisabled)return;if(!(e>this.timelinePos))return;this.timelinePos=e,e>this.bufferedPos&&this.checkBuffer();const t=this.playingItem;if(!t||this.playingLastItem)return;if(e>=t.end){this.timelinePos=t.end;const e=this.findItemIndex(t);this.setSchedulePosition(e+1)}const n=this.playingAsset;if(!n)return;e>=n.timelineStart+(n.duration||0)&&this.setScheduleToAssetAtTime(e,n)},this.onScheduleUpdate=(e,t)=>{const n=this.schedule;if(!n)return;const r=this.playingItem,i=n.events||[],s=n.items||[],a=n.durations,o=e.map(e=>e.identifier),l=!(!i.length&&!o.length);(l||t)&&this.log("INTERSTITIALS_UPDATED (".concat(i.length,"): ").concat(i,"\nSchedule: ").concat(s.map(e=>Mp(e))," pos: ").concat(this.timelinePos)),o.length&&this.log("Removed events ".concat(o));let c=null,u=null;r&&(c=this.updateItem(r,this.timelinePos),this.itemsMatch(r,c)?this.playingItem=c:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const d=this.bufferingItem;if(d&&(u=this.updateItem(d,this.bufferedPos),this.itemsMatch(d,u)?this.bufferingItem=u:d.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(d.event,null))),e.forEach(e=>{e.assetList.forEach(e=>{this.clearAssetPlayer(e.identifier,null)})}),this.playerQueue.forEach(e=>{if(e.interstitial.appendInPlace){const n=e.assetItem.timelineStart,r=e.timelineOffset-n;if(r)try{e.timelineOffset=n}catch(t){Math.abs(r)>Ap&&this.warn("".concat(t,' ("').concat(e.assetId,'" ').concat(e.timelineOffset,"->").concat(n,")"))}}}),l||t){if(this.hls.trigger(ll.INTERSTITIALS_UPDATED,{events:i.slice(0),schedule:s.slice(0),durations:a,removedIds:o}),this.isInterstitial(r)&&o.includes(r.event.identifier))return this.warn('Interstitial "'.concat(r.event.identifier,'" removed while playing')),void this.primaryFallback(r.event);r&&this.trimInPlace(c,r),d&&u!==c&&this.trimInPlace(u,d),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new Fp(e),this.schedule=new Op(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(ll.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(ll.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ll.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ll.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(ll.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(ll.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(ll.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(ll.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(ll.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(ll.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(ll.BUFFER_APPENDED,this.onBufferAppended,this),e.on(ll.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(ll.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(ll.MEDIA_ENDED,this.onMediaEnded,this),e.on(ll.ERROR,this.onError,this),e.on(ll.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(ll.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(ll.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ll.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ll.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(ll.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(ll.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(ll.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(ll.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(ll.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(ll.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(ll.BUFFER_CODECS,this.onBufferCodecs,this),e.off(ll.BUFFER_APPENDED,this.onBufferAppended,this),e.off(ll.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(ll.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(ll.MEDIA_ENDED,this.onMediaEnded,this),e.off(ll.ERROR,this.onError,this),e.off(ll.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;null==(e=this.getBufferingPlayer())||e.resumeBuffering()}pauseBuffering(){var e;null==(e=this.getBufferingPlayer())||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){ph(e,"play",this.onPlay),ph(e,"pause",this.onPause),ph(e,"seeking",this.onSeeking),ph(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const n=this.media=t.media;gh(n,"seeking",this.onSeeking),gh(n,"timeupdate",this.onTimeupdate),gh(n,"play",this.onPlay),gh(n,"pause",this.onPause)}onMediaAttached(e,t){const n=this.effectivePlayingItem,r=this.detachedData;if(this.detachedData=null,null===n)this.checkStart();else if(!r){this.clearScheduleState();const e=this.findItemIndex(n);this.setSchedulePosition(e)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const n=!!t.transferMedia,r=this.media;if(this.media=null,!n&&(r&&this.removeMediaListeners(r),this.detachedData)){const e=this.getBufferingPlayer();e&&(this.log("Removing schedule state for detachedData and ".concat(e)),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,e.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,t=()=>e.bufferingItem||e.waitingItem,n=t=>t?e.getAssetPlayer(t.identifier):t,r=(t,r,s,a,o)=>{if(t){let l=t[r].start;const c=t.event;if(c){if("playout"===r||c.timelineOccupancy!==Lp.Point){const e=n(s);(null==e?void 0:e.interstitial)===c&&(l+=e.assetItem.startOffset+e[o])}}else{l+=("bufferedPos"===a?i():e[a])-t.start}return l}return 0},i=()=>{const t=e.bufferedPos;return t===Number.MAX_VALUE?s("primary"):Math.max(t,0)},s=t=>{var n,r;return null!=(n=e.primaryDetails)&&n.live?e.primaryDetails.edge:(null==(r=e.schedule)?void 0:r.durations[t])||0},a=(t,i)=>{var s,a;const o=e.effectivePlayingItem;if(null!=o&&null!=(s=o.event)&&s.restrictions.skip||!e.schedule)return;e.log("seek to ".concat(t,' "').concat(i,'"'));const l=e.effectivePlayingItem,c=e.schedule.findItemIndexAtTime(t,i),u=null==(a=e.schedule.items)?void 0:a[c],d=e.getBufferingPlayer(),h=null==d?void 0:d.interstitial,f=null==h?void 0:h.appendInPlace,g=l&&e.itemsMatch(l,u);if(l&&(f||g)){const s=n(e.playingAsset),a=(null==s?void 0:s.media)||e.primaryMedia;if(a){const n="primary"===i?a.currentTime:r(l,i,e.playingAsset,"timelinePos","currentTime"),o=t-n,c=(f?n:a.currentTime)+o;if(c>=0&&(!s||f||c<=s.duration))return void(a.currentTime=c)}}if(u){let n=t;if("primary"!==i){const e=t-u[i].start;n=u.start+e}const r=!e.isInterstitial(u);if(e.isInterstitial(l)&&!l.event.appendInPlace||!r&&!u.event.appendInPlace){if(l){const s=e.findItemIndex(l);if(c>s){const t=e.schedule.findJumpRestrictedIndex(s+1,c);if(t>s)return void e.setSchedulePosition(t)}let a=0;if(r)e.timelinePos=n,e.checkBuffer();else{const e=u.event.assetList,n=t-(u[i]||u).start;for(let t=e.length;t--;){const r=e[t];if(r.duration&&n>=r.startOffset&&n<r.startOffset+r.duration){a=t;break}}}e.setSchedulePosition(c,a)}}else{const t=e.media||(f?null==d?void 0:d.media:null);t&&(t.currentTime=n)}}},o=()=>{const n=e.effectivePlayingItem;if(e.isInterstitial(n))return n;const r=t();return e.isInterstitial(r)?r:null},l={get bufferedEnd(){const n=t(),i=e.bufferingItem;var s;return i&&i===n&&(r(i,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-i.playout.start||(null==(s=e.bufferingAsset)?void 0:s.startOffset))||0},get currentTime(){const t=o(),n=e.effectivePlayingItem;return n&&n===t?r(n,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-n.playout.start:0},set currentTime(t){const n=o(),r=e.effectivePlayingItem;r&&r===n&&a(t+r.playout.start,"playout")},get duration(){const e=o();return e?e.playout.end-e.playout.start:0},get assetPlayers(){var t;const n=null==(t=o())?void 0:t.event.assetList;return n?n.map(t=>e.getAssetPlayer(t.identifier)):[]},get playingIndex(){var t;const n=null==(t=o())?void 0:t.event;return n&&e.effectivePlayingAsset?n.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return o()}};return this.manager={get events(){var t;return(null==(t=e.schedule)||null==(t=t.events)?void 0:t.slice(0))||[]},get schedule(){var t;return(null==(t=e.schedule)||null==(t=t.items)?void 0:t.slice(0))||[]},get interstitialPlayer(){return o()?l:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const n=t();return e.findItemIndex(n)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const t=e.effectivePlayingItem;return e.findItemIndex(t)},primary:{get bufferedEnd(){return i()},get currentTime(){const t=e.timelinePos;return t>0?t:0},set currentTime(e){a(e,"primary")},get duration(){return s("primary")},get seekableStart(){var t;return(null==(t=e.primaryDetails)?void 0:t.fragmentStart)||0}},integrated:{get bufferedEnd(){return r(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return r(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(e){a(e,"integrated")},get duration(){return s("integrated")},get seekableStart(){var t;return((t,n)=>{var r;if(0!==t&&"primary"!==n&&null!=(r=e.schedule)&&r.length){var i;const r=e.schedule.findItemIndexAtTime(t),s=null==(i=e.schedule.items)?void 0:i[r];if(s)return t+(s[n].start-s.start)}return t})((null==(t=e.primaryDetails)?void 0:t.fragmentStart)||0,"integrated")}},skip:()=>{const t=e.effectivePlayingItem,n=null==t?void 0:t.event;if(n&&!n.restrictions.skip){const r=e.findItemIndex(t);if(n.appendInPlace){const e=t.playout.start+t.event.duration;a(e+.001,"playout")}else e.advanceAfterAssetEnded(n,r,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,n=null==(e=this.schedule)?void 0:e.items;return!!(this.playbackStarted&&t&&n)&&this.findItemIndex(t)===n.length-1}get playbackStarted(){return null!==this.effectivePlayingItem}get currentTime(){var e,t;if(null===this.mediaSelection)return;const n=this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&!n.event.appendInPlace)return;let r=this.media;!r&&null!=(e=this.bufferingItem)&&null!=(e=e.event)&&e.appendInPlace&&(r=this.primaryMedia);const i=null==(t=r)?void 0:t.currentTime;return void 0!==i&&rl(i)?i:void 0}get primaryMedia(){var e;return this.media||(null==(e=this.detachedData)?void 0:e.media)||null}isInterstitial(e){return!(null==e||!e.event)}retreiveMediaSource(e,t){const n=this.getAssetPlayer(e);n&&this.transferMediaFromPlayer(n,t)}transferMediaFromPlayer(e,t){const n=e.interstitial.appendInPlace,r=e.media;if(n&&r===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&r)return void(this.detachedData={media:r});const n=e.transferMedia();this.log("transfer MediaSource from ".concat(e," ").concat(Zc(n))),this.detachedData=n}else t&&r&&(this.shouldPlay||(this.shouldPlay=!r.paused))}transferMediaTo(e,t){var n,r;if(e.media===t)return;let i=null;const s=this.hls,a=e!==s,o=a&&e.interstitial.appendInPlace,l=null==(n=this.detachedData)?void 0:n.mediaSource;let c;if(s.media)o&&(i=s.transferMedia(),this.detachedData=i),c="Primary";else if(l){const e=this.getBufferingPlayer();e?(i=e.transferMedia(),c="".concat(e)):c="detached MediaSource"}else c="detached media";if(!i)if(l)i=this.detachedData,this.log("using detachedData: MediaSource ".concat(Zc(i)));else if(!this.detachedData||s.media===t){const e=this.playerQueue;e.length>1&&e.forEach(e=>{if(a&&e.interstitial.appendInPlace!==o){const t=e.interstitial;this.clearInterstitial(e.interstitial,null),t.appendInPlace=!1,t.appendInPlace&&this.warn("Could not change append strategy for queued assets ".concat(t))}}),this.hls.detachMedia(),this.detachedData={media:t}}const u=i&&"mediaSource"in i&&"closed"!==(null==(r=i.mediaSource)?void 0:r.readyState),d=u&&i?i:t;this.log("".concat(u?"transfering MediaSource":"attaching media"," to ").concat(a?e:"Primary"," from ").concat(c," (media.currentTime: ").concat(t.currentTime,")"));const h=this.schedule;if(d===i&&h){const t=a&&e.assetId===h.assetIdAtEnd;d.overrides={duration:h.duration,endOfStream:!a||t,cueRemoval:!a}}e.attachMedia(d)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=null==e?void 0:e.events;if(!t||this.playbackDisabled||!this.media)return;-1===this.bufferedPos&&(this.bufferedPos=0);const n=this.timelinePos,r=this.effectivePlayingItem;if(-1===n){const n=this.hls.startPosition;if(this.log(Bp("checkStart",n)),this.timelinePos=n,t.length&&t[0].cue.pre){const n=e.findEventIndex(t[0].identifier);this.setSchedulePosition(n)}else if(n>=0||!this.primaryLive){const t=this.timelinePos=n>0?n:0,r=e.findItemIndexAtTime(t);this.setSchedulePosition(r)}}else if(r&&!this.playingItem){const t=e.findItemIndex(r);this.setSchedulePosition(t)}}advanceAssetBuffering(e,t){const n=e.event,r=n.findAssetIndex(t),i=Cp(n,r);if(n.isAssetPastPlayoutLimit(i)){if(this.schedule){var s;const t=null==(s=this.schedule.items)?void 0:s[this.findItemIndex(e)+1];t&&this.bufferedToItem(t)}}else this.bufferedToEvent(e,i)}advanceAfterAssetEnded(e,t,n){const r=Cp(e,n);if(e.isAssetPastPlayoutLimit(r)){if(this.schedule){const n=this.schedule.items;if(n){const r=t+1;if(r>=n.length)return void this.setSchedulePosition(-1);const i=e.resumeTime;this.timelinePos<i&&(this.log(Bp("advanceAfterAssetEnded",i)),this.timelinePos=i,e.appendInPlace&&this.advanceInPlace(i),this.checkBuffer(this.bufferedPos<i)),this.setSchedulePosition(r)}}}else{if(e.appendInPlace){const t=e.assetList[r];t&&this.advanceInPlace(t.timelineStart)}this.setSchedulePosition(t,r)}}setScheduleToAssetAtTime(e,t){const n=this.schedule;if(!n)return;const r=t.parentIdentifier,i=n.getEvent(r);if(i){const t=n.findEventIndex(r),s=n.findAssetIndex(i,e);this.advanceAfterAssetEnded(i,t,s-1)}}setSchedulePosition(e,t){var n;const r=null==(n=this.schedule)?void 0:n.items;if(!r||this.playbackDisabled)return;const i=e>=0?r[e]:null;this.log("setSchedulePosition ".concat(e,", ").concat(t," (").concat(i?Mp(i):i,") pos: ").concat(this.timelinePos));const s=this.waitingItem||this.playingItem,a=this.playingLastItem;if(this.isInterstitial(s)){const n=s.event,c=this.playingAsset,u=null==c?void 0:c.identifier,d=u?this.getAssetPlayer(u):null;if(d&&u&&(!this.eventItemsMatch(s,i)||void 0!==t&&u!==n.assetList[t].identifier)){var o;const t=n.findAssetIndex(c);if(this.log("INTERSTITIAL_ASSET_ENDED ".concat(t+1,"/").concat(n.assetList.length," ").concat(Dp(c))),this.endedAsset=c,this.playingAsset=null,this.hls.trigger(ll.INTERSTITIAL_ASSET_ENDED,{asset:c,assetListIndex:t,event:n,schedule:r.slice(0),scheduleIndex:e,player:d}),s!==this.playingItem)return void(this.itemsMatch(s,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(n,this.findItemIndex(this.playingItem),t));this.retreiveMediaSource(u,i),!d.media||null!=(o=this.detachedData)&&o.mediaSource||d.detachMedia()}if(!this.eventItemsMatch(s,i)&&(this.endedItem=s,this.playingItem=null,this.log("INTERSTITIAL_ENDED ".concat(n," ").concat(Mp(s))),n.hasPlayed=!0,this.hls.trigger(ll.INTERSTITIAL_ENDED,{event:n,schedule:r.slice(0),scheduleIndex:e}),n.cue.once)){var l;this.updateSchedule();const e=null==(l=this.schedule)?void 0:l.items;if(i&&e){const n=this.findItemIndex(i);this.advanceSchedule(n,e,t,s,a)}return}}this.advanceSchedule(e,r,t,s,a)}advanceSchedule(e,t,n,r,i){const s=this.schedule;if(!s)return;const a=t[e]||null,o=this.primaryMedia,l=this.playerQueue;if(l.length&&l.forEach(t=>{const n=t.interstitial,r=s.findEventIndex(n.identifier);(r<e||r>e+1)&&this.clearInterstitial(n,a)}),this.isInterstitial(a)){this.timelinePos=Math.min(Math.max(this.timelinePos,a.start),a.end);const i=a.event;if(void 0===n){const t=Cp(i,(n=s.findAssetIndex(i,this.timelinePos))-1);if(i.isAssetPastPlayoutLimit(t)||i.appendInPlace&&this.timelinePos===a.end)return void this.advanceAfterAssetEnded(i,e,n);n=t}const l=this.waitingItem;this.assetsBuffered(a,o)||this.setBufferingItem(a);let c=this.preloadAssets(i,n);if(this.eventItemsMatch(a,l||r)||(this.waitingItem=a,this.log("INTERSTITIAL_STARTED ".concat(Mp(a)," ").concat(i.appendInPlace?"append in place":"")),this.hls.trigger(ll.INTERSTITIAL_STARTED,{event:i,schedule:t.slice(0),scheduleIndex:e})),!i.assetListLoaded)return void this.log("Waiting for ASSET-LIST to complete loading ".concat(i));if(i.assetListLoader&&(i.assetListLoader.destroy(),i.assetListLoader=void 0),!o)return void this.log("Waiting for attachMedia to start Interstitial ".concat(i));this.waitingItem=this.endedItem=null,this.playingItem=a;const u=i.assetList[n];if(!u)return void this.advanceAfterAssetEnded(i,e,n||0);if(c||(c=this.getAssetPlayer(u.identifier)),null===c||c.destroyed){const e=i.assetList.length;this.warn("asset ".concat(n+1,"/").concat(e," player destroyed ").concat(i)),c=this.createAssetPlayer(i,u,n),c.loadSource()}if(!this.eventItemsMatch(a,this.bufferingItem)&&i.appendInPlace&&this.isAssetBuffered(u))return;this.startAssetPlayer(c,n,t,e,o),this.shouldPlay&&Np(c.media)}else a?(this.resumePrimary(a,e,r),this.shouldPlay&&Np(this.hls.media)):i&&this.isInterstitial(r)&&(this.endedItem=null,this.playingItem=r,r.event.appendInPlace||this.attachPrimary(s.durations.primary,null))}get playbackDisabled(){return!1===this.hls.config.enableInterstitialPlayback}get primaryDetails(){var e;return null==(e=this.mediaSelection)?void 0:e.main.details}get primaryLive(){var e;return!(null==(e=this.primaryDetails)||!e.live)}resumePrimary(e,t,n){var r,i;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log("resuming ".concat(Mp(e))),null==(r=this.detachedData)||!r.mediaSource){let n=this.timelinePos;(n<e.start||n>=e.end)&&(n=this.getPrimaryResumption(e,t),this.log(Bp("resumePrimary",n)),this.timelinePos=n),this.attachPrimary(n,e)}if(!n)return;const s=null==(i=this.schedule)?void 0:i.items;s&&(this.log("INTERSTITIALS_PRIMARY_RESUMED ".concat(Mp(e))),this.hls.trigger(ll.INTERSTITIALS_PRIMARY_RESUMED,{schedule:s.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const n=e.start;if(this.primaryLive){const e=this.primaryDetails;if(0===t)return this.hls.startPosition;if(e&&(n<e.fragmentStart||n>e.edge))return this.hls.liveSyncPosition||-1}return n}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);if(null!=t&&t.hls)return t.hls.bufferedToEnd;return $u.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,n){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const r=this.primaryMedia;if(!r)return;const i=this.hls;i.media?this.checkBuffer():(this.transferMediaTo(i,r),n&&this.startLoadingPrimaryAt(e,n)),n||(this.log(Bp("attachPrimary",e)),this.timelinePos=e,this.startLoadingPrimaryAt(e,n))}startLoadingPrimaryAt(e,t){var n;const r=this.hls;!r.loadingEnabled||!r.media||Math.abs(((null==(n=r.mainForwardBufferInfo)?void 0:n.start)||r.media.currentTime)-e)>.5?r.startLoad(e,t):r.bufferingEnabled||r.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),null==(e=this.schedule)||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(ll.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(ll.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(-1===t.level||!this.schedule)return;const n=this.hls.levels[t.level];if(!n.details)return;const r=Tl(Tl({},this.mediaSelection||this.altSelection),{},{main:n});this.mediaSelection=r,this.schedule.parseInterstitialDateRanges(r,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const n=this.hls.audioTracks[t.id],r=this.mediaSelection;if(!r)return void(this.altSelection=Tl(Tl({},this.altSelection),{},{audio:n}));const i=Tl(Tl({},r),{},{audio:n});this.mediaSelection=i}onSubtitleTrackUpdated(e,t){const n=this.hls.subtitleTracks[t.id],r=this.mediaSelection;if(!r)return void(this.altSelection=Tl(Tl({},this.altSelection),{},{subtitles:n}));const i=Tl(Tl({},r),{},{subtitles:n});this.mediaSelection=i}onAudioTrackSwitching(e,t){const n=tu(t);this.playerQueue.forEach(e=>{let{hls:r}=e;return r&&(r.setAudioOption(t)||r.setAudioOption(n))})}onSubtitleTrackSwitch(e,t){const n=tu(t);this.playerQueue.forEach(e=>{let{hls:r}=e;return r&&(r.setSubtitleOption(t)||-1!==t.id&&r.setSubtitleOption(n))})}onBufferCodecs(e,t){const n=t.tracks;n&&(this.requiredTracks=n)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const n=this.playingItem;if(n&&!this.itemsMatch(n,this.bufferingItem)&&!this.isInterstitial(n)){const e=this.timelinePos;this.bufferedPos=e,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let e=0;e<t.length;e++){const r=t[e];if(r.cue.post){var n;const e=this.schedule.findEventIndex(r.identifier),t=null==(n=this.schedule.items)?void 0:n[e];this.isInterstitial(t)&&this.eventItemsMatch(t,this.bufferingItem)&&this.bufferedToItem(t,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const e=this.findItemIndex(t);this.setSchedulePosition(e+1)}else this.shouldPlay=!1}updateItem(e,t){var n;const r=null==(n=this.schedule)?void 0:n.items;if(e&&r){return r[this.findItemIndex(e,t)]||null}return null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach((t,n)=>{e.event.isAssetPastPlayoutLimit(n)&&this.clearAssetPlayer(t.identifier,null)});const n=e.end+.25,r=$u.bufferInfo(this.primaryMedia,n,0);if(r.end>n||(r.nextStart||0)>n){this.log("trim buffered interstitial ".concat(Mp(e)," (was ").concat(Mp(t),")"));const r=!0;this.attachPrimary(n,null,r),this.flushFrontBuffer(n)}}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var n;return!!t&&(e===t||e.event.identifier===(null==(n=t.event)?void 0:n.identifier))}findItemIndex(e,t){return e&&this.schedule?this.schedule.findItemIndex(e,t):-1}updateSchedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const n=this.mediaSelection;n&&(null==(t=this.schedule)||t.updateSchedule(n,[],e))}checkBuffer(e){var t;const n=null==(t=this.schedule)?void 0:t.items;if(!n)return;const r=$u.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=r.len<1),this.updateBufferedPos(r.end,n,e)}updateBufferedPos(e,t,n){const r=this.schedule,i=this.bufferingItem;if(this.bufferedPos>e||!r)return;if(1===t.length&&this.itemsMatch(t[0],i))return void(this.bufferedPos=e);const s=this.playingItem,a=this.findItemIndex(s);let o=r.findItemIndexAtTime(e);if(this.bufferedPos<e){var l;const n=this.findItemIndex(i),r=Math.min(n+1,t.length-1),s=t[r];if((-1===o&&i&&e>=i.end||null!=(l=s.event)&&l.appendInPlace&&e+.01>=s.start)&&(o=r),this.isInterstitial(i)){const e=i.event;if(r-a>1&&!1===e.appendInPlace)return;if(0===e.assetList.length&&e.assetListLoader)return}if(this.bufferedPos=e,o>n&&o>a)this.bufferedToItem(s);else{const t=this.primaryDetails;this.primaryLive&&t&&e>t.edge-t.targetduration&&s.start<t.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(s)&&this.preloadAssets(s.event,0)}}else n&&s&&!this.itemsMatch(s,i)&&(o===a?this.bufferedToItem(s):o===a+1&&this.bufferedToItem(t[o]))}assetsBuffered(e,t){return 0!==e.event.assetList.length&&!e.event.assetList.some(e=>{const n=this.getAssetPlayer(e.identifier);return!(null!=n&&n.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,n=this.schedule;if(!this.itemsMatch(e,t)&&n){const{items:r,events:i}=n;if(!r||!i)return t;const s=this.isInterstitial(e),a=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const o=a?a.remaining:t?t.end-this.timelinePos:0;if(this.log("INTERSTITIALS_BUFFERED_TO_BOUNDARY ".concat(Mp(e))+(t?" (".concat(o.toFixed(2)," remaining)"):"")),!this.playbackDisabled)if(s){const t=n.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((e,n)=>{const r=this.getAssetPlayer(e.identifier);r&&(n===t&&r.loadSource(),r.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(e=>e.pauseBuffering());this.hls.trigger(ll.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:i.slice(0),schedule:r.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return t}bufferedToItem(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.setBufferingItem(e);if(!this.playbackDisabled)if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(null!==n){this.bufferingAsset=null;const t=this.detachedData;if(t)if(t.mediaSource){const t=!0;this.attachPrimary(e.start,e,t)}else this.preloadPrimary(e);else this.preloadPrimary(e)}}preloadPrimary(e){const t=this.findItemIndex(e),n=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(n)}bufferedToEvent(e,t){const n=e.event,r=0===n.assetList.length&&!n.assetListLoader,i=n.cue.once;if(r||!i){const e=this.preloadAssets(n,t);if(null!=e&&e.interstitial.appendInPlace){const t=this.primaryMedia;t&&this.bufferAssetPlayer(e,t)}}}preloadAssets(e,t){const n=e.assetUrl,r=e.assetList.length,i=0===r&&!e.assetListLoader,s=e.cue.once;if(i){const i=e.timelineStart;if(e.appendInPlace){var a;const t=this.playingItem;this.isInterstitial(t)||(null==t||null==(a=t.nextEvent)?void 0:a.identifier)!==e.identifier||this.flushFrontBuffer(i+.25)}let s,o=0;if(!this.playingItem&&this.primaryLive&&(o=this.hls.startPosition,-1===o&&(o=this.hls.liveSyncPosition||0)),o&&!e.cue.pre&&!e.cue.post){const e=o-i;e>0&&(s=Math.round(1e3*e)/1e3)}if(this.log("Load interstitial asset ".concat(t+1,"/").concat(n?1:r," ").concat(e).concat(s?" live-start: ".concat(o," start-offset: ").concat(s):"")),n)return this.createAsset(e,0,0,i,e.duration,n);const l=this.assetListLoader.loadAssetList(e,s);l&&(e.assetListLoader=l)}else if(!s&&r){for(let i=t;i<r;i++){const t=e.assetList[i],n=this.getAssetPlayerQueueIndex(t.identifier);-1!==n&&!this.playerQueue[n].destroyed||t.error||this.createAssetPlayer(e,t,i)}const n=e.assetList[t];if(n){const e=this.getAssetPlayer(n.identifier);return e&&e.loadSource(),e}}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log("Removing front buffer starting at ".concat(e));Object.keys(t).forEach(t=>{this.hls.trigger(ll.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:t})})}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let n=0;n<t.length;n++)if(e===t[n].assetId)return n;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t)for(let n=0;n<e.length;n++)if(e[n].media===t)return e[n];return null}createAsset(e,t,n,r,i,s){const a={parentIdentifier:e.identifier,identifier:wp(e,s,t),duration:i,startOffset:n,timelineStart:r,uri:s};return this.createAssetPlayer(e,a,t)}createAssetPlayer(e,t,n){const r=this.hls,i=r.userConfig;let s=i.videoPreference;const a=r.loadLevelObj||r.levels[r.currentLevel];(s||a)&&(s=El({},s),a.videoCodec&&(s.videoCodec=a.videoCodec),a.videoRange&&(s.allowedVideoRanges=[a.videoRange]));const o=r.audioTracks[r.audioTrack],l=r.subtitleTracks[r.subtitleTrack];let c=0;if(this.primaryLive||e.appendInPlace){const e=this.timelinePos-t.timelineStart;if(e>1){const n=t.duration;n&&e<n&&(c=e)}}const u=t.identifier,d=Tl(Tl({},i),{},{maxMaxBufferLength:Math.min(180,r.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:r.sessionId,assetPlayerId:u,abrEwmaDefaultEstimate:r.bandwidthEstimate,interstitialsController:void 0,startPosition:c,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:s,audioPreference:o||i.audioPreference,subtitlePreference:l||i.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(d.timelineOffset=t.timelineStart));const h=d.cmcd;null!=h&&h.sessionId&&h.contentId&&(d.cmcd=El({},h,{contentId:kp(t.uri)})),this.getAssetPlayer(u)&&this.warn("Duplicate date range identifier ".concat(e," and asset ").concat(u));const f=new Pp(this.HlsPlayerClass,d,e,t);this.playerQueue.push(f),e.assetList[n]=t;let g=!0;const p=r=>{if(r.live){var i;const t=new Error("Interstitials MUST be VOD assets ".concat(e)),r={fatal:!0,type:al.OTHER_ERROR,details:ol.INTERSTITIAL_ASSET_ITEM_ERROR,error:t},s=(null==(i=this.schedule)?void 0:i.findEventIndex(e.identifier))||-1;return void this.handleAssetItemError(r,e,s,n,t.message)}const s=r.edge-r.fragmentStart,a=t.duration;(g||null===a||s>a)&&(g=!1,this.log('Interstitial asset "'.concat(u,'" duration change ').concat(a," > ").concat(s)),t.duration=s,this.updateSchedule())};f.on(ll.LEVEL_UPDATED,(e,t)=>{let{details:n}=t;return p(n)}),f.on(ll.LEVEL_PTS_UPDATED,(e,t)=>{let{details:n}=t;return p(n)}),f.on(ll.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const m=(e,t)=>{const n=this.getAssetPlayer(u);if(n&&t.tracks){n.off(ll.BUFFER_CODECS,m),n.tracks=t.tracks;const e=this.primaryMedia;this.bufferingAsset===n.assetItem&&e&&!n.media&&this.bufferAssetPlayer(n,e)}};f.on(ll.BUFFER_CODECS,m);f.on(ll.BUFFERED_TO_END,()=>{var n;const r=this.getAssetPlayer(u);if(this.log("buffered to end of asset ".concat(r)),!r||!this.schedule)return;const i=this.schedule.findEventIndex(e.identifier),s=null==(n=this.schedule.items)?void 0:n[i];this.isInterstitial(s)&&this.advanceAssetBuffering(s,t)});const v=t=>()=>{if(!this.getAssetPlayer(u)||!this.schedule)return;this.shouldPlay=!0;const n=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,n,t)};return f.once(ll.MEDIA_ENDED,v(n)),f.once(ll.PLAYOUT_LIMIT_REACHED,v(1/0)),f.on(ll.ERROR,(t,r)=>{if(!this.schedule)return;const i=this.getAssetPlayer(u);if(r.details===ol.BUFFER_STALLED_ERROR)return null!=i&&i.appendInPlace?void this.handleInPlaceStall(e):(this.onTimeupdate(),void this.checkBuffer(!0));this.handleAssetItemError(r,e,this.schedule.findEventIndex(e.identifier),n,"Asset player error ".concat(r.error," ").concat(e))}),f.on(ll.DESTROYING,()=>{if(!this.getAssetPlayer(u)||!this.schedule)return;const t=new Error("Asset player destroyed unexpectedly ".concat(u)),r={fatal:!0,type:al.OTHER_ERROR,details:ol.INTERSTITIAL_ASSET_ITEM_ERROR,error:t};this.handleAssetItemError(r,e,this.schedule.findEventIndex(e.identifier),n,t.message)}),this.log("INTERSTITIAL_ASSET_PLAYER_CREATED ".concat(Dp(t))),this.hls.trigger(ll.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:n,event:e,player:f}),f}clearInterstitial(e,t){e.assetList.forEach(e=>{this.clearAssetPlayer(e.identifier,t)}),e.reset()}resetAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);if(-1!==t){this.log('reset asset player "'.concat(e,'" after error'));const n=this.playerQueue[t];this.transferMediaFromPlayer(n,null),n.resetDetails()}}clearAssetPlayer(e,t){const n=this.getAssetPlayerQueueIndex(e);if(-1!==n){const e=this.playerQueue[n];this.log("clear ".concat(e," toSegment: ").concat(t?Mp(t):t)),this.transferMediaFromPlayer(e,t),this.playerQueue.splice(n,1),e.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,n,r,i){const{interstitial:s,assetItem:a,assetId:o}=e,l=s.assetList.length,c=this.playingAsset;this.endedAsset=null,this.playingAsset=a,c&&c.identifier===o||(c&&(this.clearAssetPlayer(c.identifier,n[r]),delete c.error),this.log("INTERSTITIAL_ASSET_STARTED ".concat(t+1,"/").concat(l," ").concat(Dp(a))),this.hls.trigger(ll.INTERSTITIAL_ASSET_STARTED,{asset:a,assetListIndex:t,event:s,schedule:n.slice(0),scheduleIndex:r,player:e})),this.bufferAssetPlayer(e,i)}bufferAssetPlayer(e,t){var n,r;if(!this.schedule)return;const{interstitial:i,assetItem:s}=e,a=this.schedule.findEventIndex(i.identifier),o=null==(n=this.schedule.items)?void 0:n[a];if(!o)return;e.loadSource(),this.setBufferingItem(o),this.bufferingAsset=s;const l=this.getBufferingPlayer();if(l===e)return;const c=i.appendInPlace;if(c&&!1===(null==l?void 0:l.interstitial.appendInPlace))return;const u=(null==l?void 0:l.tracks)||(null==(r=this.detachedData)?void 0:r.tracks)||this.requiredTracks;if(c&&s!==this.playingAsset){if(!e.tracks)return void this.log("Waiting for track info before buffering ".concat(e));if(u&&!xl(u,e.tracks)){const t=new Error("Asset ".concat(Dp(s)," SourceBuffer tracks ('").concat(Object.keys(e.tracks),"') are not compatible with primary content tracks ('").concat(Object.keys(u),"')")),n={fatal:!0,type:al.OTHER_ERROR,details:ol.INTERSTITIAL_ASSET_ITEM_ERROR,error:t},r=i.findAssetIndex(s);return void this.handleAssetItemError(n,i,a,r,t.message)}}this.transferMediaTo(e,t)}handleInPlaceStall(e){const t=this.schedule,n=this.primaryMedia;if(!t||!n)return;const r=n.currentTime,i=t.findAssetIndex(e,r),s=e.assetList[i];if(s){const a=this.getAssetPlayer(s.identifier);if(a){const o=a.currentTime||r-s.timelineStart,l=a.duration-o;if(this.warn("Stalled at ".concat(o," of ").concat(o+l," in ").concat(a," ").concat(e," (media.currentTime: ").concat(r,")")),o&&(l/n.playbackRate<.5||a.bufferedInPlaceToEnd(n))&&a.hls){const n=t.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,n,i)}}}}advanceInPlace(e){const t=this.primaryMedia;t&&t.currentTime<e&&(t.currentTime=e)}handleAssetItemError(e,t,n,r,i){if(e.details===ol.BUFFER_STALLED_ERROR)return;const s=t.assetList[r]||null;if(this.warn("INTERSTITIAL_ASSET_ERROR ".concat(s?Dp(s):s," ").concat(e.error)),!this.schedule)return;const a=(null==s?void 0:s.identifier)||"",o=this.getAssetPlayerQueueIndex(a),l=this.playerQueue[o]||null,c=this.schedule.items,u=El({},e,{fatal:!1,errorAction:Ru(!0),asset:s,assetListIndex:r,event:t,schedule:c,scheduleIndex:n,player:l});if(this.hls.trigger(ll.INTERSTITIAL_ASSET_ERROR,u),!e.fatal)return;const d=this.playingAsset,h=this.bufferingAsset,f=new Error(i);if(s&&(this.clearAssetPlayer(a,null),s.error=f),t.assetList.some(e=>!e.error))for(let g=r;g<t.assetList.length;g++)this.resetAssetPlayer(t.assetList[g].identifier);else t.error=f;this.updateSchedule(!0),t.error?this.primaryFallback(t):d&&d.identifier===a?this.advanceAfterAssetEnded(t,n,r):h&&h.identifier===a&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,h)}primaryFallback(e){const t=e.timelineStart,n=this.effectivePlayingItem;if(n){this.log('Fallback to primary from event "'.concat(e.identifier,'" start: ').concat(t," pos: ").concat(this.timelinePos," playing: ").concat(Mp(n)," error: ").concat(e.error));let r=this.timelinePos;-1===r&&(r=this.hls.startPosition);const i=this.updateItem(n,r);if(this.itemsMatch(n,i)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t)),!this.schedule)return;const s=this.schedule.findItemIndexAtTime(r);this.setSchedulePosition(s)}else this.checkStart()}onAssetListLoaded(e,t){var n,r;const i=t.event,s=i.identifier,a=t.assetListResponse.ASSETS;if(null==(n=this.schedule)||!n.hasEvent(s))return;const o=i.timelineStart,l=i.duration;let c=0;a.forEach((e,t)=>{const n=parseFloat(e.DURATION);this.createAsset(i,t,c,o+c,n,e.URI),c+=n}),i.duration=c,this.log("Loaded asset-list with duration: ".concat(c," (was: ").concat(l,") ").concat(i));const u=this.waitingItem,d=(null==u?void 0:u.event.identifier)===s;this.updateSchedule();const h=null==(r=this.bufferingItem)?void 0:r.event;if(d){var f;const e=this.schedule.findEventIndex(s),t=null==(f=this.schedule.items)?void 0:f[e];if(t){if(!this.playingItem&&this.timelinePos>t.end){if(this.schedule.findItemIndexAtTime(this.timelinePos)!==e)return i.error=new Error("Interstitial no longer within playback range ".concat(this.timelinePos," ").concat(i)),this.updateSchedule(!0),void this.primaryFallback(i)}this.setBufferingItem(t)}this.setSchedulePosition(e)}else if((null==h?void 0:h.identifier)===s){const e=i.assetList[0];if(e){const t=this.getAssetPlayer(e.identifier);if(h.appendInPlace){const e=this.primaryMedia;t&&e&&this.bufferAssetPlayer(t,e)}else t&&t.loadSource()}}}onError(e,t){if(this.schedule)switch(t.details){case ol.ASSET_LIST_PARSING_ERROR:case ol.ASSET_LIST_LOAD_ERROR:case ol.ASSET_LIST_LOAD_TIMEOUT:{const e=t.interstitial;e&&(this.updateSchedule(!0),this.primaryFallback(e));break}case ol.BUFFER_STALLED_ERROR:{const e=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(e)&&e.event.appendInPlace)return void this.handleInPlaceStall(e.event);this.log("Primary player stall @".concat(this.timelinePos," bufferedPos: ").concat(this.bufferedPos)),this.onTimeupdate(),this.checkBuffer(!0);break}}}}});function zm(e){return e&&"object"===typeof e?Array.isArray(e)?e.map(zm):Object.keys(e).reduce((t,n)=>(t[n]=zm(e[n]),t),{}):e}function Vm(e,t){const n=e.loader;if(n!==Nm&&n!==Hm)t.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1;else{(function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(e){}return!1})()&&(e.loader=Nm,e.progressive=!0,e.enableSoftwareAES=!0,t.log("[config]: Progressive streaming enabled, using FetchLoader"))}}class Km extends qu{constructor(e,t){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var e;null!=(e=this.media)&&e.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{var e;this.hls&&(this.ended=(null==(e=this.media)?void 0:e.currentTime)||1,this.hls.trigger(ll.MEDIA_ENDED,{stalled:!1}))},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(ll.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ll.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ll.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(ll.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ll.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ll.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(100),this.mediaSource=t.mediaSource;const n=this.media=t.media;gh(n,"playing",this.onMediaPlaying),gh(n,"waiting",this.onMediaWaiting),gh(n,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:n}=this;n&&(ph(n,"playing",this.onMediaPlaying),ph(n,"waiting",this.onMediaWaiting),ph(n,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(null==(e=this.media)||!e.readyState||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var n,r;const i=null==(n=this.hls)?void 0:n.config;if(!i)return;const s=this.media;if(!s)return;const{seeking:a}=s,o=this.seeking&&!a,l=!this.seeking&&a,c=s.paused&&!a||s.ended||0===s.playbackRate;if(this.seeking=a,e!==t)return t&&(this.ended=0),this.moved=!0,a||(this.nudgeRetry=0,i.nudgeOnVideoHole&&!c&&e>t&&this.nudgeOnVideoHole(e,t)),void(0===this.waiting&&this.stallResolved(e));if(l||o)return void(o&&this.stallResolved(e));if(c)return this.nudgeRetry=0,this.stallResolved(e),void(!this.ended&&s.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(ll.MEDIA_ENDED,{stalled:!1})));if(!$u.getBuffered(s).length)return void(this.nudgeRetry=0);const u=$u.bufferInfo(s,e,0),d=u.nextStart||0,h=this.fragmentTracker;if(a&&h&&this.hls){const t=Ym(this.hls.inFlightFragments,e),n=u.len>2,r=!d||t||d-e>2&&!h.getPartialFragment(e);if(n||r)return;this.moved=!1}const f=null==(r=this.hls)?void 0:r.latestLevelDetails;if(!this.moved&&null!==this.stalled&&h){if(!(u.len>0)&&!d)return;const t=Math.max(d,u.start||0)-e,n=!(null==f||!f.live)?2*f.targetduration:2,r=qm(e,h);if(t>0&&(t<=n||r))return void(s.paused||this._trySkipBufferHole(r))}const g=i.detectStallWithCurrentTimeMs,p=self.performance.now(),m=this.waiting;let v=this.stalled;if(null===v){if(!(m>0&&p-m<g))return void(this.stalled=p);v=this.stalled=m}const y=p-v;if(!a&&(y>=g||m)&&this.hls){var E;if("ended"===(null==(E=this.mediaSource)?void 0:E.readyState)&&(null==f||!f.live)&&Math.abs(e-((null==f?void 0:f.edge)||0))<1){if(this.ended)return;return this.ended=e||1,void this.hls.trigger(ll.MEDIA_ENDED,{stalled:!0})}if(this._reportStall(u),!this.media||!this.hls)return}const b=$u.bufferInfo(s,e,i.maxBufferHole);this._tryFixBufferStall(b,y,e)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const n=self.performance.now()-t;this.log("playback not stuck anymore @".concat(e,", after ").concat(Math.round(n),"ms")),this.stallReported=!1,this.waiting=0,this.hls.trigger(ll.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var n;const r=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&null!=(n=this.buffered.audio)&&n.length&&r&&r.length>1&&e>r.end(0)){const n=$u.bufferedInfo($u.timeRangesToArray(this.buffered.audio),e,0);if(n.len>1&&t>=n.start){const n=$u.timeRangesToArray(r),i=$u.bufferedInfo(n,t,0).bufferedIndex;if(i>-1&&i<n.length-1){const t=$u.bufferedInfo(n,e,0).bufferedIndex,r=n[i].end,s=n[i+1].start;if((-1===t||t>i)&&s-r<1&&e-r<2){const n=new Error("nudging playhead to flush pipeline after video hole. currentTime: ".concat(e," hole: ").concat(r," -> ").concat(s," buffered index: ").concat(t));this.warn(n.message),this.media.currentTime+=1e-6;let i=qm(e,this.fragmentTracker);i&&"fragment"in i?i=i.fragment:i||(i=void 0);const a=$u.bufferInfo(this.media,e,0);this.hls.trigger(ll.ERROR,{type:al.MEDIA_ERROR,details:ol.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:n,reason:n.message,frag:i,buffer:a.len,bufferInfo:a})}}}}}_tryFixBufferStall(e,t,n){var r,i;const{fragmentTracker:s,media:a}=this,o=null==(r=this.hls)?void 0:r.config;if(!a||!s||!o)return;const l=null==(i=this.hls)?void 0:i.latestLevelDetails,c=qm(n,s);if(c||null!=l&&l.live&&n<l.fragmentStart){if(this._trySkipBufferHole(c)||!this.media)return}const u=e.buffered,d=this.adjacentTraversal(e,n);(u&&u.length>1&&e.len>o.maxBufferHole||e.nextStart&&(e.nextStart-n<o.maxBufferHole||d))&&(t>1e3*o.highBufferWatchdogPeriod||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,t){const n=this.fragmentTracker,r=e.nextStart;if(n&&r){const e=n.getFragAtPos(t,fl),i=n.getFragAtPos(r,fl);if(e&&i)return i.sn-e.sn<2}return!1}_reportStall(e){const{hls:t,media:n,stallReported:r,stalled:i}=this;if(!r&&null!==i&&n&&t){this.stallReported=!0;const r=new Error("Playback stalling at @".concat(n.currentTime," due to low buffer (").concat(Zc(e),")"));this.warn(r.message),t.trigger(ll.ERROR,{type:al.MEDIA_ERROR,details:ol.BUFFER_STALLED_ERROR,fatal:!1,error:r,buffer:e.len,bufferInfo:e,stalled:{start:i}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:n,media:r}=this,i=null==(t=this.hls)?void 0:t.config;if(!r||!n||!i)return 0;const s=r.currentTime,a=$u.bufferInfo(r,s,0),o=s<a.start?a.start:a.nextStart;if(o&&this.hls){const t=a.len<=i.maxBufferHole,c=a.len>0&&a.len<1&&r.readyState<3,u=o-s;if(u>0&&(t||c)){if(u>i.maxBufferHole){let t=!1;if(0===s){const e=n.getAppendedFrag(0,fl);e&&o<e.end&&(t=!0)}if(!t&&e){var l;if(null==(l=this.hls.loadLevelObj)||!l.details)return 0;if(Ym(this.hls.inFlightFragments,o))return 0;let t=!1,r=e.end;for(;r<o;){const e=qm(r,n);if(!e){t=!0;break}r+=e.duration}if(t)return 0}}const t=Math.max(o+.05,s+.1);if(this.warn("skipping hole, adjusting currentTime from ".concat(s," to ").concat(t)),this.moved=!0,r.currentTime=t,null==e||!e.gap){const n=new Error("fragment loaded with buffer holes, seeking from ".concat(s," to ").concat(t)),r={type:al.MEDIA_ERROR,details:ol.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:n,reason:n.message,buffer:a.len,bufferInfo:a};e&&("fragment"in e?r.part=e:r.frag=e),this.hls.trigger(ll.ERROR,r)}return t}}return 0}_tryNudgeBuffer(e){const{hls:t,media:n,nudgeRetry:r}=this,i=null==t?void 0:t.config;if(!n||!i)return 0;const s=n.currentTime;if(this.nudgeRetry++,r<i.nudgeMaxRetry){const a=s+(r+1)*i.nudgeOffset,o=new Error("Nudging 'currentTime' from ".concat(s," to ").concat(a));this.warn(o.message),n.currentTime=a,t.trigger(ll.ERROR,{type:al.MEDIA_ERROR,details:ol.BUFFER_NUDGE_ON_STALL,error:o,fatal:!1,buffer:e.len,bufferInfo:e})}else{const n=new Error("Playhead still not moving while enough data buffered @".concat(s," after ").concat(i.nudgeMaxRetry," nudges"));this.error(n.message),t.trigger(ll.ERROR,{type:al.MEDIA_ERROR,details:ol.BUFFER_STALLED_ERROR,error:n,fatal:!0,buffer:e.len,bufferInfo:e})}}}function Ym(e,t){const n=Wm(e.main);if(n&&n.start<=t)return n;const r=Wm(e.audio);return r&&r.start<=t?r:null}function Wm(e){if(!e)return null;switch(e.state){case yh:case vh:case Ah:case Lh:return null}return e.frag}function qm(e,t){return t.getAppendedFrag(e,fl)||t.getPartialFragment(e)}function Xm(){if("undefined"!==typeof self)return self.VTTCue||self.TextTrackCue}function Qm(e,t,n,r,i){let s=new e(t,n,"");try{s.value=r,i&&(s.type=i)}catch(a){s=new e(t,n,Zc(i?Tl({type:i},r):r))}return s}const $m=(()=>{const e=Xm();try{e&&new e(0,Number.POSITIVE_INFINITY,"")}catch(t){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class Zm{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(ll.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on(ll.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(ll.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ll.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ll.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(ll.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(ll.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(ll.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(ll.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(ll.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ll.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ll.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(ll.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(ll.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(ll.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,t){var n;this.media=t.media,!1===(null==(n=t.overrides)?void 0:n.cueRemoval)&&(this.removeCues=!1)}onMediaAttached(){var e;const t=null==(e=this.hls)?void 0:e.latestLevelDetails;t&&this.updateDateRangeCues(t)}onMediaDetaching(e,t){this.media=null;!!t.transferMedia||(this.id3Track&&(this.removeCues&&Tp(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const n=e[t];if("metadata"===n.kind&&"id3"===n.label)return Ep(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:n,enableID3MetadataCues:r}=this.hls.config;if(!n&&!r)return;const{samples:i}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const s=Xm();if(s)for(let a=0;a<i.length;a++){const e=i[a].type;if(e===af.emsg&&!n||!r)continue;const t=tf(i[a].data),o=i[a].pts;let l=o+i[a].duration;l>$m&&(l=$m);l-o<=0&&(l=o+.25);for(let n=0;n<t.length;n++){const r=t[n];if(!nf(r)){this.updateId3CueEnds(o,e);const t=Qm(s,o,l,r,e);t&&this.id3Track.addCue(t)}}}}updateId3CueEnds(e,t){var n;const r=null==(n=this.id3Track)?void 0:n.cues;if(r)for(let i=r.length;i--;){const n=r[i];n.type===t&&n.startTime<e&&n.endTime===$m&&(n.endTime=e)}}onBufferFlushing(e,t){let{startOffset:n,endOffset:r,type:i}=t;const{id3Track:s,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:l}}=a;if(s&&(o||l)){let e;e="audio"===i?e=>e.type===af.audioId3&&l:"video"===i?e=>e.type===af.emsg&&o:e=>e.type===af.audioId3&&l||e.type===af.emsg&&o,Sp(s,n,r,e)}}onLevelUpdated(e,t){let{details:n}=t;this.updateDateRangeCues(n,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.hls||!this.media)return;const{assetPlayerId:n,timelineOffset:r,enableDateRangeMetadataCues:i,interstitialsController:s}=this.hls.config;if(!i)return;const a=Xm();if(n&&r&&!s){const{fragmentStart:t,fragmentEnd:r}=e;let i=this.assetCue;i?(i.startTime=t,i.endTime=r):a&&(i=this.assetCue=Qm(a,t,r,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),i&&(i.id=n,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(i),i.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:o}=this,{dateRanges:l}=e,c=Object.keys(l);let u=this.dateRangeCuesAppended;var d;if(o&&t)if(null!=(d=o.cues)&&d.length){const e=Object.keys(u).filter(e=>!c.includes(e));for(let t=e.length;t--;){var h;const n=e[t],r=null==(h=u[n])?void 0:h.cues;delete u[n],r&&Object.keys(r).forEach(e=>{const t=r[e];if(t){t.removeEventListener("enter",this.onEventCueEnter);try{o.removeCue(t)}catch(n){}}})}}else u=this.dateRangeCuesAppended={};const f=e.fragments[e.fragments.length-1];if(0!==c.length&&rl(null==f?void 0:f.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let e=0;e<c.length;e++){const t=c[e],n=l[t],r=n.startTime,i=u[t],o=(null==i?void 0:i.cues)||{};let d=(null==i?void 0:i.durationKnown)||!1,h=$m;const{duration:f,endDate:g}=n;if(g&&null!==f)h=r+f,d=!0;else if(n.endOnNext&&!d){const e=c.reduce((e,t)=>{if(t!==n.id){const r=l[t];if(r.class===n.class&&r.startDate>n.startDate&&(!e||n.startDate<e.startDate))return r}return e},null);e&&(h=e.startTime,d=!0)}const p=Object.keys(n.attr);for(let e=0;e<p.length;e++){const l=p[e];if(!ad(l))continue;const c=o[l];if(c)!d||null!=i&&i.durationKnown?Math.abs(c.startTime-r)>.01&&(c.startTime=r,c.endTime=h):c.endTime=h;else if(a){let e=n.attr[l];od(l)&&(e=Pl(e));const i=Qm(a,r,h,{key:l,data:e},af.dateRange);i&&(i.id=t,this.id3Track.addCue(i),o[l]=i,s&&("X-ASSET-LIST"!==l&&"X-ASSET-URL"!==l||i.addEventListener("enter",this.onEventCueEnter)))}}u[t]={cues:o,dateRange:n,durationKnown:d}}}}}class Jm{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:e}=this,t=this.levelDetails;if(!e||!t)return;this.currentTime=e.currentTime;const n=this.computeLatency();if(null===n)return;this._latency=n;const{lowLatencyMode:r,maxLiveSyncPlaybackRate:i}=this.config;if(!r||1===i||!t.live)return;const s=this.targetLatency;if(null===s)return;const a=n-s;if(a<Math.min(this.maxLatency,s+t.targetduration)&&a>.05&&this.forwardBufferLength>1){const t=Math.min(2,Math.max(1,i)),n=Math.round(2/(1+Math.exp(-.75*a-this.edgeStalled))*20)/20,r=Math.min(t,Math.max(1,n));this.changeMediaPlaybackRate(e,r)}else 1!==e.playbackRate&&0!==e.playbackRate&&this.changeMediaPlaybackRate(e,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return(null==(e=this.hls)?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(void 0!==e.liveMaxLatencyDuration)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(null===e||null===this.hls)return null;const{holdBack:t,partHoldBack:n,targetduration:r}=e,{liveSyncDuration:i,liveSyncDurationCount:s,lowLatencyMode:a}=this.config,o=this.hls.userConfig;let l=a&&n||t;(this._targetLatencyUpdated||o.liveSyncDuration||o.liveSyncDurationCount||0===l)&&(l=void 0!==i?i:s*r);const c=r;return l+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,c)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(null===e||null===t)return null;const n=this.levelDetails;if(null===n)return null;const r=n.edge,i=e-t-this.edgeStalled,s=r-n.totalduration,a=r-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(s,i),a)}get drift(){const e=this.levelDetails;return null===e?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(null===e)return 0;const t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(ll.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ll.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ll.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(ll.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(ll.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ll.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ll.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(ll.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,t){let{details:n}=t;n.advanced&&this.onTimeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var n;t.details===ol.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&null!=(n=this.levelDetails)&&n.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var n,r;e.playbackRate!==t&&(null==(n=this.hls)||n.logger.debug("[latency-controller]: latency=".concat(this.latency.toFixed(3),", targetLatency=").concat(null==(r=this.targetLatency)?void 0:r.toFixed(3),", forwardBufferLength=").concat(this.forwardBufferLength.toFixed(3),": adjusting playback rate from ").concat(e.playbackRate," to ").concat(t)),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return null===e?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return null===e?null:e-this.currentTime}}class ev extends lg{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ll.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(ll.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ll.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(ll.FRAG_BUFFERED,this.onFragBuffered,this),e.on(ll.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ll.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(ll.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ll.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(ll.FRAG_BUFFERED,this.onFragBuffered,this),e.off(ll.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(e=>{e.loadError=0,e.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const n=this.hls.config.preferManagedMediaSource,r=[],i={},s={};let a=!1,o=!1,l=!1;t.levels.forEach(e=>{const t=e.attrs;let{audioCodec:c,videoCodec:u}=e;c&&(e.audioCodec=c=Ic(c,n)||void 0),u&&(u=e.videoCodec=function(e){const t=e.split(",");for(let n=0;n<t.length;n++){const e=t[n].split(".");e.length>2&&"avc1"===e[0]&&(t[n]="avc1.".concat(parseInt(e[1]).toString(16)).concat(("000"+parseInt(e[2]).toString(16)).slice(-4)))}return t.join(",")}(u));const{width:d,height:h,unknownCodecs:f}=e,g=(null==f?void 0:f.length)||0;if(a||(a=!(!d||!h)),o||(o=!!u),l||(l=!!c),g||c&&!this.isAudioSupported(c)||u&&!this.isVideoSupported(u))return void this.log('Some or all CODECS not supported "'.concat(t.CODECS,'"'));const{CODECS:p,"FRAME-RATE":m,"HDCP-LEVEL":v,"PATHWAY-ID":y,RESOLUTION:E,"VIDEO-RANGE":b}=t,T="".concat(y||".","-"),S="".concat(T).concat(e.bitrate,"-").concat(E,"-").concat(m,"-").concat(p,"-").concat(b,"-").concat(v);if(i[S])if(i[S].uri===e.url||e.attrs["PATHWAY-ID"])i[S].addGroupId("audio",t.AUDIO),i[S].addGroupId("text",t.SUBTITLES);else{const t=s[S]+=1;e.attrs["PATHWAY-ID"]=new Array(t+1).join(".");const n=this.createLevel(e);i[S]=n,r.push(n)}else{const t=this.createLevel(e);i[S]=t,s[S]=1,r.push(t)}}),this.filterAndSortMediaOptions(r,t,a,o,l)}createLevel(e){const t=new Xc(e),n=e.supplemental;if(null!=n&&n.videoCodec&&!this.isVideoSupported(n.videoCodec)){const e=new Error('SUPPLEMENTAL-CODECS not supported "'.concat(n.videoCodec,'"'));this.log(e.message),t.supportedResult=Nc(e,[])}return t}isAudioSupported(e){return Sc(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return Sc(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,n,r,i){var s;let a=[],o=[],l=e;const c=(null==(s=t.stats)?void 0:s.parsing)||{};if((n||r)&&i&&(l=l.filter(e=>{let{videoCodec:t,videoRange:n,width:r,height:i}=e;return(!!t||!(!r||!i))&&(!!(s=n)&&zc.indexOf(s)>-1);var s})),0===l.length)return Promise.resolve().then(()=>{if(this.hls){let e="no level with compatible codecs found in manifest",n=e;t.levels.length&&(n="one or more CODECS in variant not supported: ".concat(Zc(t.levels.map(e=>e.attrs.CODECS).filter((e,t,n)=>n.indexOf(e)===t))),this.warn(n),e+=" (".concat(n,")"));const r=new Error(e);this.hls.trigger(ll.ERROR,{type:al.MEDIA_ERROR,details:ol.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:r,reason:n})}}),void(c.end=performance.now());t.audioTracks&&(a=t.audioTracks.filter(e=>!e.audioCodec||this.isAudioSupported(e.audioCodec)),tv(a)),t.subtitles&&(o=t.subtitles,tv(o));const u=l.slice(0);l.sort((e,t)=>{if(e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"])return(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&e.height!==t.height)return e.height-t.height;if(e.frameRate!==t.frameRate)return e.frameRate-t.frameRate;if(e.videoRange!==t.videoRange)return zc.indexOf(e.videoRange)-zc.indexOf(t.videoRange);if(e.videoCodec!==t.videoCodec){const n=Ac(e.videoCodec),r=Ac(t.videoCodec);if(n!==r)return r-n}if(e.uri===t.uri&&e.codecSet!==t.codecSet){const n=Lc(e.codecSet),r=Lc(t.codecSet);if(n!==r)return r-n}return e.averageBitrate!==t.averageBitrate?e.averageBitrate-t.averageBitrate:0});let d=u[0];if(this.steering&&(l=this.steering.filterParsedLevels(l),l.length!==u.length))for(let v=0;v<u.length;v++)if(u[v].pathwayId===l[0].pathwayId){d=u[v];break}this._levels=l;for(let v=0;v<l.length;v++)if(l[v]===d){var h;this._firstLevel=v;const e=d.bitrate,t=this.hls.bandwidthEstimate;if(this.log("manifest loaded, ".concat(l.length," level(s) found, first bitrate: ").concat(e)),void 0===(null==(h=this.hls.userConfig)?void 0:h.abrEwmaDefaultEstimate)){const n=Math.min(e,this.hls.config.abrEwmaDefaultEstimateMax);n>t&&t===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=n)}break}const f=i&&!r,g=this.hls.config,p=!(!g.audioStreamController||!g.audioTrackController),m={levels:l,audioTracks:a,subtitleTracks:o,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:i,video:r,altAudio:p&&!f&&a.some(e=>!!e.url)};c.end=performance.now(),this.hls.trigger(ll.MANIFEST_PARSED,m)}get levels(){return 0===this._levels.length?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(0===t.length)return;if(e<0||e>=t.length){const n=new Error("invalid level idx"),r=e<0;if(this.hls.trigger(ll.ERROR,{type:al.OTHER_ERROR,details:ol.LEVEL_SWITCH_ERROR,level:e,fatal:r,error:n,reason:n.message}),r)return;e=Math.min(e,t.length-1)}const n=this.currentLevelIndex,r=this.currentLevel,i=r?r.attrs["PATHWAY-ID"]:void 0,s=t[e],a=s.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=s,n===e&&r&&i===a)return;this.log("Switching to level ".concat(e," (").concat(s.height?s.height+"p ":"").concat(s.videoRange?s.videoRange+" ":"").concat(s.codecSet?s.codecSet+" ":"","@").concat(s.bitrate,")").concat(a?" with Pathway "+a:""," from level ").concat(n).concat(i?" with Pathway "+i:""));const o={level:e,attrs:s.attrs,details:s.details,bitrate:s.bitrate,averageBitrate:s.averageBitrate,maxBitrate:s.maxBitrate,realBitrate:s.realBitrate,width:s.width,height:s.height,codecSet:s.codecSet,audioCodec:s.audioCodec,videoCodec:s.videoCodec,audioGroups:s.audioGroups,subtitleGroups:s.subtitleGroups,loaded:s.loaded,loadError:s.loadError,fragmentError:s.fragmentError,name:s.name,id:s.id,uri:s.uri,url:s.url,urlId:0,audioGroupIds:s.audioGroupIds,textGroupIds:s.textGroupIds};this.hls.trigger(ll.LEVEL_SWITCHING,o);const l=s.details;if(!l||l.live){const e=this.switchParams(s.uri,null==r?void 0:r.details,l);this.loadPlaylist(e)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(void 0===this._startLevel){const e=this.hls.config.startLevel;return void 0!==e?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),n=e.filter(e=>-1!==t.indexOf(e));if(e.length<1)return void this.warn("pathwayPriority ".concat(e," should contain at least one pathway from list: ").concat(t));this.steering.pathwayPriority=n}}onError(e,t){!t.fatal&&t.context&&t.context.type===ul&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,t){let{frag:n}=t;if(void 0!==n&&n.type===fl){const e=n.elementaryStreams;if(!Object.keys(e).some(t=>!!e[t]))return;const t=this._levels[n.level];null!=t&&t.loadError&&(this.log("Resetting level error count of ".concat(t.loadError," on frag buffered")),t.loadError=0)}}onLevelLoaded(e,t){var n;const{level:r,details:i}=t,s=t.levelInfo;var a;if(!s)return this.warn("Invalid level index ".concat(r)),void(null!=(a=t.deliveryDirectives)&&a.skip&&(i.deltaUpdateFailed=!0));if(s===this.currentLevel||t.withoutMultiVariant){0===s.fragmentError&&(s.loadError=0);let e=s.details;e===t.details&&e.advanced&&(e=void 0),this.playlistLoaded(r,t,e)}else null!=(n=t.deliveryDirectives)&&n.skip&&(i.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=this.getUrlWithDirectives(e.uri,t),r=this.currentLevelIndex,i=e.attrs["PATHWAY-ID"],s=e.details,a=null==s?void 0:s.age;this.log("Loading level index ".concat(r).concat(void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:"").concat(i?" Pathway "+i:"").concat(a&&s.live?" age "+a.toFixed(1)+(s.type?" "+s.type||0:""):""," ").concat(n)),this.hls.trigger(ll.LEVEL_LOADING,{url:n,level:r,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(1===this._levels.length)return;const n=this._levels.filter((t,n)=>n!==e||(this.steering&&this.steering.removeLevel(t),t===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,t.details&&t.details.fragments.forEach(e=>e.level=-1)),!1));ah(n),this._levels=n,this.currentLevelIndex>-1&&null!=(t=this.currentLevel)&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const r=n.length-1;this._firstLevel=Math.min(this._firstLevel,r),this._startLevel&&(this._startLevel=Math.min(this._startLevel,r)),this.hls.trigger(ll.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,t){let{levels:n}=t;this._levels=n}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(ll.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function tv(e){const t={};e.forEach(e=>{const n=e.groupId||"";e.id=t[n]=t[n]||0,t[n]++})}function nv(){return self.SourceBuffer||self.WebKitSourceBuffer}function rv(){if(!Il())return!1;const e=nv();return!e||e.prototype&&"function"===typeof e.prototype.appendBuffer&&"function"===typeof e.prototype.remove}class iv extends Ih{constructor(e,t,n){super(e,t,n,"stream-controller",fl),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const e=this.media,t=e?e.currentTime:null;if(null===t||!rl(t))return;if(this.log("Media seeked to ".concat(t.toFixed(3))),!this.getBufferedFrag(t))return;const n=this.getFwdBufferInfoAtPos(e,t,fl,0);null!==n&&0!==n.len?this.tick():this.warn("Main forward buffer length at ".concat(t,' on "seeked" event ').concat(n?n.len:"empty",")"))},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(ll.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ll.LEVEL_LOADING,this.onLevelLoading,this),e.on(ll.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ll.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(ll.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(ll.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(ll.BUFFER_CREATED,this.onBufferCreated,this),e.on(ll.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(ll.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(ll.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(ll.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ll.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ll.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(ll.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(ll.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(ll.BUFFER_CREATED,this.onBufferCreated,this),e.off(ll.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(ll.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(ll.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:n,hls:r}=this;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){let e=r.startLevel;-1===e&&(r.config.testBandwidth&&this.levels.length>1?(e=0,this.bitrateTest=!0):e=r.firstAutoLevel),r.nextLoadLevel=e,this.level=r.loadLevel,this._hasEnoughToStart=!!t}n>0&&-1===e&&!t&&(this.log("Override startPosition with lastCurrentTime @".concat(n.toFixed(3))),e=n),this.state=yh,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=vh}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case Rh:{const{levels:e,level:t}=this,n=null==e?void 0:e[t],r=null==n?void 0:n.details;if(r&&(!r.live||this.levelLastLoaded===n&&!this.waitForLive(n))){if(this.waitForCdnTuneIn(r))break;this.state=yh;break}if(this.hls.nextLoadLevel!==this.level){this.state=yh;break}break}case Th:this.checkRetryDate()}this.state===yh&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),null!=(e=this.media)&&e.readyState&&!1===this.media.seeking&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:n,media:r}=this;if(null===t||!r&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch))return;if(this.altAudio&&this.audioOnly)return;const i=this.buffering?e.nextLoadLevel:e.loadLevel;if(null==n||!n[i])return;const s=n[i],a=this.getMainFwdBufferInfo();if(null===a)return;const o=this.getLevelDetails();if(o&&this._streamEnded(a,o)){const e={};return 2===this.altAudio&&(e.type="video"),this.hls.trigger(ll.BUFFER_EOS,e),void(this.state=Ah)}if(!this.buffering)return;e.loadLevel!==i&&-1===e.manualLevel&&this.log("Adapting to level ".concat(i," from level ").concat(this.level)),this.level=e.nextLoadLevel=i;const l=s.details;if(!l||this.state===Rh||this.waitForLive(s))return this.level=i,this.state=Rh,void(this.startFragRequested=!1);const c=a.len,u=this.getMaxBufferLength(s.maxBitrate);if(c>=u)return;this.backtrackFragment&&this.backtrackFragment.start>a.end&&(this.backtrackFragment=null);const d=this.backtrackFragment?this.backtrackFragment.start:a.end;let h=this.getNextFragment(d,l);if(this.couldBacktrack&&!this.fragPrevious&&h&&zl(h)&&this.fragmentTracker.getState(h)!==Du){var f;const e=(null!=(f=this.backtrackFragment)?f:h).sn-l.startSN,t=l.fragments[e-1];t&&h.cc===t.cc&&(h=t,this.fragmentTracker.removeFragment(t))}else this.backtrackFragment&&a.len&&(this.backtrackFragment=null);if(h&&this.isLoopLoading(h,d)){if(!h.gap){const e=this.audioOnly&&!this.altAudio?Ul:Gl,t=(e===Gl?this.videoBuffer:this.mediaBuffer)||this.media;t&&this.afterBufferFlushed(t,e,fl)}h=this.getNextFragmentLoopLoading(h,l,a,fl,u)}h&&(!h.initSegment||h.initSegment.data||this.bitrateTest||(h=h.initSegment),this.loadFragment(h,s,d))}loadFragment(e,t,n){const r=this.fragmentTracker.getState(e);r===Iu||r===Cu?zl(e)?this.bitrateTest?(this.log("Fragment ".concat(e.sn," of level ").concat(e.level," is being downloaded to test bitrate and will not be buffered")),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,n):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,fl)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(null!=t&&t.readyState){let n;const r=this.getAppendedFrag(t.currentTime);r&&r.start>1&&this.flushMainBuffer(0,r.start-1);const i=this.getLevelDetails();if(null!=i&&i.live){const e=this.getMainFwdBufferInfo();if(!e||e.len<2*i.targetduration)return}if(!t.paused&&e){const t=e[this.hls.nextLoadLevel],r=this.fragLastKbps;n=r&&this.fragCurrent?this.fragCurrent.duration*t.maxBitrate/(1e3*r)+1:0}else n=0;const s=this.getBufferedFrag(t.currentTime+n);if(s){const e=this.followingBufferedFrag(s);if(e){this.abortCurrentFrag();const t=e.maxStartPTS?e.maxStartPTS:e.start,n=e.duration,r=Math.max(s.end,t+Math.min(Math.max(n-this.config.maxFragLookUpTolerance,n*(this.couldBacktrack?.5:.125)),n*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(r,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case Eh:case bh:case Th:case _h:case kh:this.state=yh}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,2===this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const n=t.media;gh(n,"playing",this.onMediaPlaying),gh(n,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:n}=this;n&&(ph(n,"playing",this.onMediaPlaying),ph(n,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t);!!t.transferMedia||(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(ll.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let n=!1,r=!1;for(let i=0;i<t.levels.length;i++){const e=t.levels[i].audioCodec;e&&(n=n||-1!==e.indexOf("mp4a.40.2"),r=r||-1!==e.indexOf("mp4a.40.5"))}this.audioCodecSwitch=n&&r&&!function(){var e;const t=nv();return"function"===typeof(null==t||null==(e=t.prototype)?void 0:e.changeType)}(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:n}=this;if(!n||this.state!==yh)return;const r=t.levelInfo;(!r.details||r.details.live&&(this.levelLastLoaded!==r||r.details.expired)||this.waitForCdnTuneIn(r.details))&&(this.state=Rh)}onLevelLoaded(e,t){var n;const{levels:r,startFragRequested:i}=this,s=t.level,a=t.details,o=a.totalduration;if(!r)return void this.warn("Levels were reset while loading level ".concat(s));this.log("Level ".concat(s," loaded [").concat(a.startSN,",").concat(a.endSN,"]").concat(a.lastPartSn?"[part-".concat(a.lastPartSn,"-").concat(a.lastPartIndex,"]"):"",", cc [").concat(a.startCC,", ").concat(a.endCC,"] duration:").concat(o));const l=t.levelInfo,c=this.fragCurrent;!c||this.state!==bh&&this.state!==Th||c.level!==t.level&&c.loader&&this.abortCurrentFrag();let u=0;if(a.live||null!=(n=l.details)&&n.live){var d;if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;u=this.alignPlaylists(a,l.details,null==(d=this.levelLastLoaded)?void 0:d.details)}if(l.details=a,this.levelLastLoaded=l,i||this.setStartPosition(a,u),this.hls.trigger(ll.LEVEL_UPDATED,{details:a,level:s}),this.state===Rh){if(this.waitForCdnTuneIn(a))return;this.state=yh}i&&a.live&&this.synchronizeToLiveEdge(a),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:n}=this;if(!n)return;const r=this.hls.liveSyncPosition,i=this.getLoadPosition(),s=e.fragmentStart,a=e.edge,o=i>=s-t.maxFragLookUpTolerance&&i<=a;if(null!==r&&n.duration>r&&(i<r||!o)){const s=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!o&&n.readyState<4||i<a-s)&&(this._hasEnoughToStart||(this.nextLoadPosition=r),n.readyState))if(this.warn("Playback: ".concat(i.toFixed(3)," is located too far from the end of live sliding playlist: ").concat(a,", reset currentTime to : ").concat(r.toFixed(3))),"buffered"===this.config.liveSyncMode){var l;const e=$u.bufferInfo(n,r,0);if(null==(l=e.buffered)||!l.length)return void(n.currentTime=r);if(e.start<=i)return void(n.currentTime=r);const{nextStart:t}=$u.bufferedInfo(e.buffered,i,0);t&&(n.currentTime=t)}else n.currentTime=r}}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:r,payload:i}=e,{levels:s}=this;if(!s)return void this.warn("Levels were reset while fragment load was in progress. Fragment ".concat(n.sn," of level ").concat(n.level," will not be buffered"));const a=s[n.level];if(!a)return void this.warn("Level ".concat(n.level," not found on progress"));const o=a.details;if(!o)return this.warn("Dropping fragment ".concat(n.sn," of level ").concat(n.level," after level details were reset")),void this.fragmentTracker.removeFragment(n);const l=a.videoCodec,c=o.PTSKnown||!o.live,u=null==(t=n.initSegment)?void 0:t.data,d=this._getAudioCodec(a),h=this.transmuxer=this.transmuxer||new og(this.hls,fl,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),f=r?r.index:-1,g=-1!==f,p=new Xu(n.level,n.sn,n.stats.chunkCount,i.byteLength,f,g),m=this.initPTS[n.cc];h.push(i,u,d,l,n,r,o.totalduration,c,p,m)}onAudioTrackSwitching(e,t){const n=this.hls,r=2===this.altAudio;if(au(t.url,n))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const e=this.fragCurrent;e&&(this.log("Switching to main audio track, cancel main fragment load"),e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(r)return this.fragmentTracker.removeAllFragments(),n.once(ll.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(ll.AUDIO_TRACK_SWITCHED,t)}),void n.trigger(ll.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});n.trigger(ll.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const n=au(t.url,this.hls);if(n){const e=this.videoBuffer;e&&this.mediaBuffer!==e&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=e)}this.altAudio=n?2:0,this.tick()}onBufferCreated(e,t){const n=t.tracks;let r,i,s=!1;for(const a in n){const e=n[a];if("main"===e.id){if(i=a,r=e,"video"===a){const e=n[a];e&&(this.videoBuffer=e.buffer)}}else s=!0}s&&r?(this.log("Alternate track found, use ".concat(i,".buffered to schedule main fragment loading")),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:n,part:r}=t,i=n.type===fl;if(i){if(this.fragContextChanged(n))return this.warn("Fragment ".concat(n.sn).concat(r?" p: "+r.index:""," of level ").concat(n.level," finished buffering, but was aborted. state: ").concat(this.state)),void(this.state===kh&&(this.state=yh));const e=r?r.stats:n.stats;this.fragLastKbps=Math.round(8*e.total/(e.buffering.end-e.loading.first)),zl(n)&&(this.fragPrevious=n),this.fragBufferedComplete(n,r)}const s=this.media;s&&(!this._hasEnoughToStart&&$u.getBuffered(s).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),i&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var n;if(t.fatal)this.state=Lh;else switch(t.details){case ol.FRAG_GAP:case ol.FRAG_PARSING_ERROR:case ol.FRAG_DECRYPT_ERROR:case ol.FRAG_LOAD_ERROR:case ol.FRAG_LOAD_TIMEOUT:case ol.KEY_LOAD_ERROR:case ol.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(fl,t);break;case ol.LEVEL_LOAD_ERROR:case ol.LEVEL_LOAD_TIMEOUT:case ol.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==Rh||(null==(n=t.context)?void 0:n.type)!==ul||(this.state=yh);break;case ol.BUFFER_ADD_CODEC_ERROR:case ol.BUFFER_APPEND_ERROR:if("main"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&this.resetLoadingState();break;case ol.BUFFER_FULL_ERROR:if("main"!==t.parent)return;if(this.reduceLengthAndFlushBuffer(t)){!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}break;case ol.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onFragLoadEmergencyAborted(){this.state=yh,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,t){let{type:n}=t;if(n!==Ul||!this.altAudio){const e=(n===Gl?this.videoBuffer:this.mediaBuffer)||this.media;e&&(this.afterBufferFlushed(e,n,fl),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,-1===this.level&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let n=this.startPosition;if(n>=0&&t<n){if(e.seeking)return void this.log("could not seek to ".concat(n,", already seeking at ").concat(t));const r=this.timelineOffset;r&&n&&(n+=r);const i=this.getLevelDetails(),s=$u.getBuffered(e),a=s.length?s.start(0):0,o=a-n,l=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||o>0&&(o<l||this.loadingParts&&o<2*((null==i?void 0:i.partTarget)||0)))&&(this.log("adjusting start position by ".concat(o," to match buffer start")),n+=o,this.startPosition=n),t<n&&(this.log("seek to target start position ".concat(n," from current time ").concat(t," buffer start ").concat(a)),e.currentTime=n)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(e=>{const{hls:n}=this,r=null==e?void 0:e.frag;if(!r||this.fragContextChanged(r))return;t.fragmentError=0,this.state=yh,this.startFragRequested=!1,this.bitrateTest=!1;const i=r.stats;i.parsing.start=i.parsing.end=i.buffering.start=i.buffering.end=self.performance.now(),n.trigger(ll.FRAG_LOADED,e),r.bitrateTest=!1}).catch(t=>{this.state!==vh&&this.state!==Lh&&(this.warn(t),this.resetFragmentLoading(e))})}_handleTransmuxComplete(e){const t=this.playlistType,{hls:n}=this,{remuxResult:r,chunkMeta:i}=e,s=this.getCurrentContext(i);if(!s)return void this.resetWhenMissingContext(i);const{frag:a,part:o,level:l}=s,{video:c,text:u,id3:d,initSegment:h}=r,{details:f}=l,g=this.altAudio?void 0:r.audio;if(this.fragContextChanged(a))this.fragmentTracker.removeFragment(a);else{if(this.state=_h,h){const e=h.tracks;if(e){const r=a.initSegment||a;if(this.unhandledEncryptionError(h,a))return;this._bufferInitSegment(l,e,r,i),n.trigger(ll.FRAG_PARSING_INIT_SEGMENT,{frag:r,id:t,tracks:e})}const r=h.initPTS,s=h.timescale,o=this.initPTS[a.cc];if(rl(r)&&(!o||o.baseTime!==r||o.timescale!==s)){const e=h.trackId;this.initPTS[a.cc]={baseTime:r,timescale:s,trackId:e},n.trigger(ll.INIT_PTS_FOUND,{frag:a,id:t,initPTS:r,timescale:s,trackId:e})}}if(c&&f){g&&"audiovideo"===c.type&&this.logMuxedErr(a);const e=f.fragments[a.sn-1-f.startSN],t=a.sn===f.startSN,n=!e||a.cc>e.cc;if(!1!==r.independent){const{startPTS:e,endPTS:r,startDTS:s,endDTS:l}=c;if(o)o.elementaryStreams[c.type]={startPTS:e,endPTS:r,startDTS:s,endDTS:l};else if(c.firstKeyFrame&&c.independent&&1===i.id&&!n&&(this.couldBacktrack=!0),c.dropped&&c.independent){const i=this.getMainFwdBufferInfo(),s=(i?i.end:this.getLoadPosition())+this.config.maxBufferHole,o=c.firstKeyFramePTS?c.firstKeyFramePTS:e;if(!t&&s<o-this.config.maxBufferHole&&!n)return void this.backtrack(a);n&&(a.gap=!0),a.setElementaryStreamInfo(c.type,a.start,r,a.start,l,!0)}else t&&e-(f.appliedTimelineOffset||0)>2&&(a.gap=!0);a.setElementaryStreamInfo(c.type,e,r,s,l),this.backtrackFragment&&(this.backtrackFragment=a),this.bufferFragmentData(c,a,o,i,t||n)}else{if(!t&&!n)return void this.backtrack(a);a.gap=!0}}if(g){const{startPTS:e,endPTS:t,startDTS:n,endDTS:r}=g;o&&(o.elementaryStreams[Ul]={startPTS:e,endPTS:t,startDTS:n,endDTS:r}),a.setElementaryStreamInfo(Ul,e,t,n,r),this.bufferFragmentData(g,a,o,i)}if(f&&null!=d&&d.samples.length){const e={id:t,frag:a,details:f,samples:d.samples};n.trigger(ll.FRAG_PARSING_METADATA,e)}if(f&&u){const e={id:t,frag:a,details:f,samples:u.samples};n.trigger(ll.FRAG_PARSING_USERDATA,e)}}}logMuxedErr(e){this.warn("".concat(zl(e)?"Media":"Init"," segment with muxed audiovideo where only video expected: ").concat(e.url))}_bufferInitSegment(e,t,n,r){if(this.state!==_h)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(n));const{audio:i,video:s,audiovideo:a}=t;if(i){const n=e.audioCodec;let r=xc(i.codec,n);"mp4a"===r&&(r="mp4a.40.5");const s=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){r&&(r=-1!==r.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5");const e=i.metadata;e&&"channelCount"in e&&1!==(e.channelCount||1)&&-1===s.indexOf("firefox")&&(r="mp4a.40.5")}r&&-1!==r.indexOf("mp4a.40.5")&&-1!==s.indexOf("android")&&"audio/mpeg"!==i.container&&(r="mp4a.40.2",this.log("Android: force audio codec to ".concat(r))),n&&n!==r&&this.log('Swapping manifest audio codec "'.concat(n,'" for "').concat(r,'"')),i.levelCodec=r,i.id=fl,this.log("Init audio buffer, container:".concat(i.container,", codecs[selected/level/parsed]=[").concat(r||"","/").concat(n||"","/").concat(i.codec,"]")),delete t.audiovideo}if(s){s.levelCodec=e.videoCodec,s.id=fl;const n=s.codec;if(4===(null==n?void 0:n.length))switch(n){case"hvc1":case"hev1":s.codec="hvc1.1.6.L120.90";break;case"av01":s.codec="av01.0.04M.08";break;case"avc1":s.codec="avc1.42e01e"}this.log("Init video buffer, container:".concat(s.container,", codecs[level/parsed]=[").concat(e.videoCodec||"","/").concat(n,"]").concat(s.codec!==n?" parsed-corrected="+s.codec:"").concat(s.supplemental?" supplemental="+s.supplemental:"")),delete t.audiovideo}a&&(this.log("Init audiovideo buffer, container:".concat(a.container,", codecs[level/parsed]=[").concat(e.codecs,"/").concat(a.codec,"]")),delete t.video,delete t.audio);const o=Object.keys(t);if(o.length){if(this.hls.trigger(ll.BUFFER_CODECS,t),!this.hls)return;o.forEach(e=>{const i=t[e].initSegment;null!=i&&i.byteLength&&this.hls.trigger(ll.BUFFER_APPENDING,{type:e,data:i,frag:n,part:null,chunkMeta:r,parent:n.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&2===this.altAudio?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,fl)}get maxBufferLength(){const{levels:e,level:t}=this,n=null==e?void 0:e[t];return n?this.getMaxBufferLength(n.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=yh}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&!1===e.seeking){const n=e.currentTime;if($u.isBuffered(e,n)?t=this.getAppendedFrag(n):$u.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;const e=this.fragPlaying,n=t.level;e&&t.sn===e.sn&&e.level===n||(this.fragPlaying=t,this.hls.trigger(ll.FRAG_CHANGED,{frag:t}),e&&e.level===n||this.hls.trigger(ll.LEVEL_SWITCHED,{level:n}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=(null==(e=this.media)?void 0:e.currentTime)||this.lastCurrentTime;return rl(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=(null==(e=this.media)?void 0:e.currentTime)||this.lastCurrentTime;if(rl(t)){const e=this.getLevelDetails(),n=this.currentFrag||(e?lu(null,e.fragments,t):null);if(n){const e=n.programDateTime;if(null!==e){const r=e+1e3*(t-n.start);return new Date(r)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class sv extends Sl{constructor(e,t){super("key-loader",t),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyIdToKeyInfo){const r=this.keyIdToKeyInfo[n].loader;if(r){var t;if(e&&e!==(null==(t=r.context)?void 0:t.frag.type))return;r.abort()}}}detach(){for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e].loader;t&&t.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ol.KEY_LOAD_ERROR,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;return new Wu({type:al.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:i,error:n,networkDetails:r})}loadClear(e,t,n){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(t.length)for(let r=0,i=t.length;r<i;r++){const s=t[r];if(e.cc<=s.cc&&(!zl(e)||!zl(s)||e.sn<s.sn)||!n&&r==i-1)return this.emeController.selectKeySystemFormat(s).then(e=>{if(!this.emeController)return;s.setKeyFormat(e);const t=kd(e);return t?this.emeController.getKeySystemAccess([t]):void 0})}if(this.config.requireKeySystemAccessOnStart){const e=Ld(this.config);if(e.length)return this.emeController.getKeySystemAccess(e)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var n,r;t&&e.setKeyFormat(t);const i=e.decryptdata;if(!i){const n=new Error(t?"Expected frag.decryptdata to be defined after setting format ".concat(t):"Missing decryption data on fragment in onKeyLoading (emeEnabled with controller: ".concat(this.emeController&&this.config.emeEnabled,")"));return Promise.reject(this.createKeyLoadError(e,ol.KEY_LOAD_ERROR,n))}const s=i.uri;if(!s)return Promise.reject(this.createKeyLoadError(e,ol.KEY_LOAD_ERROR,new Error('Invalid key URI: "'.concat(s,'"'))));const a=av(i);let o=this.keyIdToKeyInfo[a];if(null!=(n=o)&&n.decryptdata.key)return i.key=o.decryptdata.key,Promise.resolve({frag:e,keyInfo:o});if(this.emeController&&null!=(r=o)&&r.keyLoadPromise){switch(this.emeController.getKeyStatus(o.decryptdata)){case"usable":case"usable-in-future":return o.keyLoadPromise.then(t=>{const{keyInfo:n}=t;return i.key=n.decryptdata.key,{frag:e,keyInfo:n}})}}switch(this.log("".concat(this.keyIdToKeyInfo[a]?"Rel":"L","oading").concat(i.keyId?" keyId: "+Dl(i.keyId):""," URI: ").concat(i.uri," from ").concat(e.type," ").concat(e.level)),o=this.keyIdToKeyInfo[a]={decryptdata:i,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},i.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===i.keyFormat?this.loadKeyHTTP(o,e):this.loadKeyEME(o,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(o,e);default:return Promise.reject(this.createKeyLoadError(e,ol.KEY_LOAD_ERROR,new Error('Key supplied with unsupported METHOD: "'.concat(i.method,'"'))))}}loadKeyEME(e,t){const n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var r;if(!e.decryptdata.keyId&&null!=(r=t.initSegment)&&r.data){const n=function(e){const t=[];return cc(e,e=>t.push(e.subarray(8,24))),t}(t.initSegment.data);if(n.length){const t=n[0];t.some(e=>0!==e)&&(this.log("Using keyId found in init segment ".concat(Dl(t))),e.decryptdata.keyId=t,Cd.setKeyIdForUri(e.decryptdata.uri,t))}}const i=this.emeController.loadKey(n);return(e.keyLoadPromise=i.then(t=>(e.mediaKeySessionContext=t,n))).catch(n=>{throw e.keyLoadPromise=null,"data"in n&&(n.data.frag=t),n})}return Promise.resolve(n)}loadKeyHTTP(e,t){const n=this.config,r=new(0,n.loader)(n);return t.keyLoader=e.loader=r,e.keyLoadPromise=new Promise((i,s)=>{const a={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},o=n.keyLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(e,t,n,r)=>{const{frag:a,keyInfo:o}=n,l=av(o.decryptdata);if(!a.decryptdata||o!==this.keyIdToKeyInfo[l])return s(this.createKeyLoadError(a,ol.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),r));o.decryptdata.key=a.decryptdata.key=new Uint8Array(e.data),a.keyLoader=null,o.loader=null,i({frag:a,keyInfo:o})},onError:(e,n,r,i)=>{this.resetLoader(n),s(this.createKeyLoadError(t,ol.KEY_LOAD_ERROR,new Error("HTTP Error ".concat(e.code," loading key ").concat(e.text)),r,Tl({url:a.url,data:void 0},e)))},onTimeout:(e,n,r)=>{this.resetLoader(n),s(this.createKeyLoadError(t,ol.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),r))},onAbort:(e,n,r)=>{this.resetLoader(n),s(this.createKeyLoadError(t,ol.INTERNAL_ABORTED,new Error("key loading aborted"),r))}};r.load(a,l,c)})}resetLoader(e){const{frag:t,keyInfo:n,url:r}=e,i=n.loader;t.keyLoader===i&&(t.keyLoader=null,n.loader=null);const s=av(n.decryptdata)||r;delete this.keyIdToKeyInfo[s],i&&i.destroy()}}function av(e){if(e.keyFormat!==Td){const t=e.keyId;if(t)return Dl(t)}return e.uri}function ov(e){const{type:t}=e;switch(t){case dl:return gl;case hl:return pl;default:return fl}}function lv(e,t){let n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n}class cv{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ll.LEVEL_LOADING,this.onLevelLoading,this),e.on(ll.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(ll.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(ll.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(ll.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ll.LEVEL_LOADING,this.onLevelLoading,this),e.off(ll.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(ll.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(ll.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,n=t.pLoader,r=t.loader,i=new(n||r)(t);return this.loaders[e.type]=i,i}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:n}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:cl,url:n,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:n,level:r,pathwayId:i,url:s,deliveryDirectives:a,levelInfo:o}=t;this.load({id:n,level:r,pathwayId:i,responseType:"text",type:ul,url:s,deliveryDirectives:a,levelOrTrack:o})}onAudioTrackLoading(e,t){const{id:n,groupId:r,url:i,deliveryDirectives:s,track:a}=t;this.load({id:n,groupId:r,level:null,responseType:"text",type:dl,url:i,deliveryDirectives:s,levelOrTrack:a})}onSubtitleTrackLoading(e,t){const{id:n,groupId:r,url:i,deliveryDirectives:s,track:a}=t;this.load({id:n,groupId:r,level:null,responseType:"text",type:hl,url:i,deliveryDirectives:s,levelOrTrack:a})}onLevelsUpdated(e,t){const n=this.loaders[ul];if(n){const e=n.context;e&&!t.levels.some(t=>t===e.levelOrTrack)&&(n.abort(),delete this.loaders[ul])}}load(e){var t;const n=this.hls.config;let r,i=this.getInternalLoader(e);if(i){const t=this.hls.logger,n=i.context;if(n&&n.levelOrTrack===e.levelOrTrack&&(n.url===e.url||n.deliveryDirectives&&!e.deliveryDirectives))return void(n.url===e.url?t.log("[playlist-loader]: ignore ".concat(e.url," ongoing request")):t.log("[playlist-loader]: ignore ".concat(e.url," in favor of ").concat(n.url)));t.log("[playlist-loader]: aborting previous loader for type: ".concat(e.type)),i.abort()}if(r=e.type===cl?n.manifestLoadPolicy.default:El({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),rl(null==(t=e.deliveryDirectives)?void 0:t.part)){let t;if(e.type===ul&&null!==e.level?t=this.hls.levels[e.level].details:e.type===dl&&null!==e.id?t=this.hls.audioTracks[e.id].details:e.type===hl&&null!==e.id&&(t=this.hls.subtitleTracks[e.id].details),t){const e=t.partTarget,n=t.targetduration;if(e&&n){const t=1e3*Math.max(3*e,.8*n);r=El({},r,{maxTimeToFirstByteMs:Math.min(t,r.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(t,r.maxTimeToFirstByteMs)})}}}const s=r.errorRetry||r.timeoutRetry||{},a={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:s.maxNumRetry||0,retryDelay:s.retryDelayMs||0,maxRetryDelay:s.maxRetryDelayMs||0},o={onSuccess:(e,t,n,r)=>{const i=this.getInternalLoader(n);this.resetInternalLoader(n.type);const s=e.data;t.parsing.start=performance.now(),Bd.isMediaPlaylist(s)||n.type!==cl?this.handleTrackOrLevelPlaylist(e,t,n,r||null,i):this.handleMasterPlaylist(e,t,n,r)},onError:(e,t,n,r)=>{this.handleNetworkError(t,n,!1,e,r)},onTimeout:(e,t,n)=>{this.handleNetworkError(t,n,!0,void 0,e)}};i.load(e,a,o)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:n}=this.hls;(e||n)&&(this.hls.logger.log("".concat(e?"auto":"force"," startLoad with configured startPosition ").concat(t)),this.hls.startLoad(t))}handleMasterPlaylist(e,t,n,r){const i=this.hls,s=e.data,a=lv(e,n),o=Bd.parseMasterPlaylist(s,a);if(o.playlistParsingError)return t.parsing.end=performance.now(),void this.handleManifestParsingError(e,n,o.playlistParsingError,r,t);const{contentSteering:l,levels:c,sessionData:u,sessionKeys:d,startTimeOffset:h,variableList:f}=o;this.variableList=f,c.forEach(e=>{const{unknownCodecs:t}=e;if(t){const{preferManagedMediaSource:n}=this.hls.config;let{audioCodec:r,videoCodec:i}=e;for(let s=t.length;s--;){const a=t[s];Sc(a,"audio",n)?(e.audioCodec=r=r?"".concat(r,",").concat(a):a,bc.audio[r.substring(0,4)]=2,t.splice(s,1)):Sc(a,"video",n)&&(e.videoCodec=i=i?"".concat(i,",").concat(a):a,bc.video[i.substring(0,4)]=2,t.splice(s,1))}}});const{AUDIO:g=[],SUBTITLES:p,"CLOSED-CAPTIONS":m}=Bd.parseMasterPlaylistMedia(s,a,o);if(g.length){g.some(e=>!e.url)||!c[0].audioCodec||c[0].attrs.AUDIO||(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),g.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new sd({}),bitrate:0,url:""}))}i.trigger(ll.MANIFEST_LOADED,{levels:c,audioTracks:g,subtitles:p,captions:m,contentSteering:l,url:a,stats:t,networkDetails:r,sessionData:u,sessionKeys:d,startTimeOffset:h,variableList:f})}handleTrackOrLevelPlaylist(e,t,n,r,i){const s=this.hls,{id:a,level:o,type:l}=n,c=lv(e,n),u=rl(o)?o:rl(a)?a:0,d=ov(n),h=Bd.parseLevelPlaylist(e.data,c,u,d,0,this.variableList);if(l===cl){const e={attrs:new sd({}),bitrate:0,details:h,name:"",url:c};h.requestScheduled=t.loading.start+nh(h,0),s.trigger(ll.MANIFEST_LOADED,{levels:[e],audioTracks:[],url:c,stats:t,networkDetails:r,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),n.levelDetails=h,this.handlePlaylistLoaded(h,e,t,n,r,i)}handleManifestParsingError(e,t,n,r,i){this.hls.trigger(ll.ERROR,{type:al.NETWORK_ERROR,details:ol.MANIFEST_PARSING_ERROR,fatal:t.type===cl,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:r,stats:i})}handleNetworkError(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,s="A network ".concat(n?"timeout":"error"+(r?" (status "+r.code+")":"")," occurred while loading ").concat(e.type);e.type===ul?s+=": ".concat(e.level," id: ").concat(e.id):e.type!==dl&&e.type!==hl||(s+=" id: ".concat(e.id,' group-id: "').concat(e.groupId,'"'));const a=new Error(s);this.hls.logger.warn("[playlist-loader]: ".concat(s));let o=ol.UNKNOWN,l=!1;const c=this.getInternalLoader(e);switch(e.type){case cl:o=n?ol.MANIFEST_LOAD_TIMEOUT:ol.MANIFEST_LOAD_ERROR,l=!0;break;case ul:o=n?ol.LEVEL_LOAD_TIMEOUT:ol.LEVEL_LOAD_ERROR,l=!1;break;case dl:o=n?ol.AUDIO_TRACK_LOAD_TIMEOUT:ol.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case hl:o=n?ol.SUBTITLE_TRACK_LOAD_TIMEOUT:ol.SUBTITLE_LOAD_ERROR,l=!1}c&&this.resetInternalLoader(e.type);const u={type:al.NETWORK_ERROR,details:o,fatal:l,url:e.url,loader:c,context:e,error:a,networkDetails:t,stats:i};if(r){const n=(null==t?void 0:t.url)||e.url;u.response=Tl({url:n,data:void 0},r)}this.hls.trigger(ll.ERROR,u)}handlePlaylistLoaded(e,t,n,r,i,s){const a=this.hls,{type:o,level:l,levelOrTrack:c,id:u,groupId:d,deliveryDirectives:h}=r,f=lv(t,r),g=ov(r);let p="number"===typeof r.level&&g===fl?l:void 0;const m=e.playlistParsingError;if(m){if(this.hls.logger.warn("".concat(m," ").concat(e.url)),!a.config.ignorePlaylistParsingErrors)return void a.trigger(ll.ERROR,{type:al.NETWORK_ERROR,details:ol.LEVEL_PARSING_ERROR,fatal:!1,url:f,error:m,reason:m.message,response:t,context:r,level:p,parent:g,networkDetails:i,stats:n});e.playlistParsingError=null}if(!e.fragments.length){const s=e.playlistParsingError=new Error("No Segments found in Playlist");return void a.trigger(ll.ERROR,{type:al.NETWORK_ERROR,details:ol.LEVEL_EMPTY_ERROR,fatal:!1,url:f,error:s,reason:s.message,response:t,context:r,level:p,parent:g,networkDetails:i,stats:n})}switch(e.live&&s&&(s.getCacheAge&&(e.ageHeader=s.getCacheAge()||0),s.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),o){case cl:case ul:if(p)if(c){if(c!==a.levels[p]){const e=a.levels.indexOf(c);e>-1&&(p=e)}}else p=0;a.trigger(ll.LEVEL_LOADED,{details:e,levelInfo:c||a.levels[0],level:p||0,id:u||0,stats:n,networkDetails:i,deliveryDirectives:h,withoutMultiVariant:o===cl});break;case dl:a.trigger(ll.AUDIO_TRACK_LOADED,{details:e,track:c,id:u||0,groupId:d||"",stats:n,networkDetails:i,deliveryDirectives:h});break;case hl:a.trigger(ll.SUBTITLE_TRACK_LOADED,{details:e,track:c,id:u||0,groupId:d||"",stats:n,networkDetails:i,deliveryDirectives:h})}}}class uv{static get version(){return Fh}static isMSESupported(){return rv()}static isSupported(){return function(){if(!rv())return!1;const e=Il();return"function"===typeof(null==e?void 0:e.isTypeSupported)&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(t=>e.isTypeSupported(kc(t,"video")))||["mp4a.40.2","fLaC"].some(t=>e.isTypeSupported(kc(t,"audio"))))}()}static getMediaSource(){return Il()}static get Events(){return ll}static get MetadataSchema(){return af}static get ErrorTypes(){return al}static get ErrorDetails(){return ol}static get DefaultConfig(){return uv.defaultConfig?uv.defaultConfig:jm}static set DefaultConfig(e){uv.defaultConfig=e}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Mh,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=function(e,t,n){const r=Al();if("object"===typeof console&&!0===e||"object"===typeof e){const s=["debug","log","info","warn","error"];s.forEach(t=>{r[t]=Ll(t,e,n)});try{r.log('Debug logs enabled for "'.concat(t,'" in hls.js version ',"1.6.13"))}catch(i){return Al()}s.forEach(t=>{wl[t]=Ll(t,e)})}else El(wl,r);return r}(e.debug||!1,"Hls instance",e.assetPlayerId),n=this.config=function(e,t,n){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const r=zm(e),i=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach(e=>{const s="".concat("level"===e?"playlist":e,"LoadPolicy"),a=void 0===t[s],o=[];i.forEach(n=>{const i="".concat(e,"Loading").concat(n),l=t[i];if(void 0!==l&&a){o.push(i);const e=r[s].default;switch(t[s]={default:e},n){case"TimeOut":e.maxLoadTimeMs=l,e.maxTimeToFirstByteMs=l;break;case"MaxRetry":e.errorRetry.maxNumRetry=l,e.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":e.errorRetry.retryDelayMs=l,e.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":e.errorRetry.maxRetryDelayMs=l,e.timeoutRetry.maxRetryDelayMs=l}}}),o.length&&n.warn('hls.js config: "'.concat(o.join('", "'),'" setting(s) are deprecated, use "').concat(s,'": ').concat(Zc(t[s])))}),Tl(Tl({},r),t)}(uv.DefaultConfig,e,t);this.userConfig=e,n.progressive&&Vm(n,t);const{abrController:r,bufferController:i,capLevelController:s,errorController:a,fpsController:o}=n,l=new a(this),c=this.abrController=new r(this),u=new Pu(this),d=n.interstitialsController,h=d?this.interstitialsController=new d(this,uv):null,f=this.bufferController=new i(this,u),g=this.capLevelController=new s(this),p=new o(this),m=new cv(this),v=n.contentSteeringController,y=v?new v(this):null,E=this.levelController=new ev(this,y),b=new Zm(this),T=new sv(this.config,this.logger),S=this.streamController=new iv(this,u,T),_=this.gapController=new Km(this,u);g.setStreamController(S),p.setStreamController(S);const k=[m,E,S];h&&k.splice(1,0,h),y&&k.splice(1,0,y),this.networkControllers=k;const A=[c,f,_,g,p,b,u];this.audioTrackController=this.createController(n.audioTrackController,k);const L=n.audioStreamController;L&&k.push(this.audioStreamController=new L(this,u,T)),this.subtitleTrackController=this.createController(n.subtitleTrackController,k);const w=n.subtitleStreamController;w&&k.push(this.subtititleStreamController=new w(this,u,T)),this.createController(n.timelineController,A),T.emeController=this.emeController=this.createController(n.emeController,A),this.cmcdController=this.createController(n.cmcdController,A),this.latencyController=this.createController(Jm,A),this.coreComponents=A,k.push(l);const R=l.onErrorOut;"function"===typeof R&&this.on(ll.ERROR,R,l),this.on(ll.MANIFEST_LOADED,m.onManifestLoaded,m)}createController(e,t){if(e){const n=new e(this);return t&&t.push(n),n}return null}on(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this;this._emitter.on(e,t,n)}once(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this;this._emitter.once(e,t,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,r=arguments.length>3?arguments[3]:void 0;this._emitter.off(e,t,n,r)}listeners(e){return this._emitter.listeners(e)}emit(e,t,n){return this._emitter.emit(e,t,n)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(n){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),!this.triggeringException){this.triggeringException=!0;const t=e===ll.ERROR;this.trigger(ll.ERROR,{type:al.OTHER_ERROR,details:ol.INTERNAL_EXCEPTION,fatal:t,event:e,error:n}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(ll.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(e=>e.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(e=>e.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const t=new Error("attachMedia failed: invalid argument (".concat(e,")"));return void this.trigger(ll.ERROR,{type:al.OTHER_ERROR,details:ol.ATTACH_MEDIA_ERROR,fatal:!0,error:t})}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,n=t?e.media:e,r=t?e:{media:n};this._media=n,this.trigger(ll.MEDIA_ATTACHING,r)}detachMedia(){this.logger.log("detachMedia"),this.trigger(ll.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(ll.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,n=this._url,r=this._url=Nl.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log("loadSource:".concat(r)),t&&n&&(n!==r||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(ll.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1?arguments[1]:void 0;this.logger.log("startLoad(".concat(e+(t?", <skip seek to start>":""),")")),this.started=!0,this.resumeBuffering();for(let n=0;n<this.networkControllers.length&&(this.networkControllers[n].startLoad(e,t),this.started&&this.networkControllers);n++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!this.started&&this.networkControllers);e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[fl]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[gl]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[pl]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=null==e?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=function(){try{return crypto.randomUUID()}catch(e){try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch(e){let t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)})}}}()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log("set currentLevel:".concat(e)),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log("set nextLevel:".concat(e)),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log("set loadLevel:".concat(e)),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log("set firstLevel:".concat(e)),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return-1===e&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log("set startLevel:".concat(e)),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log("set autoLevelCapping:".concat(e)),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){(function(e){return jc.indexOf(e)>-1})(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return-1===this.levelController.manualLevel}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const n=e.length;for(let r=0;r<n;r++)if(e[r].maxBitrate>=t)return r;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:n}=this;let r;if(r=-1===t&&null!=e&&e.length?e.length-1:t,n)for(let i=r;i--;){const t=e[i].attrs["HDCP-LEVEL"];if(t&&t<=n)return i}return r}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return(null==(t=this.audioTrackController)?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return(null==(t=this.subtitleTrackController)?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return!!e&&e.subtitleDisplay}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!(null==(e=this.bufferController)||!e.bufferedToEnd)}get interstitialsManager(){var e;return(null==(e=this.interstitialsController)?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e){return Uc(e,eu(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.allAudioTracks),navigator.mediaCapabilities)}}uv.defaultConfig=void 0,_i.registerPlugin(Wo);const dv=e=>{let{scrollerRef:t}=e;const n=(0,r.useRef)(null),i=(0,r.useRef)(null),s=(0,r.useContext)(_),a=(0,r.useContext)(T),o=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(uv.isSupported()&&o.current){const e=new uv;e.loadSource("/video/index.m3u8"),e.attachMedia(o.current)}else o.current&&o.current.canPlayType("application/vnd.apple.mpegurl")&&(o.current.src="/video/index.m3u8")},[o.current]),(0,r.useEffect)(()=>{_i.to(i.current,{scrollTrigger:{trigger:n.current,scroller:t.current,start:"top top",end:"bottom top",scrub:!0},backgroundPosition:"center 100%"}),_i.timeline({scrollTrigger:{trigger:n.current,scroller:t.current,start:"top -10%",scrub:!1,onEnter:()=>{a[1]("visible")},onLeaveBack:()=>{a[1]("hidden")}}})},[t]),(0,g.jsx)("section",{ref:n,className:Ri,children:(0,g.jsxs)("div",{ref:i,className:"".concat(Mi),children:[(0,g.jsx)("video",{ref:o,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:Fi}),(0,g.jsx)("div",{className:"".concat(Oi)}),(0,g.jsxs)("header",{className:"".concat(Ci),children:[(0,g.jsxs)("div",{className:Di,children:[(0,g.jsx)(F,{className:xi}),(0,g.jsxs)("nav",{className:Ii,children:[(0,g.jsx)(m,{active:!1,title:"\u041e \u043d\u0430\u0441",onClick:()=>s[1]("about")}),(0,g.jsx)(m,{active:!1,title:"\u041f\u0440\u043e\u0436\u0438\u0432\u0430\u043d\u0438\u0435",onClick:()=>s[1]("acco")}),(0,g.jsx)(m,{active:!1,title:"\u0426\u0435\u043d\u044b",onClick:()=>s[1]("price")}),(0,g.jsx)(m,{active:!1,title:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438",onClick:()=>s[1]("news")})]})]}),(0,g.jsx)("div",{className:Pi,children:(0,g.jsx)(b,{title:"\u041f\u043e\u0434\u0430\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443",onClick:()=>{}})})]}),(0,g.jsx)("div",{className:Ni,children:(0,g.jsxs)("div",{className:Bi,children:[(0,g.jsx)("div",{className:Ui,children:"\u0413\u041e\u0421\u0422\u0418\u041d\u0418\u0426\u0410 \u041d\u0415\u0419\u041c\u0410\u0420\u041a"}),(0,g.jsx)("div",{className:Gi,children:"\u0416\u0418\u0412\u0418 \u0422\u0410\u041c, \u0413\u0414\u0415 \u0420\u0410\u0421\u0422\u0415\u0422 \u0411\u0423\u0414\u0423\u0429\u0415\u0415"}),(0,g.jsx)(b,{title:"\u041e \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435",onClick:()=>{}})]})})]})})},hv={main:"AboutComponent_main__dtRxZ",animate_before_first:"AboutComponent_animate_before_first__kG1yt",animate_before_second:"AboutComponent_animate_before_second__qKXUq",animate:"AboutComponent_animate__jQFOH",animated_block:"AboutComponent_animated_block__y4BDs",hint_span:"AboutComponent_hint_span__rOvBe",description_section:"AboutComponent_description_section__ALXjd",word:"AboutComponent_word__5YsVW",content:"AboutComponent_content__4GnI5",image_small:"AboutComponent_image_small__WFM6+",image_medium:"AboutComponent_image_medium__ebGy3",content_text:"AboutComponent_content_text__5ObK0",content_image_left:"AboutComponent_content_image_left__k+4Si",content_image_right:"AboutComponent_content_image_right__LUp+j",text_title:"AboutComponent_text_title__SSUCM",text_paragraph:"AboutComponent_text_paragraph__rFKNR",header_about:"AboutComponent_header_about__v79EU",text_header_animated:"AboutComponent_text_header_animated__KQpdh",animated_text_words:"AboutComponent_animated_text_words__HTyCv"},fv=n.p+"static/media/about_im_1_1.48a6bcc82f914213b79e.jpeg",gv=n.p+"static/media/about_im_1_2.43b2424ad2202d17acc9.jpeg",pv=n.p+"static/media/about_im_2_1.99387e17241e723441ac.jpg",mv=n.p+"static/media/about_im_2_2.f4d1bbbb1015d67fa655.jpg",vv=e=>{let{scrollerRef:t}=e;const n=(0,r.useRef)(null),i=(0,r.useRef)(null);(0,r.useEffect)(()=>{t.current&&(_i.timeline({scrollTrigger:{trigger:n.current,scroller:t.current,start:"top 30%",scrub:!1,once:!0}}).from(".".concat(hv.text_header_animated),{x:"100vw",opacity:0,stagger:.01,duration:.01}).to(".".concat(hv.text_header_animated),{x:0,opacity:1,stagger:.01,duration:.7}),_i.timeline({scrollTrigger:{trigger:n.current,scroller:t.current,start:"top 30%",scrub:!1,once:!0}}).from(".".concat(hv.animate_before_first),{y:"100vw",opacity:0,duration:.1}).to(".".concat(hv.animate_before_first),{y:0,opacity:1,duration:.3}).to(".".concat(hv.animate_before_first),{duration:.05}).from(".".concat(hv.animate_before_second),{y:"100vw",opacity:0,duration:.1}).to(".".concat(hv.animate_before_second),{y:0,opacity:1,duration:.3}))},[t]);return(0,g.jsx)("section",{ref:n,className:hv.main,children:(0,g.jsxs)("div",{ref:i,className:hv.description_section,children:[(0,g.jsx)("span",{className:hv.hint_span,children:"\u041e \u041d\u0410\u0421"}),(0,g.jsx)("h1",{className:hv.header_about,children:"\u041a\u041e\u041c\u0424\u041e\u0420\u0422\u041d\u042b\u0415  \u041c\u0415\u0411\u0415\u041b\u0418\u0420\u041e\u0412\u0410\u041d\u041d\u042b\u0415  \u041d\u041e\u041c\u0415\u0420\u0410  \u0421  \u041e\u0411\u0421\u041b\u0423\u0416\u0418\u0412\u0410\u041d\u0418\u0415\u041c  \u0412  \u0426\u0415\u041d\u0422\u0420\u0415  \u0413\u041e\u0420\u041e\u0414\u0410".split(" ").map((e,t)=>(0,g.jsxs)("span",{className:hv.word,children:[e.split("").map((e,t)=>(0,g.jsx)("span",{className:hv.text_header_animated,children:e},t)),(0,g.jsx)("span",{className:hv.space,children:"\xa0"})]},t))}),(0,g.jsxs)("div",{className:hv.content,children:[(0,g.jsxs)("div",{className:hv.content_image_left,children:[(0,g.jsx)("div",{className:"".concat(hv.image_medium," ").concat(hv.animate_before_first),style:{backgroundImage:"url(".concat(fv,")")}}),(0,g.jsx)("div",{className:"".concat(hv.image_small," ").concat(hv.animate_before_second),style:{backgroundImage:"url(".concat(gv,")")}})]}),(0,g.jsxs)("div",{className:hv.content_text,children:[(0,g.jsx)("div",{className:"".concat(hv.text_title," ").concat(hv.animate_before_second),children:"\u0421\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0435 \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u043d\u0438\u0435 \u0434\u043b\u044f \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432 \u0418\u0422-\u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0439"}),(0,g.jsx)("div",{className:"".concat(hv.text_paragraph," ").concat(hv.animate_before_first),children:(0,g.jsxs)("ul",{children:[(0,g.jsx)("li",{children:"\u0426\u0435\u043d\u0442\u0440 \u0433\u043e\u0440\u043e\u0434\u0430 \u0438 \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u044b \u0440\u044f\u0434\u043e\u043c"}),(0,g.jsx)("li",{children:"\u041a\u0440\u0443\u0433\u043b\u043e\u0441\u0443\u0442\u043e\u0447\u043d\u0430\u044f \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c \u0438 \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u043d\u043e\u0439 \u0440\u0435\u0436\u0438\u043c"}),(0,g.jsx)("li",{children:"\u0423\u0445\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u0438 \u0447\u0438\u0441\u0442\u044b\u0435 \u043e\u0431\u0449\u0438\u0435 \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u0430"}),(0,g.jsx)("li",{children:"\u0420\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u0430\u044f \u0443\u0431\u043e\u0440\u043a\u0430 \u0438 \u0441\u043c\u0435\u043d\u0430 \u0431\u0435\u043b\u044c\u044f"}),(0,g.jsx)("li",{children:"\u0420\u0430\u0431\u043e\u0447\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0434\u043b\u044f \u0443\u0447\u0435\u0431\u044b \u043f\u0440\u044f\u043c\u043e \u0432 \u043a\u043e\u043c\u043d\u0430\u0442\u0430\u0445"}),(0,g.jsx)("li",{children:"\u0412\u044b\u0441\u043e\u043a\u043e\u0441\u043a\u043e\u0440\u043e\u0441\u0442\u043d\u043e\u0439 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u043d\u0430 \u0432\u0441\u0435\u0439 \u0442\u0435\u0440\u0440\u0438\u0442\u043e\u0440\u0438\u0438 \u043a\u0430\u043c\u043f\u0443\u0441\u0430"}),(0,g.jsx)("li",{children:"\u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u0438 \u043a\u043e\u043c\u043c\u0443\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0443\u0436\u0435 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u044b \u0432 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"})]})}),(0,g.jsx)(b,{title:"\u0425\u043e\u0447\u0443 \u0432\u0437\u0433\u043b\u044f\u043d\u0443\u0442\u044c \u043d\u0430 \u043d\u043e\u043c\u0435\u0440\u0430",onClick:()=>{}})]}),(0,g.jsxs)("div",{className:hv.content_image_right,children:[(0,g.jsx)("div",{className:"".concat(hv.image_small," ").concat(hv.animate_before_first),style:{backgroundImage:"url(".concat(pv,")")}}),(0,g.jsx)("div",{className:"".concat(hv.image_medium," ").concat(hv.animate_before_second),style:{backgroundImage:"url(".concat(mv,")")}})]})]})]})})},yv="AccommodationComponent_main__+R7qc",Ev="AccommodationComponent_hint_span__KKz55",bv="AccommodationComponent_description_section__JhGnD",Tv="AccommodationComponent_content__DffD4",Sv="AccommodationComponent_title_text__OGroR",_v="AccommodationComponent_items_content__Ncpfh",kv="AccommodationComponent_items_button__Q9MDt",Av="AccommodationComponent_item_center__n0XYV",Lv=n.p+"static/media/conditions.bf943da25d23fabcdc7f.webp",wv=n.p+"static/media/rules.445aab76dc585b769d54.webp",Rv=n.p+"static/media/docs.e9100e5bdd53f2e89639.jpeg",Iv=e=>{let{scrollerRef:t}=e;const n=(0,r.useRef)(null),i=(0,r.useRef)(null),s=(0,r.useRef)(null),[a,o]=(0,r.useState)(Lv);(0,r.useEffect)(()=>{t.current&&_i.timeline({scrollTrigger:{trigger:n.current,scroller:t.current,start:"top 10%",scrub:!1,once:!0}}).from(".".concat(Tv),{y:"100vw",opacity:0,duration:.1}).to(".".concat(Tv),{y:0,opacity:1,duration:.5,ease:"sine.out"})},[t]);const l=(0,r.useRef)(null),c=e=>{var t;switch(l.current&&(l.current.kill(),l.current=null),null===(t=s.current)||void 0===t||t.style.setProperty("background-position","0 100%"),e){case"conditions":o(Lv);break;case"rules":o(wv);break;case"docs":o(Rv)}requestAnimationFrame(()=>{l.current=_i.to(s.current,{backgroundPositionY:"50%",duration:.7,ease:"power2.out",onComplete:()=>{l.current=null}})})};return(0,g.jsx)("section",{ref:n,className:yv,children:(0,g.jsxs)("div",{ref:i,className:bv,children:[(0,g.jsx)("span",{className:Ev,children:"\u041f\u0420\u041e\u0416\u0418\u0412\u0410\u041d\u0418\u0415"}),(0,g.jsxs)("div",{ref:s,className:Tv,style:{backgroundImage:"url(".concat(a,")")},children:[(0,g.jsxs)("div",{className:_v,onMouseOver:()=>a!==Lv&&c("conditions"),children:[(0,g.jsx)("span",{className:Sv,children:"\u0423\u0441\u043b\u043e\u0432\u0438\u044f \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u043d\u0438\u044f"}),(0,g.jsx)(b,{className:kv,title:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c",onClick:()=>{}})]}),(0,g.jsxs)("div",{className:"".concat(_v," ").concat(Av),onMouseOver:()=>a!==wv&&c("rules"),children:[(0,g.jsx)("span",{className:Sv,children:"\u041f\u0440\u0430\u0432\u0438\u043b\u0430 \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u043d\u0438\u044f"}),(0,g.jsx)(b,{className:kv,title:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c",onClick:()=>{}})]}),(0,g.jsxs)("div",{className:_v,onMouseOver:()=>a!==Rv&&c("docs"),children:[(0,g.jsx)("span",{className:Sv,children:"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u043f\u0440\u0438 \u0437\u0430\u0441\u0435\u043b\u0435\u043d\u0438\u0438"}),(0,g.jsx)(b,{className:kv,title:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c",onClick:()=>{}})]})]})]})})},xv={main:"PriceComponent_main__e15LC",animate_before_first:"PriceComponent_animate_before_first__oInP4",animate_before_second:"PriceComponent_animate_before_second__UHW5Z",animate:"PriceComponent_animate__WzEXZ",animated_block:"PriceComponent_animated_block__tB9dF",title_slide:"PriceComponent_title_slide__7OOLL",embla:"PriceComponent_embla__b47E4",embla__container:"PriceComponent_embla__container__UF-8O",buttons:"PriceComponent_buttons__7pSXN",button:"PriceComponent_button__16c0g",embla__slide:"PriceComponent_embla__slide__9pu3n",hint_span:"PriceComponent_hint_span__U7Pl2",description_section:"PriceComponent_description_section__BX15j",word:"PriceComponent_word__YAzfv",content:"PriceComponent_content__wwjwk",image_small:"PriceComponent_image_small__LZW3i",image_medium:"PriceComponent_image_medium__YCTC+",content_text:"PriceComponent_content_text__rPf97",content_image_left:"PriceComponent_content_image_left__68cwg",content_image_right:"PriceComponent_content_image_right__QsFw7",text_title:"PriceComponent_text_title__93DKJ",text_paragraph:"PriceComponent_text_paragraph__5Dq3E",header_about:"PriceComponent_header_about__3iNNa",text_header_animated:"PriceComponent_text_header_animated__5Vn8C",animated_text_words:"PriceComponent_animated_text_words__I32pC"},Cv=n.p+"static/media/alpha.24bfaa29552d3ea2d203.webp",Dv=n.p+"static/media/gamma.bf943da25d23fabcdc7f.webp",Pv=n.p+"static/media/omega.acd4815b0c38366756b2.webp";function Ov(e){return function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e)||Array.isArray(e)}function Mv(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;return JSON.stringify(Object.keys(e.breakpoints||{}))===JSON.stringify(Object.keys(t.breakpoints||{}))&&n.every(n=>{const r=e[n],i=t[n];return"function"===typeof r?"".concat(r)==="".concat(i):Ov(r)&&Ov(i)?Mv(r,i):r===i})}function Fv(e){return e.concat().sort((e,t)=>e.name>t.name?1:-1).map(e=>e.options)}function Nv(e){return"number"===typeof e}function Bv(e){return"string"===typeof e}function Uv(e){return"boolean"===typeof e}function Gv(e){return"[object Object]"===Object.prototype.toString.call(e)}function Hv(e){return Math.abs(e)}function jv(e){return Math.sign(e)}function zv(e,t){return Hv(e-t)}function Vv(e){return Xv(e).map(Number)}function Kv(e){return e[Yv(e)]}function Yv(e){return Math.max(0,e.length-1)}function Wv(e,t){return t===Yv(e)}function qv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.from(Array(e),(e,n)=>t+n)}function Xv(e){return Object.keys(e)}function Qv(e,t){return[e,t].reduce((e,t)=>(Xv(t).forEach(n=>{const r=e[n],i=t[n],s=Gv(r)&&Gv(i);e[n]=s?Qv(r,i):i}),e),{})}function $v(e,t){return"undefined"!==typeof t.MouseEvent&&e instanceof t.MouseEvent}function Zv(){let e=[];const t={add:function(n,r,i){let s,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};if("addEventListener"in n)n.addEventListener(r,i,a),s=()=>n.removeEventListener(r,i,a);else{const e=n;e.addListener(i),s=()=>e.removeListener(i)}return e.push(s),t},clear:function(){e=e.filter(e=>e())}};return t}function Jv(e,t,n,r){const i=Zv(),s=1e3/60;let a=null,o=0,l=0;function c(e){if(!l)return;a||(a=e,n(),n());const i=e-a;for(a=e,o+=i;o>=s;)n(),o-=s;r(o/s),l&&(l=t.requestAnimationFrame(c))}function u(){t.cancelAnimationFrame(l),a=null,o=0,l=0}return{init:function(){i.add(e,"visibilitychange",()=>{e.hidden&&(a=null,o=0)})},destroy:function(){u(),i.clear()},start:function(){l||(l=t.requestAnimationFrame(c))},stop:u,update:n,render:r}}function ey(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Hv(e-t);function r(t){return t<e}function i(e){return e>t}function s(e){return r(e)||i(e)}return{length:n,max:t,min:e,constrain:function(n){return s(n)?r(n)?e:t:n},reachedAny:s,reachedMax:i,reachedMin:r,removeOffset:function(e){return n?e-n*Math.ceil((e-t)/n):e}}}function ty(e,t,n){const{constrain:r}=ey(0,e),i=e+1;let s=a(t);function a(e){return n?Hv((i+e)%i):r(e)}function o(){return s}function l(){return ty(e,o(),n)}const c={get:o,set:function(e){return s=a(e),c},add:function(e){return l().set(o()+e)},clone:l};return c}function ny(e,t,n,r,i,s,a,o,l,c,u,d,h,f,g,p,m,v,y){const{cross:E,direction:b}=e,T=["INPUT","SELECT","TEXTAREA"],S={passive:!1},_=Zv(),k=Zv(),A=ey(50,225).constrain(f.measure(20)),L={mouse:300,touch:400},w={mouse:500,touch:600},R=g?43:25;let I=!1,x=0,C=0,D=!1,P=!1,O=!1,M=!1;function F(e){if(!$v(e,r)&&e.touches.length>=2)return N(e);const t=s.readPoint(e),n=s.readPoint(e,E),a=zv(t,x),l=zv(n,C);if(!P&&!M){if(!e.cancelable)return N(e);if(P=a>l,!P)return N(e)}const u=s.pointerMove(e);a>p&&(O=!0),c.useFriction(.3).useDuration(.75),o.start(),i.add(b(u)),e.preventDefault()}function N(e){const t=u.byDistance(0,!1).index!==d.get(),n=s.pointerUp(e)*(g?w:L)[M?"mouse":"touch"],r=function(e,t){const n=d.add(-1*jv(e)),r=u.byDistance(e,!g).distance;return g||Hv(e)<A?r:m&&t?.5*r:u.byIndex(n.get(),0).distance}(b(n),t),i=function(e,t){if(0===e||0===t)return 0;if(Hv(e)<=Hv(t))return 0;const n=zv(Hv(e),Hv(t));return Hv(n/e)}(n,r),a=R-10*i,o=v+i/50;P=!1,D=!1,k.clear(),c.useDuration(a).useFriction(o),l.distance(r,!g),M=!1,h.emit("pointerUp")}function B(e){O&&(e.stopPropagation(),e.preventDefault(),O=!1)}return{init:function(e){if(!y)return;function o(o){(Uv(y)||y(e,o))&&function(e){const o=$v(e,r);if(M=o,O=g&&o&&!e.buttons&&I,I=zv(i.get(),a.get())>=2,o&&0!==e.button)return;if(function(e){const t=e.nodeName||"";return T.includes(t)}(e.target))return;D=!0,s.pointerDown(e),c.useFriction(0).useDuration(0),i.set(a),function(){const e=M?n:t;k.add(e,"touchmove",F,S).add(e,"touchend",N).add(e,"mousemove",F,S).add(e,"mouseup",N)}(),x=s.readPoint(e),C=s.readPoint(e,E),h.emit("pointerDown")}(o)}const l=t;_.add(l,"dragstart",e=>e.preventDefault(),S).add(l,"touchmove",()=>{},S).add(l,"touchend",()=>{}).add(l,"touchstart",o).add(l,"mousedown",o).add(l,"touchcancel",N).add(l,"contextmenu",N).add(l,"click",B,!0)},destroy:function(){_.clear(),k.clear()},pointerDown:function(){return D}}}function ry(e,t){let n,r;function i(e){return e.timeStamp}function s(n,r){const i=r||e.scroll,s="client".concat("x"===i?"X":"Y");return($v(n,t)?n:n.touches[0])[s]}return{pointerDown:function(e){return n=e,r=e,s(e)},pointerMove:function(e){const t=s(e)-s(r),a=i(e)-i(n)>170;return r=e,a&&(n=e),t},pointerUp:function(e){if(!n||!r)return 0;const t=s(r)-s(n),a=i(e)-i(n),o=i(e)-i(r)>170,l=t/a;return a&&!o&&Hv(l)>.1?l:0},readPoint:s}}function iy(e,t,n,r,i,s,a){const o=[e].concat(r);let l,c,u=[],d=!1;function h(e){return i.measureSize(a.measure(e))}return{init:function(i){s&&(c=h(e),u=r.map(h),l=new ResizeObserver(n=>{(Uv(s)||s(i,n))&&function(n){for(const s of n){if(d)return;const n=s.target===e,a=r.indexOf(s.target),o=n?c:u[a];if(Hv(h(n?e:r[a])-o)>=.5){i.reInit(),t.emit("resize");break}}}(n)}),n.requestAnimationFrame(()=>{o.forEach(e=>l.observe(e))}))},destroy:function(){d=!0,l&&l.disconnect()}}}function sy(e,t,n,r,i){const s=i.measure(10),a=i.measure(50),o=ey(.1,.99);let l=!1;function c(){return!l&&(!!e.reachedAny(n.get())&&!!e.reachedAny(t.get()))}return{shouldConstrain:c,constrain:function(i){if(!c())return;const l=e.reachedMin(t.get())?"min":"max",u=Hv(e[l]-t.get()),d=n.get()-t.get(),h=o.constrain(u/a);n.subtract(d*h),!i&&Hv(d)<s&&(n.set(e.constrain(n.get())),r.useDuration(25).useBaseFriction())},toggleActive:function(e){l=!e}}}function ay(e,t,n,r){const i=t.min+.1,s=t.max+.1,{reachedMin:a,reachedMax:o}=ey(i,s);return{loop:function(t){if(!function(e){return 1===e?o(n.get()):-1===e&&a(n.get())}(t))return;const i=e*(-1*t);r.forEach(e=>e.add(i))}}}function oy(e,t,n,r,i){const{reachedAny:s,removeOffset:a,constrain:o}=r;function l(e){return e.concat().sort((e,t)=>Hv(e)-Hv(t))[0]}function c(t,r){const i=[t,t+n,t-n];if(!e)return t;if(!r)return l(i);const s=i.filter(e=>jv(e)===r);return s.length?l(s):Kv(i)-n}const u={byDistance:function(n,r){const l=i.get()+n,{index:u,distance:d}=function(n){const r=e?a(n):o(n),i=t.map((e,t)=>({diff:c(e-r,0),index:t})).sort((e,t)=>Hv(e.diff)-Hv(t.diff)),{index:s}=i[0];return{index:s,distance:r}}(l),h=!e&&s(l);return!r||h?{index:u,distance:n}:{index:u,distance:n+c(t[u]-d,0)}},byIndex:function(e,n){return{index:e,distance:c(t[e]-i.get(),n)}},shortcut:c};return u}function ly(e,t,n,r,i,s,a,o){const l={passive:!0,capture:!0};let c=0;function u(e){"Tab"===e.code&&(c=(new Date).getTime())}return{init:function(d){o&&(s.add(document,"keydown",u,!1),t.forEach((t,u)=>{s.add(t,"focus",t=>{(Uv(o)||o(d,t))&&function(t){if((new Date).getTime()-c>10)return;a.emit("slideFocusStart"),e.scrollLeft=0;const s=n.findIndex(e=>e.includes(t));Nv(s)&&(i.useDuration(0),r.index(s,0),a.emit("slideFocus"))}(u)},l)}))}}}function cy(e){let t=e;function n(e){return Nv(e)?e:e.get()}return{get:function(){return t},set:function(e){t=n(e)},add:function(e){t+=n(e)},subtract:function(e){t-=n(e)}}}function uy(e,t){const n="x"===e.scroll?function(e){return"translate3d(".concat(e,"px,0px,0px)")}:function(e){return"translate3d(0px,".concat(e,"px,0px)")},r=t.style;let i=null,s=!1;return{clear:function(){s||(r.transform="",t.getAttribute("style")||t.removeAttribute("style"))},to:function(t){if(s)return;const a=(o=e.direction(t),Math.round(100*o)/100);var o;a!==i&&(r.transform=n(a),i=a)},toggleActive:function(e){s=!e}}}function dy(e,t,n,r,i,s,a,o,l){const c=Vv(i),u=Vv(i).reverse(),d=function(){const e=a[0];return g(f(u,e),n,!1)}().concat(function(){const e=t-a[0]-1;return g(f(c,e),-n,!0)}());function h(e,t){return e.reduce((e,t)=>e-i[t],t)}function f(e,t){return e.reduce((e,n)=>h(e,t)>0?e.concat([n]):e,[])}function g(i,a,c){const u=function(e){return s.map((n,i)=>({start:n-r[i]+.5+e,end:n+t-.5+e}))}(a);return i.map(t=>{const r=c?0:-n,i=c?n:0,s=c?"end":"start",a=u[t][s];return{index:t,loopPoint:a,slideLocation:cy(-1),translate:uy(e,l[t]),target:()=>o.get()>a?r:i}})}return{canLoop:function(){return d.every(e=>{let{index:n}=e;return h(c.filter(e=>e!==n),t)<=.1})},clear:function(){d.forEach(e=>e.translate.clear())},loop:function(){d.forEach(e=>{const{target:t,translate:n,slideLocation:r}=e,i=t();i!==r.get()&&(n.to(i),r.set(i))})},loopPoints:d}}function hy(e,t,n){let r,i=!1;return{init:function(s){n&&(r=new MutationObserver(e=>{i||(Uv(n)||n(s,e))&&function(e){for(const n of e)if("childList"===n.type){s.reInit(),t.emit("slidesChanged");break}}(e)}),r.observe(e,{childList:!0}))},destroy:function(){r&&r.disconnect(),i=!0}}}function fy(e,t,n,r){const i={};let s,a=null,o=null,l=!1;const c={init:function(){s=new IntersectionObserver(e=>{l||(e.forEach(e=>{const n=t.indexOf(e.target);i[n]=e}),a=null,o=null,n.emit("slidesInView"))},{root:e.parentElement,threshold:r}),t.forEach(e=>s.observe(e))},destroy:function(){s&&s.disconnect(),l=!0},get:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(e&&a)return a;if(!e&&o)return o;const t=function(e){return Xv(i).reduce((t,n)=>{const r=parseInt(n),{isIntersecting:s}=i[r];return(e&&s||!e&&!s)&&t.push(r),t},[])}(e);return e&&(a=t),e||(o=t),t}};return c}function gy(e,t,n,r,i,s,a,o,l){const{startEdge:c,endEdge:u,direction:d}=e,h=Nv(n);return{groupSlides:function(e){return h?function(e,t){return Vv(e).filter(e=>e%t===0).map(n=>e.slice(n,n+t))}(e,n):function(e){return e.length?Vv(e).reduce((n,h,f)=>{const g=Kv(n)||0,p=0===g,m=h===Yv(e),v=i[c]-s[g][c],y=i[c]-s[h][u],E=!r&&p?d(a):0,b=Hv(y-(!r&&m?d(o):0)-(v+E));return f&&b>t+l&&n.push(h),m&&n.push(e.length),n},[]).map((t,n,r)=>{const i=Math.max(r[n-1]||0);return e.slice(i,t)}):[]}(e)}}}function py(e,t,n,r,i,s,a){const{align:o,axis:l,direction:c,startIndex:u,loop:d,duration:h,dragFree:f,dragThreshold:g,inViewThreshold:p,slidesToScroll:m,skipSnaps:v,containScroll:y,watchResize:E,watchSlides:b,watchDrag:T,watchFocus:S}=s,_={measure:function(e){const{offsetTop:t,offsetLeft:n,offsetWidth:r,offsetHeight:i}=e;return{top:t,right:n+r,bottom:t+i,left:n,width:r,height:i}}},k=_.measure(t),A=n.map(_.measure),L=function(e,t){const n="rtl"===t,r="y"===e,i=!r&&n?-1:1;return{scroll:r?"y":"x",cross:r?"x":"y",startEdge:r?"top":n?"right":"left",endEdge:r?"bottom":n?"left":"right",measureSize:function(e){const{height:t,width:n}=e;return r?t:n},direction:function(e){return e*i}}}(l,c),w=L.measureSize(k),R=function(e){return{measure:function(t){return e*(t/100)}}}(w),I=function(e,t){const n={start:function(){return 0},center:function(e){return r(e)/2},end:r};function r(e){return t-e}return{measure:function(r,i){return Bv(e)?n[e](r):e(t,r,i)}}}(o,w),x=!d&&!!y,C=d||!!y,{slideSizes:D,slideSizesWithGaps:P,startGap:O,endGap:M}=function(e,t,n,r,i,s){const{measureSize:a,startEdge:o,endEdge:l}=e,c=n[0]&&i,u=function(){if(!c)return 0;const e=n[0];return Hv(t[o]-e[o])}(),d=function(){if(!c)return 0;const e=s.getComputedStyle(Kv(r));return parseFloat(e.getPropertyValue("margin-".concat(l)))}(),h=n.map(a),f=n.map((e,t,n)=>{const r=!t,i=Wv(n,t);return r?h[t]+u:i?h[t]+d:n[t+1][o]-e[o]}).map(Hv);return{slideSizes:h,slideSizesWithGaps:f,startGap:u,endGap:d}}(L,k,A,n,C,i),F=gy(L,w,m,d,k,A,O,M,2),{snaps:N,snapsAligned:B}=function(e,t,n,r,i){const{startEdge:s,endEdge:a}=e,{groupSlides:o}=i,l=o(r).map(e=>Kv(e)[a]-e[0][s]).map(Hv).map(t.measure),c=r.map(e=>n[s]-e[s]).map(e=>-Hv(e)),u=o(c).map(e=>e[0]).map((e,t)=>e+l[t]);return{snaps:c,snapsAligned:u}}(L,I,k,A,F),U=-Kv(N)+Kv(P),{snapsContained:G,scrollContainLimit:H}=function(e,t,n,r,i){const s=ey(-t+e,0),a=n.map((e,t)=>{const{min:r,max:i}=s,a=s.constrain(e),o=!t,c=Wv(n,t);return o?i:c||l(r,a)?r:l(i,a)?i:a}).map(e=>parseFloat(e.toFixed(3))),o=function(){const e=a[0],t=Kv(a);return ey(a.lastIndexOf(e),a.indexOf(t)+1)}();function l(e,t){return zv(e,t)<=1}return{snapsContained:function(){if(t<=e+i)return[s.max];if("keepSnaps"===r)return a;const{min:n,max:l}=o;return a.slice(n,l)}(),scrollContainLimit:o}}(w,U,B,y,2),j=x?G:B,{limit:z}=function(e,t,n){const r=t[0];return{limit:ey(n?r-e:Kv(t),r)}}(U,j,d),V=ty(Yv(j),u,d),K=V.clone(),Y=Vv(n),W=Jv(r,i,()=>(e=>{let{dragHandler:t,scrollBody:n,scrollBounds:r,options:{loop:i}}=e;i||r.constrain(t.pointerDown()),n.seek()})(oe),e=>((e,t)=>{let{scrollBody:n,translate:r,location:i,offsetLocation:s,previousLocation:a,scrollLooper:o,slideLooper:l,dragHandler:c,animation:u,eventHandler:d,scrollBounds:h,options:{loop:f}}=e;const g=n.settled(),p=!h.shouldConstrain(),m=f?g:g&&p,v=m&&!c.pointerDown();v&&u.stop();const y=i.get()*t+a.get()*(1-t);s.set(y),f&&(o.loop(n.direction()),l.loop()),r.to(s.get()),v&&d.emit("settle"),m||d.emit("scroll")})(oe,e)),q=j[V.get()],X=cy(q),Q=cy(q),$=cy(q),Z=cy(q),J=function(e,t,n,r,i,s){let a=0,o=0,l=i,c=s,u=e.get(),d=0;function h(e){return l=e,g}function f(e){return c=e,g}const g={direction:function(){return o},duration:function(){return l},velocity:function(){return a},seek:function(){const t=r.get()-e.get();let i=0;return l?(n.set(e),a+=t/l,a*=c,u+=a,e.add(a),i=u-d):(a=0,n.set(r),e.set(r),i=t),o=jv(i),d=u,g},settled:function(){return Hv(r.get()-t.get())<.001},useBaseFriction:function(){return f(s)},useBaseDuration:function(){return h(i)},useFriction:f,useDuration:h};return g}(X,$,Q,Z,h,.68),ee=oy(d,j,U,z,Z),te=function(e,t,n,r,i,s,a){function o(i){const o=i.distance,l=i.index!==t.get();s.add(o),o&&(r.duration()?e.start():(e.update(),e.render(1),e.update())),l&&(n.set(t.get()),t.set(i.index),a.emit("select"))}const l={distance:function(e,t){o(i.byDistance(e,t))},index:function(e,n){const r=t.clone().set(e);o(i.byIndex(r.get(),n))}};return l}(W,V,K,J,ee,Z,a),ne=function(e){const{max:t,length:n}=e;return{get:function(e){return n?(e-t)/-n:0}}}(z),re=Zv(),ie=fy(t,n,a,p),{slideRegistry:se}=function(e,t,n,r,i,s){const{groupSlides:a}=i,{min:o,max:l}=r;return{slideRegistry:function(){const r=a(s),i=!e||"keepSnaps"===t;return 1===n.length?[s]:i?r:r.slice(o,l).map((e,t,n)=>{const r=!t,i=Wv(n,t);return r?qv(Kv(n[0])+1):i?qv(Yv(s)-Kv(n)[0]+1,Kv(n)[0]):e})}()}}(x,y,j,H,F,Y),ae=ly(e,n,se,te,J,re,a,S),oe={ownerDocument:r,ownerWindow:i,eventHandler:a,containerRect:k,slideRects:A,animation:W,axis:L,dragHandler:ny(L,e,r,i,Z,ry(L,i),X,W,te,J,ee,V,a,R,f,g,v,.68,T),eventStore:re,percentOfView:R,index:V,indexPrevious:K,limit:z,location:X,offsetLocation:$,previousLocation:Q,options:s,resizeHandler:iy(t,a,i,n,L,E,_),scrollBody:J,scrollBounds:sy(z,$,Z,J,R),scrollLooper:ay(U,z,$,[X,$,Q,Z]),scrollProgress:ne,scrollSnapList:j.map(ne.get),scrollSnaps:j,scrollTarget:ee,scrollTo:te,slideLooper:dy(L,w,U,D,P,N,j,$,n),slideFocus:ae,slidesHandler:hy(t,a,b),slidesInView:ie,slideIndexes:Y,slideRegistry:se,slidesToScroll:F,target:Z,translate:uy(L,t)};return oe}const my={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function vy(e){function t(e,t){return Qv(e,t||{})}const n={mergeOptions:t,optionsAtMedia:function(n){const r=n.breakpoints||{},i=Xv(r).filter(t=>e.matchMedia(t).matches).map(e=>r[e]).reduce((e,n)=>t(e,n),{});return t(n,i)},optionsMediaQueries:function(t){return t.map(e=>Xv(e.breakpoints||{})).reduce((e,t)=>e.concat(t),[]).map(e.matchMedia)}};return n}function yy(e,t,n){const r=e.ownerDocument,i=r.defaultView,s=vy(i),a=function(e){let t=[];return{init:function(n,r){return t=r.filter(t=>{let{options:n}=t;return!1!==e.optionsAtMedia(n).active}),t.forEach(t=>t.init(n,e)),r.reduce((e,t)=>Object.assign(e,{[t.name]:t}),{})},destroy:function(){t=t.filter(e=>e.destroy())}}}(s),o=Zv(),l=function(){let e,t={};function n(e){return t[e]||[]}const r={init:function(t){e=t},emit:function(t){return n(t).forEach(n=>n(e,t)),r},off:function(e,i){return t[e]=n(e).filter(e=>e!==i),r},on:function(e,i){return t[e]=n(e).concat([i]),r},clear:function(){t={}}};return r}(),{mergeOptions:c,optionsAtMedia:u,optionsMediaQueries:d}=s,{on:h,off:f,emit:g}=l,p=L;let m,v,y,E,b=!1,T=c(my,yy.globalOptions),S=c(T),_=[];function k(t){const n=py(e,y,E,r,i,t,l);if(t.loop&&!n.slideLooper.canLoop()){return k(Object.assign({},t,{loop:!1}))}return n}function A(t,n){b||(T=c(T,t),S=u(T),_=n||_,function(){const{container:t,slides:n}=S,r=Bv(t)?e.querySelector(t):t;y=r||e.children[0];const i=Bv(n)?y.querySelectorAll(n):n;E=[].slice.call(i||y.children)}(),m=k(S),d([T,..._.map(e=>{let{options:t}=e;return t})]).forEach(e=>o.add(e,"change",L)),S.active&&(m.translate.to(m.location.get()),m.animation.init(),m.slidesInView.init(),m.slideFocus.init(x),m.eventHandler.init(x),m.resizeHandler.init(x),m.slidesHandler.init(x),m.options.loop&&m.slideLooper.loop(),y.offsetParent&&E.length&&m.dragHandler.init(x),v=a.init(x,_)))}function L(e,t){const n=I();w(),A(c({startIndex:n},e),t),l.emit("reInit")}function w(){m.dragHandler.destroy(),m.eventStore.clear(),m.translate.clear(),m.slideLooper.clear(),m.resizeHandler.destroy(),m.slidesHandler.destroy(),m.slidesInView.destroy(),m.animation.destroy(),a.destroy(),o.clear()}function R(e,t,n){S.active&&!b&&(m.scrollBody.useBaseFriction().useDuration(!0===t?0:S.duration),m.scrollTo.index(e,n||0))}function I(){return m.index.get()}const x={canScrollNext:function(){return m.index.add(1).get()!==I()},canScrollPrev:function(){return m.index.add(-1).get()!==I()},containerNode:function(){return y},internalEngine:function(){return m},destroy:function(){b||(b=!0,o.clear(),w(),l.emit("destroy"),l.clear())},off:f,on:h,emit:g,plugins:function(){return v},previousScrollSnap:function(){return m.indexPrevious.get()},reInit:p,rootNode:function(){return e},scrollNext:function(e){R(m.index.add(1).get(),e,-1)},scrollPrev:function(e){R(m.index.add(-1).get(),e,1)},scrollProgress:function(){return m.scrollProgress.get(m.offsetLocation.get())},scrollSnapList:function(){return m.scrollSnapList},scrollTo:R,selectedScrollSnap:I,slideNodes:function(){return E},slidesInView:function(){return m.slidesInView.get()},slidesNotInView:function(){return m.slidesInView.get(!1)}};return A(t,n),setTimeout(()=>l.emit("init"),0),x}function Ey(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=(0,r.useRef)(e),i=(0,r.useRef)(t),[s,a]=(0,r.useState)(),[o,l]=(0,r.useState)(),c=(0,r.useCallback)(()=>{s&&s.reInit(n.current,i.current)},[s]);return(0,r.useEffect)(()=>{Mv(n.current,e)||(n.current=e,c())},[e,c]),(0,r.useEffect)(()=>{(function(e,t){if(e.length!==t.length)return!1;const n=Fv(e),r=Fv(t);return n.every((e,t)=>Mv(e,r[t]))})(i.current,t)||(i.current=t,c())},[t,c]),(0,r.useEffect)(()=>{if("undefined"!==typeof window&&window.document&&window.document.createElement&&o){yy.globalOptions=Ey.globalOptions;const e=yy(o,n.current,i.current);return a(e),()=>e.destroy()}a(void 0)},[o,a]),[l,s]}yy.globalOptions=void 0,Ey.globalOptions=void 0;const by="RoomComponent_main__zg2XH",Ty="RoomComponent_price__LyUCQ",Sy="RoomComponent_description__kHjhk",_y="RoomComponent_button__QzIXD",ky="RoomComponent_description_block__3e+GM",Ay="RoomComponent_hint__RKY+I",Ly="RoomComponent_text_description__beJrD",wy="RoomComponent_title__8yET9",Ry="RoomComponent_about__1czmC",Iy=["title","className","image","description","price","about"],xy=e=>{let{title:t,className:n,image:r,description:i,price:s,about:a}=e;d(e,Iy);return(0,g.jsx)("div",{className:"".concat(by," ").concat(n),style:{backgroundImage:"url(".concat(r,")")},children:(0,g.jsxs)("div",{className:Sy,children:[(0,g.jsxs)("div",{className:Ty,children:["\u043e\u0442 ",s," \u0442\u044b\u0441. \u0440."]}),(0,g.jsxs)("div",{className:ky,children:[(0,g.jsx)("p",{className:Ay,children:"\u0421\u0443\u043f\u0435\u0440 \u043a\u043e\u043c\u0444\u043e\u0440\u0442\u043d\u043e"}),(0,g.jsx)("p",{className:wy,children:t}),(0,g.jsx)("p",{className:Ly,children:i})]}),(0,g.jsx)("div",{className:Ry,children:a}),(0,g.jsx)(b,{className:_y,title:"\u0417\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0435\u0439\u0447\u0430\u0441",onClick:()=>{}})]})})},Cy=e=>{let{scrollerRef:t}=e;const n=(0,r.useRef)(null),i=(0,r.useRef)(null),[s,a]=Ey({loop:!0});(0,r.useEffect)(()=>{if(!a)return;const e=setInterval(()=>{a.canScrollNext()?a.scrollNext():a.scrollTo(0)},3e3);return()=>clearInterval(e)},[a]),(0,r.useEffect)(()=>{t.current&&(_i.timeline({scrollTrigger:{trigger:n.current,scroller:t.current,start:"top 30%",scrub:!1,once:!0}}).from(".".concat(xv.text_header_animated),{x:"100vw",opacity:0,stagger:.01,duration:.01}).to(".".concat(xv.text_header_animated),{x:0,opacity:1,stagger:.01,duration:.7}),_i.timeline({scrollTrigger:{trigger:n.current,scroller:t.current,start:"top 30%",scrub:!1,once:!0}}).from(".".concat(xv.embla),{y:"100vw",opacity:0,duration:.1}).to(".".concat(xv.embla),{y:0,opacity:1,duration:.5,ease:"sine.out"}))},[t]);return(0,g.jsx)("section",{ref:n,className:xv.main,children:(0,g.jsxs)("div",{ref:i,className:xv.description_section,children:[(0,g.jsx)("span",{className:xv.hint_span,children:"\u0426\u0415\u041d\u042b"}),(0,g.jsx)("h1",{className:xv.header_about,children:"\u0414\u041e\u0421\u0422\u0423\u041f\u041d\u042b\u0415 \u041a\u0410\u0422\u0415\u0413\u041e\u0420\u0418\u0418 \u041d\u041e\u041c\u0415\u0420\u041e\u0412".split(" ").map((e,t)=>(0,g.jsxs)("span",{className:xv.word,children:[e.split("").map((e,t)=>(0,g.jsx)("span",{className:xv.text_header_animated,children:e},t)),(0,g.jsx)("span",{className:xv.space,children:"\xa0"})]},t))}),(0,g.jsx)("div",{className:xv.embla,ref:s,children:(0,g.jsxs)("div",{className:xv.embla__container,children:[(0,g.jsx)("div",{className:xv.embla__slide,children:(0,g.jsx)(xy,{title:"\u041d\u043e\u043c\u0435\u0440 \u0410\u043b\u044c\u0444\u0430",image:Cv,price:12.5,description:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u043e\u0435 \u0440\u0430\u0437\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u0432 \u0434\u0432\u0443\u0445\u043c\u0435\u0441\u0442\u043d\u043e\u043c \u043d\u043e\u043c\u0435\u0440\u0435",about:"\u041f\u043b\u043e\u0449\u0430\u0434\u044c 35.5 \u043c | 2 \u0421/\u0423 | 4 \u043f\u0435\u0440\u0441\u043e\u043d\u044b"})}),(0,g.jsx)("div",{className:xv.embla__slide,children:(0,g.jsx)(xy,{title:"\u041d\u043e\u043c\u0435\u0440 \u0413\u0430\u043c\u043c\u0430",image:Dv,price:16,description:"\u041d\u043e\u043c\u0435\u0440\u0430 \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u043d\u043e\u0439 \u043a\u043e\u043c\u0444\u043e\u0440\u0442\u043d\u043e\u0441\u0442\u0438",about:"\u041f\u043b\u043e\u0449\u0430\u0434\u044c 33.3 \u043c | 2 \u0421/\u0423 | 3 \u043f\u0435\u0440\u0441\u043e\u043d\u044b"})}),(0,g.jsx)("div",{className:xv.embla__slide,children:(0,g.jsx)(xy,{title:"\u041d\u043e\u043c\u0435\u0440 \u041e\u043c\u0435\u0433\u0430",image:Pv,price:25,description:"\u041e\u0434\u043d\u043e\u043c\u0435\u0441\u0442\u043d\u043e\u0435 \u0440\u0430\u0437\u043c\u0435\u0449\u0435\u043d\u0438\u0435",about:"\u041f\u043b\u043e\u0449\u0430\u0434\u044c 16.7 \u043c | 1 \u0421/\u0423 | 2 \u043f\u0435\u0440\u0441\u043e\u043d\u044b"})})]})}),(0,g.jsxs)("div",{className:xv.buttons,children:[(0,g.jsx)("div",{className:xv.button,onClick:()=>a&&a.scrollPrev(),children:"<"}),(0,g.jsx)("div",{className:xv.button,onClick:()=>a&&a.scrollNext(),children:">"})]})]})})},Dy={main:"EnvironmentsComponent_main__upF68",animate_before_first:"EnvironmentsComponent_animate_before_first__NHVZD",animate_before_second:"EnvironmentsComponent_animate_before_second__jvzsB",animate:"EnvironmentsComponent_animate__QRDMT",animated_block:"EnvironmentsComponent_animated_block__fcZHT",title_slide:"EnvironmentsComponent_title_slide__1UbKV",embla:"EnvironmentsComponent_embla__oPddb",embla__container:"EnvironmentsComponent_embla__container__pJiXT",buttons:"EnvironmentsComponent_buttons__BTzsR",button:"EnvironmentsComponent_button__DEFDL",embla__slide:"EnvironmentsComponent_embla__slide__dF+uD",hint_span:"EnvironmentsComponent_hint_span__HobEz",description_section:"EnvironmentsComponent_description_section__ie+yU",word:"EnvironmentsComponent_word__10vAg",content:"EnvironmentsComponent_content__XSIaq",image_small:"EnvironmentsComponent_image_small__DCLgD",image_medium:"EnvironmentsComponent_image_medium__3vLRr",content_text:"EnvironmentsComponent_content_text__JERdJ",content_image_left:"EnvironmentsComponent_content_image_left__6muQg",content_image_right:"EnvironmentsComponent_content_image_right__fvaM7",text_title:"EnvironmentsComponent_text_title__ZuEyY",text_paragraph:"EnvironmentsComponent_text_paragraph__zRcbo",header_about:"EnvironmentsComponent_header_about__CAUx+",text_header_animated:"EnvironmentsComponent_text_header_animated__xlW3J",animated_text_words:"EnvironmentsComponent_animated_text_words__0rqsR"},Py=n.p+"static/media/barber.635cc46dab81c02f9775.png",Oy=n.p+"static/media/mola.4bc043627314d7280e17.webp",My=n.p+"static/media/ozon.9c1902816f6ea08026b6.webp",Fy=n.p+"static/media/cofe-like.0e112a2c3e34168c22ef.jpeg",Ny=n.p+"static/media/sber.4670217c7604e024e078.webp",By=n.p+"static/media/wild.524ae37312dbc9a1ac67.webp",Uy=n.p+"static/media/ya2.31845d19dbe2e46b7aeb.jpg",Gy="EnvironmentComponent_main__ACUzf",Hy="EnvironmentComponent_description__Q3nyl",jy="EnvironmentComponent_gradient_overlay__iKL7L",zy="EnvironmentComponent_address__Ync7T",Vy="EnvironmentComponent_title__Tknzs",Ky=["title","className","image","address"],Yy=e=>{let{title:t,className:n,image:r,address:i}=e;d(e,Ky);return(0,g.jsxs)("div",{className:"".concat(Gy," ").concat(n),style:{backgroundImage:"url(".concat(r,")")},children:[(0,g.jsx)("div",{className:jy}),(0,g.jsxs)("div",{className:Hy,children:[(0,g.jsx)("div",{className:zy,children:i}),(0,g.jsx)("div",{className:Vy,children:t})]})]})},Wy=e=>{let{scrollerRef:t}=e;const n=(0,r.useRef)(null),i=(0,r.useRef)(null),[s,a]=Ey({loop:!0});(0,r.useEffect)(()=>{if(!a)return;const e=setInterval(()=>{a.canScrollNext()?a.scrollNext():a.scrollTo(0)},3e3);return()=>clearInterval(e)},[a]),(0,r.useEffect)(()=>{t.current&&(_i.timeline({scrollTrigger:{trigger:n.current,scroller:t.current,start:"top 30%",scrub:!1,once:!0}}).from(".".concat(Dy.text_header_animated),{x:"100vw",opacity:0,stagger:.01,duration:.01}).to(".".concat(Dy.text_header_animated),{x:0,opacity:1,stagger:.01,duration:.7}),_i.timeline({scrollTrigger:{trigger:n.current,scroller:t.current,start:"top 30%",scrub:!1,once:!0}}).from(".".concat(Dy.embla),{y:"100vw",opacity:0,duration:.1}).to(".".concat(Dy.embla),{y:0,opacity:1,duration:.5,ease:"sine.out"}))},[t]);return(0,g.jsx)("section",{ref:n,className:Dy.main,children:(0,g.jsxs)("div",{ref:i,className:Dy.description_section,children:[(0,g.jsx)("span",{className:Dy.hint_span,children:"\u041e\u041a\u0420\u0423\u0416\u0415\u041d\u0418\u0415"}),(0,g.jsx)("h1",{className:Dy.header_about,children:"\u0412\u0421\u0415 \u0423\u0414\u041e\u0411\u0421\u0422\u0412\u0410 \u041f\u041e\u0411\u041b\u0418\u0417\u041e\u0421\u0422\u0418".split(" ").map((e,t)=>(0,g.jsxs)("span",{className:Dy.word,children:[e.split("").map((e,t)=>(0,g.jsx)("span",{className:Dy.text_header_animated,children:e},t)),(0,g.jsx)("span",{className:Dy.space,children:"\xa0"})]},t))}),(0,g.jsx)("div",{className:Dy.embla,ref:s,children:window.innerWidth>700?(0,g.jsxs)("div",{className:Dy.embla__container,children:[(0,g.jsx)("div",{className:Dy.embla__slide,children:(0,g.jsx)(Yy,{image:Py,title:"\u0411\u0430\u0440\u0431\u0435\u0440 \u0448\u043e\u043f",address:"\u0411. \u043e\u0432\u0440\u0430\u0433\u0438 12\u043a1"})}),(0,g.jsx)("div",{className:Dy.embla__slide,children:(0,g.jsx)(Yy,{image:Oy,title:"MOLA MOLA",address:"\u0411. \u043e\u0432\u0440\u0430\u0433\u0438 12\u043a2"})}),(0,g.jsx)("div",{className:Dy.embla__slide,children:(0,g.jsx)(Yy,{image:My,title:"OZON",address:"\u0411. \u043e\u0432\u0440\u0430\u0433\u0438 12\u043a3"})}),(0,g.jsx)("div",{className:Dy.embla__slide,children:(0,g.jsx)(Yy,{image:By,title:"WILDBERRIES",address:"\u0411. \u043e\u0432\u0440\u0430\u0433\u0438 12\u043a4"})}),(0,g.jsx)("div",{className:Dy.embla__slide,children:(0,g.jsx)(Yy,{image:Fy,title:"COFFEE LIKE",address:"\u0411. \u043e\u0432\u0440\u0430\u0433\u0438 12\u043a5"})}),(0,g.jsx)("div",{className:Dy.embla__slide,children:(0,g.jsx)(Yy,{image:Ny,title:"SBER",address:"\u0411. \u043e\u0432\u0440\u0430\u0433\u0438 12\u043a6"})}),(0,g.jsx)("div",{className:Dy.embla__slide,children:(0,g.jsx)(Yy,{image:Uy,title:"\u042f.\u041c\u0430\u0440\u043a\u0435\u0442",address:"\u0411. \u043e\u0432\u0440\u0430\u0433\u0438 12\u043a7"})})]}):(0,g.jsxs)("div",{className:Dy.embla__container,children:[(0,g.jsxs)("div",{className:Dy.embla__slide,children:[(0,g.jsx)(Yy,{image:Py,title:"\u0411\u0430\u0440\u0431\u0435\u0440 \u0448\u043e\u043f",address:"\u0411. \u043e\u0432\u0440\u0430\u0433\u0438 12\u043a1"}),(0,g.jsx)(Yy,{image:Oy,title:"MOLA MOLA",address:"\u0411. \u043e\u0432\u0440\u0430\u0433\u0438 12\u043a2"})]}),(0,g.jsxs)("div",{className:Dy.embla__slide,children:[(0,g.jsx)(Yy,{image:My,title:"OZON",address:"\u0411. \u043e\u0432\u0440\u0430\u0433\u0438 12\u043a3"}),(0,g.jsx)(Yy,{image:By,title:"WILDBERRIES",address:"\u0411. \u043e\u0432\u0440\u0430\u0433\u0438 12\u043a4"})]}),(0,g.jsxs)("div",{className:Dy.embla__slide,children:[(0,g.jsx)(Yy,{image:Fy,title:"COFFEE LIKE",address:"\u0411. \u043e\u0432\u0440\u0430\u0433\u0438 12\u043a5"}),(0,g.jsx)(Yy,{image:Ny,title:"SBER",address:"\u0411. \u043e\u0432\u0440\u0430\u0433\u0438 12\u043a6"})]}),(0,g.jsx)("div",{className:Dy.embla__slide,children:(0,g.jsx)(Yy,{image:Uy,title:"\u042f.\u041c\u0430\u0440\u043a\u0435\u0442",address:"\u0411. \u043e\u0432\u0440\u0430\u0433\u0438 12\u043a7"})})]})})]})})},qy="NewsComponent_main__JdIwC",Xy="NewsComponent_hint_span__-Mln6",Qy="NewsComponent_description_section__r2+GN",$y="NewsComponent_content__RLbNm",Zy="NewsComponent_animate_before_first__zgQJg",Jy="NewsComponent_animate_before_second__j9vhJ",eE="NewsComponent_embla__bcu1O",tE="NewsComponent_embla__container__aG5e5",nE="NewsComponent_buttons__4UWwi",rE="NewsComponent_button__wS-YW",iE="NewsComponent_embla__slide__4pAca",sE="NewsComponent_hint_slide__vZQoL",aE="NewsComponent_date__ZZDYP",oE="NewsComponent_content_right__Rk3vc",lE="NewsComponent_content_left__Ci36B",cE=n.p+"static/media/new1.f1438098105dc4920bc5.jpeg",uE=n.p+"static/media/new2.f7847c96df1ce516d0a6.jpeg",dE=n.p+"static/media/new3.92d9e4c67ea7a273dc34.jpeg",hE=[{title:"\u041d\u043e\u0432\u044b\u0439 \u0442\u0438\u043f \u043a\u043e\u043c\u043d\u0430\u0442 \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0430\u0445 \u041d\u0435\u0439\u043c\u0430\u0440\u043a",description:"\u041c\u044b \u0440\u0430\u0434\u044b \u0441\u043e\u043e\u0431\u0449\u0438\u0442\u044c, \u0447\u0442\u043e \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0430\u0445 \u041d\u0435\u0439\u043c\u0430\u0440\u043a \u0442\u0435\u043f\u0435\u0440\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u043d\u043e\u0432\u044b\u0435 \u0442\u0438\u043f\u044b \u043a\u043e\u043c\u043d\u0430\u0442, \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\n                  \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432. \u042d\u0442\u0438 \u043a\u043e\u043c\u043d\u0430\u0442\u044b \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u044e\u0442 \u0441\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u0443\u0434\u043e\u0431\u0441\u0442\u0432\u0430 \u0438 \u043a\u043e\u043c\u0444\u043e\u0440\u0442, \u0447\u0442\u043e \u0441\u043e\u0437\u0434\u0430\u0435\u0442\n                  \u0438\u0434\u0435\u0430\u043b\u044c\u043d\u044b\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0434\u043b\u044f \u0443\u0447\u0435\u0431\u044b \u0438 \u043e\u0442\u0434\u044b\u0445\u0430. \u041a\u0430\u0436\u0434\u0430\u044f \u043a\u043e\u043c\u043d\u0430\u0442\u0430 ...",date:"21.03.2001",image:cE},{title:"\u0421\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u0435\u0439",description:"\u041d\u0435\u0439\u043c\u0430\u0440\u043a \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u0442 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u0435\u0439 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432! \u041c\u044b \u043f\u043e\u043d\u0438\u043c\u0430\u0435\u043c, \u043a\u0430\u043a \u0432\u0430\u0436\u043d\u043e\n                  \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u0441\u0432\u044f\u0437\u044c \u0441 \u0432\u0430\u0448\u0438\u043c\u0438 \u0434\u0435\u0442\u044c\u043c\u0438 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0443\u0447\u0435\u0431\u044b, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043c\u044b \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u043c \u0441\u043a\u0438\u0434\u043a\u0438 \u043d\u0430 \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u043d\u0438\u0435 \u0434\u043b\u044f\n                  \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u0435\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0436\u0435\u043b\u0430\u044e\u0442 \u043f\u043e\u0441\u0435\u0442\u0438\u0442\u044c \u0441\u0432\u043e\u0438\u0445 \u0434\u0435\u0442\u0435\u0439.",date:"14.04.2025",image:uE},{title:"\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 \u0434\u043b\u044f \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432",description:"\u0413\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b \u041d\u0435\u0439\u043c\u0430\u0440\u043a \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u044e\u0442 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0443 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 \u0434\u043b\u044f \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043e\u0432, \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u044f \u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u0438 \u0438 \u043f\u043e\u043c\u043e\u0449\u044c \u0432 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0430\u0441\u043f\u0435\u043a\u0442\u0430\u0445 \u0438\u0445 \u0436\u0438\u0437\u043d\u0438. \u041c\u044b \u043f\u043e\u043d\u0438\u043c\u0430\u0435\u043c, \u0447\u0442\u043e \u0443\u0447\u0435\u0431\u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0441\u043b\u043e\u0436\u043d\u043e\u0439, \u0438 \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0441\u043e\u0437\u0434\u0430\u0435\u043c \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0433\u0434\u0435 ...",date:"07.07.2025",image:dE}],fE=e=>{let{scrollerRef:t}=e;const n=(0,r.useRef)(null),i=(0,r.useRef)(null),[s,a]=(0,r.useState)("\u041d\u043e\u0432\u044b\u0439 \u0442\u0438\u043f \u043a\u043e\u043c\u043d\u0430\u0442 \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0430\u0445 \u041d\u0435\u0439\u043c\u0430\u0440\u043a"),[o,l]=(0,r.useState)(cE),c=(0,r.useRef)(null),[u,d]=Ey({loop:!0});(0,r.useEffect)(()=>{if(!d)return;d.on("select",()=>{const e=d.selectedScrollSnap();a(hE[e].title),f(e)});const e=setInterval(()=>{d.canScrollNext()?d.scrollNext():d.scrollTo(0)},3e3);return()=>clearInterval(e)},[d]),(0,r.useEffect)(()=>{t.current&&_i.timeline({scrollTrigger:{trigger:n.current,scroller:t.current,start:"top 30%",scrub:!1,once:!0}}).from(".".concat(Zy),{y:"100vw",opacity:0,duration:.1}).to(".".concat(Zy),{y:0,opacity:1,duration:.3}).to(".".concat(Zy),{duration:.05}).from(".".concat(Jy),{y:"100vw",opacity:0,duration:.1}).to(".".concat(Jy),{y:0,opacity:1,duration:.3})},[t]);const h=(0,r.useRef)(null),f=e=>{var t;h.current&&(h.current.kill(),h.current=null),null===(t=c.current)||void 0===t||t.style.setProperty("opacity","0"),l(hE[e].image),requestAnimationFrame(()=>{h.current=_i.to(c.current,{opacity:1,duration:1,ease:"power2.out",onComplete:()=>{h.current=null}})})};return(0,g.jsx)("section",{ref:n,className:qy,children:(0,g.jsxs)("div",{ref:i,className:Qy,children:[(0,g.jsx)("span",{className:Xy,children:"\u041d\u041e\u0412\u041e\u0421\u0422\u0418"}),(0,g.jsxs)("div",{className:$y,children:[(0,g.jsxs)("div",{className:oE,children:[(0,g.jsx)("div",{className:Zy,children:s}),(0,g.jsxs)("div",{className:"".concat(nE," ").concat(Jy),children:[(0,g.jsx)("div",{className:rE,onClick:()=>d&&d.scrollPrev(),children:"<"}),(0,g.jsx)("div",{className:rE,onClick:()=>d&&d.scrollNext(),children:">"})]})]}),(0,g.jsx)("div",{ref:c,className:"".concat(lE,"  ").concat(Jy),style:{backgroundImage:"url(".concat(o,")")}}),(0,g.jsx)("div",{className:"".concat(eE," ").concat(Zy),ref:u,children:(0,g.jsx)("div",{className:tE,children:hE.map((e,t)=>(0,g.jsxs)("div",{className:iE,children:[(0,g.jsx)("div",{children:e.description}),(0,g.jsxs)("div",{className:aE,children:[(0,g.jsxs)("div",{children:["\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438 \u043d\u043e\u0432\u043e\u0441\u0442\u0438: ",e.date]}),(0,g.jsx)("div",{className:sE,children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 >"})]})]},t))})})]})]})})},gE="ConcactComponent_main__IBVwj",pE="ConcactComponent_description_section__TNRo-",mE="ConcactComponent_logo__E2k+n",vE="ConcactComponent_info_column__CEmDJ",yE="ConcactComponent_content__EJs8v",EE="ConcactComponent_map_column__HtGOY",bE=()=>(0,g.jsx)("footer",{className:gE,children:(0,g.jsx)("div",{className:pE,children:(0,g.jsxs)("div",{className:yE,children:[(0,g.jsx)(F,{className:mE}),(0,g.jsxs)("div",{className:vE,children:[(0,g.jsx)("div",{children:"\u0413\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0430 \u043d\u0435\u0439\u043c\u0430\u0440\u043a:"}),(0,g.jsx)("div",{children:"+79200520222"}),(0,g.jsx)("div",{children:"kgrant@inbox.ru"})]}),(0,g.jsxs)("div",{className:vE,children:[(0,g.jsx)("div",{children:"\u041c\u044b \u0432 \u0441\u043e\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0445 \u0441\u0435\u0442\u044f\u0445:"}),(0,g.jsx)("div",{children:"\u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435"}),(0,g.jsx)("div",{children:"\u0422\u0435\u043b\u0435\u0433\u0440\u0430\u043c"}),(0,g.jsx)("div",{children:"WhatsApp"})]}),(0,g.jsxs)("div",{className:vE,children:[(0,g.jsx)("div",{children:"\u041d\u0430\u0448\u0438 \u0440\u0435\u0441\u0443\u0440\u0441\u044b:"}),(0,g.jsx)("div",{children:"\u0421\u0430\u0439\u0442 \u041d\u0435\u0439\u043c\u0430\u0440\u043a"}),(0,g.jsx)("div",{children:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u0447\u0435\u0441\u0432\u0442\u043e \u0441 \u041d\u0435\u0439\u043c\u0430\u0440\u043a"})]}),(0,g.jsx)("iframe",{className:EE,src:"https://yandex.ru/map-widget/v1/?from=mapframe&ll=43.981812%2C56.314407&mode=whatshere&whatshere%5Bpoint%5D=43.981813%2C56.314407&whatshere%5Bzoom%5D=17&z=17",width:"100%",height:"100%",frameBorder:"0"})]})})}),TE=e=>{Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));const t=(0,r.useContext)(S),n=(0,r.useContext)(_),i=(0,r.useRef)(null),s=(0,r.useRef)(null),a=(0,r.useRef)(null),o=(0,r.useRef)(null),l=(0,r.useRef)(null),c=(0,r.useRef)(null);(0,r.useEffect)(()=>{switch(n[0]){case"home":{const e=s.current.getBoundingClientRect().top-s.current.parentElement.getBoundingClientRect().top;_i.to(s.current.parentElement,{scrollTop:s.current.parentElement.scrollTop+e,duration:.4,ease:"power2.inOut"})}break;case"about":{const e=a.current.getBoundingClientRect().top-a.current.parentElement.getBoundingClientRect().top;_i.to(a.current.parentElement,{scrollTop:a.current.parentElement.scrollTop+e,duration:.4,ease:"power2.inOut"})}break;case"price":{const e=l.current.getBoundingClientRect().top-l.current.parentElement.getBoundingClientRect().top;_i.to(l.current.parentElement,{scrollTop:l.current.parentElement.scrollTop+e,duration:.4,ease:"power2.inOut"})}break;case"acco":{const e=o.current.getBoundingClientRect().top-o.current.parentElement.getBoundingClientRect().top;_i.to(o.current.parentElement,{scrollTop:o.current.parentElement.scrollTop+e,duration:.4,ease:"power2.inOut"})}break;case"news":{const e=c.current.getBoundingClientRect().top-c.current.parentElement.getBoundingClientRect().top;_i.to(c.current.parentElement,{scrollTop:c.current.parentElement.scrollTop+e,duration:.4,ease:"power2.inOut"})}}},[n[0]]);return(0,g.jsx)("main",{className:Ai,children:(0,g.jsxs)("div",{ref:i,className:Li,onScroll:e=>{s.current.getBoundingClientRect().top,e.currentTarget.getBoundingClientRect().top;const n=a.current.getBoundingClientRect().top-e.currentTarget.getBoundingClientRect().top,r=o.current.getBoundingClientRect().top-e.currentTarget.getBoundingClientRect().top,i=l.current.getBoundingClientRect().top-e.currentTarget.getBoundingClientRect().top;c.current.getBoundingClientRect().top-e.currentTarget.getBoundingClientRect().top<400?t[1]("news"):i<400?t[1]("price"):r<400?t[1]("acco"):n<400?t[1]("about"):t[1]("home")},children:[(0,g.jsx)("div",{ref:s,className:wi}),(0,g.jsx)(dv,{scrollerRef:i}),(0,g.jsx)("div",{ref:a,className:wi}),(0,g.jsx)(vv,{scrollerRef:i}),(0,g.jsx)("div",{ref:o,className:wi}),(0,g.jsx)(Iv,{scrollerRef:i}),(0,g.jsx)("div",{ref:l,className:wi}),(0,g.jsx)(Cy,{scrollerRef:i}),(0,g.jsx)(Wy,{scrollerRef:i}),(0,g.jsx)("div",{ref:c,className:wi}),(0,g.jsx)(fE,{scrollerRef:i}),(0,g.jsx)(bE,{})]})})},SE=e=>{let{children:t}=e;const n=(0,r.useState)("hidden");return(0,g.jsx)(T.Provider,{value:n,children:t})},_E=e=>{let{children:t}=e;const n=(0,r.useState)("home");return(0,g.jsx)(S.Provider,{value:n,children:t})},kE=e=>{let{children:t}=e;const n=(0,r.useState)("home");return(0,g.jsx)(_.Provider,{value:n,children:t})};const AE=function(){return(0,g.jsx)("div",{className:"App",children:(0,g.jsx)(_E,{children:(0,g.jsx)(kE,{children:(0,g.jsxs)(SE,{children:[(0,g.jsx)(ki,{}),(0,g.jsx)(TE,{})]})})})})},LE=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:a}=t;n(e),r(e),i(e),s(e),a(e)})};i.createRoot(document.getElementById("root")).render((0,g.jsx)(r.StrictMode,{children:(0,g.jsx)(AE,{})})),LE()})();
//# sourceMappingURL=main.bec16fde.js.map